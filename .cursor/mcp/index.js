#!/usr/bin/env node
import e from"node:process";import{spawn as t}from"child_process";import n,{join as r}from"path";import i,{promises as o}from"fs";import{stat as s,readFile as a}from"fs/promises";import u from"http";import c from"https";import l from"url";var f,d;!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(f||(f={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(d||(d={}));const p=f.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),h=e=>{switch(typeof e){case"undefined":return p.undefined;case"string":return p.string;case"number":return Number.isNaN(e)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(e)?p.array:null===e?p.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?p.promise:"undefined"!=typeof Map&&e instanceof Map?p.map:"undefined"!=typeof Set&&e instanceof Set?p.set:"undefined"!=typeof Date&&e instanceof Date?p.date:p.object;default:return p.unknown}},m=f.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class g extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof g))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,f.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}g.create=e=>new g(e);const v=(e,t)=>{let n;switch(e.code){case m.invalid_type:n=e.received===p.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case m.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,f.jsonStringifyReplacer)}`;break;case m.unrecognized_keys:n=`Unrecognized key(s) in object: ${f.joinValues(e.keys,", ")}`;break;case m.invalid_union:n="Invalid input";break;case m.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${f.joinValues(e.options)}`;break;case m.invalid_enum_value:n=`Invalid enum value. Expected ${f.joinValues(e.options)}, received '${e.received}'`;break;case m.invalid_arguments:n="Invalid function arguments";break;case m.invalid_return_type:n="Invalid function return type";break;case m.invalid_date:n="Invalid date";break;case m.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:f.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case m.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case m.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case m.custom:n="Invalid input";break;case m.invalid_intersection_types:n="Intersection results could not be merged";break;case m.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case m.not_finite:n="Number must be finite";break;default:n=t.defaultError,f.assertNever(e)}return{message:n}};let y=v;function _(e,t){const n=y,r=(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let a="";const u=r.filter(e=>!!e).slice().reverse();for(const e of u)a=e(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===v?void 0:v].filter(e=>!!e)});e.common.issues.push(r)}class b{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return w;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return b.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return w;if("aborted"===i.status)return w;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const w=Object.freeze({status:"aborted"}),x=e=>({status:"dirty",value:e}),E=e=>({status:"valid",value:e}),k=e=>"aborted"===e.status,A=e=>"dirty"===e.status,D=e=>"valid"===e.status,C=e=>"undefined"!=typeof Promise&&e instanceof Promise;var O;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(O||(O={}));class S{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $=(e,t)=>{if(D(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new g(e.common.issues);return this._error=t,this._error}}};function T(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{const{message:o}=e;return"invalid_enum_value"===t.code?{message:o??i.defaultError}:void 0===i.data?{message:o??r??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:o??n??i.defaultError}},description:i}}class P{get description(){return this._def.description}_getType(e){return h(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:h(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new b,ctx:{common:e.parent.common,data:e.data,parsedType:h(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(C(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)},r=this._parseSync({data:e,path:n.path,parent:n});return $(n,r)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return D(n)?{value:n.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>D(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(C(r)?r:Promise.resolve(r));return $(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const i=e(t),o=()=>r.addIssue({code:m.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(o(),!1)):!!i||(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new Fe({schema:this,typeName:Ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Re.create(this,this._def)}nullable(){return Ne.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return me.create(this)}promise(){return Pe.create(this,this._def)}or(e){return ye.create([this,e],this._def)}and(e){return xe.create(this,e,this._def)}transform(e){return new Fe({...T(this._def),schema:this,typeName:Ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Le({...T(this._def),innerType:this,defaultValue:t,typeName:Ve.ZodDefault})}brand(){return new ze({typeName:Ve.ZodBranded,type:this,...T(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ie({...T(this._def),innerType:this,catchValue:t,typeName:Ve.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Be.create(this,e)}readonly(){return je.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const F=/^c[^\s-]{8,}$/i,R=/^[0-9a-z]+$/,N=/^[0-9A-HJKMNP-TV-Z]{26}$/i,L=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,I=/^[a-z0-9_-]{21}$/i,M=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,z=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,B=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let j;const U=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,V=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,q=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,K=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Z=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,W="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",G=new RegExp(`^${W}$`);function Y(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Q(e){return new RegExp(`^${Y(e)}$`)}function J(e){let t=`${W}T${Y(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function X(e,t){return!("v4"!==t&&t||!U.test(e))||!("v6"!==t&&t||!q.test(e))}function ee(e,t){if(!M.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==i?.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function te(e,t){return!("v4"!==t&&t||!V.test(e))||!("v6"!==t&&t||!H.test(e))}class ne extends P{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.string,received:t.parsedType}),w}const t=new b;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const i=e.data.length>r.value,o=e.data.length<r.value;(i||o)&&(n=this._getOrReturnCtx(e,n),i?_(n,{code:m.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&_(n,{code:m.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)B.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"email",code:m.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)j||(j=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),j.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"emoji",code:m.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)L.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"uuid",code:m.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)I.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"nanoid",code:m.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)F.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cuid",code:m.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)R.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cuid2",code:m.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)N.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"ulid",code:m.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),_(n,{validation:"url",code:m.invalid_string,message:r.message}),t.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"regex",code:m.invalid_string,message:r.message}),t.dirty())):"trim"===r.kind?e.data=e.data.trim():"includes"===r.kind?e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):"toLowerCase"===r.kind?e.data=e.data.toLowerCase():"toUpperCase"===r.kind?e.data=e.data.toUpperCase():"startsWith"===r.kind?e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):"endsWith"===r.kind?e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):"datetime"===r.kind?J(r).test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:"datetime",message:r.message}),t.dirty()):"date"===r.kind?G.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:"date",message:r.message}),t.dirty()):"time"===r.kind?Q(r).test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:"time",message:r.message}),t.dirty()):"duration"===r.kind?z.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"duration",code:m.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?X(e.data,r.version)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"ip",code:m.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?ee(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"jwt",code:m.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?te(e.data,r.version)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cidr",code:m.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?K.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"base64",code:m.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?Z.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"base64url",code:m.invalid_string,message:r.message}),t.dirty()):f.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:m.invalid_string,...O.errToObj(n)})}_addCheck(e){return new ne({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...O.errToObj(e)})}url(e){return this._addCheck({kind:"url",...O.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...O.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...O.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...O.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...O.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...O.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...O.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...O.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...O.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...O.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...O.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...O.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...O.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...O.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...O.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...O.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...O.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...O.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...O.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...O.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...O.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...O.errToObj(t)})}nonempty(e){return this.min(1,O.errToObj(e))}trim(){return new ne({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ne({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ne({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function re(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}ne.create=e=>new ne({checks:[],typeName:Ve.ZodString,coerce:e?.coerce??!1,...T(e)});class ie extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.number,received:t.parsedType}),w}let t;const n=new b;for(const r of this._def.checks)"int"===r.kind?f.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),_(t,{code:m.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:m.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:m.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==re(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:m.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),_(t,{code:m.not_finite,message:r.message}),n.dirty()):f.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,O.toString(t))}gt(e,t){return this.setLimit("min",e,!1,O.toString(t))}lte(e,t){return this.setLimit("max",e,!0,O.toString(t))}lt(e,t){return this.setLimit("max",e,!1,O.toString(t))}setLimit(e,t,n,r){return new ie({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:O.toString(r)}]})}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:O.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:O.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:O.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:O.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:O.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&f.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ie.create=e=>new ie({checks:[],typeName:Ve.ZodNumber,coerce:e?.coerce||!1,...T(e)});class oe extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==p.bigint)return this._getInvalidInput(e);let t;const n=new b;for(const r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:m.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),_(t,{code:m.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),_(t,{code:m.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):f.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.bigint,received:t.parsedType}),w}gte(e,t){return this.setLimit("min",e,!0,O.toString(t))}gt(e,t){return this.setLimit("min",e,!1,O.toString(t))}lte(e,t){return this.setLimit("max",e,!0,O.toString(t))}lt(e,t){return this.setLimit("max",e,!1,O.toString(t))}setLimit(e,t,n,r){return new oe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:O.toString(r)}]})}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:O.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}oe.create=e=>new oe({checks:[],typeName:Ve.ZodBigInt,coerce:e?.coerce??!1,...T(e)});class se extends P{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==p.boolean){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.boolean,received:t.parsedType}),w}return E(e.data)}}se.create=e=>new se({typeName:Ve.ZodBoolean,coerce:e?.coerce||!1,...T(e)});class ae extends P{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.date,received:t.parsedType}),w}if(Number.isNaN(e.data.getTime()))return _(this._getOrReturnCtx(e),{code:m.invalid_date}),w;const t=new b;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):f.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:O.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:O.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ae.create=e=>new ae({checks:[],coerce:e?.coerce||!1,typeName:Ve.ZodDate,...T(e)});class ue extends P{_parse(e){if(this._getType(e)!==p.symbol){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.symbol,received:t.parsedType}),w}return E(e.data)}}ue.create=e=>new ue({typeName:Ve.ZodSymbol,...T(e)});class ce extends P{_parse(e){if(this._getType(e)!==p.undefined){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.undefined,received:t.parsedType}),w}return E(e.data)}}ce.create=e=>new ce({typeName:Ve.ZodUndefined,...T(e)});class le extends P{_parse(e){if(this._getType(e)!==p.null){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.null,received:t.parsedType}),w}return E(e.data)}}le.create=e=>new le({typeName:Ve.ZodNull,...T(e)});class fe extends P{constructor(){super(...arguments),this._any=!0}_parse(e){return E(e.data)}}fe.create=e=>new fe({typeName:Ve.ZodAny,...T(e)});class de extends P{constructor(){super(...arguments),this._unknown=!0}_parse(e){return E(e.data)}}de.create=e=>new de({typeName:Ve.ZodUnknown,...T(e)});class pe extends P{_parse(e){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.never,received:t.parsedType}),w}}pe.create=e=>new pe({typeName:Ve.ZodNever,...T(e)});class he extends P{_parse(e){if(this._getType(e)!==p.undefined){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.void,received:t.parsedType}),w}return E(e.data)}}he.create=e=>new he({typeName:Ve.ZodVoid,...T(e)});class me extends P{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==p.array)return _(t,{code:m.invalid_type,expected:p.array,received:t.parsedType}),w;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(_(t,{code:e?m.too_big:m.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(_(t,{code:m.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(_(t,{code:m.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new S(t,e,t.path,n)))).then(e=>b.mergeArray(n,e));const i=[...t.data].map((e,n)=>r.type._parseSync(new S(t,e,t.path,n)));return b.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new me({...this._def,minLength:{value:e,message:O.toString(t)}})}max(e,t){return new me({...this._def,maxLength:{value:e,message:O.toString(t)}})}length(e,t){return new me({...this._def,exactLength:{value:e,message:O.toString(t)}})}nonempty(e){return this.min(1,e)}}function ge(e){if(e instanceof ve){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Re.create(ge(r))}return new ve({...e._def,shape:()=>t})}return e instanceof me?new me({...e._def,type:ge(e.element)}):e instanceof Re?Re.create(ge(e.unwrap())):e instanceof Ne?Ne.create(ge(e.unwrap())):e instanceof Ee?Ee.create(e.items.map(e=>ge(e))):e}me.create=(e,t)=>new me({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ve.ZodArray,...T(t)});class ve extends P{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=f.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==p.object){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.object,received:t.parsedType}),w}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof pe&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||o.push(e);const s=[];for(const e of i){const t=r[e],i=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new S(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof pe){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of o)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)o.length>0&&(_(n,{code:m.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new S(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of s){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>b.mergeObjectSync(t,e)):b.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return O.errToObj,new ve({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{const r=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:O.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new ve({...this._def,unknownKeys:"strip"})}passthrough(){return new ve({...this._def,unknownKeys:"passthrough"})}extend(e){return new ve({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ve({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ve.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ve({...this._def,catchall:e})}pick(e){const t={};for(const n of f.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new ve({...this._def,shape:()=>t})}omit(e){const t={};for(const n of f.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new ve({...this._def,shape:()=>t})}deepPartial(){return ge(this)}partial(e){const t={};for(const n of f.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new ve({...this._def,shape:()=>t})}required(e){const t={};for(const n of f.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Re;)e=e._def.innerType;t[n]=e}return new ve({...this._def,shape:()=>t})}keyof(){return Se(f.objectKeys(this.shape))}}ve.create=(e,t)=>new ve({shape:()=>e,unknownKeys:"strip",catchall:pe.create(),typeName:Ve.ZodObject,...T(t)}),ve.strictCreate=(e,t)=>new ve({shape:()=>e,unknownKeys:"strict",catchall:pe.create(),typeName:Ve.ZodObject,...T(t)}),ve.lazycreate=(e,t)=>new ve({shape:e,unknownKeys:"strip",catchall:pe.create(),typeName:Ve.ZodObject,...T(t)});class ye extends P{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map(e=>new g(e.ctx.common.issues));return _(t,{code:m.invalid_union,unionErrors:n}),w});{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},o=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map(e=>new g(e));return _(t,{code:m.invalid_union,unionErrors:i}),w}}get options(){return this._def.options}}ye.create=(e,t)=>new ye({options:e,typeName:Ve.ZodUnion,...T(t)});const _e=e=>e instanceof Ce?_e(e.schema):e instanceof Fe?_e(e.innerType()):e instanceof Oe?[e.value]:e instanceof $e?e.options:e instanceof Te?f.objectValues(e.enum):e instanceof Le?_e(e._def.innerType):e instanceof ce?[void 0]:e instanceof le?[null]:e instanceof Re?[void 0,..._e(e.unwrap())]:e instanceof Ne?[null,..._e(e.unwrap())]:e instanceof ze||e instanceof je?_e(e.unwrap()):e instanceof Ie?_e(e._def.innerType):[];class be extends P{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.object)return _(t,{code:m.invalid_type,expected:p.object,received:t.parsedType}),w;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(_(t,{code:m.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),w)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=_e(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new be({typeName:Ve.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...T(n)})}}function we(e,t){const n=h(e),r=h(t);if(e===t)return{valid:!0,data:e};if(n===p.object&&r===p.object){const n=f.objectKeys(t),r=f.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const n of r){const r=we(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}if(n===p.array&&r===p.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=we(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===p.date&&r===p.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class xe extends P{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(k(e)||k(r))return w;const i=we(e.value,r.value);return i.valid?((A(e)||A(r))&&t.dirty(),{status:t.value,value:i.data}):(_(n,{code:m.invalid_intersection_types}),w)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xe.create=(e,t,n)=>new xe({left:e,right:t,typeName:Ve.ZodIntersection,...T(n)});class Ee extends P{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.array)return _(n,{code:m.invalid_type,expected:p.array,received:n.parsedType}),w;if(n.data.length<this._def.items.length)return _(n,{code:m.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w;!this._def.rest&&n.data.length>this._def.items.length&&(_(n,{code:m.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new S(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>b.mergeArray(t,e)):b.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Ee({...this._def,rest:e})}}Ee.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ee({items:e,typeName:Ve.ZodTuple,rest:null,...T(t)})};class ke extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.object)return _(n,{code:m.invalid_type,expected:p.object,received:n.parsedType}),w;const r=[],i=this._def.keyType,o=this._def.valueType;for(const e in n.data)r.push({key:i._parse(new S(n,e,n.path,e)),value:o._parse(new S(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?b.mergeObjectAsync(t,r):b.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ke(t instanceof P?{keyType:e,valueType:t,typeName:Ve.ZodRecord,...T(n)}:{keyType:ne.create(),valueType:e,typeName:Ve.ZodRecord,...T(t)})}}class Ae extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.map)return _(n,{code:m.invalid_type,expected:p.map,received:n.parsedType}),w;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([e,t],o)=>({key:r._parse(new S(n,e,n.path,[o,"key"])),value:i._parse(new S(n,t,n.path,[o,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return w;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return w;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}Ae.create=(e,t,n)=>new Ae({valueType:t,keyType:e,typeName:Ve.ZodMap,...T(n)});class De extends P{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.set)return _(n,{code:m.invalid_type,expected:p.set,received:n.parsedType}),w;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(_(n,{code:m.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(_(n,{code:m.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return w;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map((e,t)=>i._parse(new S(n,e,n.path,t)));return n.common.async?Promise.all(s).then(e=>o(e)):o(s)}min(e,t){return new De({...this._def,minSize:{value:e,message:O.toString(t)}})}max(e,t){return new De({...this._def,maxSize:{value:e,message:O.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}De.create=(e,t)=>new De({valueType:e,minSize:null,maxSize:null,typeName:Ve.ZodSet,...T(t)});class Ce extends P{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ce.create=(e,t)=>new Ce({getter:e,typeName:Ve.ZodLazy,...T(t)});class Oe extends P{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return _(t,{received:t.data,code:m.invalid_literal,expected:this._def.value}),w}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Se(e,t){return new $e({values:e,typeName:Ve.ZodEnum,...T(t)})}Oe.create=(e,t)=>new Oe({value:e,typeName:Ve.ZodLiteral,...T(t)});class $e extends P{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return _(t,{expected:f.joinValues(n),received:t.parsedType,code:m.invalid_type}),w}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return _(t,{received:t.data,code:m.invalid_enum_value,options:n}),w}return E(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return $e.create(e,{...this._def,...t})}exclude(e,t=this._def){return $e.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}$e.create=Se;class Te extends P{_parse(e){const t=f.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==p.string&&n.parsedType!==p.number){const e=f.objectValues(t);return _(n,{expected:f.joinValues(e),received:n.parsedType,code:m.invalid_type}),w}if(this._cache||(this._cache=new Set(f.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=f.objectValues(t);return _(n,{received:n.data,code:m.invalid_enum_value,options:e}),w}return E(e.data)}get enum(){return this._def.values}}Te.create=(e,t)=>new Te({values:e,typeName:Ve.ZodNativeEnum,...T(t)});class Pe extends P{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.promise&&!1===t.common.async)return _(t,{code:m.invalid_type,expected:p.promise,received:t.parsedType}),w;const n=t.parsedType===p.promise?t.data:Promise.resolve(t.data);return E(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Pe.create=(e,t)=>new Pe({type:e,typeName:Ve.ZodPromise,...T(t)});class Fe extends P{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{_(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return w;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?w:"dirty"===r.status||"dirty"===t.value?x(r.value):r});{if("aborted"===t.value)return w;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?w:"dirty"===r.status||"dirty"===t.value?x(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?w:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?w:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!D(e))return w;const o=r.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>D(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):w)}f.assertNever(r)}}Fe.create=(e,t,n)=>new Fe({schema:e,typeName:Ve.ZodEffects,effect:t,...T(n)}),Fe.createWithPreprocess=(e,t,n)=>new Fe({schema:t,effect:{type:"preprocess",transform:e},typeName:Ve.ZodEffects,...T(n)});class Re extends P{_parse(e){return this._getType(e)===p.undefined?E(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Re.create=(e,t)=>new Re({innerType:e,typeName:Ve.ZodOptional,...T(t)});class Ne extends P{_parse(e){return this._getType(e)===p.null?E(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ne.create=(e,t)=>new Ne({innerType:e,typeName:Ve.ZodNullable,...T(t)});class Le extends P{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===p.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Le.create=(e,t)=>new Le({innerType:e,typeName:Ve.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...T(t)});class Ie extends P{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return C(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new g(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new g(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ie.create=(e,t)=>new Ie({innerType:e,typeName:Ve.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...T(t)});class Me extends P{_parse(e){if(this._getType(e)!==p.nan){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:p.nan,received:t.parsedType}),w}return{status:"valid",value:e.data}}}Me.create=e=>new Me({typeName:Ve.ZodNaN,...T(e)});class ze extends P{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Be extends P{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?w:"dirty"===e.status?(t.dirty(),x(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?w:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Be({in:e,out:t,typeName:Ve.ZodPipeline})}}class je extends P{_parse(e){const t=this._def.innerType._parse(e),n=e=>(D(e)&&(e.value=Object.freeze(e.value)),e);return C(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}function Ue(e,t){const n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}var Ve;je.create=(e,t)=>new je({innerType:e,typeName:Ve.ZodReadonly,...T(t)}),function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ve||(Ve={}));const qe=ne.create,He=ie.create,Ke=se.create;fe.create;const Ze=de.create;pe.create;const We=me.create,Ge=ve.create,Ye=ye.create,Qe=be.create,Je=xe.create;Ee.create;const Xe=ke.create,et=Oe.create,tt=$e.create;Pe.create;const nt=Re.create;Ne.create;const rt="2025-06-18",it=[rt,"2025-03-26","2024-11-05","2024-10-07"],ot="2.0",st=function(e,t={},n){return e?fe.create().superRefine((r,i)=>{const o=e(r);if(o instanceof Promise)return o.then(e=>{if(!e){const e=Ue(t,r),o=e.fatal??n??!0;i.addIssue({code:"custom",...e,fatal:o})}});if(!o){const e=Ue(t,r),o=e.fatal??n??!0;i.addIssue({code:"custom",...e,fatal:o})}}):fe.create()}(e=>null!==e&&("object"==typeof e||"function"==typeof e)),at=Ye([qe(),He().int()]),ut=qe(),ct=Ge({progressToken:at.optional()}).passthrough(),lt=Ge({_meta:ct.optional()}),ft=Ge({method:qe(),params:lt.passthrough().optional()}),dt=Ge({_meta:Xe(qe(),Ze()).optional()}),pt=Ge({method:qe(),params:dt.passthrough().optional()}),ht=Ge({_meta:Xe(qe(),Ze()).optional()}).passthrough(),mt=Ye([qe(),He().int()]),gt=Ge({jsonrpc:et(ot),id:mt}).merge(ft).strict(),vt=Ge({jsonrpc:et(ot)}).merge(pt).strict(),yt=Ge({jsonrpc:et(ot),id:mt,result:ht}).strict(),_t=e=>yt.safeParse(e).success;var bt;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"}(bt||(bt={}));const wt=Ge({jsonrpc:et(ot),id:mt,error:Ge({code:He().int(),message:qe(),data:nt(Ze())})}).strict(),xt=Ye([gt,vt,yt,wt]),Et=ht.strict(),kt=dt.extend({requestId:mt,reason:qe().optional()}),At=pt.extend({method:et("notifications/cancelled"),params:kt}),Dt=Ge({src:qe(),mimeType:qe().optional(),sizes:We(qe()).optional()}),Ct=Ge({icons:We(Dt).optional()}),Ot=Ge({name:qe(),title:qe().optional()}),St=Ot.extend({version:qe(),websiteUrl:qe().optional()}).merge(Ct),$t=Ge({experimental:Xe(qe(),st).optional(),sampling:st.optional(),elicitation:Je(Ge({applyDefaults:Ke().optional()}).optional(),Xe(qe(),Ze()).optional()),roots:Ge({listChanged:Ke().optional()}).optional()}),Tt=lt.extend({protocolVersion:qe(),capabilities:$t,clientInfo:St}),Pt=ft.extend({method:et("initialize"),params:Tt}),Ft=Ge({experimental:Xe(qe(),st).optional(),logging:st.optional(),completions:st.optional(),prompts:nt(Ge({listChanged:nt(Ke())})),resources:Ge({subscribe:Ke().optional(),listChanged:Ke().optional()}).optional(),tools:Ge({listChanged:Ke().optional()}).optional()}),Rt=ht.extend({protocolVersion:qe(),capabilities:Ft,serverInfo:St,instructions:qe().optional()}),Nt=pt.extend({method:et("notifications/initialized")}),Lt=ft.extend({method:et("ping")}),It=Ge({progress:He(),total:nt(He()),message:nt(qe())}),Mt=dt.merge(It).extend({progressToken:at}),zt=pt.extend({method:et("notifications/progress"),params:Mt}),Bt=lt.extend({cursor:ut.optional()}),jt=ft.extend({params:Bt.optional()}),Ut=ht.extend({nextCursor:nt(ut)}),Vt=Ge({uri:qe(),mimeType:nt(qe()),_meta:Xe(qe(),Ze()).optional()}),qt=Vt.extend({text:qe()}),Ht=qe().refine(e=>{try{return atob(e),!0}catch(e){return!1}},{message:"Invalid Base64 string"}),Kt=Vt.extend({blob:Ht}),Zt=Ot.extend({uri:qe(),description:nt(qe()),mimeType:nt(qe()),_meta:nt(Ge({}).passthrough())}).merge(Ct),Wt=Ot.extend({uriTemplate:qe(),description:nt(qe()),mimeType:nt(qe()),_meta:nt(Ge({}).passthrough())}).merge(Ct),Gt=jt.extend({method:et("resources/list")}),Yt=Ut.extend({resources:We(Zt)}),Qt=jt.extend({method:et("resources/templates/list")}),Jt=Ut.extend({resourceTemplates:We(Wt)}),Xt=lt.extend({uri:qe()}),en=Xt,tn=ft.extend({method:et("resources/read"),params:en}),nn=ht.extend({contents:We(Ye([qt,Kt]))}),rn=pt.extend({method:et("notifications/resources/list_changed")}),on=Xt,sn=ft.extend({method:et("resources/subscribe"),params:on}),an=Xt,un=ft.extend({method:et("resources/unsubscribe"),params:an}),cn=dt.extend({uri:qe()}),ln=pt.extend({method:et("notifications/resources/updated"),params:cn}),fn=Ge({name:qe(),description:nt(qe()),required:nt(Ke())}),dn=Ot.extend({description:nt(qe()),arguments:nt(We(fn)),_meta:nt(Ge({}).passthrough())}).merge(Ct),pn=jt.extend({method:et("prompts/list")}),hn=Ut.extend({prompts:We(dn)}),mn=lt.extend({name:qe(),arguments:Xe(qe(),qe()).optional()}),gn=ft.extend({method:et("prompts/get"),params:mn}),vn=Ge({type:et("text"),text:qe(),_meta:Xe(qe(),Ze()).optional()}),yn=Ge({type:et("image"),data:Ht,mimeType:qe(),_meta:Xe(qe(),Ze()).optional()}),_n=Ge({type:et("audio"),data:Ht,mimeType:qe(),_meta:Xe(qe(),Ze()).optional()}),bn=Ge({type:et("resource"),resource:Ye([qt,Kt]),_meta:Xe(qe(),Ze()).optional()}),wn=Ye([vn,yn,_n,Zt.extend({type:et("resource_link")}),bn]),xn=Ge({role:tt(["user","assistant"]),content:wn}),En=ht.extend({description:nt(qe()),messages:We(xn)}),kn=pt.extend({method:et("notifications/prompts/list_changed")}),An=Ge({title:qe().optional(),readOnlyHint:Ke().optional(),destructiveHint:Ke().optional(),idempotentHint:Ke().optional(),openWorldHint:Ke().optional()}),Dn=Ot.extend({description:qe().optional(),inputSchema:Ge({type:et("object"),properties:Xe(qe(),st).optional(),required:nt(We(qe()))}),outputSchema:Ge({type:et("object"),properties:Xe(qe(),st).optional(),required:nt(We(qe())),additionalProperties:nt(Ke())}).optional(),annotations:nt(An),_meta:Xe(qe(),Ze()).optional()}).merge(Ct),Cn=jt.extend({method:et("tools/list")}),On=Ut.extend({tools:We(Dn)}),Sn=ht.extend({content:We(wn).default([]),structuredContent:Xe(qe(),Ze()).optional(),isError:nt(Ke())});Sn.or(ht.extend({toolResult:Ze()}));const $n=lt.extend({name:qe(),arguments:nt(Xe(qe(),Ze()))}),Tn=ft.extend({method:et("tools/call"),params:$n}),Pn=pt.extend({method:et("notifications/tools/list_changed")}),Fn=tt(["debug","info","notice","warning","error","critical","alert","emergency"]),Rn=lt.extend({level:Fn}),Nn=ft.extend({method:et("logging/setLevel"),params:Rn}),Ln=dt.extend({level:Fn,logger:qe().optional(),data:Ze()}),In=pt.extend({method:et("notifications/message"),params:Ln}),Mn=Ge({name:qe().optional()}),zn=Ge({hints:nt(We(Mn)),costPriority:nt(He().min(0).max(1)),speedPriority:nt(He().min(0).max(1)),intelligencePriority:nt(He().min(0).max(1))}),Bn=Ge({role:tt(["user","assistant"]),content:Ye([vn,yn,_n])}),jn=lt.extend({messages:We(Bn),modelPreferences:zn.optional(),systemPrompt:qe().optional(),includeContext:tt(["none","thisServer","allServers"]).optional(),temperature:He().optional(),maxTokens:He().int(),stopSequences:We(qe()).optional(),metadata:st.optional()}),Un=ft.extend({method:et("sampling/createMessage"),params:jn}),Vn=ht.extend({model:qe(),stopReason:nt(tt(["endTurn","stopSequence","maxTokens"]).or(qe())),role:tt(["user","assistant"]),content:Qe("type",[vn,yn,_n])}),qn=Ge({type:et("boolean"),title:qe().optional(),description:qe().optional(),default:Ke().optional()}),Hn=Ge({type:et("string"),title:qe().optional(),description:qe().optional(),minLength:He().optional(),maxLength:He().optional(),format:tt(["email","uri","date","date-time"]).optional(),default:qe().optional()}),Kn=Ge({type:tt(["number","integer"]),title:qe().optional(),description:qe().optional(),minimum:He().optional(),maximum:He().optional(),default:He().optional()}),Zn=Ge({type:et("string"),title:qe().optional(),description:qe().optional(),enum:We(qe()),default:qe().optional()}),Wn=Ge({type:et("string"),title:qe().optional(),description:qe().optional(),oneOf:We(Ge({const:qe(),title:qe()})),default:qe().optional()}),Gn=Ge({type:et("string"),title:qe().optional(),description:qe().optional(),enum:We(qe()),enumNames:We(qe()).optional(),default:qe().optional()}),Yn=Ye([Zn,Wn]),Qn=Ye([Ge({type:et("array"),title:qe().optional(),description:qe().optional(),minItems:He().optional(),maxItems:He().optional(),items:Ge({type:et("string"),enum:We(qe())}),default:We(qe()).optional()}),Ge({type:et("array"),title:qe().optional(),description:qe().optional(),minItems:He().optional(),maxItems:He().optional(),items:Ge({anyOf:We(Ge({const:qe(),title:qe()}))}),default:We(qe()).optional()})]),Jn=Ye([Gn,Yn,Qn]),Xn=Ye([Jn,qn,Hn,Kn]),er=lt.extend({message:qe(),requestedSchema:Ge({type:et("object"),properties:Xe(qe(),Xn),required:We(qe()).optional()})}),tr=ft.extend({method:et("elicitation/create"),params:er}),nr=ht.extend({action:tt(["accept","decline","cancel"]),content:Xe(Ye([qe(),He(),Ke(),We(qe())])).optional()}),rr=Ge({type:et("ref/resource"),uri:qe()}),ir=Ge({type:et("ref/prompt"),name:qe()}),or=lt.extend({ref:Ye([ir,rr]),argument:Ge({name:qe(),value:qe()}),context:Ge({arguments:Xe(qe(),qe()).optional()}).optional()}),sr=ft.extend({method:et("completion/complete"),params:or}),ar=ht.extend({completion:Ge({values:We(qe()).max(100),total:nt(He().int()),hasMore:nt(Ke())}).passthrough()}),ur=Ge({uri:qe().startsWith("file://"),name:qe().optional(),_meta:Xe(qe(),Ze()).optional()}),cr=ft.extend({method:et("roots/list")}),lr=ht.extend({roots:We(ur)}),fr=pt.extend({method:et("notifications/roots/list_changed")});Ye([Lt,Pt,sr,Nn,gn,pn,Gt,Qt,tn,sn,un,Tn,Cn]),Ye([At,zt,Nt,fr]),Ye([Et,Vn,nr,lr]),Ye([Lt,Un,tr,cr]),Ye([At,zt,In,ln,rn,Pn,kn]),Ye([Et,Rt,ar,En,hn,Yt,Jt,nn,Sn,On]);class dr extends Error{constructor(e,t,n){super(`MCP error ${e}: ${t}`),this.code=e,this.data=n,this.name="McpError"}}class pr{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(At,e=>{const t=this._requestHandlerAbortControllers.get(e.params.requestId);null==t||t.abort(e.params.reason)}),this.setNotificationHandler(zt,e=>{this._onprogress(e)}),this.setRequestHandler(Lt,e=>({}))}_setupTimeout(e,t,n,r,i=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:n,resetTimeoutOnProgress:i,onTimeout:r})}_resetTimeout(e){const t=this._timeoutInfo.get(e);if(!t)return!1;const n=Date.now()-t.startTime;if(t.maxTotalTimeout&&n>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new dr(bt.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:n});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){const t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,n,r;this._transport=e;const i=null===(t=this.transport)||void 0===t?void 0:t.onclose;this._transport.onclose=()=>{null==i||i(),this._onclose()};const o=null===(n=this.transport)||void 0===n?void 0:n.onerror;this._transport.onerror=e=>{null==o||o(e),this._onerror(e)};const s=null===(r=this._transport)||void 0===r?void 0:r.onmessage;this._transport.onmessage=(e,t)=>{var n;null==s||s(e,t),_t(e)||(n=e,wt.safeParse(n).success)?this._onresponse(e):(e=>gt.safeParse(e).success)(e)?this._onrequest(e,t):(e=>vt.safeParse(e).success)(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){var e;const t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,null===(e=this.onclose)||void 0===e||e.call(this);const n=new dr(bt.ConnectionClosed,"Connection closed");for(const e of t.values())e(n)}_onerror(e){var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}_onnotification(e){var t;const n=null!==(t=this._notificationHandlers.get(e.method))&&void 0!==t?t:this.fallbackNotificationHandler;void 0!==n&&Promise.resolve().then(()=>n(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){var n,r;const i=null!==(n=this._requestHandlers.get(e.method))&&void 0!==n?n:this.fallbackRequestHandler,o=this._transport;if(void 0===i)return void(null==o||o.send({jsonrpc:"2.0",id:e.id,error:{code:bt.MethodNotFound,message:"Method not found"}}).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`))));const s=new AbortController;this._requestHandlerAbortControllers.set(e.id,s);const a={signal:s.signal,sessionId:null==o?void 0:o.sessionId,_meta:null===(r=e.params)||void 0===r?void 0:r._meta,sendNotification:t=>this.notification(t,{relatedRequestId:e.id}),sendRequest:(t,n,r)=>this.request(t,n,{...r,relatedRequestId:e.id}),authInfo:null==t?void 0:t.authInfo,requestId:e.id,requestInfo:null==t?void 0:t.requestInfo};Promise.resolve().then(()=>i(e,a)).then(t=>{if(!s.signal.aborted)return null==o?void 0:o.send({result:t,jsonrpc:"2.0",id:e.id})},t=>{var n;if(!s.signal.aborted)return null==o?void 0:o.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:bt.InternalError,message:null!==(n=t.message)&&void 0!==n?n:"Internal error"}})}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:t,...n}=e.params,r=Number(t),i=this._progressHandlers.get(r);if(!i)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));const o=this._responseHandlers.get(r),s=this._timeoutInfo.get(r);if(s&&o&&s.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(e){return void o(e)}i(n)}_onresponse(e){const t=Number(e.id),n=this._responseHandlers.get(t);void 0!==n?(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),_t(e)?n(e):n(new dr(e.error.code,e.error.message,e.error.data))):this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`))}get transport(){return this._transport}async close(){var e;await(null===(e=this._transport)||void 0===e?void 0:e.close())}request(e,t,n){const{relatedRequestId:r,resumptionToken:i,onresumptiontoken:o}=null!=n?n:{};return new Promise((s,a)=>{var u,c,l,f,d,p;if(!this._transport)return void a(new Error("Not connected"));!0===(null===(u=this._options)||void 0===u?void 0:u.enforceStrictCapabilities)&&this.assertCapabilityForMethod(e.method),null===(c=null==n?void 0:n.signal)||void 0===c||c.throwIfAborted();const h=this._requestMessageId++,m={...e,jsonrpc:"2.0",id:h};(null==n?void 0:n.onprogress)&&(this._progressHandlers.set(h,n.onprogress),m.params={...e.params,_meta:{...(null===(l=e.params)||void 0===l?void 0:l._meta)||{},progressToken:h}});const g=e=>{var t;this._responseHandlers.delete(h),this._progressHandlers.delete(h),this._cleanupTimeout(h),null===(t=this._transport)||void 0===t||t.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:h,reason:String(e)}},{relatedRequestId:r,resumptionToken:i,onresumptiontoken:o}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`))),a(e)};this._responseHandlers.set(h,e=>{var r;if(!(null===(r=null==n?void 0:n.signal)||void 0===r?void 0:r.aborted)){if(e instanceof Error)return a(e);try{const n=t.parse(e.result);s(n)}catch(e){a(e)}}}),null===(f=null==n?void 0:n.signal)||void 0===f||f.addEventListener("abort",()=>{var e;g(null===(e=null==n?void 0:n.signal)||void 0===e?void 0:e.reason)});const v=null!==(d=null==n?void 0:n.timeout)&&void 0!==d?d:6e4;this._setupTimeout(h,v,null==n?void 0:n.maxTotalTimeout,()=>g(new dr(bt.RequestTimeout,"Request timed out",{timeout:v})),null!==(p=null==n?void 0:n.resetTimeoutOnProgress)&&void 0!==p&&p),this._transport.send(m,{relatedRequestId:r,resumptionToken:i,onresumptiontoken:o}).catch(e=>{this._cleanupTimeout(h),a(e)})})}async notification(e,t){var n,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),(null!==(r=null===(n=this._options)||void 0===n?void 0:n.debouncedNotificationMethods)&&void 0!==r?r:[]).includes(e.method)&&!e.params&&!(null==t?void 0:t.relatedRequestId)){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then(()=>{var n;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;const r={...e,jsonrpc:"2.0"};null===(n=this._transport)||void 0===n||n.send(r,t).catch(e=>this._onerror(e))})}const i={...e,jsonrpc:"2.0"};await this._transport.send(i,t)}setRequestHandler(e,t){const n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(n,r)=>Promise.resolve(t(e.parse(n),r)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(t(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}}function hr(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var mr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function gr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vr,yr={exports:{}},_r={},br={},wr={},xr={},Er={},kr={};function Ar(){return vr||(vr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)a(n,t[i]),n.push(e[++i]);return new r(n)}e._Code=r,e.nil=new r(""),e._=i;const o=new r("+");function s(e,...t){const n=[c(e[0])];let i=0;for(;i<t.length;)n.push(o),a(n,t[i]),n.push(o,c(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const n=u(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function a(e,t){var i;t instanceof r?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(i=t)||"boolean"==typeof i||null===i?i:c(Array.isArray(i)?i.join(","):i))}function u(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=s,e.addCodeArg=a,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:s`${e}${t}`},e.stringify=function(e){return new r(c(e))},e.safeStringify=c,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(`.${t}`):i`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new r(e.toString())}}(kr)),kr}var Dr,Cr,Or={};function Sr(){return Dr||(Dr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ar();class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var r;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=i;class o extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:n,itemIndex:r}){this.value=e,this.scopePath=t._`.${new t.Name(n)}[${r}]`}}e.ValueScopeName=o;const s=t._`\n`;e.ValueScope=class extends i{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?s:t.nil}}get(){return this._scope}name(e){return new o(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:i}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[i];if(s){const e=s.get(o);if(e)return e}else s=this._values[i]=new Map;s.set(o,r);const a=this._scope[i]||(this._scope[i]=[]),u=a.length;return a[u]=t.ref,r.setValue(t,{property:i,itemIndex:u}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,n=this._values){return this._reduceValues(n,n=>{if(void 0===n.scopePath)throw new Error(`CodeGen: name "${n}" has no value`);return t._`${e}${n.scopePath}`})}scopeCode(e=this._values,t,n){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,n)}_reduceValues(i,o,s={},a){let u=t.nil;for(const c in i){const l=i[c];if(!l)continue;const f=s[c]=s[c]||new Map;l.forEach(i=>{if(f.has(i))return;f.set(i,r.Started);let s=o(i);if(s){const n=this.opts.es5?e.varKinds.var:e.varKinds.const;u=t._`${u}${n} ${i} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(i)))throw new n(i);u=t._`${u}${s}${this.opts._n}`}f.set(i,r.Completed)})}return u}}}(Or)),Or}function $r(){return Cr||(Cr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ar(),n=Sr();var r=Ar();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Sr();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(e,t){return this}}class s extends o{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const r=e?n.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=S(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,n){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=S(this.rhs,e,n),this}get names(){return O(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class u extends a{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class c extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class l extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class f extends o{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class d extends o{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=S(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class p extends o{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,n)=>t+n.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const i=n[r];i.optimizeNames(e,t)||($(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>C(e,t.names),{})}}class h extends p{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class m extends p{}class g extends h{}g.kind="else";class v extends h{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new g(e):e}return t?!1===e?t instanceof v?t:t.nodes:this.nodes.length?this:new v(T(e),t instanceof v?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=S(this.condition,e,t),this}get names(){const e=super.names;return O(e,this.condition),this.else&&C(e,this.else.names),e}}v.kind="if";class y extends h{}y.kind="for";class _ extends y{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=S(this.iteration,e,t),this}get names(){return C(super.names,this.iteration.names)}}class b extends y{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?n.varKinds.var:this.varKind,{name:r,from:i,to:o}=this;return`for(${t} ${r}=${i}; ${r}<${o}; ${r}++)`+super.render(e)}get names(){const e=O(super.names,this.from);return O(e,this.to)}}class w extends y{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=S(this.iterable,e,t),this}get names(){return C(super.names,this.iterable.names)}}class x extends h{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}x.kind="func";class E extends p{render(e){return"return "+super.render(e)}}E.kind="return";class k extends h{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&C(e,this.catch.names),this.finally&&C(e,this.finally.names),e}}class A extends h{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}A.kind="catch";class D extends h{render(e){return"finally"+super.render(e)}}function C(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function O(e,n){return n instanceof t._CodeOrName?C(e,n.names):e}function S(e,n,r){return e instanceof t.Name?o(e):(i=e)instanceof t._Code&&i._items.some(e=>e instanceof t.Name&&1===n[e.str]&&void 0!==r[e.str])?new t._Code(e._items.reduce((e,n)=>(n instanceof t.Name&&(n=o(n)),n instanceof t._Code?e.push(...n._items):e.push(n),e),[])):e;var i;function o(e){const t=r[e.str];return void 0===t||1!==n[e.str]?e:(delete n[e.str],t)}}function $(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function T(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${N(e)}`}D.kind="finally",e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new n.Scope({parent:e}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new s(e,i,n)),i}const(e,t,r){return this._def(n.varKinds.const,e,t,r)}let(e,t,r){return this._def(n.varKinds.let,e,t,r)}var(e,t,r){return this._def(n.varKinds.var,e,t,r)}assign(e,t,n){return this._leafNode(new a(e,t,n))}add(t,n){return this._leafNode(new u(t,e.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new d(e)),this}object(...e){const n=["{"];for(const[r,i]of e)n.length>1&&n.push(","),n.push(r),(r!==i||this.opts.es5)&&(n.push(":"),(0,t.addCodeArg)(n,i));return n.push("}"),new t._Code(n)}if(e,t,n){if(this._blockNode(new v(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new v(e))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new _(e),t)}forRange(e,t,r,i,o=(this.opts.es5?n.varKinds.var:n.varKinds.let)){const s=this._scope.toName(e);return this._for(new b(o,s,t,r),()=>i(s))}forOf(e,r,i,o=n.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,t._`${e}.length`,n=>{this.var(s,t._`${e}[${n}]`),i(s)})}return this._for(new w("of",o,s,r),()=>i(s))}forIn(e,r,i,o=(this.opts.es5?n.varKinds.var:n.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${r})`,i);const s=this._scope.toName(e);return this._for(new w("in",o,s,r),()=>i(s))}endFor(){return this._endBlockNode(y)}label(e){return this._leafNode(new c(e))}break(e){return this._leafNode(new l(e))}return(e){const t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new k;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new A(e),t(e)}return n&&(this._currNode=r.finally=new D,this.code(n)),this._endBlockNode(A,D)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,n=t.nil,r,i){return this._blockNode(new x(e,n,r)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=T;const P=R(e.operators.AND);e.and=function(...e){return e.reduce(P)};const F=R(e.operators.OR);function R(e){return(n,r)=>n===t.nil?r:r===t.nil?n:t._`${N(n)} ${e} ${N(r)}`}function N(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(F)}}(Er)),Er}var Tr,Pr={};function Fr(){if(Tr)return Pr;Tr=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.checkStrictMode=Pr.getErrorPath=Pr.Type=Pr.useFunc=Pr.setEvaluated=Pr.evaluatedPropsToName=Pr.mergeEvaluated=Pr.eachItem=Pr.unescapeJsonPointer=Pr.escapeJsonPointer=Pr.escapeFragment=Pr.unescapeFragment=Pr.schemaRefOrVal=Pr.schemaHasRulesButRef=Pr.schemaHasRules=Pr.checkUnknownRules=Pr.alwaysValidSchema=Pr.toHash=void 0;const e=$r(),t=Ar();function n(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const i=r.RULES.keywords;for(const n in t)i[n]||f(e,`unknown keyword: "${n}"`)}function r(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function i(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function o(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function s({mergeNames:t,mergeToName:n,mergeValues:r,resultToName:i}){return(o,s,a,u)=>{const c=void 0===a?s:a instanceof e.Name?(s instanceof e.Name?t(o,s,a):n(o,s,a),a):s instanceof e.Name?(n(o,a,s),s):r(s,a);return u!==e.Name||c instanceof e.Name?c:i(o,c)}}function a(t,n){if(!0===n)return t.var("props",!0);const r=t.var("props",e._`{}`);return void 0!==n&&u(t,r,n),r}function u(t,n,r){Object.keys(r).forEach(r=>t.assign(e._`${n}${(0,e.getProperty)(r)}`,!0))}Pr.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},Pr.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(n(e,t),!r(t,e.self.RULES.all))},Pr.checkUnknownRules=n,Pr.schemaHasRules=r,Pr.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},Pr.schemaRefOrVal=function({topSchemaRef:t,schemaPath:n},r,i,o){if(!o){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return e._`${r}`}return e._`${t}${n}${(0,e.getProperty)(i)}`},Pr.unescapeFragment=function(e){return o(decodeURIComponent(e))},Pr.escapeFragment=function(e){return encodeURIComponent(i(e))},Pr.escapeJsonPointer=i,Pr.unescapeJsonPointer=o,Pr.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},Pr.mergeEvaluated={props:s({mergeNames:(t,n,r)=>t.if(e._`${r} !== true && ${n} !== undefined`,()=>{t.if(e._`${n} === true`,()=>t.assign(r,!0),()=>t.assign(r,e._`${r} || {}`).code(e._`Object.assign(${r}, ${n})`))}),mergeToName:(t,n,r)=>t.if(e._`${r} !== true`,()=>{!0===n?t.assign(r,!0):(t.assign(r,e._`${r} || {}`),u(t,r,n))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:a}),items:s({mergeNames:(t,n,r)=>t.if(e._`${r} !== true && ${n} !== undefined`,()=>t.assign(r,e._`${n} === true ? true : ${r} > ${n} ? ${r} : ${n}`)),mergeToName:(t,n,r)=>t.if(e._`${r} !== true`,()=>t.assign(r,!0===n||e._`${r} > ${n} ? ${r} : ${n}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},Pr.evaluatedPropsToName=a,Pr.setEvaluated=u;const c={};var l;function f(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}return Pr.useFunc=function(e,n){return e.scopeValue("func",{ref:n,code:c[n.code]||(c[n.code]=new t._Code(n.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(l||(Pr.Type=l={})),Pr.getErrorPath=function(t,n,r){if(t instanceof e.Name){const i=n===l.Num;return r?i?e._`"[" + ${t} + "]"`:e._`"['" + ${t} + "']"`:i?e._`"/" + ${t}`:e._`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,e.getProperty)(t).toString():"/"+i(t)},Pr.checkStrictMode=f,Pr}var Rr,Nr,Lr,Ir={};function Mr(){if(Rr)return Ir;Rr=1,Object.defineProperty(Ir,"__esModule",{value:!0});const e=$r(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Ir.default=t,Ir}function zr(){return Nr||(Nr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=$r(),n=Fr(),r=Mr();function i(e,n){const i=e.const("err",n);e.if(t._`${r.default.vErrors} === null`,()=>e.assign(r.default.vErrors,t._`[${i}]`),t._`${r.default.vErrors}.push(${i})`),e.code(t._`${r.default.errors}++`)}function o(e,n){const{gen:r,validateName:i,schemaEnv:o}=e;o.$async?r.throw(t._`new ${e.ValidationError}(${n})`):(r.assign(t._`${i}.errors`,n),r.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:n})=>n?t.str`"${e}" keyword must be ${n} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(n,r=e.keywordError,s,u){const{it:c}=n,{gen:l,compositeRule:f,allErrors:d}=c,p=a(n,r,s);(null!=u?u:f||d)?i(l,p):o(c,t._`[${p}]`)},e.reportExtraError=function(t,n=e.keywordError,s){const{it:u}=t,{gen:c,compositeRule:l,allErrors:f}=u;i(c,a(t,n,s)),l||f||o(u,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if(t._`${r.default.vErrors} !== null`,()=>e.if(n,()=>e.assign(t._`${r.default.vErrors}.length`,n),()=>e.assign(r.default.vErrors,null)))},e.extendErrors=function({gen:e,keyword:n,schemaValue:i,data:o,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const u=e.name("err");e.forRange("i",s,r.default.errors,s=>{e.const(u,t._`${r.default.vErrors}[${s}]`),e.if(t._`${u}.instancePath === undefined`,()=>e.assign(t._`${u}.instancePath`,(0,t.strConcat)(r.default.instancePath,a.errorPath))),e.assign(t._`${u}.schemaPath`,t.str`${a.errSchemaPath}/${n}`),a.opts.verbose&&(e.assign(t._`${u}.schema`,i),e.assign(t._`${u}.data`,o))})};const s={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function a(e,n,i){const{createErrors:o}=e.it;return!1===o?t._`{}`:function(e,n,i={}){const{gen:o,it:a}=e,l=[u(a,i),c(e,i)];return function(e,{params:n,message:i},o){const{keyword:a,data:u,schemaValue:c,it:l}=e,{opts:f,propertyName:d,topSchemaRef:p,schemaPath:h}=l;o.push([s.keyword,a],[s.params,"function"==typeof n?n(e):n||t._`{}`]),f.messages&&o.push([s.message,"function"==typeof i?i(e):i]),f.verbose&&o.push([s.schema,c],[s.parentSchema,t._`${p}${h}`],[r.default.data,u]),d&&o.push([s.propertyName,d])}(e,n,l),o.object(...l)}(e,n,i)}function u({errorPath:e},{instancePath:i}){const o=i?t.str`${e}${(0,n.getErrorPath)(i,n.Type.Str)}`:e;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,o)]}function c({keyword:e,it:{errSchemaPath:r}},{schemaPath:i,parentSchema:o}){let a=o?r:t.str`${r}/${e}`;return i&&(a=t.str`${a}${(0,n.getErrorPath)(i,n.Type.Str)}`),[s.schemaPath,a]}}(xr)),xr}var Br,jr={},Ur={};function Vr(){if(Br)return Ur;Br=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.getRules=Ur.isJSONType=void 0;const e=new Set(["string","number","integer","boolean","null","object","array"]);return Ur.isJSONType=function(t){return"string"==typeof t&&e.has(t)},Ur.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}},Ur}var qr,Hr,Kr={};function Zr(){if(qr)return Kr;function e(e,n){return n.rules.some(n=>t(e,n))}function t(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some(t=>void 0!==e[t]))}return qr=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.shouldUseRule=Kr.shouldUseGroup=Kr.schemaHasRulesForType=void 0,Kr.schemaHasRulesForType=function({schema:t,self:n},r){const i=n.RULES.types[r];return i&&!0!==i&&e(t,i)},Kr.shouldUseGroup=e,Kr.shouldUseRule=t,Kr}function Wr(){if(Hr)return jr;Hr=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.reportTypeError=jr.checkDataTypes=jr.checkDataType=jr.coerceAndCheckDataType=jr.getJSONTypes=jr.getSchemaTypes=jr.DataType=void 0;const e=Vr(),t=Zr(),n=zr(),r=$r(),i=Fr();var o;function s(t){const n=Array.isArray(t)?t:t?[t]:[];if(n.every(e.isJSONType))return n;throw new Error("type must be JSONType or JSONType[]: "+n.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(o||(jr.DataType=o={})),jr.getSchemaTypes=function(e){const t=s(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},jr.getJSONTypes=s,jr.coerceAndCheckDataType=function(e,n){const{gen:i,data:s,opts:u}=e,l=function(e,t){return t?e.filter(e=>a.has(e)||"array"===t&&"array"===e):[]}(n,u.coerceTypes),d=n.length>0&&!(0===l.length&&1===n.length&&(0,t.schemaHasRulesForType)(e,n[0]));if(d){const t=c(n,s,u.strictNumbers,o.Wrong);i.if(t,()=>{l.length?function(e,t,n){const{gen:i,data:o,opts:s}=e,u=i.let("dataType",r._`typeof ${o}`),l=i.let("coerced",r._`undefined`);"array"===s.coerceTypes&&i.if(r._`${u} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>i.assign(o,r._`${o}[0]`).assign(u,r._`typeof ${o}`).if(c(t,o,s.strictNumbers),()=>i.assign(l,o))),i.if(r._`${l} !== undefined`);for(const e of n)(a.has(e)||"array"===e&&"array"===s.coerceTypes)&&d(e);function d(e){switch(e){case"string":return void i.elseIf(r._`${u} == "number" || ${u} == "boolean"`).assign(l,r._`"" + ${o}`).elseIf(r._`${o} === null`).assign(l,r._`""`);case"number":return void i.elseIf(r._`${u} == "boolean" || ${o} === null
              || (${u} == "string" && ${o} && ${o} == +${o})`).assign(l,r._`+${o}`);case"integer":return void i.elseIf(r._`${u} === "boolean" || ${o} === null
              || (${u} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,r._`+${o}`);case"boolean":return void i.elseIf(r._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf(r._`${o} === "true" || ${o} === 1`).assign(l,!0);case"null":return i.elseIf(r._`${o} === "" || ${o} === 0 || ${o} === false`),void i.assign(l,null);case"array":i.elseIf(r._`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${o} === null`).assign(l,r._`[${o}]`)}}i.else(),f(e),i.endIf(),i.if(r._`${l} !== undefined`,()=>{i.assign(o,l),function({gen:e,parentData:t,parentDataProperty:n},i){e.if(r._`${t} !== undefined`,()=>e.assign(r._`${t}[${n}]`,i))}(e,l)})}(e,n,l):f(e)})}return d};const a=new Set(["string","number","integer","boolean","null"]);function u(e,t,n,i=o.Correct){const s=i===o.Correct?r.operators.EQ:r.operators.NEQ;let a;switch(e){case"null":return r._`${t} ${s} null`;case"array":a=r._`Array.isArray(${t})`;break;case"object":a=r._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=u(r._`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=u();break;default:return r._`typeof ${t} ${s} ${e}`}return i===o.Correct?a:(0,r.not)(a);function u(e=r.nil){return(0,r.and)(r._`typeof ${t} == "number"`,e,n?r._`isFinite(${t})`:r.nil)}}function c(e,t,n,o){if(1===e.length)return u(e[0],t,n,o);let s;const a=(0,i.toHash)(e);if(a.array&&a.object){const e=r._`typeof ${t} != "object"`;s=a.null?e:r._`!${t} || ${e}`,delete a.null,delete a.array,delete a.object}else s=r.nil;a.number&&delete a.integer;for(const e in a)s=(0,r.and)(s,u(e,t,n,o));return s}jr.checkDataType=u,jr.checkDataTypes=c;const l={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?r._`{type: ${e}}`:r._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:n,schema:r}=e,o=(0,i.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:o,schemaValue:o,parentSchema:r,params:{},it:e}}(e);(0,n.reportError)(t,l)}return jr.reportTypeError=f,jr}var Gr,Yr,Qr,Jr={},Xr={},ei={};function ti(){if(Yr)return ei;Yr=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.validateUnion=ei.validateArray=ei.usePattern=ei.callValidateCode=ei.schemaProperties=ei.allSchemaProperties=ei.noPropertyInData=ei.propertyInData=ei.isOwnProperty=ei.hasPropFunc=ei.reportMissingProp=ei.checkMissingProp=ei.checkReportMissingProp=void 0;const e=$r(),t=Fr(),n=Mr(),r=Fr();function i(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:e._`Object.prototype.hasOwnProperty`})}function o(t,n,r){return e._`${i(t)}.call(${n}, ${r})`}function s(t,n,r,i){const s=e._`${n}${(0,e.getProperty)(r)} === undefined`;return i?(0,e.or)(s,(0,e.not)(o(t,n,r))):s}function a(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}ei.checkReportMissingProp=function(t,n){const{gen:r,data:i,it:o}=t;r.if(s(r,i,n,o.opts.ownProperties),()=>{t.setParams({missingProperty:e._`${n}`},!0),t.error()})},ei.checkMissingProp=function({gen:t,data:n,it:{opts:r}},i,o){return(0,e.or)(...i.map(i=>(0,e.and)(s(t,n,i,r.ownProperties),e._`${o} = ${i}`)))},ei.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},ei.hasPropFunc=i,ei.isOwnProperty=o,ei.propertyInData=function(t,n,r,i){const s=e._`${n}${(0,e.getProperty)(r)} !== undefined`;return i?e._`${s} && ${o(t,n,r)}`:s},ei.noPropertyInData=s,ei.allSchemaProperties=a,ei.schemaProperties=function(e,n){return a(n).filter(r=>!(0,t.alwaysValidSchema)(e,n[r]))},ei.callValidateCode=function({schemaCode:t,data:r,it:{gen:i,topSchemaRef:o,schemaPath:s,errorPath:a},it:u},c,l,f){const d=f?e._`${t}, ${r}, ${o}${s}`:r,p=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,a)],[n.default.parentData,u.parentData],[n.default.parentDataProperty,u.parentDataProperty],[n.default.rootData,n.default.rootData]];u.opts.dynamicRef&&p.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const h=e._`${d}, ${i.object(...p)}`;return l!==e.nil?e._`${c}.call(${l}, ${h})`:e._`${c}(${h})`};const u=e._`new RegExp`;return ei.usePattern=function({gen:t,it:{opts:n}},i){const o=n.unicodeRegExp?"u":"",{regExp:s}=n.code,a=s(i,o);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:e._`${"new RegExp"===s.code?u:(0,r.useFunc)(t,s)}(${i}, ${o})`})},ei.validateArray=function(n){const{gen:r,data:i,keyword:o,it:s}=n,a=r.name("valid");if(s.allErrors){const e=r.let("valid",!0);return u(()=>r.assign(e,!1)),e}return r.var(a,!0),u(()=>r.break()),a;function u(s){const u=r.const("len",e._`${i}.length`);r.forRange("i",0,u,i=>{n.subschema({keyword:o,dataProp:i,dataPropType:t.Type.Num},a),r.if((0,e.not)(a),s)})}},ei.validateUnion=function(n){const{gen:r,schema:i,keyword:o,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");if(i.some(e=>(0,t.alwaysValidSchema)(s,e))&&!s.opts.unevaluated)return;const a=r.let("valid",!1),u=r.name("_valid");r.block(()=>i.forEach((t,i)=>{const s=n.subschema({keyword:o,schemaProp:i,compositeRule:!0},u);r.assign(a,e._`${a} || ${u}`),n.mergeValidEvaluated(s,u)||r.if((0,e.not)(a))})),n.result(a,()=>n.reset(),()=>n.error(!0))},ei}var ni,ri,ii,oi={},si={};function ai(){return ii||(ii=1,ri=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}),ri}var ui,ci,li,fi={exports:{}};function di(){if(ui)return fi.exports;ui=1;var e=fi.exports=function(e,n,r){"function"==typeof n&&(r=n,n={}),t(n,"function"==typeof(r=n.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function t(r,i,o,s,a,u,c,l,f,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var p in i(s,a,u,c,l,f,d),s){var h=s[p];if(Array.isArray(h)){if(p in e.arrayKeywords)for(var m=0;m<h.length;m++)t(r,i,o,h[m],a+"/"+p+"/"+m,u,a,p,s,m)}else if(p in e.propsKeywords){if(h&&"object"==typeof h)for(var g in h)t(r,i,o,h[g],a+"/"+p+"/"+n(g),u,a,p,s,g)}else(p in e.keywords||r.allKeys&&!(p in e.skipKeywords))&&t(r,i,o,h,a+"/"+p,u,a,p,s)}o(s,a,u,c,l,f,d)}}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}return e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},fi.exports}function pi(){if(ci)return si;ci=1,Object.defineProperty(si,"__esModule",{value:!0}),si.getSchemaRefs=si.resolveUrl=si.normalizeId=si._getFullPath=si.getFullPath=si.inlineRef=void 0;const e=Fr(),t=ai(),n=di(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);si.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!o(e):!!t&&s(e)<=t)};const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(e){for(const t in e){if(i.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(o))return!0;if("object"==typeof n&&o(n))return!0}return!1}function s(t){let n=0;for(const i in t){if("$ref"===i)return 1/0;if(n++,!r.has(i)&&("object"==typeof t[i]&&(0,e.eachItem)(t[i],e=>n+=s(e)),n===1/0))return 1/0}return n}function a(e,t="",n){!1!==n&&(t=l(t));const r=e.parse(t);return u(e,r)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}si.getFullPath=a,si._getFullPath=u;const c=/#\/?$/;function l(e){return e?e.replace(c,""):""}si.normalizeId=l,si.resolveUrl=function(e,t,n){return n=l(n),e.resolve(t,n)};const f=/^[a-z_][-a-z0-9._]*$/i;return si.getSchemaRefs=function(e,r){if("boolean"==typeof e)return{};const{schemaId:i,uriResolver:o}=this.opts,s=l(e[i]||r),u={"":s},c=a(o,s,!1),d={},p=new Set;return n(e,{allKeys:!0},(e,t,n,r)=>{if(void 0===r)return;const o=c+t;let s=u[r];function a(t){const n=this.opts.uriResolver.resolve;if(t=l(s?n(s,t):t),p.has(t))throw m(t);p.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?h(e,r.schema,t):t!==l(o)&&("#"===t[0]?(h(e,d[t],t),d[t]=e):this.refs[t]=o),t}function g(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);a.call(this,`#${e}`)}}"string"==typeof e[i]&&(s=a.call(this,e[i])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),u[t]=s}),d;function h(e,n,r){if(void 0!==n&&!t(e,n))throw m(r)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}},si}function hi(){if(li)return br;li=1,Object.defineProperty(br,"__esModule",{value:!0}),br.getData=br.KeywordCxt=br.validateFunctionCode=void 0;const e=function(){if(Lr)return wr;Lr=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.boolOrEmptySchema=wr.topBoolOrEmptySchema=void 0;const e=zr(),t=$r(),n=Mr(),r={message:"boolean schema is false"};function i(t,n){const{gen:i,data:o}=t,s={gen:i,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,e.reportError)(s,r,void 0,n)}return wr.topBoolOrEmptySchema=function(e){const{gen:r,schema:o,validateName:s}=e;!1===o?i(e,!1):"object"==typeof o&&!0===o.$async?r.return(n.default.data):(r.assign(t._`${s}.errors`,null),r.return(!0))},wr.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),i(e)):n.var(t,!0)},wr}(),t=Wr(),n=Zr(),r=Wr(),i=function(){if(Gr)return Jr;Gr=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.assignDefaults=void 0;const e=$r(),t=Fr();function n(n,r,i){const{gen:o,compositeRule:s,data:a,opts:u}=n;if(void 0===i)return;const c=e._`${a}${(0,e.getProperty)(r)}`;if(s)return void(0,t.checkStrictMode)(n,`default is ignored for: ${c}`);let l=e._`${c} === undefined`;"empty"===u.useDefaults&&(l=e._`${l} || ${c} === null || ${c} === ""`),o.if(l,e._`${c} = ${(0,e.stringify)(i)}`)}return Jr.assignDefaults=function(e,t){const{properties:r,items:i}=e.schema;if("object"===t&&r)for(const t in r)n(e,t,r[t].default);else"array"===t&&Array.isArray(i)&&i.forEach((t,r)=>n(e,r,t.default))},Jr}(),o=function(){if(Qr)return Xr;Qr=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.validateKeywordUsage=Xr.validSchemaType=Xr.funcKeywordCode=Xr.macroKeywordCode=void 0;const e=$r(),t=Mr(),n=ti(),r=zr();function i(t){const{gen:n,data:r,it:i}=t;n.if(i.parentData,()=>n.assign(r,e._`${i.parentData}[${i.parentDataProperty}]`))}function o(t,n,r){if(void 0===r)throw new Error(`keyword "${n}" failed to compile`);return t.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,e.stringify)(r)})}return Xr.macroKeywordCode=function(t,n){const{gen:r,keyword:i,schema:s,parentSchema:a,it:u}=t,c=n.macro.call(u.self,s,a,u),l=o(r,i,c);!1!==u.opts.validateSchema&&u.self.validateSchema(c,!0);const f=r.name("valid");t.subschema({schema:c,schemaPath:e.nil,errSchemaPath:`${u.errSchemaPath}/${i}`,topSchemaRef:l,compositeRule:!0},f),t.pass(f,()=>t.error(!0))},Xr.funcKeywordCode=function(s,a){var u;const{gen:c,keyword:l,schema:f,parentSchema:d,$data:p,it:h}=s;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(h,a);const m=!p&&a.compile?a.compile.call(h.self,f,d,h):a.validate,g=o(c,l,m),v=c.let("valid");function y(r=(a.async?e._`await `:e.nil)){const i=h.opts.passContext?t.default.this:t.default.self,o=!("compile"in a&&!p||!1===a.schema);c.assign(v,e._`${r}${(0,n.callValidateCode)(s,g,i,o)}`,a.modifying)}function _(t){var n;c.if((0,e.not)(null!==(n=a.valid)&&void 0!==n?n:v),t)}s.block$data(v,function(){if(!1===a.errors)y(),a.modifying&&i(s),_(()=>s.error());else{const n=a.async?function(){const t=c.let("ruleErrs",null);return c.try(()=>y(e._`await `),n=>c.assign(v,!1).if(e._`${n} instanceof ${h.ValidationError}`,()=>c.assign(t,e._`${n}.errors`),()=>c.throw(n))),t}():function(){const t=e._`${g}.errors`;return c.assign(t,null),y(e.nil),t}();a.modifying&&i(s),_(()=>function(n,i){const{gen:o}=n;o.if(e._`Array.isArray(${i})`,()=>{o.assign(t.default.vErrors,e._`${t.default.vErrors} === null ? ${i} : ${t.default.vErrors}.concat(${i})`).assign(t.default.errors,e._`${t.default.vErrors}.length`),(0,r.extendErrors)(n)},()=>n.error())}(s,n))}}),s.ok(null!==(u=a.valid)&&void 0!==u?u:v)},Xr.validSchemaType=function(e,t,n=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e)},Xr.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}},Xr}(),s=function(){if(ni)return oi;ni=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.extendSubschemaMode=oi.extendSubschemaData=oi.getSubschema=void 0;const e=$r(),t=Fr();return oi.getSubschema=function(n,{keyword:r,schemaProp:i,schema:o,schemaPath:s,errSchemaPath:a,topSchemaRef:u}){if(void 0!==r&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==r){const o=n.schema[r];return void 0===i?{schema:o,schemaPath:e._`${n.schemaPath}${(0,e.getProperty)(r)}`,errSchemaPath:`${n.errSchemaPath}/${r}`}:{schema:o[i],schemaPath:e._`${n.schemaPath}${(0,e.getProperty)(r)}${(0,e.getProperty)(i)}`,errSchemaPath:`${n.errSchemaPath}/${r}/${(0,t.escapeFragment)(i)}`}}if(void 0!==o){if(void 0===s||void 0===a||void 0===u)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:s,topSchemaRef:u,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},oi.extendSubschemaData=function(n,r,{dataProp:i,dataPropType:o,data:s,dataTypes:a,propertyName:u}){if(void 0!==s&&void 0!==i)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=r;if(void 0!==i){const{errorPath:s,dataPathArr:a,opts:u}=r;l(c.let("data",e._`${r.data}${(0,e.getProperty)(i)}`,!0)),n.errorPath=e.str`${s}${(0,t.getErrorPath)(i,o,u.jsPropertySyntax)}`,n.parentDataProperty=e._`${i}`,n.dataPathArr=[...a,n.parentDataProperty]}function l(e){n.data=e,n.dataLevel=r.dataLevel+1,n.dataTypes=[],r.definedProperties=new Set,n.parentData=r.data,n.dataNames=[...r.dataNames,e]}void 0!==s&&(l(s instanceof e.Name?s:c.let("data",s,!0)),void 0!==u&&(n.propertyName=u)),a&&(n.dataTypes=a)},oi.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n},oi}(),a=$r(),u=Mr(),c=pi(),l=Fr(),f=zr();function d({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,a._`${u.default.data}, ${u.default.valCxt}`,r.$async,()=>{e.code(a._`"use strict"; ${p(n,i)}`),function(e,t){e.if(u.default.valCxt,()=>{e.var(u.default.instancePath,a._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,a._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,a._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,a._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,a._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{e.var(u.default.instancePath,a._`""`),e.var(u.default.parentData,a._`undefined`),e.var(u.default.parentDataProperty,a._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,a._`{}`)})}(e,i),e.code(o)}):e.func(t,a._`${u.default.data}, ${function(e){return a._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?a._`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}(i)}`,r.$async,()=>e.code(p(n,i)).code(o))}function p(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?a._`/*# sourceURL=${n} */`:a.nil}function h({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function m(e){return"boolean"!=typeof e.schema}function g(e){(0,l.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,l.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function v(e,n){if(e.opts.jtd)return _(e,[],!1,n);const r=(0,t.getSchemaTypes)(e.schema);_(e,r,!(0,t.coerceAndCheckDataType)(e,r),n)}function y({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(!0===i.$comment)e.code(a._`${u.default.self}.logger.log(${o})`);else if("function"==typeof i.$comment){const n=a.str`${r}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(a._`${u.default.self}.opts.$comment(${o}, ${n}, ${i}.schema)`)}}function _(e,t,i,o){const{gen:s,schema:c,data:f,allErrors:d,opts:p,self:h}=e,{RULES:m}=h;function g(l){(0,n.shouldUseGroup)(c,l)&&(l.type?(s.if((0,r.checkDataType)(l.type,f,p.strictNumbers)),b(e,l),1===t.length&&t[0]===l.type&&i&&(s.else(),(0,r.reportTypeError)(e)),s.endIf()):b(e,l),d||s.if(a._`${u.default.errors} === ${o||0}`))}!c.$ref||!p.ignoreKeywordsWithRef&&(0,l.schemaHasRulesButRef)(c,m)?(p.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{w(e.dataTypes,t)||x(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const n=[];for(const r of e.dataTypes)w(t,r)?n.push(r):t.includes("integer")&&"number"===r&&n.push("integer");e.dataTypes=n}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&x(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const i in r){const o=r[i];if("object"==typeof o&&(0,n.shouldUseRule)(e.schema,o)){const{type:n}=o.definition;n.length&&!n.some(e=>{return r=e,(n=t).includes(r)||"number"===r&&n.includes("integer");var n,r})&&x(e,`missing type "${n.join(",")}" for keyword "${i}"`)}}}(e,e.dataTypes))}(e,t),s.block(()=>{for(const e of m.rules)g(e);g(m.post)})):s.block(()=>k(e,"$ref",m.all.$ref.definition))}function b(e,t){const{gen:r,schema:o,opts:{useDefaults:s}}=e;s&&(0,i.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,n.shouldUseRule)(o,r)&&k(e,r.keyword,r.definition,t.type)})}function w(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function x(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,l.checkStrictMode)(e,t,e.opts.strictTypes)}br.validateFunctionCode=function(t){m(t)&&(g(t),h(t))?function(e){const{schema:t,opts:n,gen:r}=e;d(e,()=>{n.$comment&&t.$comment&&y(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,l.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(u.default.vErrors,null),r.let(u.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",a._`${n}.evaluated`),t.if(a._`${e.evaluated}.dynamicProps`,()=>t.assign(a._`${e.evaluated}.props`,a._`undefined`)),t.if(a._`${e.evaluated}.dynamicItems`,()=>t.assign(a._`${e.evaluated}.items`,a._`undefined`))}(e),v(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if(a._`${u.default.errors} === 0`,()=>t.return(u.default.data),()=>t.throw(a._`new ${i}(${u.default.vErrors})`)):(t.assign(a._`${r}.errors`,u.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof a.Name&&e.assign(a._`${t}.props`,n),r instanceof a.Name&&e.assign(a._`${t}.items`,r)}(e),t.return(a._`${u.default.errors} === 0`))}(e)})}(t):d(t,()=>(0,e.topBoolOrEmptySchema)(t))};class E{constructor(e,t,n){if((0,o.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,l.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",C(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,n){this.failResult((0,a.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,a.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(a._`${t} !== undefined && (${(0,a.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=a.nil){this.gen.block(()=>{this.check$data(e,n),t()})}check$data(e=a.nil,t=a.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:i,def:o}=this;n.if((0,a.or)(a._`${r} === undefined`,t)),e!==a.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==a.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:i,it:o}=this;return(0,a.or)(function(){if(n.length){if(!(t instanceof a.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return a._`${(0,r.checkDataTypes)(e,t,o.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}(),function(){if(i.validateSchema){const n=e.scopeValue("validate$data",{ref:i.validateSchema});return a._`!${n}(${t})`}return a.nil}())}subschema(t,n){const r=(0,s.getSubschema)(this.it,t);(0,s.extendSubschemaData)(r,this.it,t),(0,s.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return function(t,n){m(t)&&(g(t),h(t))?function(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&y(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,c.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",u.default.errors);v(e,o),r.var(t,a._`${o} === ${u.default.errors}`)}(t,n):(0,e.boolOrEmptySchema)(t,n)}(i,n),i}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=l.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=l.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,()=>this.mergeEvaluated(e,a.Name)),!0}}function k(e,t,n,r){const i=new E(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,o.funcKeywordCode)(i,n):"macro"in n?(0,o.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,o.funcKeywordCode)(i,n)}br.KeywordCxt=E;const A=/^\/(?:[^~]|~0|~1)*$/,D=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function C(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(""===e)return u.default.rootData;if("/"===e[0]){if(!A.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=u.default.rootData}else{const s=D.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(i=s[2],"#"===i){if(a>=t)throw new Error(f("property/index",a));return r[t-a]}if(a>t)throw new Error(f("data",a));if(o=n[t-a],!i)return o}let s=o;const c=i.split("/");for(const e of c)e&&(o=a._`${o}${(0,a.getProperty)((0,l.unescapeJsonPointer)(e))}`,s=a._`${s} && ${o}`);return s;function f(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}return br.getData=C,br}var mi,gi={};function vi(){if(mi)return gi;mi=1,Object.defineProperty(gi,"__esModule",{value:!0});class e extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}return gi.default=e,gi}var yi,_i={};function bi(){if(yi)return _i;yi=1,Object.defineProperty(_i,"__esModule",{value:!0});const e=pi();class t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,e.resolveUrl)(t,n,r),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(t,this.missingRef))}}return _i.default=t,_i}var wi,xi={};function Ei(){if(wi)return xi;wi=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.resolveSchema=xi.getCompilingSchema=xi.resolveRef=xi.compileSchema=xi.SchemaEnv=void 0;const e=$r(),t=vi(),n=Mr(),r=pi(),i=Fr(),o=hi();class s{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,r.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function a(i){const s=c.call(this,i);if(s)return s;const a=(0,r.getFullPath)(this.opts.uriResolver,i.root.baseId),{es5:u,lines:l}=this.opts.code,{ownProperties:f}=this.opts,d=new e.CodeGen(this.scope,{es5:u,lines:l,ownProperties:f});let p;i.$async&&(p=d.scopeValue("Error",{ref:t.default,code:e._`require("ajv/dist/runtime/validation_error").default`}));const h=d.scopeName("validate");i.validateName=h;const m={gen:d,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:d.scopeValue("schema",!0===this.opts.code.source?{ref:i.schema,code:(0,e.stringify)(i.schema)}:{ref:i.schema}),validateName:h,ValidationError:p,schema:i.schema,schemaEnv:i,rootId:a,baseId:i.baseId||a,schemaPath:e.nil,errSchemaPath:i.schemaPath||(this.opts.jtd?"":"#"),errorPath:e._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(i),(0,o.validateFunctionCode)(m),d.optimize(this.opts.code.optimize);const t=d.toString();g=`${d.scopeRefs(n.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,i));const r=new Function(`${n.default.self}`,`${n.default.scope}`,g)(this,this.scope.get());if(this.scope.value(h,{ref:r}),r.errors=null,r.schema=i.schema,r.schemaEnv=i,i.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:h,validateCode:t,scopeValues:d._values}),this.opts.unevaluated){const{props:t,items:n}=m;r.evaluated={props:t instanceof e.Name?void 0:t,items:n instanceof e.Name?void 0:n,dynamicProps:t instanceof e.Name,dynamicItems:n instanceof e.Name},r.source&&(r.source.evaluated=(0,e.stringify)(r.evaluated))}return i.validate=r,i}catch(e){throw delete i.validate,delete i.validateName,g&&this.logger.error("Error compiling schema, function code:",g),e}finally{this._compilations.delete(i)}}function u(e){return(0,r.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:a.call(this,e)}function c(e){for(const t of this._compilations)if(l(t,e))return t}function l(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||d.call(this,e,t)}function d(e,t){const n=this.opts.uriResolver.parse(t),i=(0,r._getFullPath)(this.opts.uriResolver,n);let o=(0,r.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&i===o)return h.call(this,n,e);const u=(0,r.normalizeId)(i),c=this.refs[u]||this.schemas[u];if("string"==typeof c){const t=d.call(this,e,c);if("object"!=typeof(null==t?void 0:t.schema))return;return h.call(this,n,t)}if("object"==typeof(null==c?void 0:c.schema)){if(c.validate||a.call(this,c),u===(0,r.normalizeId)(t)){const{schema:t}=c,{schemaId:n}=this.opts,i=t[n];return i&&(o=(0,r.resolveUrl)(this.opts.uriResolver,o,i)),new s({schema:t,schemaId:n,root:e,baseId:o})}return h.call(this,n,c)}}xi.SchemaEnv=s,xi.compileSchema=a,xi.resolveRef=function(e,t,n){var i;n=(0,r.resolveUrl)(this.opts.uriResolver,t,n);const o=e.refs[n];if(o)return o;let a=f.call(this,e,n);if(void 0===a){const r=null===(i=e.localRefs)||void 0===i?void 0:i[n],{schemaId:o}=this.opts;r&&(a=new s({schema:r,schemaId:o,root:e,baseId:t}))}return void 0!==a?e.refs[n]=u.call(this,a):void 0},xi.getCompilingSchema=c,xi.resolveSchema=d;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,{baseId:t,schema:n,root:o}){var a;if("/"!==(null===(a=e.fragment)||void 0===a?void 0:a[0]))return;for(const o of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,i.unescapeFragment)(o)];if(void 0===e)return;const s="object"==typeof(n=e)&&n[this.opts.schemaId];!p.has(o)&&s&&(t=(0,r.resolveUrl)(this.opts.uriResolver,t,s))}let u;if("boolean"!=typeof n&&n.$ref&&!(0,i.schemaHasRulesButRef)(n,this.RULES)){const e=(0,r.resolveUrl)(this.opts.uriResolver,t,n.$ref);u=d.call(this,o,e)}const{schemaId:c}=this.opts;return u=u||new s({schema:n,schemaId:c,root:o,baseId:t}),u.schema!==u.root.schema?u:void 0}return xi}var ki,Ai,Di,Ci,Oi,Si,$i,Ti={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},Pi={},Fi={exports:{}};function Ri(){if(Ai)return ki;Ai=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function n(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),48!==n){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const r=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i(e){return e.length=0,!0}function o(e,t,r){if(e.length){const i=n(e);if(""===i)return r.error=!0,!1;t.push(i),e.length=0}return!0}function s(e){if(function(e){let t=0;for(let n=0;n<e.length;n++)":"===e[n]&&t++;return t}(e)<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},s=[],a=[];let u=!1,c=!1,l=o;for(let n=0;n<e.length;n++){const o=e[n];if("["!==o&&"]"!==o)if(":"!==o)if("%"===o){if(!l(a,s,r))break;l=i}else a.push(o);else{if(!0===u&&(c=!0),!l(a,s,r))break;if(++t>7){r.error=!0;break}n>0&&":"===e[n-1]&&(u=!0),s.push(":")}}return a.length&&(l===i?r.zone=a.join(""):c?s.push(a.join("")):s.push(n(a))),r.address=s.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,n=t.address;return t.zone&&(e+="%"+t.zone,n+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:n}}}return ki={nonSimpleDomain:r,recomposeAuthority:function(e){const n=[];if(void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host){let r=unescape(e.host);if(!t(r)){const t=s(r);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}n.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0},normalizeComponentEncoding:function(e,t){const n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},removeDotSegments:function(e){let t=e;const n=[];let r=-1,i=0;for(;i=t.length;){if(1===i){if("."===t)break;if("/"===t){n.push("/");break}n.push(t);break}if(2===i){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){n.push("/");break}}else if(3===i&&"/.."===t){0!==n.length&&n.pop(),n.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==n.length&&n.pop();continue}}if(-1===(r=t.indexOf("/",1))){n.push(t);break}n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")},isIPv4:t,isUUID:e,normalizeIPv6:s,stringArrayToHexStripped:n},ki}function Ni(){return $i||($i=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=hi();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=$r();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=vi(),i=bi(),o=Vr(),s=Ei(),a=$r(),u=pi(),c=Wr(),l=Fr(),f=Ti,d=function(){if(Si)return Pi;Si=1,Object.defineProperty(Pi,"__esModule",{value:!0});const e=function(){if(Oi)return Fi.exports;Oi=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:n,normalizeComponentEncoding:r,isIPv4:i,nonSimpleDomain:o}=Ri(),{SCHEMES:s,getSchemeHandler:a}=function(){if(Ci)return Di;Ci=1;const{isUUID:e}=Ri(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,n=["http","https","ws","wss","urn","urn:uuid"];function r(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&!(3!==e.scheme.length||"w"!==e.scheme[0]&&"W"!==e.scheme[0]||"s"!==e.scheme[1]&&"S"!==e.scheme[1]||"s"!==e.scheme[2]&&"S"!==e.scheme[2])}function i(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function o(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const s={scheme:"http",domainHost:!0,parse:i,serialize:o},a={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=r(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(r(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}},u={scheme:"urn",parse:function(e,n){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(t);if(r){const t=n.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const i=f(`${t}:${n.nid||e.nid}`);e.path=void 0,i&&(e=i.parse(e,n))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),i=f(`${n}:${t.nid||r}`);i&&(e=i.serialize(e,t));const o=e,s=e.nss;return o.path=`${r||t.nid}:${s}`,t.skipEscape=!0,o},skipNormalize:!0},c={scheme:"urn:uuid",parse:function(t,n){const r=t;return r.uuid=r.nss,r.nss=void 0,n.tolerant||r.uuid&&e(r.uuid)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0},l={http:s,https:{scheme:"https",domainHost:s.domainHost,parse:i,serialize:o},ws:a,wss:{scheme:"wss",domainHost:a.domainHost,parse:a.parse,serialize:a.serialize},urn:u,"urn:uuid":c};function f(e){return e&&(l[e]||l[e.toLowerCase()])||void 0}return Object.setPrototypeOf(l,null),Di={wsIsSecure:r,SCHEMES:l,isValidSchemeName:function(e){return-1!==n.indexOf(e)},getSchemeHandler:f}}();function u(e,n,r,i){const o={};return i||(e=f(c(e,r),r),n=f(c(n,r),r)),!(r=r||{}).tolerant&&n.scheme?(o.scheme=n.scheme,o.userinfo=n.userinfo,o.host=n.host,o.port=n.port,o.path=t(n.path||""),o.query=n.query):(void 0!==n.userinfo||void 0!==n.host||void 0!==n.port?(o.userinfo=n.userinfo,o.host=n.host,o.port=n.port,o.path=t(n.path||""),o.query=n.query):(n.path?("/"===n.path[0]?o.path=t(n.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+n.path:o.path=n.path:o.path="/"+n.path,o.path=t(o.path)),o.query=n.query):(o.path=e.path,void 0!==n.query?o.query=n.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=n.fragment,o}function c(e,r){const i={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},o=Object.assign({},r),s=[],u=a(o.scheme||i.scheme);u&&u.serialize&&u.serialize(i,o),void 0!==i.path&&(o.skipEscape?i.path=unescape(i.path):(i.path=escape(i.path),void 0!==i.scheme&&(i.path=i.path.split("%3A").join(":")))),"suffix"!==o.reference&&i.scheme&&s.push(i.scheme,":");const c=n(i);if(void 0!==c&&("suffix"!==o.reference&&s.push("//"),s.push(c),i.path&&"/"!==i.path[0]&&s.push("/")),void 0!==i.path){let e=i.path;o.absolutePath||u&&u.absolutePath||(e=t(e)),void 0===c&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),s.push(e)}return void 0!==i.query&&s.push("?",i.query),void 0!==i.fragment&&s.push("#",i.fragment),s.join("")}const l=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(t,n){const r=Object.assign({},n),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let u=!1;"suffix"===r.reference&&(t=r.scheme?r.scheme+":"+t:"//"+t);const c=t.match(l);if(c){if(s.scheme=c[1],s.userinfo=c[3],s.host=c[4],s.port=parseInt(c[5],10),s.path=c[6]||"",s.query=c[7],s.fragment=c[8],isNaN(s.port)&&(s.port=c[5]),s.host)if(!1===i(s.host)){const t=e(s.host);s.host=t.host.toLowerCase(),u=t.isIPV6}else u=!0;void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||void 0!==s.query||s.path?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");const n=a(r.scheme||s.scheme);if(!(r.unicodeSupport||n&&n.unicodeSupport)&&s.host&&(r.domainHost||n&&n.domainHost)&&!1===u&&o(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(e){s.error=s.error||"Host's domain name can not be converted to ASCII: "+e}(!n||n&&!n.skipNormalize)&&(-1!==t.indexOf("%")&&(void 0!==s.scheme&&(s.scheme=unescape(s.scheme)),void 0!==s.host&&(s.host=unescape(s.host))),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),n&&n.parse&&n.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}const d={SCHEMES:s,normalize:function(e,t){return"string"==typeof e?e=c(f(e,t),t):"object"==typeof e&&(e=f(c(e,t),t)),e},resolve:function(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},i=u(f(e,r),f(t,r),r,!0);return r.skipEscape=!0,c(i,r)},resolveComponent:u,equal:function(e,t,n){return"string"==typeof e?(e=unescape(e),e=c(r(f(e,n),!0),{...n,skipEscape:!0})):"object"==typeof e&&(e=c(r(e,!0),{...n,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=c(r(f(t,n),!0),{...n,skipEscape:!0})):"object"==typeof t&&(t=c(r(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:c,parse:f};return Fi.exports=d,Fi.exports.default=d,Fi.exports.fastUri=d,Fi.exports}();return e.code='require("ajv/dist/runtime/uri").default',Pi.default=e,Pi}(),p=(e,t)=>new RegExp(e,t);p.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function y(e){var t,n,r,i,o,s,a,u,c,l,f,h,m,g,v,y,_,b,w,x,E,k,A,D,C;const O=e.strict,S=null===(t=e.code)||void 0===t?void 0:t.optimize,$=!0===S||void 0===S?1:S||0,T=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:p,P=null!==(i=e.uriResolver)&&void 0!==i?i:d.default;return{strictSchema:null===(s=null!==(o=e.strictSchema)&&void 0!==o?o:O)||void 0===s||s,strictNumbers:null===(u=null!==(a=e.strictNumbers)&&void 0!==a?a:O)||void 0===u||u,strictTypes:null!==(l=null!==(c=e.strictTypes)&&void 0!==c?c:O)&&void 0!==l?l:"log",strictTuples:null!==(h=null!==(f=e.strictTuples)&&void 0!==f?f:O)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(m=e.strictRequired)&&void 0!==m?m:O)&&void 0!==g&&g,code:e.code?{...e.code,optimize:$,regExp:T}:{optimize:$,regExp:T},loopRequired:null!==(v=e.loopRequired)&&void 0!==v?v:200,loopEnum:null!==(y=e.loopEnum)&&void 0!==y?y:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(w=e.inlineRefs)||void 0===w||w,schemaId:null!==(x=e.schemaId)&&void 0!==x?x:"$id",addUsedSchema:null===(E=e.addUsedSchema)||void 0===E||E,validateSchema:null===(k=e.validateSchema)||void 0===k||k,validateFormats:null===(A=e.validateFormats)||void 0===A||A,unicodeRegExp:null===(D=e.unicodeRegExp)||void 0===D||D,int32range:null===(C=e.int32range)||void 0===C||C,uriResolver:P}}class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...y(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:t,lines:n}),this.logger=function(e){if(!1===e)return D;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,o.getRules)(),b.call(this,g,e,"NOT SUPPORTED"),b.call(this,v,e,"DEPRECATED","warn"),this._metaOpts=A.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&k.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=f;"id"===n&&(r={...f},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await o.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||s.call(this,n)}async function o(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function s(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof i.default))throw t;return a.call(this,t),await u.call(this,t.missingSchema),s.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function u(e){const n=await c.call(this,e);this.refs[e]||await o.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let i;if("object"==typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=w.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new s.SchemaEnv({schema:{},schemaId:n});if(t=s.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=w.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,u.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(O.call(this,n,t),!t)return(0,l.eachItem)(n,e=>S.call(this,e)),this;T.call(this,t);const r={...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)};return(0,l.eachItem)(n,0===r.type.length?e=>S.call(this,e,r):e=>r.type.forEach(t=>S.call(this,e,r,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex(t=>t.keyword===e);t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map(e=>`${n}${e.instancePath} ${e.message}`).reduce((e,n)=>e+t+n):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=i[e];r&&o&&(i[e]=F(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;const{schemaId:a}=this.opts;if("object"==typeof e)o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(void 0!==c)return c;n=(0,u.normalizeId)(o||n);const l=u.getSchemaRefs.call(this,e,n);return c=new s.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:l}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),r&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):s.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,e)}finally{this.opts=t}}}function b(e,t,n,r="error"){for(const i in e){const o=i;o in t&&this.logger[r](`${n}: option ${i}. ${e[o]}`)}}function w(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function x(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function E(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function A(){const e={...this.opts};for(const t of h)delete e[t];return e}_.ValidationError=r.default,_.MissingRefError=i.default,e.default=_;const D={log(){},warn(){},error(){}},C=/^[a-z_$][a-z0-9_$:-]*$/i;function O(e,t){const{RULES:n}=this;if((0,l.eachItem)(e,e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!C.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function S(e,t,n){var r;const i=null==t?void 0:t.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=i?o.post:o.rules.find(({type:e})=>e===n);if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)}};t.before?$.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(r=t.implements)||void 0===r||r.forEach(e=>this.addKeyword(e))}function $(e,t,n){const r=e.rules.findIndex(e=>e.keyword===n);r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function T(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=F(t)),e.validateSchema=this.compile(t,!0))}const P={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function F(e){return{anyOf:[e,P]}}}(_r)),_r}var Li,Ii,Mi,zi={},Bi={},ji={},Ui={};var Vi,qi,Hi,Ki,Zi={},Wi={},Gi={},Yi={},Qi={};var Ji,Xi,eo,to={},no={},ro={};var io,oo,so,ao={},uo={},co={};function lo(){if(oo)return co;oo=1,Object.defineProperty(co,"__esModule",{value:!0});const e=ai();return e.code='require("ajv/dist/runtime/equal").default',co.default=e,co}function fo(){if(so)return uo;so=1,Object.defineProperty(uo,"__esModule",{value:!0});const e=Wr(),t=$r(),n=Fr(),r=lo(),i={message:({params:{i:e,j:n}})=>t.str`must NOT have duplicate items (items ## ${n} and ${e} are identical)`,params:({params:{i:e,j:n}})=>t._`{i: ${e}, j: ${n}}`},o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:i,code(i){const{gen:o,data:s,$data:a,schema:u,parentSchema:c,schemaCode:l,it:f}=i;if(!a&&!u)return;const d=o.let("valid"),p=c.items?(0,e.getSchemaTypes)(c.items):[];function h(n,r){const a=o.name("item"),u=(0,e.checkDataTypes)(p,a,f.opts.strictNumbers,e.DataType.Wrong),c=o.const("indices",t._`{}`);o.for(t._`;${n}--;`,()=>{o.let(a,t._`${s}[${n}]`),o.if(u,t._`continue`),p.length>1&&o.if(t._`typeof ${a} == "string"`,t._`${a} += "_"`),o.if(t._`typeof ${c}[${a}] == "number"`,()=>{o.assign(r,t._`${c}[${a}]`),i.error(),o.assign(d,!1).break()}).code(t._`${c}[${a}] = ${n}`)})}function m(e,a){const u=(0,n.useFunc)(o,r.default),c=o.name("outer");o.label(c).for(t._`;${e}--;`,()=>o.for(t._`${a} = ${e}; ${a}--;`,()=>o.if(t._`${u}(${s}[${e}], ${s}[${a}])`,()=>{i.error(),o.assign(d,!1).break(c)})))}i.block$data(d,function(){const e=o.let("i",t._`${s}.length`),n=o.let("j");i.setParams({i:e,j:n}),o.assign(d,!0),o.if(t._`${e} > 1`,()=>(p.length>0&&!p.some(e=>"object"===e||"array"===e)?h:m)(e,n))},t._`${l} === false`),i.ok(d)}};return uo.default=o,uo}var po,ho,mo,go={},vo={};function yo(){if(mo)return Zi;mo=1,Object.defineProperty(Zi,"__esModule",{value:!0});const e=function(){if(Vi)return Wi;Vi=1,Object.defineProperty(Wi,"__esModule",{value:!0});const e=$r(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:t,schemaCode:r})=>e.str`must be ${n[t].okStr} ${r}`,params:({keyword:t,schemaCode:r})=>e._`{comparison: ${n[t].okStr}, limit: ${r}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(t){const{keyword:r,data:i,schemaCode:o}=t;t.fail$data(e._`${i} ${n[r].fail} ${o} || isNaN(${i})`)}};return Wi.default=i,Wi}(),t=function(){if(qi)return Gi;qi=1,Object.defineProperty(Gi,"__esModule",{value:!0});const e=$r(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:t})=>e.str`must be multiple of ${t}`,params:({schemaCode:t})=>e._`{multipleOf: ${t}}`},code(t){const{gen:n,data:r,schemaCode:i,it:o}=t,s=o.opts.multipleOfPrecision,a=n.let("res"),u=s?e._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:e._`${a} !== parseInt(${a})`;t.fail$data(e._`(${i} === 0 || (${a} = ${r}/${i}, ${u}))`)}};return Gi.default=t,Gi}(),n=function(){if(Ki)return Yi;Ki=1,Object.defineProperty(Yi,"__esModule",{value:!0});const e=$r(),t=Fr(),n=function(){if(Hi)return Qi;function e(e){const t=e.length;let n,r=0,i=0;for(;i<t;)r++,n=e.charCodeAt(i++),n>=55296&&n<=56319&&i<t&&(n=e.charCodeAt(i),56320==(64512&n)&&i++);return r}return Hi=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Qi}(),r={message({keyword:t,schemaCode:n}){const r="maxLength"===t?"more":"fewer";return e.str`must NOT have ${r} than ${n} characters`},params:({schemaCode:t})=>e._`{limit: ${t}}`},i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:r,code(r){const{keyword:i,data:o,schemaCode:s,it:a}=r,u="maxLength"===i?e.operators.GT:e.operators.LT,c=!1===a.opts.unicode?e._`${o}.length`:e._`${(0,t.useFunc)(r.gen,n.default)}(${o})`;r.fail$data(e._`${c} ${u} ${s}`)}};return Yi.default=i,Yi}(),r=function(){if(Ji)return to;Ji=1,Object.defineProperty(to,"__esModule",{value:!0});const e=ti(),t=$r(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>t.str`must match pattern "${e}"`,params:({schemaCode:e})=>t._`{pattern: ${e}}`},code(n){const{data:r,$data:i,schema:o,schemaCode:s,it:a}=n,u=a.opts.unicodeRegExp?"u":"",c=i?t._`(new RegExp(${s}, ${u}))`:(0,e.usePattern)(n,o);n.fail$data(t._`!${c}.test(${r})`)}};return to.default=n,to}(),i=function(){if(Xi)return no;Xi=1,Object.defineProperty(no,"__esModule",{value:!0});const e=$r(),t={message({keyword:t,schemaCode:n}){const r="maxProperties"===t?"more":"fewer";return e.str`must NOT have ${r} than ${n} properties`},params:({schemaCode:t})=>e._`{limit: ${t}}`},n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:t,code(t){const{keyword:n,data:r,schemaCode:i}=t,o="maxProperties"===n?e.operators.GT:e.operators.LT;t.fail$data(e._`Object.keys(${r}).length ${o} ${i}`)}};return no.default=n,no}(),o=function(){if(eo)return ro;eo=1,Object.defineProperty(ro,"__esModule",{value:!0});const e=ti(),t=$r(),n=Fr(),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>t.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>t._`{missingProperty: ${e}}`},code(r){const{gen:i,schema:o,schemaCode:s,data:a,$data:u,it:c}=r,{opts:l}=c;if(!u&&0===o.length)return;const f=o.length>=l.loopRequired;if(c.allErrors?function(){if(f||u)r.block$data(t.nil,d);else for(const t of o)(0,e.checkReportMissingProp)(r,t)}():function(){const n=i.let("missing");if(f||u){const o=i.let("valid",!0);r.block$data(o,()=>function(n,o){r.setParams({missingProperty:n}),i.forOf(n,s,()=>{i.assign(o,(0,e.propertyInData)(i,a,n,l.ownProperties)),i.if((0,t.not)(o),()=>{r.error(),i.break()})},t.nil)}(n,o)),r.ok(o)}else i.if((0,e.checkMissingProp)(r,o,n)),(0,e.reportMissingProp)(r,n),i.else()}(),l.strictRequired){const e=r.parentSchema.properties,{definedProperties:t}=r.it;for(const r of o)if(void 0===(null==e?void 0:e[r])&&!t.has(r)){const e=`required property "${r}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,n.checkStrictMode)(c,e,c.opts.strictRequired)}}function d(){i.forOf("prop",s,t=>{r.setParams({missingProperty:t}),i.if((0,e.noPropertyInData)(i,a,t,l.ownProperties),()=>r.error())})}}};return ro.default=r,ro}(),s=function(){if(io)return ao;io=1,Object.defineProperty(ao,"__esModule",{value:!0});const e=$r(),t={message({keyword:t,schemaCode:n}){const r="maxItems"===t?"more":"fewer";return e.str`must NOT have ${r} than ${n} items`},params:({schemaCode:t})=>e._`{limit: ${t}}`},n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:t,code(t){const{keyword:n,data:r,schemaCode:i}=t,o="maxItems"===n?e.operators.GT:e.operators.LT;t.fail$data(e._`${r}.length ${o} ${i}`)}};return ao.default=n,ao}(),a=fo(),u=function(){if(po)return go;po=1,Object.defineProperty(go,"__esModule",{value:!0});const e=$r(),t=Fr(),n=lo(),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:t})=>e._`{allowedValue: ${t}}`},code(r){const{gen:i,data:o,$data:s,schemaCode:a,schema:u}=r;s||u&&"object"==typeof u?r.fail$data(e._`!${(0,t.useFunc)(i,n.default)}(${o}, ${a})`):r.fail(e._`${u} !== ${o}`)}};return go.default=r,go}(),c=function(){if(ho)return vo;ho=1,Object.defineProperty(vo,"__esModule",{value:!0});const e=$r(),t=Fr(),n=lo(),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:t})=>e._`{allowedValues: ${t}}`},code(r){const{gen:i,data:o,$data:s,schema:a,schemaCode:u,it:c}=r;if(!s&&0===a.length)throw new Error("enum must have non-empty array");const l=a.length>=c.opts.loopEnum;let f;const d=()=>null!=f?f:f=(0,t.useFunc)(i,n.default);let p;if(l||s)p=i.let("valid"),r.block$data(p,function(){i.assign(p,!1),i.forOf("v",u,t=>i.if(e._`${d()}(${o}, ${t})`,()=>i.assign(p,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");const t=i.const("vSchema",u);p=(0,e.or)(...a.map((n,r)=>function(t,n){const r=a[n];return"object"==typeof r&&null!==r?e._`${d()}(${o}, ${t}[${n}])`:e._`${o} === ${r}`}(t,r)))}r.pass(p)}};return vo.default=r,vo}(),l=[e.default,t.default,n.default,r.default,i.default,o.default,s.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,c.default];return Zi.default=l,Zi}var _o,bo={},wo={};function xo(){if(_o)return wo;_o=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.validateAdditionalItems=void 0;const e=$r(),t=Fr(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:t}})=>e.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>e._`{limit: ${t}}`},code(e){const{parentSchema:n,it:i}=e,{items:o}=n;Array.isArray(o)?r(e,o):(0,t.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas')}};function r(n,r){const{gen:i,schema:o,data:s,keyword:a,it:u}=n;u.items=!0;const c=i.const("len",e._`${s}.length`);if(!1===o)n.setParams({len:r.length}),n.pass(e._`${c} <= ${r.length}`);else if("object"==typeof o&&!(0,t.alwaysValidSchema)(u,o)){const o=i.var("valid",e._`${c} <= ${r.length}`);i.if((0,e.not)(o),()=>function(o){i.forRange("i",r.length,c,r=>{n.subschema({keyword:a,dataProp:r,dataPropType:t.Type.Num},o),u.allErrors||i.if((0,e.not)(o),()=>i.break())})}(o)),n.ok(o)}}return wo.validateAdditionalItems=r,wo.default=n,wo}var Eo,ko,Ao={},Do={};function Co(){if(Eo)return Do;Eo=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.validateTuple=void 0;const e=$r(),t=Fr(),n=ti(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:r,it:o}=e;if(Array.isArray(r))return i(e,"additionalItems",r);o.items=!0,(0,t.alwaysValidSchema)(o,r)||e.ok((0,n.validateArray)(e))}};function i(n,r,i=n.schema){const{gen:o,parentSchema:s,data:a,keyword:u,it:c}=n;!function(e){const{opts:n,errSchemaPath:o}=c,s=i.length,a=s===e.minItems&&(s===e.maxItems||!1===e[r]);if(n.strictTuples&&!a){const e=`"${u}" is ${s}-tuple, but minItems or maxItems/${r} are not specified or different at path "${o}"`;(0,t.checkStrictMode)(c,e,n.strictTuples)}}(s),c.opts.unevaluated&&i.length&&!0!==c.items&&(c.items=t.mergeEvaluated.items(o,i.length,c.items));const l=o.name("valid"),f=o.const("len",e._`${a}.length`);i.forEach((r,i)=>{(0,t.alwaysValidSchema)(c,r)||(o.if(e._`${f} > ${i}`,()=>n.subschema({keyword:u,schemaProp:i,dataProp:i},l)),n.ok(l))})}return Do.validateTuple=i,Do.default=r,Do}var Oo,So,$o={},To={};var Po,Fo={};var Ro,No,Lo={},Io={};function Mo(){if(No)return Io;No=1,Object.defineProperty(Io,"__esModule",{value:!0});const e=ti(),t=$r(),n=Mr(),r=Fr(),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>t._`{additionalProperty: ${e.additionalProperty}}`},code(i){const{gen:o,schema:s,parentSchema:a,data:u,errsCount:c,it:l}=i;if(!c)throw new Error("ajv implementation error");const{allErrors:f,opts:d}=l;if(l.props=!0,"all"!==d.removeAdditional&&(0,r.alwaysValidSchema)(l,s))return;const p=(0,e.allSchemaProperties)(a.properties),h=(0,e.allSchemaProperties)(a.patternProperties);function m(e){o.code(t._`delete ${u}[${e}]`)}function g(e){if("all"===d.removeAdditional||d.removeAdditional&&!1===s)m(e);else{if(!1===s)return i.setParams({additionalProperty:e}),i.error(),void(f||o.break());if("object"==typeof s&&!(0,r.alwaysValidSchema)(l,s)){const n=o.name("valid");"failing"===d.removeAdditional?(v(e,n,!1),o.if((0,t.not)(n),()=>{i.reset(),m(e)})):(v(e,n),f||o.if((0,t.not)(n),()=>o.break()))}}}function v(e,t,n){const o={keyword:"additionalProperties",dataProp:e,dataPropType:r.Type.Str};!1===n&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),i.subschema(o,t)}o.forIn("key",u,n=>{p.length||h.length?o.if(function(n){let s;if(p.length>8){const t=(0,r.schemaRefOrVal)(l,a.properties,"properties");s=(0,e.isOwnProperty)(o,t,n)}else s=p.length?(0,t.or)(...p.map(e=>t._`${n} === ${e}`)):t.nil;return h.length&&(s=(0,t.or)(s,...h.map(r=>t._`${(0,e.usePattern)(i,r)}.test(${n})`))),(0,t.not)(s)}(n),()=>g(n)):g(n)}),i.ok(t._`${c} === ${n.default.errors}`)}};return Io.default=i,Io}var zo,Bo,jo,Uo,Vo,qo,Ho,Ko,Zo,Wo={},Go={},Yo={},Qo={},Jo={},Xo={},es={},ts={};function ns(){if(Zo)return bo;Zo=1,Object.defineProperty(bo,"__esModule",{value:!0});const e=xo(),t=function(){if(ko)return Ao;ko=1,Object.defineProperty(Ao,"__esModule",{value:!0});const e=Co(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,e.validateTuple)(t,"items")};return Ao.default=t,Ao}(),n=Co(),r=function(){if(Oo)return $o;Oo=1,Object.defineProperty($o,"__esModule",{value:!0});const e=$r(),t=Fr(),n=ti(),r=xo(),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:t}})=>e.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>e._`{limit: ${t}}`},code(e){const{schema:i,parentSchema:o,it:s}=e,{prefixItems:a}=o;s.items=!0,(0,t.alwaysValidSchema)(s,i)||(a?(0,r.validateAdditionalItems)(e,a):e.ok((0,n.validateArray)(e)))}};return $o.default=i,$o}(),i=function(){if(So)return To;So=1,Object.defineProperty(To,"__esModule",{value:!0});const e=$r(),t=Fr(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:t,max:n}})=>void 0===n?e.str`must contain at least ${t} valid item(s)`:e.str`must contain at least ${t} and no more than ${n} valid item(s)`,params:({params:{min:t,max:n}})=>void 0===n?e._`{minContains: ${t}}`:e._`{minContains: ${t}, maxContains: ${n}}`},code(n){const{gen:r,schema:i,parentSchema:o,data:s,it:a}=n;let u,c;const{minContains:l,maxContains:f}=o;a.opts.next?(u=void 0===l?1:l,c=f):u=1;const d=r.const("len",e._`${s}.length`);if(n.setParams({min:u,max:c}),void 0===c&&0===u)return void(0,t.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&u>c)return(0,t.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void n.fail();if((0,t.alwaysValidSchema)(a,i)){let t=e._`${d} >= ${u}`;return void 0!==c&&(t=e._`${t} && ${d} <= ${c}`),void n.pass(t)}a.items=!0;const p=r.name("valid");function h(){const t=r.name("_valid"),n=r.let("count",0);m(t,()=>r.if(t,()=>function(t){r.code(e._`${t}++`),void 0===c?r.if(e._`${t} >= ${u}`,()=>r.assign(p,!0).break()):(r.if(e._`${t} > ${c}`,()=>r.assign(p,!1).break()),1===u?r.assign(p,!0):r.if(e._`${t} >= ${u}`,()=>r.assign(p,!0)))}(n)))}function m(e,i){r.forRange("i",0,d,r=>{n.subschema({keyword:"contains",dataProp:r,dataPropType:t.Type.Num,compositeRule:!0},e),i()})}void 0===c&&1===u?m(p,()=>r.if(p,()=>r.break())):0===u?(r.let(p,!0),void 0!==c&&r.if(e._`${s}.length > 0`,h)):(r.let(p,!1),h()),n.result(p,()=>n.reset())}};return To.default=n,To}(),o=(Po||(Po=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=$r(),n=Fr(),r=ti();e.error={message:({params:{property:e,depsCount:n,deps:r}})=>{const i=1===n?"property":"properties";return t.str`must have ${i} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:n,deps:r,missingProperty:i}})=>t._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${n},
    deps: ${r}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);o(e,t),s(e,n)}};function o(e,n=e.schema){const{gen:i,data:o,it:s}=e;if(0===Object.keys(n).length)return;const a=i.let("missing");for(const u in n){const c=n[u];if(0===c.length)continue;const l=(0,r.propertyInData)(i,o,u,s.opts.ownProperties);e.setParams({property:u,depsCount:c.length,deps:c.join(", ")}),s.allErrors?i.if(l,()=>{for(const t of c)(0,r.checkReportMissingProp)(e,t)}):(i.if(t._`${l} && (${(0,r.checkMissingProp)(e,c,a)})`),(0,r.reportMissingProp)(e,a),i.else())}}function s(e,t=e.schema){const{gen:i,data:o,keyword:s,it:a}=e,u=i.name("valid");for(const c in t)(0,n.alwaysValidSchema)(a,t[c])||(i.if((0,r.propertyInData)(i,o,c,a.opts.ownProperties),()=>{const t=e.subschema({keyword:s,schemaProp:c},u);e.mergeValidEvaluated(t,u)},()=>i.var(u,!0)),e.ok(u))}e.validatePropertyDeps=o,e.validateSchemaDeps=s,e.default=i}(Fo)),Fo),s=function(){if(Ro)return Lo;Ro=1,Object.defineProperty(Lo,"__esModule",{value:!0});const e=$r(),t=Fr(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:t})=>e._`{propertyName: ${t.propertyName}}`},code(n){const{gen:r,schema:i,data:o,it:s}=n;if((0,t.alwaysValidSchema)(s,i))return;const a=r.name("valid");r.forIn("key",o,t=>{n.setParams({propertyName:t}),n.subschema({keyword:"propertyNames",data:t,dataTypes:["string"],propertyName:t,compositeRule:!0},a),r.if((0,e.not)(a),()=>{n.error(!0),s.allErrors||r.break()})}),n.ok(a)}};return Lo.default=n,Lo}(),a=Mo(),u=function(){if(zo)return Wo;zo=1,Object.defineProperty(Wo,"__esModule",{value:!0});const e=hi(),t=ti(),n=Fr(),r=Mo(),i={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:s,parentSchema:a,data:u,it:c}=i;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const l=(0,t.allSchemaProperties)(s);for(const e of l)c.definedProperties.add(e);c.opts.unevaluated&&l.length&&!0!==c.props&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(l),c.props));const f=l.filter(e=>!(0,n.alwaysValidSchema)(c,s[e]));if(0===f.length)return;const d=o.name("valid");for(const e of f)p(e)?h(e):(o.if((0,t.propertyInData)(o,u,e,c.opts.ownProperties)),h(e),c.allErrors||o.else().var(d,!0),o.endIf()),i.it.definedProperties.add(e),i.ok(d);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==s[e].default}function h(e){i.subschema({keyword:"properties",schemaProp:e,dataProp:e},d)}}};return Wo.default=i,Wo}(),c=function(){if(Bo)return Go;Bo=1,Object.defineProperty(Go,"__esModule",{value:!0});const e=ti(),t=$r(),n=Fr(),r=Fr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:s,data:a,parentSchema:u,it:c}=i,{opts:l}=c,f=(0,e.allSchemaProperties)(s),d=f.filter(e=>(0,n.alwaysValidSchema)(c,s[e]));if(0===f.length||d.length===f.length&&(!c.opts.unevaluated||!0===c.props))return;const p=l.strictSchema&&!l.allowMatchingProperties&&u.properties,h=o.name("valid");!0===c.props||c.props instanceof t.Name||(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:m}=c;function g(e){for(const t in p)new RegExp(e).test(t)&&(0,n.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){o.forIn("key",a,s=>{o.if(t._`${(0,e.usePattern)(i,n)}.test(${s})`,()=>{const e=d.includes(n);e||i.subschema({keyword:"patternProperties",schemaProp:n,dataProp:s,dataPropType:r.Type.Str},h),c.opts.unevaluated&&!0!==m?o.assign(t._`${m}[${s}]`,!0):e||c.allErrors||o.if((0,t.not)(h),()=>o.break())})})}!function(){for(const e of f)p&&g(e),c.allErrors?v(e):(o.var(h,!0),v(e),o.if(h))}()}};return Go.default=i,Go}(),l=function(){if(jo)return Yo;jo=1,Object.defineProperty(Yo,"__esModule",{value:!0});const e=Fr(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:n,schema:r,it:i}=t;if((0,e.alwaysValidSchema)(i,r))return void t.fail();const o=n.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.failResult(o,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};return Yo.default=t,Yo}(),f=function(){if(Uo)return Qo;Uo=1,Object.defineProperty(Qo,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ti().validateUnion,error:{message:"must match a schema in anyOf"}};return Qo.default=e,Qo}(),d=function(){if(Vo)return Jo;Vo=1,Object.defineProperty(Jo,"__esModule",{value:!0});const e=$r(),t=Fr(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:t})=>e._`{passingSchemas: ${t.passing}}`},code(n){const{gen:r,schema:i,parentSchema:o,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");if(s.opts.discriminator&&o.discriminator)return;const a=i,u=r.let("valid",!1),c=r.let("passing",null),l=r.name("_valid");n.setParams({passing:c}),r.block(function(){a.forEach((i,o)=>{let a;(0,t.alwaysValidSchema)(s,i)?r.var(l,!0):a=n.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},l),o>0&&r.if(e._`${l} && ${u}`).assign(u,!1).assign(c,e._`[${c}, ${o}]`).else(),r.if(l,()=>{r.assign(u,!0),r.assign(c,o),a&&n.mergeEvaluated(a,e.Name)})})}),n.result(u,()=>n.reset(),()=>n.error(!0))}};return Jo.default=n,Jo}(),p=function(){if(qo)return Xo;qo=1,Object.defineProperty(Xo,"__esModule",{value:!0});const e=Fr(),t={keyword:"allOf",schemaType:"array",code(t){const{gen:n,schema:r,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const o=n.name("valid");r.forEach((n,r)=>{if((0,e.alwaysValidSchema)(i,n))return;const s=t.subschema({keyword:"allOf",schemaProp:r},o);t.ok(o),t.mergeEvaluated(s)})}};return Xo.default=t,Xo}(),h=function(){if(Ho)return es;Ho=1,Object.defineProperty(es,"__esModule",{value:!0});const e=$r(),t=Fr(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:t})=>e.str`must match "${t.ifClause}" schema`,params:({params:t})=>e._`{failingKeyword: ${t.ifClause}}`},code(n){const{gen:i,parentSchema:o,it:s}=n;void 0===o.then&&void 0===o.else&&(0,t.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const a=r(s,"then"),u=r(s,"else");if(!a&&!u)return;const c=i.let("valid",!0),l=i.name("_valid");if(function(){const e=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);n.mergeEvaluated(e)}(),n.reset(),a&&u){const e=i.let("ifClause");n.setParams({ifClause:e}),i.if(l,f("then",e),f("else",e))}else a?i.if(l,f("then")):i.if((0,e.not)(l),f("else"));function f(t,r){return()=>{const o=n.subschema({keyword:t},l);i.assign(c,l),n.mergeValidEvaluated(o,c),r?i.assign(r,e._`${t}`):n.setParams({ifClause:t})}}n.pass(c,()=>n.error(!0))}};function r(e,n){const r=e.schema[n];return void 0!==r&&!(0,t.alwaysValidSchema)(e,r)}return es.default=n,es}(),m=function(){if(Ko)return ts;Ko=1,Object.defineProperty(ts,"__esModule",{value:!0});const e=Fr(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:n,it:r}){void 0===n.if&&(0,e.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};return ts.default=t,ts}();return bo.default=function(g=!1){const v=[l.default,f.default,d.default,p.default,h.default,m.default,s.default,a.default,o.default,u.default,c.default];return g?v.push(t.default,r.default):v.push(e.default,n.default),v.push(i.default),v},bo}var rs,is,os={},ss={};var as,us,cs={};function ls(){if(us)return zi;us=1,Object.defineProperty(zi,"__esModule",{value:!0});const e=function(){if(Mi)return Bi;Mi=1,Object.defineProperty(Bi,"__esModule",{value:!0});const e=function(){if(Li)return ji;Li=1,Object.defineProperty(ji,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return ji.default=e,ji}(),t=function(){if(Ii)return Ui;Ii=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.callRef=Ui.getValidate=void 0;const e=bi(),t=ti(),n=$r(),r=Mr(),i=Ei(),o=Fr(),s={keyword:"$ref",schemaType:"string",code(t){const{gen:r,schema:o,it:s}=t,{baseId:c,schemaEnv:l,validateName:f,opts:d,self:p}=s,{root:h}=l;if(("#"===o||"#/"===o)&&c===h.baseId)return function(){if(l===h)return u(t,f,l,l.$async);const e=r.scopeValue("root",{ref:h});return u(t,n._`${e}.validate`,h,h.$async)}();const m=i.resolveRef.call(p,h,c,o);if(void 0===m)throw new e.default(s.opts.uriResolver,c,o);return m instanceof i.SchemaEnv?function(e){const n=a(t,e);u(t,n,e,e.$async)}(m):function(e){const i=r.scopeValue("schema",!0===d.code.source?{ref:e,code:(0,n.stringify)(e)}:{ref:e}),s=r.name("valid"),a=t.subschema({schema:e,dataTypes:[],schemaPath:n.nil,topSchemaRef:i,errSchemaPath:o},s);t.mergeEvaluated(a),t.ok(s)}(m)}};function a(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):n._`${r.scopeValue("wrapper",{ref:t})}.validate`}function u(e,i,s,a){const{gen:u,it:c}=e,{allErrors:l,schemaEnv:f,opts:d}=c,p=d.passContext?r.default.this:n.nil;function h(e){const t=n._`${e}.errors`;u.assign(r.default.vErrors,n._`${r.default.vErrors} === null ? ${t} : ${r.default.vErrors}.concat(${t})`),u.assign(r.default.errors,n._`${r.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const r=null===(t=null==s?void 0:s.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(r&&!r.dynamicProps)void 0!==r.props&&(c.props=o.mergeEvaluated.props(u,r.props,c.props));else{const t=u.var("props",n._`${e}.evaluated.props`);c.props=o.mergeEvaluated.props(u,t,c.props,n.Name)}if(!0!==c.items)if(r&&!r.dynamicItems)void 0!==r.items&&(c.items=o.mergeEvaluated.items(u,r.items,c.items));else{const t=u.var("items",n._`${e}.evaluated.items`);c.items=o.mergeEvaluated.items(u,t,c.items,n.Name)}}a?function(){if(!f.$async)throw new Error("async schema referenced by sync schema");const r=u.let("valid");u.try(()=>{u.code(n._`await ${(0,t.callValidateCode)(e,i,p)}`),m(i),l||u.assign(r,!0)},e=>{u.if(n._`!(${e} instanceof ${c.ValidationError})`,()=>u.throw(e)),h(e),l||u.assign(r,!1)}),e.ok(r)}():e.result((0,t.callValidateCode)(e,i,p),()=>m(i),()=>h(i))}return Ui.getValidate=a,Ui.callRef=u,Ui.default=s,Ui}(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Bi.default=n,Bi}(),t=yo(),n=ns(),r=function(){if(is)return os;is=1,Object.defineProperty(os,"__esModule",{value:!0});const e=function(){if(rs)return ss;rs=1,Object.defineProperty(ss,"__esModule",{value:!0});const e=$r(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>e.str`must match format "${t}"`,params:({schemaCode:t})=>e._`{format: ${t}}`},code(t,n){const{gen:r,data:i,$data:o,schema:s,schemaCode:a,it:u}=t,{opts:c,errSchemaPath:l,schemaEnv:f,self:d}=u;c.validateFormats&&(o?function(){const o=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),s=r.const("fDef",e._`${o}[${a}]`),u=r.let("fType"),l=r.let("format");r.if(e._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,()=>r.assign(u,e._`${s}.type || "string"`).assign(l,e._`${s}.validate`),()=>r.assign(u,e._`"string"`).assign(l,s)),t.fail$data((0,e.or)(!1===c.strictSchema?e.nil:e._`${a} && !${l}`,function(){const t=f.$async?e._`(${s}.async ? await ${l}(${i}) : ${l}(${i}))`:e._`${l}(${i})`,r=e._`(typeof ${l} == "function" ? ${t} : ${l}.test(${i}))`;return e._`${l} && ${l} !== true && ${u} === ${n} && !${r}`}()))}():function(){const o=d.formats[s];if(!o)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${l}"`}d.logger.warn(e())}();if(!0===o)return;const[a,u,p]=function(t){const n=t instanceof RegExp?(0,e.regexpCode)(t):c.code.formats?e._`${c.code.formats}${(0,e.getProperty)(s)}`:void 0,i=r.scopeValue("formats",{key:s,ref:t,code:n});return"object"!=typeof t||t instanceof RegExp?["string",t,i]:[t.type||"string",t.validate,e._`${i}.validate`]}(o);a===n&&t.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!f.$async)throw new Error("async format in sync schema");return e._`await ${p}(${i})`}return"function"==typeof u?e._`${p}(${i})`:e._`${p}.test(${i})`}())}())}};return ss.default=t,ss}(),t=[e.default];return os.default=t,os}(),i=(as||(as=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.contentVocabulary=cs.metadataVocabulary=void 0,cs.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],cs.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),cs),o=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return zi.default=o,zi}var fs,ds,ps={},hs={};var ms,gs={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function vs(){return ms||(ms=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Ni(),r=ls(),i=function(){if(ds)return ps;ds=1,Object.defineProperty(ps,"__esModule",{value:!0});const e=$r(),t=(fs||(fs=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n||(hs.DiscrError=n={}))),hs);var n;const r=Ei(),i=bi(),o=Fr(),s={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:n}})=>e===t.DiscrError.Tag?`tag "${n}" must be string`:`value of tag "${n}" must be in oneOf`,params:({params:{discrError:t,tag:n,tagName:r}})=>e._`{error: ${t}, tag: ${r}, tagValue: ${n}}`},code(n){const{gen:s,data:a,schema:u,parentSchema:c,it:l}=n,{oneOf:f}=c;if(!l.opts.discriminator)throw new Error("discriminator: requires discriminator option");const d=u.propertyName;if("string"!=typeof d)throw new Error("discriminator: requires propertyName");if(u.mapping)throw new Error("discriminator: mapping is not supported");if(!f)throw new Error("discriminator: requires oneOf keyword");const p=s.let("valid",!1),h=s.const("tag",e._`${a}${(0,e.getProperty)(d)}`);function m(t){const r=s.name("valid"),i=n.subschema({keyword:"oneOf",schemaProp:t},r);return n.mergeEvaluated(i,e.Name),r}s.if(e._`typeof ${h} == "string"`,()=>function(){const a=function(){var e;const t={},n=a(c);let s=!0;for(let t=0;t<f.length;t++){let c=f[t];if((null==c?void 0:c.$ref)&&!(0,o.schemaHasRulesButRef)(c,l.self.RULES)){const e=c.$ref;if(c=r.resolveRef.call(l.self,l.schemaEnv.root,l.baseId,e),c instanceof r.SchemaEnv&&(c=c.schema),void 0===c)throw new i.default(l.opts.uriResolver,l.baseId,e)}const p=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[d];if("object"!=typeof p)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);s=s&&(n||a(c)),u(p,t)}if(!s)throw new Error(`discriminator: "${d}" must be required`);return t;function a({required:e}){return Array.isArray(e)&&e.includes(d)}function u(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`);for(const n of e.enum)p(n,t)}}function p(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${d}" values must be unique strings`);t[e]=n}}();s.if(!1);for(const t in a)s.elseIf(e._`${h} === ${t}`),s.assign(p,m(a[t]));s.else(),n.error(!1,{discrError:t.DiscrError.Mapping,tag:h,tagName:d}),s.endIf()}(),()=>n.error(!1,{discrError:t.DiscrError.Tag,tag:h,tagName:d})),n.ok(p)}};return ps.default=s,ps}(),o=gs,s=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,s):o;this.addMetaSchema(e,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=hi();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var l=$r();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return l._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return l.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return l.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return l.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return l.CodeGen}});var f=vi();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=bi();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(yr,yr.exports)),yr.exports}var ys,_s,bs,ws=vs(),xs={exports:{}},Es={},ks={},As=(bs||(bs=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=(ys||(ys=1,function(e){function t(e,t){return{validate:e,compare:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:t(i,o),time:t(a(!0),u),"date-time":t(f(!0),d),"iso-time":t(a(),c),"iso-date-time":t(f(),p),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&m.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return g.lastIndex=0,g.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=y&&e>=v}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:_},double:{type:"number",validate:_},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){const t=n.exec(e);if(!t)return!1;const i=+t[1],o=+t[2],s=+t[3];return o>=1&&o<=12&&s>=1&&s<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(i)?29:r[o])}function o(e,t){if(e&&t)return e>t?1:e<t?-1:0}const s=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function a(e){return function(t){const n=s.exec(t);if(!n)return!1;const r=+n[1],i=+n[2],o=+n[3],a=n[4],u="-"===n[5]?-1:1,c=+(n[6]||0),l=+(n[7]||0);if(c>23||l>59||e&&!a)return!1;if(r<=23&&i<=59&&o<60)return!0;const f=i-l*u,d=r-c*u-(f<0?1:0);return(23===d||-1===d)&&(59===f||-1===f)&&o<61}}function u(e,t){if(!e||!t)return;const n=new Date("2020-01-01T"+e).valueOf(),r=new Date("2020-01-01T"+t).valueOf();return n&&r?n-r:void 0}function c(e,t){if(!e||!t)return;const n=s.exec(e),r=s.exec(t);return n&&r?(e=n[1]+n[2]+n[3])>(t=r[1]+r[2]+r[3])?1:e<t?-1:0:void 0}const l=/t|\s/i;function f(e){const t=a(e);return function(e){const n=e.split(l);return 2===n.length&&i(n[0])&&t(n[1])}}function d(e,t){if(!e||!t)return;const n=new Date(e).valueOf(),r=new Date(t).valueOf();return n&&r?n-r:void 0}function p(e,t){if(!e||!t)return;const[n,r]=e.split(l),[i,s]=t.split(l),a=o(n,i);return void 0!==a?a||u(r,s):void 0}const h=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,v=-2147483648,y=2**31-1;function _(){return!0}const b=/[^\\]\\Z/}(Es)),Es),r=(_s||(_s=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=vs(),n=$r(),r=n.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},o={message:({keyword:e,schemaCode:t})=>n.str`should be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${i[e].okStr}, limit: ${t}}`};e.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:o,code(e){const{gen:r,data:o,schemaCode:s,keyword:a,it:u}=e,{opts:c,self:l}=u;if(!c.validateFormats)return;const f=new t.KeywordCxt(u,l.RULES.all.format.definition,"format");function d(e){return n._`${e}.compare(${o}, ${s}) ${i[a].fail} 0`}f.$data?function(){const t=r.scopeValue("formats",{ref:l.formats,code:c.code.formats}),i=r.const("fmt",n._`${t}[${f.schemaCode}]`);e.fail$data((0,n.or)(n._`typeof ${i} != "object"`,n._`${i} instanceof RegExp`,n._`typeof ${i}.compare != "function"`,d(i)))}():function(){const t=f.schema,i=l.formats[t];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error(`"${a}": format "${t}" does not define "compare" function`);const o=r.scopeValue("formats",{key:t,ref:i,code:c.code.formats?n._`${c.code.formats}${(0,n.getProperty)(t)}`:void 0});e.fail$data(d(o))}()},dependencies:["format"]},e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)}(ks)),ks),i=$r(),o=new i.Name("fullFormats"),s=new i.Name("fastFormats"),a=(e,t={keywords:!0})=>{if(Array.isArray(t))return u(e,t,n.fullFormats,o),e;const[i,a]="fast"===t.mode?[n.fastFormats,s]:[n.fullFormats,o];return u(e,t.formats||n.formatNames,i,a),t.keywords&&(0,r.default)(e),e};function u(e,t,n,r){var o,s;null!==(o=(s=e.opts.code).formats)&&void 0!==o||(s.formats=i._`require("ajv-formats/dist/formats").${r}`);for(const r of t)e.addFormat(r,n[r])}a.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r},e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}(xs,xs.exports)),xs.exports),Ds=gr(As);class Cs{constructor(e){this._ajv=null!=e?e:function(){const e=new ws.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return Ds(e),e}()}getValidator(e){var t;const n="$id"in e&&"string"==typeof e.$id&&null!==(t=this._ajv.getSchema(e.$id))&&void 0!==t?t:this._ajv.compile(e);return e=>n(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}}class Os extends pr{constructor(e,t){var n,r;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Fn.options.map((e,t)=>[e,t])),this.isMessageIgnored=(e,t)=>{const n=this._loggingLevels.get(t);return!!n&&this.LOG_LEVEL_SEVERITY.get(e)<this.LOG_LEVEL_SEVERITY.get(n)},this._capabilities=null!==(n=null==t?void 0:t.capabilities)&&void 0!==n?n:{},this._instructions=null==t?void 0:t.instructions,this._jsonSchemaValidator=null!==(r=null==t?void 0:t.jsonSchemaValidator)&&void 0!==r?r:new Cs,this.setRequestHandler(Pt,e=>this._oninitialize(e)),this.setNotificationHandler(Nt,()=>{var e;return null===(e=this.oninitialized)||void 0===e?void 0:e.call(this)}),this._capabilities.logging&&this.setRequestHandler(Nn,async(e,t)=>{var n;const r=t.sessionId||(null===(n=t.requestInfo)||void 0===n?void 0:n.headers["mcp-session-id"])||void 0,{level:i}=e.params,o=Fn.safeParse(i);return o.success&&this._loggingLevels.set(r,o.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=function(e,t){const n={...e};for(const e in t){const r=e,i=t[r];if(void 0===i)continue;const o=n[r];hr(o)&&hr(i)?n[r]={...o,...i}:n[r]=i}return n}(this._capabilities,e)}assertCapabilityForMethod(e){var t,n,r;switch(e){case"sampling/createMessage":if(!(null===(t=this._clientCapabilities)||void 0===t?void 0:t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(null===(n=this._clientCapabilities)||void 0===n?void 0:n.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(null===(r=this._clientCapabilities)||void 0===r?void 0:r.roots))throw new Error(`Client does not support listing roots (required for ${e})`)}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`)}}assertRequestHandlerCapability(e){switch(e){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`)}}async _oninitialize(e){const t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:it.includes(t)?t:rt,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Et)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},Vn,t)}async elicitInput(e,t){const n=await this.request({method:"elicitation/create",params:e},nr,t);if("accept"===n.action&&n.content&&e.requestedSchema)try{const t=this._jsonSchemaValidator.getValidator(e.requestedSchema)(n.content);if(!t.valid)throw new dr(bt.InvalidParams,`Elicitation response content does not match requested schema: ${t.errorMessage}`)}catch(e){if(e instanceof dr)throw e;throw new dr(bt.InternalError,`Error validating elicitation response: ${e instanceof Error?e.message:String(e)}`)}return n}async listRoots(e,t){return this.request({method:"roots/list",params:e},lr,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}const Ss=Symbol("Let zodToJsonSchema decide on which parser to use"),$s={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"};function Ts(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Ps(e,t,n,r,i){e[t]=n,Ts(e,t,r,i)}const Fs=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function Rs(e){if("openAi"!==e.target)return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?Fs(t,e.currentPath):t.join("/")}}function Ns(e,t){return aa(e.type._def,t)}function Ls(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,r)=>Ls(e,t,n))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Is(e,t)}}const Is=(e,t)=>{const n={type:"integer",format:"unix-time"};if("openApi3"===t.target)return n;for(const r of e.checks)switch(r.kind){case"min":Ps(n,"minimum",r.value,r.message,t);break;case"max":Ps(n,"maximum",r.value,r.message,t)}return n};let Ms;const zs=/^[cC][^\s-]{8,}$/,Bs=/^[0-9a-z]+$/,js=/^[0-9A-HJKMNP-TV-Z]{26}$/,Us=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,Vs=()=>(void 0===Ms&&(Ms=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ms),qs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Hs=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ks=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Zs=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ws=/^[a-zA-Z0-9_-]{21}$/,Gs=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function Ys(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":Ps(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":Ps(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Xs(n,"email",r.message,t);break;case"format:idn-email":Xs(n,"idn-email",r.message,t);break;case"pattern:zod":ea(n,Us,r.message,t)}break;case"url":Xs(n,"uri",r.message,t);break;case"uuid":Xs(n,"uuid",r.message,t);break;case"regex":ea(n,r.regex,r.message,t);break;case"cuid":ea(n,zs,r.message,t);break;case"cuid2":ea(n,Bs,r.message,t);break;case"startsWith":ea(n,RegExp(`^${Qs(r.value,t)}`),r.message,t);break;case"endsWith":ea(n,RegExp(`${Qs(r.value,t)}$`),r.message,t);break;case"datetime":Xs(n,"date-time",r.message,t);break;case"date":Xs(n,"date",r.message,t);break;case"time":Xs(n,"time",r.message,t);break;case"duration":Xs(n,"duration",r.message,t);break;case"length":Ps(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,r.message,t),Ps(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":ea(n,RegExp(Qs(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&Xs(n,"ipv4",r.message,t),"v4"!==r.version&&Xs(n,"ipv6",r.message,t);break;case"base64url":ea(n,Zs,r.message,t);break;case"jwt":ea(n,Gs,r.message,t);break;case"cidr":"v6"!==r.version&&ea(n,qs,r.message,t),"v4"!==r.version&&ea(n,Hs,r.message,t);break;case"emoji":ea(n,Vs(),r.message,t);break;case"ulid":ea(n,js,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":Xs(n,"binary",r.message,t);break;case"contentEncoding:base64":Ps(n,"contentEncoding","base64",r.message,t);break;case"pattern:zod":ea(n,Ks,r.message,t)}break;case"nanoid":ea(n,Ws,r.message,t)}return n}function Qs(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let n=0;n<e.length;n++)Js.has(e[n])||(t+="\\"),t+=e[n];return t}(e):e}const Js=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Xs(e,t,n,r){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ps(e,"format",t,n,r)}function ea(e,t,n,r){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:ta(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ps(e,"pattern",ta(t,r),n,r)}function ta(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const n=e.flags.includes("i"),r=e.flags.includes("m"),i=e.flags.includes("s"),o=n?e.source.toLowerCase():e.source;let s="",a=!1,u=!1,c=!1;for(let e=0;e<o.length;e++)if(a)s+=o[e],a=!1;else{if(n)if(u){if(o[e].match(/[a-z]/)){c?(s+=o[e],s+=`${o[e-2]}-${o[e]}`.toUpperCase(),c=!1):"-"===o[e+1]&&o[e+2]?.match(/[a-z]/)?(s+=o[e],c=!0):s+=`${o[e]}${o[e].toUpperCase()}`;continue}}else if(o[e].match(/[a-z]/)){s+=`[${o[e]}${o[e].toUpperCase()}]`;continue}if(r){if("^"===o[e]){s+="(^|(?<=[\r\n]))";continue}if("$"===o[e]){s+="($|(?=[\r\n]))";continue}}i&&"."===o[e]?s+=u?`${o[e]}\r\n`:`[${o[e]}\r\n]`:(s+=o[e],"\\"===o[e]?a=!0:u&&"]"===o[e]?u=!1:u||"["!==o[e]||(u=!0))}try{new RegExp(s)}catch{return e.source}return s}function na(e,t){if(t.target,"openApi3"===t.target&&e.keyType?._def.typeName===Ve.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((n,r)=>({...n,[r]:aa(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??Rs(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:aa(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return n;if(e.keyType?._def.typeName===Ve.ZodString&&e.keyType._def.checks?.length){const{type:r,...i}=Ys(e.keyType._def,t);return{...n,propertyNames:i}}if(e.keyType?._def.typeName===Ve.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===Ve.ZodBranded&&e.keyType._def.type._def.typeName===Ve.ZodString&&e.keyType._def.type._def.checks?.length){const{type:r,...i}=Ns(e.keyType._def,t);return{...n,propertyNames:i}}return n}const ra={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},ia=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,n)=>aa(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return n.length?{anyOf:n}:void 0};function oa(e){try{return e.isOptional()}catch{return!0}}const sa=(e,t,n)=>{switch(t){case Ve.ZodString:return Ys(e,n);case Ve.ZodNumber:return function(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",Ts(n,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?Ps(n,"minimum",r.value,r.message,t):Ps(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Ps(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?Ps(n,"maximum",r.value,r.message,t):Ps(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Ps(n,"maximum",r.value,r.message,t));break;case"multipleOf":Ps(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case Ve.ZodObject:return function(e,t){const n="openAi"===t.target,r={type:"object",properties:{}},i=[],o=e.shape();for(const e in o){let s=o[e];if(void 0===s||void 0===s._def)continue;let a=oa(s);a&&n&&("ZodOptional"===s._def.typeName&&(s=s._def.innerType),s.isNullable()||(s=s.nullable()),a=!1);const u=aa(s._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==u&&(r.properties[e]=u,a||i.push(e))}i.length&&(r.required=i);const s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return aa(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(r.additionalProperties=s),r}(e,n);case Ve.ZodBigInt:return function(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?Ps(n,"minimum",r.value,r.message,t):Ps(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Ps(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?Ps(n,"maximum",r.value,r.message,t):Ps(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Ps(n,"maximum",r.value,r.message,t));break;case"multipleOf":Ps(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case Ve.ZodBoolean:return{type:"boolean"};case Ve.ZodDate:return Ls(e,n);case Ve.ZodUndefined:return function(e){return{not:Rs(e)}}(n);case Ve.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(n);case Ve.ZodArray:return function(e,t){const n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==Ve.ZodAny&&(n.items=aa(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Ps(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Ps(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Ps(n,"minItems",e.exactLength.value,e.exactLength.message,t),Ps(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}(e,n);case Ve.ZodUnion:case Ve.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return ia(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in ra&&(!e._def.checks||!e._def.checks.length))){const e=n.reduce((e,t)=>{const n=ra[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=n.reduce((e,t)=>{const n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){const t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return ia(e,t)}(e,n);case Ve.ZodIntersection:return function(e,t){const n=[aa(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),aa(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(e=>{if((e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e)(e))i.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:n,...r}=e;t=r}else r=void 0;i.push(t)}}),i.length?{allOf:i,...r}:void 0}(e,n);case Ve.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,n)=>aa(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:aa(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,n)=>aa(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,n);case Ve.ZodRecord:return na(e,n);case Ve.ZodLiteral:return function(e,t){const n=typeof e.value;return"bigint"!==n&&"number"!==n&&"boolean"!==n&&"string"!==n?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===n?"integer":n,enum:[e.value]}:{type:"bigint"===n?"integer":n,const:e.value}}(e,n);case Ve.ZodEnum:return function(e){return{type:"string",enum:Array.from(e.values)}}(e);case Ve.ZodNativeEnum:return function(e){const t=e.values,n=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(n.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case Ve.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:ra[e.innerType._def.typeName],nullable:!0}:{type:[ra[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const n=aa(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const n=aa(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case Ve.ZodOptional:return((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return aa(e.innerType._def,t);const n=aa(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Rs(t)},n]}:Rs(t)})(e,n);case Ve.ZodMap:return function(e,t){return"record"===t.mapStrategy?na(e,t):{type:"array",maxItems:125,items:{type:"array",items:[aa(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Rs(t),aa(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Rs(t)],minItems:2,maxItems:2}}}(e,n);case Ve.ZodSet:return function(e,t){const n={type:"array",uniqueItems:!0,items:aa(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Ps(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Ps(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}(e,n);case Ve.ZodLazy:return()=>e.getter()._def;case Ve.ZodPromise:return function(e,t){return aa(e.type._def,t)}(e,n);case Ve.ZodNaN:case Ve.ZodNever:return function(e){return"openAi"===e.target?void 0:{not:Rs({...e,currentPath:[...e.currentPath,"not"]})}}(n);case Ve.ZodEffects:return function(e,t){return"input"===t.effectStrategy?aa(e.schema._def,t):Rs(t)}(e,n);case Ve.ZodAny:return Rs(n);case Ve.ZodUnknown:return function(e){return Rs(e)}(n);case Ve.ZodDefault:return function(e,t){return{...aa(e.innerType._def,t),default:e.defaultValue()}}(e,n);case Ve.ZodBranded:return Ns(e,n);case Ve.ZodReadonly:case Ve.ZodCatch:return((e,t)=>aa(e.innerType._def,t))(e,n);case Ve.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return aa(e.in._def,t);if("output"===t.pipeStrategy)return aa(e.out._def,t);const n=aa(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[n,aa(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]})].filter(e=>void 0!==e)}})(e,n);case Ve.ZodFunction:case Ve.ZodVoid:case Ve.ZodSymbol:default:return}};function aa(e,t,n=!1){const r=t.seen.get(e);if(t.override){const i=t.override?.(e,t,r,n);if(i!==Ss)return i}if(r&&!n){const e=ua(r,t);if(void 0!==e)return e}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const o=sa(e,e.typeName,t),s="function"==typeof o?aa(o(),t):o;if(s&&ca(e,t,s),t.postProcess){const n=t.postProcess(s,e,t);return i.jsonSchema=s,n}return i.jsonSchema=s,s}const ua=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Fs(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e)||"seen"===t.$refStrategy?Rs(t):void 0}},ca=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),la=(e,t)=>{const n=(e=>{const t=(e=>"string"==typeof e?{...$s,name:e}:{...$s,...e})(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}})(t);let r="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>({...e,[t]:aa(r._def,{...n,currentPath:[...n.basePath,n.definitionPath,t]},!0)??Rs(n)}),{}):void 0;const i="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,o=aa(e._def,void 0===i?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??Rs(n),s="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(o.title=s),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===n.$refStrategy?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=void 0===i?r?{...o,[n.definitionPath]:r}:o:{$ref:[..."relative"===n.$refStrategy?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:o}};return"jsonSchema7"===n.target?a.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==n.target&&"openAi"!==n.target||(a.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===n.target&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type)),a};var fa;!function(e){e.Completable="McpCompletable"}(fa||(fa={}));class da extends P{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}function pa(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var o,s;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(o=null!=a?a:r)&&void 0!==o?o:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(s=null!=a?a:n)&&void 0!==s?s:i.defaultError}},description:i}}da.create=(e,t)=>new da({type:e,typeName:fa.Completable,complete:t.complete,...pa(t)});const ha=/^[A-Za-z0-9._-]{1,128}$/;function ma(e){const t=function(e){const t=[];if(0===e.length)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(e.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${e.length})`]};if(e.includes(" ")&&t.push("Tool name contains spaces, which may cause parsing issues"),e.includes(",")&&t.push("Tool name contains commas, which may cause parsing issues"),(e.startsWith("-")||e.endsWith("-"))&&t.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts"),(e.startsWith(".")||e.endsWith("."))&&t.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts"),!ha.test(e)){const n=e.split("").filter(e=>!/[A-Za-z0-9._-]/.test(e)).filter((e,t,n)=>n.indexOf(e)===t);return t.push(`Tool name contains invalid characters: ${n.map(e=>`"${e}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:t}}return{isValid:!0,warnings:t}}(e);return function(e,t){if(t.length>0)for(const e of t);}(0,t.warnings),t.isValid}class ga{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Os(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(Cn.shape.method.value),this.server.assertCanSetRequestHandler(Tn.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(Cn,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{const n={name:e,title:t.title,description:t.description,inputSchema:t.inputSchema?la(t.inputSchema,{strictUnions:!0,pipeStrategy:"input"}):va,annotations:t.annotations,_meta:t._meta};return t.outputSchema&&(n.outputSchema=la(t.outputSchema,{strictUnions:!0,pipeStrategy:"output"})),n})})),this.server.setRequestHandler(Tn,async(e,t)=>{const n=this._registeredTools[e.params.name];let r;try{if(!n)throw new dr(bt.InvalidParams,`Tool ${e.params.name} not found`);if(!n.enabled)throw new dr(bt.InvalidParams,`Tool ${e.params.name} disabled`);if(n.inputSchema){const i=n.callback,o=await n.inputSchema.safeParseAsync(e.params.arguments);if(!o.success)throw new dr(bt.InvalidParams,`Input validation error: Invalid arguments for tool ${e.params.name}: ${o.error.message}`);const s=o.data;r=await Promise.resolve(i(s,t))}else{const e=n.callback;r=await Promise.resolve(e(t))}if(n.outputSchema&&!r.isError){if(!r.structuredContent)throw new dr(bt.InvalidParams,`Output validation error: Tool ${e.params.name} has an output schema but no structured content was provided`);const t=await n.outputSchema.safeParseAsync(r.structuredContent);if(!t.success)throw new dr(bt.InvalidParams,`Output validation error: Invalid structured content for tool ${e.params.name}: ${t.error.message}`)}}catch(e){return this.createToolError(e instanceof Error?e.message:String(e))}return r}),this._toolHandlersInitialized=!0)}createToolError(e){return{content:[{type:"text",text:e}],isError:!0}}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(sr.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(sr,async e=>{switch(e.params.ref.type){case"ref/prompt":return function(e){if("ref/prompt"!==e.params.ref.type)throw new TypeError(`Expected CompleteRequestPrompt, but got ${e.params.ref.type}`)}(e),this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return function(e){if("ref/resource"!==e.params.ref.type)throw new TypeError(`Expected CompleteRequestResourceTemplate, but got ${e.params.ref.type}`)}(e),this.handleResourceCompletion(e,e.params.ref);default:throw new dr(bt.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){const n=this._registeredPrompts[t.name];if(!n)throw new dr(bt.InvalidParams,`Prompt ${t.name} not found`);if(!n.enabled)throw new dr(bt.InvalidParams,`Prompt ${t.name} disabled`);if(!n.argsSchema)return xa;const r=n.argsSchema.shape[e.params.argument.name];if(!(r instanceof da))return xa;const i=r._def;return wa(await i.complete(e.params.argument.value,e.params.context))}async handleResourceCompletion(e,t){const n=Object.values(this._registeredResourceTemplates).find(e=>e.resourceTemplate.uriTemplate.toString()===t.uri);if(!n){if(this._registeredResources[t.uri])return xa;throw new dr(bt.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}const r=n.resourceTemplate.completeCallback(e.params.argument.name);return r?wa(await r(e.params.argument.value,e.params.context)):xa}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(Gt.shape.method.value),this.server.assertCanSetRequestHandler(Qt.shape.method.value),this.server.assertCanSetRequestHandler(tn.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Gt,async(e,t)=>{const n=Object.entries(this._registeredResources).filter(([e,t])=>t.enabled).map(([e,t])=>({uri:e,name:t.name,...t.metadata})),r=[];for(const e of Object.values(this._registeredResourceTemplates)){if(!e.resourceTemplate.listCallback)continue;const n=await e.resourceTemplate.listCallback(t);for(const t of n.resources)r.push({...e.metadata,...t})}return{resources:[...n,...r]}}),this.server.setRequestHandler(Qt,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([e,t])=>({name:e,uriTemplate:t.resourceTemplate.uriTemplate.toString(),...t.metadata}))})),this.server.setRequestHandler(tn,async(e,t)=>{const n=new URL(e.params.uri),r=this._registeredResources[n.toString()];if(r){if(!r.enabled)throw new dr(bt.InvalidParams,`Resource ${n} disabled`);return r.readCallback(n,t)}for(const e of Object.values(this._registeredResourceTemplates)){const r=e.resourceTemplate.uriTemplate.match(n.toString());if(r)return e.readCallback(n,r,t)}throw new dr(bt.InvalidParams,`Resource ${n} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(pn.shape.method.value),this.server.assertCanSetRequestHandler(gn.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(pn,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>{return{name:e,title:t.title,description:t.description,arguments:t.argsSchema?(n=t.argsSchema,Object.entries(n.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()}))):void 0};var n})})),this.server.setRequestHandler(gn,async(e,t)=>{const n=this._registeredPrompts[e.params.name];if(!n)throw new dr(bt.InvalidParams,`Prompt ${e.params.name} not found`);if(!n.enabled)throw new dr(bt.InvalidParams,`Prompt ${e.params.name} disabled`);if(n.argsSchema){const r=await n.argsSchema.safeParseAsync(e.params.arguments);if(!r.success)throw new dr(bt.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${r.error.message}`);const i=r.data,o=n.callback;return await Promise.resolve(o(i,t))}{const e=n.callback;return await Promise.resolve(e(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...n){let r;"object"==typeof n[0]&&(r=n.shift());const i=n[0];if("string"==typeof t){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);const n=this._createRegisteredResource(e,void 0,t,r,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),n}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);const n=this._createRegisteredResourceTemplate(e,void 0,t,r,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),n}}registerResource(e,t,n,r){if("string"==typeof t){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);const i=this._createRegisteredResource(e,n.title,t,n,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);const i=this._createRegisteredResourceTemplate(e,n.title,t,n,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}}_createRegisteredResource(e,t,n,r,i){const o={name:e,title:t,metadata:r,readCallback:i,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({uri:null}),update:e=>{void 0!==e.uri&&e.uri!==n&&(delete this._registeredResources[n],e.uri&&(this._registeredResources[e.uri]=o)),void 0!==e.name&&(o.name=e.name),void 0!==e.title&&(o.title=e.title),void 0!==e.metadata&&(o.metadata=e.metadata),void 0!==e.callback&&(o.readCallback=e.callback),void 0!==e.enabled&&(o.enabled=e.enabled),this.sendResourceListChanged()}};return this._registeredResources[n]=o,o}_createRegisteredResourceTemplate(e,t,n,r,i){const o={resourceTemplate:n,title:t,metadata:r,readCallback:i,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:t=>{void 0!==t.name&&t.name!==e&&(delete this._registeredResourceTemplates[e],t.name&&(this._registeredResourceTemplates[t.name]=o)),void 0!==t.title&&(o.title=t.title),void 0!==t.template&&(o.resourceTemplate=t.template),void 0!==t.metadata&&(o.metadata=t.metadata),void 0!==t.callback&&(o.readCallback=t.callback),void 0!==t.enabled&&(o.enabled=t.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=o,o}_createRegisteredPrompt(e,t,n,r,i){const o={title:t,description:n,argsSchema:void 0===r?void 0:Ge(r),callback:i,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:t=>{void 0!==t.name&&t.name!==e&&(delete this._registeredPrompts[e],t.name&&(this._registeredPrompts[t.name]=o)),void 0!==t.title&&(o.title=t.title),void 0!==t.description&&(o.description=t.description),void 0!==t.argsSchema&&(o.argsSchema=Ge(t.argsSchema)),void 0!==t.callback&&(o.callback=t.callback),void 0!==t.enabled&&(o.enabled=t.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=o,o}_createRegisteredTool(e,t,n,r,i,o,s,a){ma(e);const u={title:t,description:n,inputSchema:ba(r),outputSchema:ba(i),annotations:o,_meta:s,callback:a,enabled:!0,disable:()=>u.update({enabled:!1}),enable:()=>u.update({enabled:!0}),remove:()=>u.update({name:null}),update:t=>{void 0!==t.name&&t.name!==e&&("string"==typeof t.name&&ma(t.name),delete this._registeredTools[e],t.name&&(this._registeredTools[t.name]=u)),void 0!==t.title&&(u.title=t.title),void 0!==t.description&&(u.description=t.description),void 0!==t.paramsSchema&&(u.inputSchema=Ge(t.paramsSchema)),void 0!==t.callback&&(u.callback=t.callback),void 0!==t.annotations&&(u.annotations=t.annotations),void 0!==t._meta&&(u._meta=t._meta),void 0!==t.enabled&&(u.enabled=t.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=u,this.setToolRequestHandlers(),this.sendToolListChanged(),u}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let n,r,i;if("string"==typeof t[0]&&(n=t.shift()),t.length>1){const e=t[0];ya(e)?(r=t.shift(),t.length>1&&"object"==typeof t[0]&&null!==t[0]&&!ya(t[0])&&(i=t.shift())):"object"==typeof e&&null!==e&&(i=t.shift())}const o=t[0];return this._createRegisteredTool(e,void 0,n,r,void 0,i,void 0,o)}registerTool(e,t,n){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);const{title:r,description:i,inputSchema:o,outputSchema:s,annotations:a,_meta:u}=t;return this._createRegisteredTool(e,r,i,o,s,a,u,n)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let n,r;"string"==typeof t[0]&&(n=t.shift()),t.length>1&&(r=t.shift());const i=t[0],o=this._createRegisteredPrompt(e,void 0,n,r,i);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),o}registerPrompt(e,t,n){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);const{title:r,description:i,argsSchema:o}=t,s=this._createRegisteredPrompt(e,r,i,o,n);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),s}isConnected(){return void 0!==this.server.transport}async sendLoggingMessage(e,t){return this.server.sendLoggingMessage(e,t)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}}const va={type:"object",properties:{}};function ya(e){return"object"==typeof e&&null!==e&&(0===Object.keys(e).length||Object.values(e).some(_a))}function _a(e){return null!==e&&"object"==typeof e&&"parse"in e&&"function"==typeof e.parse&&"safeParse"in e&&"function"==typeof e.safeParse}function ba(e){if(e)return ya(e)?Ge(e):e}function wa(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}const xa={completion:{values:[],hasMore:!1}};class Ea{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;const e=this._buffer.indexOf("\n");if(-1===e)return null;const t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),function(e){return xt.parse(JSON.parse(e))}(t)}clear(){this._buffer=void 0}}class ka{constructor(t=e.stdin,n=e.stdout){this._stdin=t,this._stdout=n,this._readBuffer=new Ea,this._started=!1,this._ondata=e=>{this._readBuffer.append(e),this.processReadBuffer()},this._onerror=e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{const t=this._readBuffer.readMessage();if(null===t)break;null===(e=this.onmessage)||void 0===e||e.call(this,t)}catch(e){null===(t=this.onerror)||void 0===t||t.call(this,e)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),0===this._stdin.listenerCount("data")&&this._stdin.pause(),this._readBuffer.clear(),null===(e=this.onclose)||void 0===e||e.call(this)}send(e){return new Promise(t=>{const n=function(e){return JSON.stringify(e)+"\n"}(e);this._stdout.write(n)?t():this._stdout.once("drain",t)})}}const Aa="local_ripgrep",Da="local_view_structure",Ca="local_find_files",Oa="local_fetch_content",Sa=3e4,$a=10485760,Ta=2e3,Pa=1e4,Fa=["rg","ls","find"],Ra=[/[;&|`$(){}[\]<>]/,/\${/,/\$\(/];function Na(e,t){return Fa.includes(e)?function(e,t){const n=function(e,t){const n=new Set;if("rg"===e){let e=!1;for(let r=0;r<t.length;r++){const i=t[r];if(i.startsWith("-")){if(["-g","--glob","--include","--exclude","--exclude-dir"].includes(i)){r++,n.add(r);continue}["-A","-B","-C","-m","-t","--type","-T","--type-not","-j","--threads","--sort","--sortr","--max-filesize","-E","--encoding","--color"].includes(i)&&r++}else if(!e){n.add(r),e=!0;break}}}else if("find"===e)for(let e=0;e<t.length;e++){const r=t[e],i=e>0?t[e-1]:"";["-name","-iname","-path","-regex","-size","-perm"].includes(i)&&n.add(e),"("!==r&&")"!==r&&"-o"!==r||n.add(e)}return n}(e,t);for(let e=0;e<t.length;e++){const r=t[e];if(!n.has(e))for(const e of Ra)if(e.test(r))return{isValid:!1,error:`Dangerous pattern detected in argument: '${r}'. This may be a command injection attempt.`}}return{isValid:!0}}(e,t):{isValid:!1,error:`Command '${e}' is not allowed. Allowed commands: ${Fa.join(", ")}`}}class La{command;args=[];constructor(e){this.command=e}addFlag(e){return this.args.push(e),this}addOption(e,t){return this.args.push(e,String(t)),this}addArg(e){return this.args.push(e),this}addEscapedArg(e){return this.args.push(function(e){return`'${e.replace(/'/g,"'\\''")}'`}(e)),this}build(){return{command:this.command,args:[...this.args]}}reset(){return this.args=[],this}getArgs(){return[...this.args]}}class Ia extends La{constructor(){super("rg")}fromQuery(e){if(e.fixedString?this.addFlag("-F"):e.perlRegex&&this.addFlag("-P"),e.caseSensitive?this.addFlag("-s"):e.caseInsensitive?this.addFlag("-i"):!1!==e.smartCase&&this.addFlag("-S"),e.noUnicode&&this.addFlag("--no-unicode"),e.encoding&&this.addOption("-E",e.encoding),e.wholeWord&&this.addFlag("-w"),e.invertMatch&&this.addFlag("-v"),e.binaryFiles&&("text"===e.binaryFiles?this.addFlag("-a"):"binary"===e.binaryFiles&&this.addFlag("--binary")),e.followSymlinks&&this.addFlag("-L"),void 0!==e.contextLines&&e.contextLines>0?this.addOption("-C",e.contextLines):(void 0!==e.beforeContext&&e.beforeContext>0&&this.addOption("-B",e.beforeContext),void 0!==e.afterContext&&e.afterContext>0&&this.addOption("-A",e.afterContext)),this.addFlag("-n"),this.addFlag("--column"),e.filesOnly?this.addFlag("-l"):e.filesWithoutMatch?this.addFlag("--files-without-match"):e.countMatches?this.addFlag("--count-matches"):e.count&&this.addFlag("-c"),void 0!==e.maxMatchesPerFile)this.addOption("-m",e.maxMatchesPerFile);else if(!e.filesOnly&&!e.count&&!e.countMatches){const t=e.matchesPerPage&&Number.isFinite(e.matchesPerPage)?e.matchesPerPage:10;this.addOption("-m",t)}if(e.type&&this.addOption("-t",e.type),e.include&&e.include.length>0){const t=this._consolidateGlobs(e.include);for(const e of t)this.addOption("-g",e)}if(e.exclude&&e.exclude.length>0)for(const t of e.exclude)this.addOption("-g",`!${t}`);if(e.excludeDir&&e.excludeDir.length>0)for(const t of e.excludeDir)this.addOption("-g",`!${t}/`);e.noIgnore&&this.addFlag("--no-ignore"),e.hidden&&this.addFlag("--hidden"),e.multiline&&(this.addFlag("-U"),e.multilineDotall&&this.addFlag("--multiline-dotall")),this.addFlag("--json"),void 0!==e.threads&&this.addOption("-j",e.threads),!1===e.mmap&&this.addFlag("--no-mmap"),e.includeStats&&this.addFlag("--stats");const t=e.sort||"path";return e.sortReverse?(this.clearSortOption(),this.addOption("--sortr",t)):(this.clearSortrOption(),this.addOption("--sort",t)),this.addOption("--color","never"),e.noMessages&&this.addFlag("--no-messages"),e.lineRegexp&&this.addFlag("-x"),e.passthru&&this.addFlag("--passthru"),e.debug&&this.addFlag("--debug"),this.addFlag("-e"),this.addArg(e.pattern),this.addArg(e.path),this}_consolidateGlobs(e){const t=/^\*\.([a-zA-Z0-9]+)$/,n=[],r=[];for(const i of e){const e=i.match(t);e?n.push(e[1]):r.push(i)}const i=[];return n.length>1?i.push(`*.{${n.join(",")}}`):1===n.length&&i.push(`*.${n[0]}`),i.push(...r),i}simple(e,t){return this.addFlag("-n"),this.addFlag("--column"),this.addFlag("-S"),this.addFlag("--json"),this.addOption("--sort","path"),this.addOption("--color","never"),this.addArg(e),this.addArg(t),this}smartCase(){return this.addFlag("-S"),this}filesOnly(){return this.addFlag("-l"),this}context(e){return this.addOption("-C",e),this}include(e){return this.addOption("-g",e),this}exclude(e){return this.addOption("-g",`!${e}`),this}excludeDir(e){return this.addOption("-g",`!${e}/`),this}type(e){return this.addOption("-t",e),this}fixedString(){return this.addFlag("-F"),this}perlRegex(){return this.addFlag("-P"),this}maxMatches(e){return this.addOption("-m",e),this}clearSortOption(){const e=this.args.indexOf("--sort");-1!==e&&e<this.args.length-1&&this.args.splice(e,2)}clearSortrOption(){const e=this.args.indexOf("--sortr");-1!==e&&e<this.args.length-1&&this.args.splice(e,2)}}function Ma(e,t){const r=process.env.WORKSPACE_ROOT?n.resolve(process.env.WORKSPACE_ROOT):process.cwd();if(void 0===e)return{isValid:!0};if(""===e.trim())return{isValid:!1,error:"Execution context (cwd) cannot be empty"};const o=n.resolve(e);if(o!==r&&!o.startsWith(r+n.sep))return{isValid:!1,error:`Can only execute commands within workspace directory: ${r}. Attempted execution in: ${o}`};try{i.lstatSync(o);const e=i.realpathSync(o);if(e!==r&&!e.startsWith(r+n.sep))return{isValid:!1,error:`Symlink target '${e}' is outside workspace directory: ${r}`}}catch(e){return e&&"ENOENT"===e.code?{isValid:!0,sanitizedPath:o}:{isValid:!1,error:`Cannot validate execution context: ${e instanceof Error?e.message:String(e)}`}}return{isValid:!0,sanitizedPath:o}}async function za(e,n,r={}){const i=Na(e,n);if(!i.isValid)throw new Error(`Command validation failed: ${i.error}`);const o=Ma(r.cwd);if(!o.isValid)throw new Error(`Execution context validation failed: ${o.error}`);const s=r.timeout||Sa,a=r.maxOutputSize||$a;return new Promise((i,o)=>{const u=t(e,n,{cwd:r.cwd,env:{...process.env,...r.env},timeout:s});let c="",l="",f=!1;u.stdout.on("data",e=>{c+=e.toString(),c.length>a&&(f=!0,u.kill(),o(new Error(`Output size limit exceeded (${a} bytes)`)))}),u.stderr.on("data",e=>{l+=e.toString(),l.length>a&&(f=!0,u.kill(),o(new Error(`Error output size limit exceeded (${a} bytes)`)))}),u.on("error",e=>{f||o(e)}),u.on("close",e=>{f||i({code:e,stdout:c,stderr:l,success:0===e})}),setTimeout(()=>{null===u.exitCode&&(f=!0,u.kill(),o(new Error(`Command timeout after ${s}ms`)))},s)})}const Ba={LOCAL_RIPGREP:{hasResults:(e={})=>["Next: FETCH_CONTENT for context (prefer matchString).","Also search imports/usages/defs with RIPGREP.",e.fileCount&&e.fileCount>5?"Tip: run queries in parallel.":void 0].filter(Boolean),empty:(e={})=>["No matches. Broaden scope (noIgnore, hidden) or use fixedString.","Unsure of paths? VIEW_STRUCTURE or FIND_FILES."],error:(e={})=>"size_limit"===e.errorType?[`Too many results${e.matchCount?` (${e.matchCount} matches)`:""}. Narrow pattern/scope.`,"Add type/path filters to focus.",e.path?.includes("node_modules")?"In node_modules, target specific packages.":void 0,"Names only? Use FIND_FILES.","Flow: filesOnly=true  refine  read."].filter(Boolean):["Tool unavailable; try FIND_FILES or VIEW_STRUCTURE."]},LOCAL_FETCH_CONTENT:{hasResults:(e={})=>["Next: trace imports/usages with RIPGREP.","Open related files (tests/types/impl) together.","Prefer matchString over full file."],empty:(e={})=>["No match/file. Check path/pattern.","Locate via FIND_FILES (name) or RIPGREP (filesOnly for paths)."],error:(e={})=>"size_limit"!==e.errorType||!e.isLarge||e.hasPagination||e.hasPattern?"pattern_too_broad"===e.errorType?[e.tokenEstimate?`Pattern too broad (~${e.tokenEstimate.toLocaleString()} tokens).`:"Pattern too broad.","Tighten pattern or paginate with charLength."]:["Unknown path; find via FIND_FILES or RIPGREP."]:[e.fileSize?`Large file (~${Math.round(.25*e.fileSize)}K tokens).`:"Large file.","Use matchString for sections, or charLength to paginate.","Avoid fullContent without pagination."]},LOCAL_VIEW_STRUCTURE:{hasResults:(e={})=>["Next: RIPGREP for patterns; FIND_FILES for filters.","Drill deeper with depth=2 when needed.",e.entryCount&&e.entryCount>10?"Parallelize across directories.":void 0].filter(Boolean),empty:(e={})=>["Empty/missing. Use hidden=true or check parent.",'Discover dirs with FIND_FILES type="d".'],error:(e={})=>"size_limit"===e.errorType&&e.entryCount?[`Directory has ${e.entryCount} entries${e.tokenEstimate?` (~${e.tokenEstimate.toLocaleString()} tokens)`:""}. Use entriesPerPage.`,"Sort by recent; scan page by page."]:['Access failed; locate dirs with FIND_FILES type="d".']},LOCAL_FIND_FILES:{hasResults:(e={})=>["Found files. Next: FETCH_CONTENT or RIPGREP.",'Use modifiedWithin="7d" to track recent changes.',e.fileCount&&e.fileCount>3?"Batch in parallel.":void 0].filter(Boolean),empty:(e={})=>["No matches. Broaden iname, increase maxDepth, relax filters.","Or use VIEW_STRUCTURE/RIPGREP.",'Syntax: time "7d", size "10M".'],error:(e={})=>["Search failed; try VIEW_STRUCTURE or RIPGREP."]}};function ja(e,t,n){const r=Ba[e]?.[t];if(!r)return[];const i="function"==typeof r?r({}):r;return(Array.isArray(i)?i:[i]).filter(e=>"string"==typeof e)}const Ua=Ge({researchGoal:qe().optional().describe("Goal of the search"),reasoning:qe().optional().describe("Why this approach helps reach the goal")});function Va(e,t){return Ge({queries:We(t).min(1).max(5).describe(`Queries for ${e} (15 per call). Review schema before use.`)})}const qa="Start offset for pagination (default 0)",Ha="Max characters to return (recommend 10,000 for large results)",Ka="Files per page. See tool schema for defaults/max.",Za="File page (1-based, default 1). Use with filesPerPage.",Wa=Ua.extend({pattern:qe().min(1).describe("Pattern or regex to search (use fixedString for literals)"),path:qe().describe("Root directory to search"),mode:tt(["discovery","paginated","detailed"]).optional().describe("Search workflow:\n- discovery: filesOnly=true (fast)\n- paginated: charLength=10000, maxMatchesPerFile=3\n- detailed: contextLines=3, charLength=10000\nManual params override mode."),fixedString:Ke().optional().describe("Treat pattern as literal (fast; -F). No regex interpretation."),perlRegex:Ke().optional().describe("Use PCRE2 (lookahead, backrefs, named groups)."),smartCase:Ke().optional().default(!0).describe("Smart case: lowercase=insensitive, mixed=case-sensitive (default)."),caseInsensitive:Ke().optional().describe("Always case-insensitive (overrides smartCase)."),caseSensitive:Ke().optional().describe("Always case-sensitive (overrides smartCase/caseInsensitive)."),wholeWord:Ke().optional().describe("Match whole words only (equivalent to \\b boundaries)"),invertMatch:Ke().optional().describe("Invert matching: show lines that DON'T match"),type:qe().optional().describe("File type filter (ts, js, py, rust). Prefer over globs. See rg --type-list."),include:We(qe()).optional().describe('Include globs. Prefer ["*.{ts,tsx}"] over separate globs.'),exclude:We(qe()).optional().describe('Exclude globs (e.g., ["*.test.*","*.spec.*"]).'),excludeDir:We(qe()).optional().describe('Exclude dirs (e.g., ["node_modules",".git","dist"]).'),noIgnore:Ke().optional().describe("Ignore .gitignore (search everything)."),hidden:Ke().optional().describe("Search hidden files and directories."),followSymlinks:Ke().optional().describe("Follow symbolic links (default false for security)."),filesOnly:Ke().optional().describe("List matching files only (best for discovery)."),filesWithoutMatch:Ke().optional().describe("List files WITHOUT matches (inverse of filesOnly)."),count:Ke().optional().describe('Count matches per file ("file:count").'),countMatches:Ke().optional().describe("Count total matches across occurrences (vs per-line count)."),contextLines:He().int().min(0).max(50).optional().describe("Context lines around matches (050). Large values increase output; prefer charLength for pagination."),beforeContext:He().int().min(0).max(50).optional().describe("Lines before match (050)."),afterContext:He().int().min(0).max(50).optional().describe("Lines after match (050)."),matchContentLength:He().int().min(1).max(800).optional().default(200).describe("Max chars per match (1800, default 200). Controls truncation."),lineNumbers:Ke().optional().default(!0).describe("Show line numbers (default: true)"),column:Ke().optional().describe("Show column numbers."),maxMatchesPerFile:He().int().min(1).max(100).optional().describe("Max matches per file (legacy; prefer matchesPerPage)."),maxFiles:He().int().min(1).max(1e3).optional().describe("Max files to search (11000)."),filesPerPage:He().int().min(1).max(20).optional().default(10).describe(Ka),filePageNumber:He().int().min(1).optional().default(1).describe(Za),matchesPerPage:He().int().min(1).max(100).optional().default(10).describe("Matches per file (default 10, max 100)."),multiline:Ke().optional().describe("Enable multiline (slow, memory-heavy). Use only if pattern spans lines."),multilineDotall:Ke().optional().describe("Make . match newlines (use with multiline=true)."),binaryFiles:tt(["text","without-match","binary"]).optional().default("without-match").describe('Binary handling: "text" (search as text), "without-match" (default), "binary" (detect).'),includeStats:Ke().optional().default(!0).describe("Include search stats (matches, files, bytes, time)."),jsonOutput:Ke().optional().describe("Output NDJSON (structured)."),vimgrepFormat:Ke().optional().describe("vim-compatible format (file:line:col:text)."),includeDistribution:Ke().optional().default(!0).describe("Include match distribution across files."),threads:He().int().min(1).max(32).optional().describe("Number of threads (default: auto)."),mmap:Ke().optional().describe("Use memory mapping (faster on large files)."),noUnicode:Ke().optional().describe("Disable Unicode mode. Faster on ASCII codebases; \\w matches ASCII only."),encoding:qe().optional().describe('Text encoding: "auto" (default), "none" (raw bytes), or specific (e.g., "utf-8", "utf-16le"). See: https://encoding.spec.whatwg.org/#names'),sort:tt(["path","modified","accessed","created"]).optional().default("path").describe('Sort results: "path" (default), "modified", "accessed", "created". Sorting can be slower; use only when needed.'),sortReverse:Ke().optional().describe("Reverse sort order."),noMessages:Ke().optional().describe("Suppress error messages (permission denied, file too large, etc.)."),lineRegexp:Ke().optional().describe('Match entire lines only (equivalent to ^...$). "foo" matches only "foo", not "foobar".'),passthru:Ke().optional().describe("Print all lines with highlights (can be huge). Conflicts with filesOnly."),debug:Ke().optional().describe("Show debug info (ignores, config, strategy, performance). Output to stderr."),showFileLastModified:Ke().default(!1).describe("Show file last modified timestamps in results (default false).")}),Ga=Va(Aa,Wa),Ya=[/^\.ssh$/,/^\.ssh\//,/\/\.ssh$/,/\/\.ssh\//,/^\.aws$/,/^\.aws\//,/\/\.aws$/,/\/\.aws\//,/^\.docker$/,/^\.docker\//,/\/\.docker$/,/\/\.docker\//,/^\.config\/gcloud$/,/^\.config\/gcloud\//,/\/\.config\/gcloud$/,/\/\.config\/gcloud\//,/^\.azure$/,/^\.azure\//,/\/\.azure$/,/\/\.azure\//,/^\.kube$/,/^\.kube\//,/\/\.kube$/,/\/\.kube\//,/^\.terraform$/,/^\.terraform\//,/\/\.terraform$/,/\/\.terraform\//,/^secrets$/,/^secrets\//,/\/secrets$/,/\/secrets\//,/^private$/,/^private\//,/\/private$/,/\/private\//,/^\.password-store$/,/^\.password-store\//,/\/\.password-store$/,/\/\.password-store\//,/\.mozilla\/firefox\//,/\.config\/chromium\//,/\.config\/google-chrome\//,/Library\/Application Support\/Google\/Chrome\//,/Library\/Application Support\/Firefox\//,/Library\/Keychains\//,/^\.thunderbird$/,/^\.thunderbird\//,/\/\.thunderbird$/,/\/\.thunderbird\//,/^\.evolution$/,/^\.evolution\//,/\/\.evolution$/,/\/\.evolution\//,/^\.vagrant$/,/^\.vagrant\//,/\/\.vagrant$/,/\/\.vagrant\//,/^\.minikube$/,/^\.minikube\//,/\/\.minikube$/,/\/\.minikube\//,/^\.bitcoin$/,/^\.bitcoin\//,/\/\.bitcoin$/,/\/\.bitcoin\//,/^\.ethereum$/,/^\.ethereum\//,/\/\.ethereum$/,/\/\.ethereum\//,/^\.electrum$/,/^\.electrum\//,/\/\.electrum$/,/\/\.electrum\//],Qa=[/^\.env$/,/^\.env\.local$/,/^\.env\.development$/,/^\.env\.production$/,/^\.env\.test$/,/^\.env\..+$/,/\.env$/,/\.env\.local$/,/\.env\..+$/,/^\.npmrc$/,/^\.pypirc$/,/^\.netrc$/,/^\.dockercfg$/,/^\.docker\/config\.json$/,/^credentials$/,/^\.credentials$/,/^\.aws\/credentials$/,/^\.aws\/config$/,/^\.ssh\/.*$/,/^id_rsa$/,/^id_dsa$/,/^id_ecdsa$/,/^id_ed25519$/,/^id_rsa\.pub$/,/^id_dsa\.pub$/,/^id_ecdsa\.pub$/,/^id_ed25519\.pub$/,/^known_hosts$/,/^authorized_keys$/,/.*_rsa$/,/.*_dsa$/,/.*_ecdsa$/,/.*_ed25519$/,/^private.*\.key$/,/^private.*\.pem$/,/^.*[-_]private[-_].*\.key$/,/^.*[-_]private[-_].*\.pem$/,/[-_]private\.key$/,/[-_]private\.pem$/,/^.*\.private\.key$/,/^.*\.private\.pem$/,/\.pem$/,/\.key$/,/\.crt$/,/\.cer$/,/\.keystore$/,/\.p12$/,/\.pfx$/,/\.jks$/,/\.ppk$/,/^service[-_]account.*\.json$/,/^.*-service[-_]account.*\.json$/,/^application[-_]default[-_]credentials\.json$/,/^gcloud[-_]credentials\.json$/,/^kubeconfig$/,/^\.kube\/config$/,/^k8s[-_]config$/,/^terraform\.tfstate$/,/^terraform\.tfstate\.backup$/,/^terraform\.tfvars$/,/^\.terraform\.lock\.hcl$/,/^\.pgpass$/,/^\.my\.cnf$/,/^\.psqlrc$/,/^secrets\.yml$/,/^master\.key$/,/^config\/master\.key$/,/^wp-config\.php$/,/^google-services\.json$/,/^GoogleService-Info\.plist$/,/^keystore\.properties$/,/\.mobileprovision$/,/\.provisionprofile$/,/^\.token$/,/^token\.txt$/,/^access_token$/,/^refresh_token$/,/^bearer_token$/,/^auth_token$/,/\.ovpn$/,/^client_secret.*\.json$/,/^oauth2.*\.json$/,/^\.password$/,/^password\.txt$/,/^passwords\.txt$/,/^\.secret$/,/^secret\.txt$/,/^secrets\.txt$/,/^apikey\.txt$/,/^api_key\.txt$/,/^api-key\.txt$/,/^\.git-credentials$/,/^git-credentials$/,/^\.htpasswd$/,/^auth\.json$/,/^\.ftpconfig$/,/^ftpconfig\.json$/,/^_netrc$/,/^\.bash_history$/,/^\.zsh_history$/,/^\.sh_history$/,/^\.history$/,/^\.mysql_history$/,/^\.psql_history$/,/^\.sqlite_history$/,/^\.pip\/pip\.conf$/,/^credentials\.xml$/,/^secrets\/.*\.xml$/,/^shadow$/,/^shadow\.bak$/,/^gshadow$/,/^\.muttrc$/,/^\.mailrc$/,/^\.ircrc$/,/^\.s3cfg$/,/^s3cfg$/,/^\.slack-token$/,/^slack[-_]token$/,/^\.github[-_]token$/,/^github[-_]token$/,/^\.netrc\.heroku$/,/^\.circleci\/local[-_]config\.yml$/,/^vault[-_]pass.*\.txt$/,/^\.vault[-_]pass.*$/,/^\.npm[-_]token$/,/^settings\.xml$/,/^\.m2\/settings\.xml$/,/^gradle\.properties$/,/^\.gradle\/gradle\.properties$/,/^\.subversion\/auth\/.*$/,/^Login Data$/,/^Cookies$/,/\/Login Data$/,/\/Cookies$/,/\/logins\.json$/,/\/key[34]\.db$/,/\.mozilla\/firefox\/.*\/logins\.json$/,/\.mozilla\/firefox\/.*\/key[34]\.db$/,/\.config\/chromium\/.*\/Login Data$/,/\.config\/google-chrome\/.*\/Login Data$/,/\.kdbx$/,/\.kdb$/,/^1Password\.sqlite$/,/^1Password.*\.sqlite$/,/\.agilekeychain\//,/\.opvault\//,/^password-store$/,/^passwords\.kdbx$/,/^keepass\.kdbx$/,/^wallet\.dat$/,/^default_wallet$/,/^\.bitcoin\/wallet\.dat$/,/^\.ethereum\/keystore\/.*$/,/^\.electrum\/wallets\/.*$/,/\/keystore\/UTC--.*$/,/\.sql$/,/\.dump$/,/\.db$/,/\.sqlite$/,/\.sqlite3$/,/^dump\.rdb$/,/^mongodb\.dump$/,/\.bson$/,/~$/,/\.bak$/,/\.backup$/,/\.old$/,/\.orig$/,/\.save$/,/\.swp$/,/\.swo$/,/\.swn$/,/^\.#.*$/,/^\.#.+$/,/^\.vscode\/settings\.json$/,/^\.vscode\/launch\.json$/,/^\.idea\/workspace\.xml$/,/^\.idea\/dataSources\.xml$/,/^\.idea\/webServers\.xml$/,/^\.idea\/deployment\.xml$/,/^\.travis\.yml$/,/^\.gitlab-ci\.yml$/,/^bitbucket-pipelines\.yml$/,/^\.circleci\/config\.yml$/,/^\.github\/workflows\/.*\.yml$/,/^\.github\/workflows\/.*\.yaml$/,/^azure-pipelines\.yml$/,/^Jenkinsfile$/,/^\.drone\.yml$/,/^\.vagrant\/machines\/.*\/private_key$/,/^\.vagrant\.d\/insecure_private_key$/,/^cookies\.txt$/,/^\.cookies$/,/^session$/,/^sessionid$/,/^\.wget-hsts$/,/^core$/,/^core\.\d+$/,/\.core$/,/\.dmp$/,/\.mdmp$/,/\.ipynb$/,/\.ipynb_checkpoints\//,/^config\.json$/,/^config\.yaml$/,/^config\.yml$/,/^settings\.json$/,/^configuration\.json$/,/^app\.config$/,/^appsettings\.json$/,/^appsettings\..*\.json$/,/\.log$/,/\.out$/,/^debug\.log$/,/^error\.log$/,/^access\.log$/,/^Credentials$/,/^NTUSER\.DAT$/,/^SAM$/,/\.keychain$/,/\.keychain-db$/,/\.csr$/,/^oauth[-_]token.*$/,/^bearer[-_]token.*$/,/^jwt[-_]token.*$/,/^\.token\..*$/,/^api[-_]keys?\..*$/,/^\.redis_history$/,/^\.mongo_history$/,/^\.dbshell$/,/^docker-compose\.override\.yml$/,/^docker-compose\..*\.yml$/,/^\.gcp[-_]credentials\.json$/,/^\.azure[-_]credentials$/,/^\.do[-_]token$/,/^\.linode[-_]token$/,/^\.msmtprc$/,/^\.fetchmailrc$/,/\.conf$/,/^wireguard\.conf$/,/^wg[0-9]+\.conf$/,/^PASSWORDS\.md$/,/^SECRETS\.md$/,/^CREDENTIALS\.md$/,/^ACCESS\.md$/,/^\.env\.dusk\..*$/,/\.asc$/,/\.gpg$/,/^\.ssh\/config$/,/\.rdp$/,/^credentials\.db$/,/^credentials\.sqlite$/,/\.postman_environment\.json$/,/^\.ruby-env$/,/^\.rbenv-vars$/,/^\.python-env$/,/^\.node-env$/,/^\.rsync[-_]password$/,/^rsync[-_]password$/];function Ja(e){return function(e){if(!e||""===e.trim())return!0;const t=e.replace(/\\/g,"/"),n=t.split("/");for(const e of n)if(Ya.some(t=>t.test(e)))return!0;return!!Ya.some(e=>e.test(t))}(e)||function(e){if(!e||""===e.trim())return!0;const t=e.replace(/\\/g,"/"),n=t.split("/").pop()||"";return!!Qa.some(e=>e.test(n))||!!Qa.some(e=>e.test(t))}(e)}const Xa=new class{allowedRoots;constructor(e){this.allowedRoots=e?[n.resolve(e)]:[process.cwd()]}addAllowedRoot(e){const t=n.resolve(e);this.allowedRoots.includes(t)||this.allowedRoots.push(t)}validate(e){if(!e||""===e.trim())return{isValid:!1,error:"Path cannot be empty"};const t=n.resolve(e);if(!this.allowedRoots.some(e=>t===e||t.startsWith(e+n.sep)))return{isValid:!1,error:`Path '${e}' is outside allowed directories. Allowed roots: ${this.allowedRoots.join(", ")}`};if(Ja(t))return{isValid:!1,error:`Path '${e}' is in an ignored directory or matches an ignored pattern`};try{const e=i.realpathSync(t);return this.allowedRoots.some(t=>e===t||e.startsWith(t+n.sep))?Ja(e)?{isValid:!1,error:`Symlink target '${e}' is in an ignored directory or matches an ignored pattern`}:{isValid:!0,sanitizedPath:e}:{isValid:!1,error:`Symlink target '${e}' is outside allowed directories`}}catch{}return{isValid:!0,sanitizedPath:t}}async exists(e){const t=this.validate(e);if(!t.isValid||!t.sanitizedPath)return!1;try{return await i.promises.access(t.sanitizedPath,i.constants.R_OK),!0}catch{return!1}}async getType(e){const t=this.validate(e);if(!t.isValid||!t.sanitizedPath)return null;try{const e=await i.promises.lstat(t.sanitizedPath);return e.isFile()?"file":e.isDirectory()?"directory":e.isSymbolicLink()?"symlink":null}catch{return null}}},eu="pathValidationFailed",tu="fileAccessFailed",nu="fileReadFailed",ru="fileTooLarge",iu="noMatches",ou="patternTooBroad",su="paginationRequired",au="outputTooLarge",uu="responseTooLarge",cu="commandExecutionFailed",lu="queryExecutionFailed",fu="toolExecutionFailed";var du;!function(e){e.FILE_SYSTEM="FILE_SYSTEM",e.VALIDATION="VALIDATION",e.SEARCH="SEARCH",e.PAGINATION="PAGINATION",e.EXECUTION="EXECUTION"}(du||(du={}));const pu={[eu]:{code:eu,category:du.VALIDATION,description:"Path validation failed - invalid or unsafe path",recoverability:"user-action-required"},[tu]:{code:tu,category:du.FILE_SYSTEM,description:"Cannot access file - may not exist or lack permissions",recoverability:"unrecoverable"},[nu]:{code:nu,category:du.FILE_SYSTEM,description:"Failed to read file contents",recoverability:"unrecoverable"},[ru]:{code:ru,category:du.FILE_SYSTEM,description:"File exceeds size limits for operation",recoverability:"user-action-required"},[iu]:{code:iu,category:du.SEARCH,description:"Search pattern found no matches",recoverability:"user-action-required"},[ou]:{code:ou,category:du.SEARCH,description:"Search pattern is too broad and would return too many results",recoverability:"user-action-required"},[su]:{code:su,category:du.PAGINATION,description:"Result set too large - pagination required",recoverability:"user-action-required"},[au]:{code:au,category:du.PAGINATION,description:"Output exceeds size limits",recoverability:"user-action-required"},[uu]:{code:uu,category:du.PAGINATION,description:"Response exceeds maximum allowed size",recoverability:"user-action-required"},[cu]:{code:cu,category:du.EXECUTION,description:"System command execution failed",recoverability:"unrecoverable"},[lu]:{code:lu,category:du.EXECUTION,description:"Query execution failed",recoverability:"unrecoverable"},[fu]:{code:fu,category:du.EXECUTION,description:"Generic tool execution failure",recoverability:"unrecoverable"}};class hu extends Error{errorCode;category;recoverability;context;constructor(e,t,n,r){const i=pu[e];super(t||i.description),this.name="ToolError",this.errorCode=e,this.category=i.category,this.recoverability=i.recoverability,this.context=n,r&&r.stack&&(this.stack=`${this.stack}\nCaused by: ${r.stack}`),Object.setPrototypeOf(this,hu.prototype)}isRecoverable(){return"recoverable"===this.recoverability}requiresUserAction(){return"user-action-required"===this.recoverability}toJSON(){return{name:this.name,errorCode:this.errorCode,category:this.category,message:this.message,recoverability:this.recoverability,context:this.context,stack:this.stack}}}function mu(e){return e instanceof hu}const gu=(e,t)=>new hu(au,`Output too large: ${e} (limit: ${t})`,{size:e,limit:t}),vu=(e,t)=>new hu(cu,`Command execution failed: ${e}`,{command:e},t);function yu(e,t){const n=Xa.validate(e.path);return n.isValid?{isValid:!0,sanitizedPath:n.sanitizedPath,query:e}:{isValid:!1,errorResult:{status:"error",error:n.error,errorCode:eu,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:ja(t,"error")}}}function _u(e,t,n,r){const i=mu(e)?e:function(e,t=fu,n){if(mu(e))return e;if(e instanceof Error)return new hu(t,e.message,n,e);const r=String(e);return new hu(t,r,n)}(e,fu);return{status:"error",errorCode:i.errorCode,researchGoal:n.researchGoal,reasoning:n.reasoning,hints:ja(t,"error"),...i.context?{context:i.context}:{},...r}}async function bu(e){const n=function(e){if(!e.mode)return e;const t={};switch(e.mode){case"discovery":t.filesOnly=!0,t.smartCase=!0;break;case"paginated":t.filesPerPage=10,t.matchesPerPage=10,t.smartCase=!0;break;case"detailed":t.contextLines=3,t.filesPerPage=10,t.matchesPerPage=20,t.smartCase=!0}return{...t,...e}}(e);try{const e=function(e){const t=[],n=[];if(e.fixedString&&e.perlRegex&&n.push("fixedString and perlRegex are mutually exclusive. Choose one."),e.filesOnly&&e.count&&t.push("filesOnly and count are mutually exclusive. Using filesOnly."),e.filesOnly&&e.filesWithoutMatch&&n.push("filesOnly and filesWithoutMatch are mutually exclusive. Choose one."),e.passthru&&e.filesOnly&&n.push("passthru and filesOnly are mutually exclusive."),e.passthru&&t.push("passthru prints ALL lines from matched files. This can produce very large output. Consider using context lines instead."),e.lineRegexp&&e.wholeWord&&t.push("lineRegexp and wholeWord both specified. lineRegexp takes precedence."),[e.caseInsensitive,e.caseSensitive,e.smartCase].filter(Boolean).length>1&&t.push("Multiple case sensitivity modes specified. Priority: caseSensitive > caseInsensitive > smartCase"),e.contextLines&&e.contextLines>2||e.beforeContext&&e.beforeContext>2||e.afterContext&&e.afterContext>2){const n=e.matchContentLength||200;t.push(`Context lines enabled (${e.contextLines||e.beforeContext||e.afterContext} lines). Match values will include context and be truncated to ${n} chars. Use matchesPerPage for pagination.`)}if(e.multiline&&t.push("Multiline mode is memory-intensive and slower. Entire files are loaded into memory. Only use when pattern genuinely spans multiple lines."),e.perlRegex&&!e.noUnicode&&e.multiline&&t.push("PERFORMANCE TIP: For fastest PCRE2 multiline searches on ASCII codebases, consider using noUnicode=true (2-3x faster)."),e.filesOnly||e.count||e.maxMatchesPerFile||e.matchesPerPage||t.push("No output limiting specified. Consider setting maxMatchesPerFile (default: 3) to control output size."),e.include&&e.include.length>1&&e.include.every(e=>e.match(/^\*\.[a-zA-Z0-9]+$/))&&!e.include[0].includes("{")){const n=e.include.map(e=>e.replace("*.","")).join(",");t.push(`TIP: Consolidate globs for better performance: include=["*.{${n}}"] instead of separate globs.`)}if(e.include&&!e.type){const n=e.include[0]?.match(/^\*\.([a-z]+)$/)?.[1];n&&["ts","js","py","rust","go","java","cpp","c"].includes(n)&&t.push(`TIP: Use type="${n}" instead of include glob for cleaner syntax.`)}return{isValid:0===n.length,warnings:t,errors:n}}(n);if(!e.isValid)return _u(new Error(`Query validation failed: ${e.errors.join(", ")}`),"LOCAL_RIPGREP",n,{warnings:e.warnings});const i=yu(n,"LOCAL_RIPGREP");if(!i.isValid)return{...i.errorResult,warnings:e.warnings};const s=await async function(e){try{let t=0,n=0;const i=await o.readdir(e,{withFileTypes:!0});for(const s of i)if(s.isFile())try{n+=(await o.stat(r(e,s.name))).size,t++}catch{}else if(s.isDirectory()&&!s.name.startsWith("."))try{const i=(await o.readdir(r(e,s.name),{withFileTypes:!0})).filter(e=>e.isFile());t+=i.length,n+=51200*i.length}catch{}const s=n/1048576;return{estimatedSizeMB:s,estimatedFileCount:t,isLarge:s>100||t>1e3}}catch{return{estimatedSizeMB:0,estimatedFileCount:0,isLarge:!1}}}(n.path),a=[];s.isLarge&&!n.filesOnly&&(a.push(`Large directory detected (~${Math.round(s.estimatedSizeMB)}MB, ~${s.estimatedFileCount} files). Consider chunking workflow for better performance.`),a.push("Large codebase: avoid floods.","Flow: RIPGREP filesOnly  add type/path filters  FETCH_CONTENT matchString  RIPGREP links.","Parallelize where safe."));const u=new Ia,{command:c,args:l}=u.fromQuery(n).build(),f=Na(c,l);if(!f.isValid)throw new Error(`Command validation failed: ${f.error}`);const d=Ma(n.path);if(!d.isValid)throw new Error(`Execution context validation failed: ${d.error}`);const{fileMap:p,warnings:h}=await async function(e,n,r){return new Promise((i,o)=>{const s=t(e,n,{cwd:r,env:{...process.env},timeout:Sa}),a=new Map;let u={};const c=[];let l="",f=0;let d=!1;const p=()=>{d||(d=!0,s.kill())};s.stdout.on("data",e=>{if(d)return;if(f+=e.length,f>10485760)return c.push("Search stopped early: Output size limit exceeded (10MB)"),void p();l+=e.toString();const t=l.split("\n");l=t.pop()||"";for(const e of t)if(e.trim())try{if(wu(JSON.parse(e),a,e=>u=e),a.size>2e3){c.push("Search stopped early: Too many matching files (>2000)"),p();break}}catch{}}),s.stderr.on("data",e=>{}),s.on("error",e=>{o(e)}),s.on("close",e=>{if(l.trim())try{wu(JSON.parse(l),a,e=>u=e)}catch{}0===e||d||1===e?i({fileMap:a,stats:u,warnings:c}):o(new Error(`ripgrep exited with code ${e}`))}),setTimeout(()=>{d||null!==s.exitCode||(c.push("Search timed out"),p(),i({fileMap:a,stats:u,warnings:c}))},Sa)})}(c,l,n.path);if(0===p.size)return{status:"empty",path:n.path,searchEngine:"rg",warnings:[...e.warnings,...a,...h],researchGoal:n.researchGoal,reasoning:n.reasoning,hints:ja("LOCAL_RIPGREP","empty")};const m=function(e,t){const n=t.contextLines??t.beforeContext??0,r=t.contextLines??t.afterContext??0,i=t.matchContentLength||200;return Array.from(e.entries()).map(([e,t])=>{const o=t.rawMatches.map(e=>{const o=[];for(let r=n;r>0;r--){const n=t.contexts.get(e.lineNumber-r);n&&o.push(n)}o.push(e.lineText);for(let n=1;n<=r;n++){const r=t.contexts.get(e.lineNumber+n);r&&o.push(r)}let s=o.join("\n");return s.length>i&&(s=s.substring(0,i)+"..."),{value:s,location:{charOffset:e.absoluteOffset,charLength:e.matchLength},line:e.lineNumber,column:e.column}});return{path:e,matchCount:o.length,matches:o}})}(p,n);n.showFileLastModified?(await Promise.all(m.map(async e=>{e.modified=await async function(e){try{return(await o.stat(e)).mtime.toISOString()}catch{return}}(e.path)})),m.sort((e,t)=>e.modified&&t.modified?new Date(t.modified).getTime()-new Date(e.modified).getTime():e.path.localeCompare(t.path))):m.sort((e,t)=>e.path.localeCompare(t.path));let g=m,v=!1;n.maxFiles&&m.length>n.maxFiles&&(g=m.slice(0,n.maxFiles),v=!0);const y=g.length,_=g.reduce((e,t)=>e+t.matchCount,0),b=n.filesPerPage||10,w=n.filePageNumber||1,x=Math.ceil(y/b),E=(w-1)*b,k=Math.min(E+b,y),A=g.slice(E,k),D=n.matchesPerPage||10,C=A.map(e=>{const t=e.matches.length,r=Math.ceil(t/D),i=n.filesOnly?[]:e.matches.slice(0,D),o={path:e.path,matchCount:t,matches:i,pagination:!n.filesOnly&&t>D?{currentPage:1,totalPages:r,matchesPerPage:D,totalMatches:t,hasMore:r>1}:void 0};return e.modified&&(o.modified=e.modified),o}),O=[`File page ${w}/${x} (showing ${C.length} of ${y})`,`Total: ${_} matches across ${y} files`,w<x?`Next: filePageNumber=${w+1}`:"Final page"];v&&O.push(`Results limited to ${n.maxFiles} files (found ${m.length} matching)`),h.length>0&&O.push(...h);const S=C.filter(e=>e.pagination?.hasMore);S.length>0&&O.push(`Note: ${S.length} file(s) have more matches - use matchesPerPage to see more`);const $=function(e,t,n){const r=[];if((n>100||e.length>20)&&(r.push("","Large result set - refine search:"),t.type||t.include||r.push('  - Narrow by file type: type="ts" or include=["*.{ts,tsx}"]'),t.excludeDir?.length||r.push('  - Exclude directories: excludeDir=["test", "vendor", "generated"]'),t.pattern.length<5&&r.push("  - Use more specific pattern (current pattern is very short)")),n>0&&n<=100&&r.push("","Good result size - manageable for analysis"),n>0){const e=t.matchContentLength||200;r.push("","Integration:","  - Use location.charOffset with FETCH_CONTENT for precise extraction","  - WARNING: charOffset/charLength are BYTE offsets, not character offsets (matters for UTF-8 multi-byte chars)",`  - Match values truncated to ${e} chars (configurable via matchContentLength: 1-800)`,"  - Line/column numbers provided for human reference")}return r}(C,n,_);return{status:"hasResults",files:C,totalMatches:n.filesOnly?0:_,totalFiles:y,path:n.path,searchEngine:"rg",pagination:{currentPage:w,totalPages:x,filesPerPage:b,totalFiles:y,hasMore:w<x},warnings:[...e.warnings,...a,...h],researchGoal:n.researchGoal,reasoning:n.reasoning,hints:[...O,...$,...ja("LOCAL_RIPGREP","hasResults")]}}catch(e){return(e instanceof Error?e.message:String(e)).includes("Output size limit exceeded")?{status:"error",errorCode:au,path:n.path,searchEngine:"rg",researchGoal:n.researchGoal,reasoning:n.reasoning,hints:["Output exceeded limits - your pattern matched too broadly.","Is the pattern too generic? Make it specific to target what you actually need","Searching everything? Add type filters or path restrictions to focus scope","For node_modules: Target specific packages rather than searching the entire directory","Strategy: Start with filesOnly=true to see what matched, then narrow before reading content"]}:_u(e,"LOCAL_RIPGREP",n)}}function wu(e,t,n){if("match"===e.type&&e.data.path&&e.data.lines){const n=e.data.path.text,r=e.data.lines.text,i=e.data.line_number??0,o=e.data.absolute_offset??0;t.has(n)||t.set(n,{rawMatches:[],contexts:new Map});const s=e.data.submatches??[],a=s.length>0?s[0].start:0,u=s.length>0?s[0].end-s[0].start:r.length;t.get(n).rawMatches.push({lineText:r,lineNumber:i,absoluteOffset:o,column:a,matchLength:u})}else if("context"===e.type&&e.data.path&&e.data.lines){const n=e.data.path.text,r=e.data.line_number??0,i=e.data.lines.text;t.has(n)||t.set(n,{rawMatches:[],contexts:new Map}),t.get(n).contexts.set(r,i)}else"summary"===e.type&&e.data.stats&&n({matchCount:e.data.stats.matches,matchedLines:e.data.stats.matched_lines,filesMatched:e.data.stats.searches_with_match,filesSearched:e.data.stats.searches,bytesSearched:e.data.stats.bytes_searched,searchTime:e.data.stats.elapsed.human})}class xu extends La{constructor(){super("ls")}fromQuery(e){if(this.addFlag("--color=never"),"linux"===process.platform&&this.addFlag("--quoting-style=literal"),e.details&&(this.addFlag("-l"),"linux"===process.platform&&this.addFlag("--time-style=long-iso")),e.hidden&&this.addFlag("-a"),e.humanReadable&&this.addFlag("-h"),e.recursive&&this.addFlag("-R"),e.reverse&&this.addFlag("-r"),e.sortBy)switch(e.sortBy){case"size":this.addFlag("-S");break;case"time":this.addFlag("-t");break;case"extension":this.addFlag("-X")}return e.sortBy&&"name"!==e.sortBy||"linux"===process.platform&&this.addFlag("--group-directories-first"),e.details||this.addFlag("-1"),this.addArg(e.path),this}simple(e){return this.addArg(e),this}detailed(){return this.addFlag("-l"),this}all(){return this.addFlag("-a"),this}humanReadable(){return this.addFlag("-h"),this}recursive(){return this.addFlag("-R"),this}sortBySize(){return this.addFlag("-S"),this}sortByTime(){return this.addFlag("-t"),this}reverse(){return this.addFlag("-r"),this}path(e){return this.addArg(e),this}}function Eu(e){const t=e.split(".");return t.length>1?t[t.length-1]:""}function ku(e,t=0,n,r){const i=e.length;if(!n)return{paginatedContent:e,charOffset:0,charLength:i,totalChars:i,hasMore:!1,estimatedTokens:Math.ceil(i/4),currentPage:1,totalPages:1};const o=Math.min(t,i),s=Math.min(o+n,i),a=e.substring(o,s),u=a.length,c=s<i,l=t;return{paginatedContent:a,charOffset:o,charLength:u,totalChars:i,hasMore:c,nextCharOffset:c?s:void 0,estimatedTokens:Math.ceil(u/4),currentPage:Math.floor(l/n)+1,totalPages:Math.ceil(i/n)}}function Au(e,t){const n=t?.enableWarnings??!0,r=[...t?.customHints??[]],{charOffset:i,charLength:o,totalChars:s,hasMore:a,nextCharOffset:u,estimatedTokens:c}=e;if(n&&c>5e4?r.push("CRITICAL: >50K tokens! Result is TOO LARGE!","ACTION: Use pagination with charLength=10000 for manageable chunks"):n&&c>25e3?r.push("WARNING: >25K tokens. Result is very heavy.","Better: Use charLength=10000-20000 for moderate chunks"):n&&c>1e4?r.push("NOTICE: >10K tokens. Result is substantial.","Consider: Using charLength parameter to paginate"):n&&c>2500?r.push("Moderate usage (2.5-10K tokens). Good for analysis."):n&&r.push("Light usage (<2.5K tokens). Efficient query!"),a){const e=s-i-o,t=Math.ceil(s/4);r.push(`Size: ${s.toLocaleString()} chars total (~${t.toLocaleString()} tokens)`,`This page: ${o.toLocaleString()} chars (~${c.toLocaleString()} tokens)`,`More available: ${e.toLocaleString()} chars remaining`,"Instruction: This is a paginated result - use pagination to see more results",`Next page: Use charOffset=${u}, charLength=${o}`)}else if(i>0){const e=Math.ceil(s/4);r.push("Complete: This is the final page",`Total: ${s.toLocaleString()} chars (~${e.toLocaleString()} tokens)`)}else r.push(`Complete: All results shown (${o.toLocaleString()} chars, ~${c.toLocaleString()} tokens)`);return r}function Du(e){return{currentPage:e.currentPage,totalPages:e.totalPages,charOffset:e.charOffset,charLength:e.charLength,totalChars:e.totalChars,hasMore:e.hasMore}}function Cu(e){const t=["B","KB","MB","GB","TB"];let n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;return`${n.toFixed(1)}${t[r]}`}function Ou(e){const t=e.match(/^([\d.]+)([KMGT]?)$/);if(!t)return 0;const[,n,r]=t,i=parseFloat(n);switch(r){case"K":return Math.round(1024*i);case"M":return Math.round(1024*i*1024);case"G":return Math.round(1024*i*1024*1024);case"T":return Math.round(1024*i*1024*1024*1024);default:return Math.round(i)}}function Su(e,t){let n=e;if(t.pattern){const e=t.pattern;if(e.includes("*")||e.includes("?")||e.includes("[")){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&");t=t.replace(/\\\*/g,".*").replace(/\\\?/g,".").replace(/\\\[!/g,"[^").replace(/\\\[/g,"[").replace(/\\\]/g,"]");try{const e=new RegExp(`^${t}$`,"i");n=n.filter(t=>e.test(t.name))}catch{n=n.filter(t=>t.name.includes(e))}}else n=n.filter(t=>t.name.includes(e))}return t.extension&&(n=n.filter(e=>e.extension===t.extension)),t.extensions&&t.extensions.length>0&&(n=n.filter(e=>e.extension&&t.extensions.includes(e.extension))),t.directoriesOnly&&(n=n.filter(e=>"directory"===e.type)),t.filesOnly&&(n=n.filter(e=>"file"===e.type)),n}function $u(e,t=0){const n="  ".repeat(t),r="directory"===e.type?"[DIR] ":"symlink"===e.type?"[LINK]":"[FILE]",i="directory"===e.type?`${e.name}/`:e.name;if("file"===e.type&&e.size){const t=e.extension?` .${e.extension}`:"";return`${n}${r} ${i} (${e.size})${t}`}return`${n}${r} ${i}`}async function Tu(e){try{const t=yu(e,"LOCAL_VIEW_STRUCTURE");if(!t.isValid)return t.errorResult;if(e.depth||e.recursive)return await async function(e,t,r=!1){const i=[],o=e.depth||(e.recursive?5:2),s=e.limit?2*e.limit:1e4;await Pu(t,t,0,o,i,s,e.hidden,r);let a=Su(i,e);e.sortBy&&(a=a.sort((t,n)=>{let i=0;switch(e.sortBy){case"size":i=(t.size||"").localeCompare(n.size||"");break;case"time":i=r&&t.modified&&n.modified?t.modified.localeCompare(n.modified):t.name.localeCompare(n.name);break;case"extension":i=(t.extension||"").localeCompare(n.extension||"");break;default:i=t.name.localeCompare(n.name)}return e.reverse?-i:i})),e.limit&&(a=a.slice(0,e.limit));const u=a.filter(e=>"file"===e.type).length,c=a.filter(e=>"directory"===e.type).length;let l=0;for(const e of a)"file"===e.type&&e.size&&(l+=Ou(e.size));const f=l;if(!e.charLength&&a.length>100){const t=150*a.length;return{status:"error",errorCode:gu(t,Pa).errorCode,path:e.path,totalFiles:u,totalDirectories:c,totalSize:f,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[`Recursive listing found ${a.length} entries - too much to process at once`,"Options: Use charLength to paginate through the tree, or limit to reduce scope","Alternative: Start with depth=1 to get overview, then drill into specific subdirectories","Why this matters: Large trees overwhelm context and make it hard to find what you need"]}}let d=a.map(e=>{const t=e.name.split(n.sep).length-1;return $u(e,t)}).join("\n"),p=null;e.charLength&&(p=ku(d,e.charOffset??0,e.charLength),d=p.paginatedContent);const h=a.length>0?"hasResults":"empty",m=ja("LOCAL_VIEW_STRUCTURE",h),g=p?Au(p,{}):[];return{status:h,path:e.path,structuredOutput:d,totalFiles:u,totalDirectories:c,totalSize:f,...p&&{pagination:Du(p)},researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[...m,...g]}}(e,t.sanitizedPath,e.showFileLastModified);const r=new xu,{command:o,args:s}=r.fromQuery(e).build(),a=await za(o,s);if(!a.success)return{status:"error",errorCode:vu("ls",new Error(a.stderr)).errorCode,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:ja("LOCAL_VIEW_STRUCTURE","error")};const u=e.details?function(e,t=!1){const n=e.split("\n").filter(e=>e.trim()),r=[];for(const e of n){if(e.startsWith("total "))continue;const n=e.match(/^([\w-]+[@+]?)\s+\d+\s+\w+\s+\w+\s+([\d.]+[KMGT]?)\s+(\w+\s+\d+\s+[\d:]+)\s+(.+)$/);if(n){const[,e,i,o,s]=n;let a=0;a=/^\d+$/.test(i)?parseInt(i,10):Ou(i);let u="file";e.startsWith("d")?u="directory":e.startsWith("l")&&(u="symlink");const c={name:s,type:u,size:Cu(a),permissions:e,extension:Eu(s)};t&&(c.modified=o),r.push(c)}}return r}(a.stdout,e.showFileLastModified):await async function(e,t,r=!1){const o=e.split("\n").filter(e=>e.trim()).map(async e=>{const o=n.join(t,e);try{const t=await i.promises.lstat(o),n={name:e,type:t.isDirectory()?"directory":t.isSymbolicLink()?"symlink":"file",size:Cu(t.size),extension:Eu(e)};return r&&(n.modified=t.mtime.toISOString()),n}catch{return{name:e,type:"file",extension:Eu(e)}}});return await Promise.all(o)}(a.stdout,t.sanitizedPath,e.showFileLastModified),c=Su(u,e),l=c.length,f=c.filter(e=>"file"===e.type).length,d=c.filter(e=>"directory"===e.type).length;let p=0;for(const e of c)"file"===e.type&&e.size&&(p+=Ou(e.size));const h=p,m=e.entriesPerPage||20,g=e.entryPageNumber||1,v=Math.ceil(l/m),y=(g-1)*m,_=Math.min(y+m,l);let b=c.slice(y,_);const w={currentPage:g,totalPages:v,entriesPerPage:m,totalEntries:l,hasMore:g<v};if(e.limit&&(b=b.slice(0,e.limit)),!e.charLength&&l>100&&!e.entriesPerPage){const t=l*(e.details?150:30);return{status:"error",errorCode:gu(t,Pa).errorCode,path:e.path,totalFiles:f,totalDirectories:d,totalSize:h,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[`Directory contains ${l} entries - overwhelming to view all at once`,"Use entriesPerPage to paginate through results (sorted by modification time, most recent first)","Why pagination helps: Lets you focus on relevant files first, reduces token usage, easier to navigate"]}}let x=b.map(e=>$u(e,0)).join("\n"),E=null;e.charLength&&(E=ku(x,e.charOffset??0,e.charLength),x=E.paginatedContent);const k=l>0?"hasResults":"empty",A=[`Page ${g}/${v} (showing ${b.length} of ${l})`,`Total: ${f} files, ${d} directories`,w.hasMore?`Next: entryPageNumber=${g+1}`:"Final page"],D={currentPage:w.currentPage,totalPages:w.totalPages,entriesPerPage:w.entriesPerPage,totalEntries:w.totalEntries,hasMore:w.hasMore,...E&&{charOffset:E.charOffset,charLength:E.charLength,totalChars:E.totalChars}};return{status:k,path:e.path,structuredOutput:x,totalFiles:f,totalDirectories:d,totalSize:h,pagination:D,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[...A,...ja("LOCAL_VIEW_STRUCTURE",k),...E?Au(E,{toolName:"local_view_structure"}):[]]}}catch(n){return{status:"error",errorCode:(t="LOCAL_VIEW_STRUCTURE",r=n instanceof Error?n:void 0,new hu(fu,`Tool execution failed: ${t}`,{toolName:t},r)).errorCode,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:ja("LOCAL_VIEW_STRUCTURE","error")}}var t,r}async function Pu(e,t,r,o,s,a=1e4,u=!1,c=!1){if(!(r>=o||s.length>=a))try{const l=await i.promises.readdir(t);for(const f of l){if(!u&&f.startsWith("."))continue;const l=n.join(t,f),d=n.relative(e,l);try{const t=await i.promises.lstat(l);let n="file";t.isDirectory()?n="directory":t.isSymbolicLink()&&(n="symlink");const p={name:d,type:n,size:Cu(t.size),extension:Eu(f)};c&&(p.modified=t.mtime.toISOString()),s.push(p),"directory"===n&&await Pu(e,l,r+1,o,s,a,u,c)}catch{}}}catch{}}class Fu extends La{constructor(){super("find")}fromQuery(e){if(this.addArg(e.path),"linux"===process.platform&&this.addFlag("-O3"),void 0!==e.maxDepth&&this.addOption("-maxdepth",e.maxDepth),void 0!==e.minDepth&&this.addOption("-mindepth",e.minDepth),e.type&&this.addOption("-type",e.type),e.names&&e.names.length>0?1===e.names.length?this.addOption("-name",e.names[0]):(this.addArg("("),e.names.forEach((e,t)=>{t>0&&this.addArg("-o"),this.addOption("-name",e)}),this.addArg(")")):e.name&&this.addOption("-name",e.name),e.iname&&this.addOption("-iname",e.iname),e.pathPattern&&this.addOption("-path",e.pathPattern),e.regex&&(e.regexType&&this.addOption("-regextype",e.regexType),this.addOption("-regex",e.regex)),e.empty&&this.addFlag("-empty"),e.sizeGreater&&this.addOption("-size",`+${e.sizeGreater}`),e.sizeLess&&this.addOption("-size",`-${e.sizeLess}`),e.modifiedWithin){const{value:t,unit:n}=this.parseTime(e.modifiedWithin);this.addOption("min"===n?"-mmin":"-mtime",`-${t}`)}if(e.modifiedBefore){const{value:t,unit:n}=this.parseTime(e.modifiedBefore);this.addOption("min"===n?"-mmin":"-mtime",`+${t}`)}if(e.accessedWithin){const{value:t,unit:n}=this.parseTime(e.accessedWithin);this.addOption("min"===n?"-amin":"-atime",`-${t}`)}if(e.permissions&&this.addOption("-perm",e.permissions),e.executable&&this.addFlag("-executable"),e.readable&&this.addFlag("-readable"),e.writable&&this.addFlag("-writable"),e.excludeDir&&e.excludeDir.length>0){for(const t of e.excludeDir)this.addArg("("),this.addArg("-path"),this.addArg(`*/${t}`),this.addArg("-o"),this.addArg("-path"),this.addArg(`*/${t}/*`),this.addArg(")"),this.addArg("-prune"),this.addArg("-o");this.addArg("-print0")}else this.addArg("-print0");return this}simple(e,t){return this.addArg(e),this.addOption("-name",t),this}type(e){return this.addOption("-type",e),this}name(e){return this.addOption("-name",e),this}iname(e){return this.addOption("-iname",e),this}maxDepth(e){return this.addOption("-maxdepth",e),this}minDepth(e){return this.addOption("-mindepth",e),this}size(e){return this.addOption("-size",e),this}mtime(e){return this.addOption("-mtime",e),this}path(e){return this.addArg(e),this}parseTime(e){const t=e.match(/^(\d+)([hdwm])$/);if(!t)return{value:0,unit:"day"};const n=parseInt(t[1],10);switch(t[2]){case"m":return{value:n,unit:"min"};case"h":return{value:60*n,unit:"min"};case"d":default:return{value:n,unit:"day"};case"w":return{value:7*n,unit:"day"}}}}async function Ru(e){try{const t=yu(e,"LOCAL_FIND_FILES");if(!t.isValid)return t.errorResult;const n=new Fu,{command:r,args:o}=n.fromQuery(e).build(),s=await za(r,o);if(!s.success)return _u(vu("find",new Error(s.stderr)),"LOCAL_FIND_FILES",e);let a=s.stdout.split("\0").filter(e=>e.trim()).map(e=>e.trim());const u=e.limit||1e3;a=a.slice(0,u);const c=await async function(e,t=!1){const n=new Array(e.length),r=async r=>{const o=e[r];try{const e=await i.promises.lstat(o);let s="file";e.isDirectory()?s="directory":e.isSymbolicLink()&&(s="symlink");const a={path:o,type:s,size:e.size,permissions:e.mode.toString(8).slice(-3)};t&&(a.modified=e.mtime.toISOString()),n[r]=a}catch{n[r]={path:o,type:"file"}}};let o=0;const s=()=>{const t=o;return o+=1,t<e.length?t:-1},a=Array.from({length:Math.min(24,e.length)},()=>(async()=>{for(let e=s();-1!==e;e=s())await r(e)})());return await Promise.all(a),n}(a,e.showFileLastModified);c.sort((t,n)=>e.showFileLastModified&&t.modified&&n.modified?new Date(n.modified).getTime()-new Date(t.modified).getTime():t.path.localeCompare(n.path));const l=c.map(t=>{const n={path:t.path,type:t.type};return e.details&&(void 0!==t.size&&(n.size=t.size),t.permissions&&(n.permissions=t.permissions)),e.showFileLastModified&&t.modified&&(n.modified=t.modified),n}),f=l.length,d=e.filesPerPage||20,p=e.filePageNumber||1,h=Math.ceil(f/d),m=(p-1)*d,g=Math.min(m+d,f),v=l.slice(m,g),y=function(e,t,n){if(t||e<=n.threshold)return{shouldBlock:!1};let r=n.avgSizePerItem;r||(r=n.detailed?150:50);const i=e*r,o=Math.ceil(i/4),s=["RECOMMENDED: charLength=10000 (paginate results)",`Full result would be approximately ${o.toLocaleString()} tokens`,"ALTERNATIVE: Use limit parameter to reduce results","NOTE: Large token usage can impact performance",...n.customHints||[]];return{shouldBlock:!0,errorCode:au,hints:s,estimatedTokens:o}}(v.length,!!e.charLength,{threshold:100,itemType:"file",detailed:e.details});if(y.shouldBlock)return{status:"error",errorCode:y.errorCode,totalFiles:f,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:y.hints};let _=v,b=null;if(e.charLength){const t=[];let n=2;for(const r of v){const i=JSON.stringify(r).length+1;if(n+i>e.charLength&&t.length>0)break;t.push(r),n+=i}_=t,b={paginatedContent:JSON.stringify(_),charOffset:0,charLength:n,totalChars:JSON.stringify(v).length,hasMore:_.length<v.length||p<h,estimatedTokens:Math.ceil(n/4),currentPage:p,totalPages:h}}const w=f>0?"hasResults":"empty",x=[`Page ${p}/${h} (showing ${_.length} of ${f})`,p<h?`Next: filePageNumber=${p+1}`:"Final page",e.showFileLastModified?"Sorted by modification time (most recent first)":"Sorted by path"];return{status:w,files:_,totalFiles:f,pagination:{currentPage:p,totalPages:h,filesPerPage:d,totalFiles:f,hasMore:p<h},...b&&{charPagination:{currentPage:b.currentPage,totalPages:b.totalPages,charOffset:b.charOffset,charLength:b.charLength,totalChars:b.totalChars,hasMore:b.hasMore}},researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[...x,...ja("LOCAL_FIND_FILES",w),...b?Au(b,{toolName:"local_find_files"}):[]]}}catch(t){return _u(t,"LOCAL_FIND_FILES",e)}}async function Nu(e){try{const n=yu(e,"LOCAL_FETCH_CONTENT");if(!n.isValid)return n.errorResult;const r=n.sanitizedPath;let i;try{i=await s(r)}catch(t){return _u(((e,t)=>new hu(tu,`Cannot access file: ${e}`,{path:e},t))(e.path,t instanceof Error?t:void 0),"LOCAL_FETCH_CONTENT",e,{path:e.path})}const o=i.size/1024;if(o>100&&!e.charLength&&!e.matchString)return _u(((e,t,n)=>new hu(ru,(()=>{const e=e=>Number.isInteger(e)?`${e}KB`:`${e.toFixed(1)}KB`;return`File too large: ${e(t)} (limit: ${e(n)})`})(),{path:e,sizeKB:t,limitKB:n}))(e.path,o,100),"LOCAL_FETCH_CONTENT",e,{path:e.path,hints:["Best approach: Use matchString to extract specific functions/classes you actually need","Alternative: Use charLength for pagination if you need to browse through the file systematically","Why matchString works better: Gets only relevant sections, faster, and uses fewer tokens","Critical: fullContent without charLength will fail on large files - always specify a reading strategy"]});let u;try{u=await a(r,"utf-8")}catch(t){return _u(((e,t)=>new hu(nu,`Failed to read file: ${e}`,{path:e},t))(e.path,t instanceof Error?t:void 0),"LOCAL_FETCH_CONTENT",e,{path:e.path})}const c=u.split("\n"),l=c.length;let f,d=!1;if(e.matchString){const t=function(e,t,n,r=!1,i=!1){const o=[];let s=null;if(r){if(t.length>500)throw new Error("Regex pattern too long (max 500 chars)");try{s=new RegExp(t,i?"":"i")}catch(e){throw new Error(`Invalid regex pattern: ${e instanceof Error?e.message:String(e)}`)}}const a=i?t:t.toLowerCase(),u=Date.now();for(let n=0;n<e.length;n++){const c=e[n];if(Date.now()-u>2e3)throw new Error("Search timeout - matching took too long (potential ReDoS)");let l=!1;if(r){const e=c.length>1e4?c.slice(0,1e4):c;l=s.test(e)}else l=i?c.includes(t):c.toLowerCase().includes(a);l&&o.push(n+1)}if(0===o.length)return{lines:[],matchRanges:[]};const c=[];let l={start:Math.max(1,o[0]-n),end:Math.min(e.length,o[0]+n)};for(let t=1;t<o.length;t++){const r=o[t],i=Math.max(1,r-n),s=Math.min(e.length,r+n);i<=l.end+1?l.end=Math.max(l.end,s):(c.push({...l}),l={start:i,end:s})}c.push(l);const f=[];return c.forEach((t,n)=>{if(n>0){const e=t.start-c[n-1].end-1;e>0&&(f.push(""),f.push(`... [${e} lines omitted] ...`),f.push(""))}f.push(...e.slice(t.start-1,t.end))}),{lines:f,matchRanges:c}}(c,e.matchString,e.matchStringContextLines??5,e.matchStringIsRegex??!1,e.matchStringCaseSensitive??!1);if(0===t.lines.length){const t=[`Searched ${l} line${1===l?"":"s"} - no matches found`];return e.matchStringIsRegex?t.push("TIP: Regex pattern may be too specific - try simplifying"):t.push('TIP: Try matchStringIsRegex=true for pattern matching (e.g., "export.*function")'),e.matchStringCaseSensitive&&t.push("TIP: Case-sensitive mode active - try matchStringCaseSensitive=false"),t.push("TIP: Verify file contains expected content or try simpler pattern"),{status:"empty",path:e.path,errorCode:iu,totalLines:l,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[...ja("LOCAL_FETCH_CONTENT","empty"),"",...t]}}if(f=t.lines.join("\n"),!e.charLength&&f.length>Ta)return _u(((e,t)=>new hu(ou,`Pattern too broad: ${t} matches found`,{pattern:e,matchCount:t}))(e.matchString||"",t.matchRanges.length),"LOCAL_FETCH_CONTENT",e,{path:e.path,totalLines:l,hints:["Your pattern matched extensively - likely hitting common code","Make the pattern more specific to target only what you need, or use charLength to paginate results","Possible causes: Minified files, repeated patterns, or overly broad match terms","Strategy: Refine matchString to be more selective, or explore with pagination"]});d=!0}else f=u,d=!1;if(!1!==e.minified)try{const t=f.length,n=function(e,t){const n=Eu(t);try{switch(n){case"js":case"jsx":case"ts":case"tsx":case"mjs":case"cjs":return function(e){return e.replace(/(?<!:)\/\/[^\n]*/g,"").replace(/\/\*(?!\*)[^*]*\*+(?:[^/*][^*]*\*+)*\//g,"").replace(/\s+/g," ").replace(/\s*([{}();,:])\s*/g,"$1").split("\n").map(e=>e.trim()).filter(e=>e.length>0).join("\n")}(e);case"json":return function(e){try{const t=JSON.parse(e);return JSON.stringify(t)}catch{return e}}(e);case"css":case"scss":case"sass":case"less":return function(e){return e.replace(/\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\//g,"").replace(/\s+/g," ").replace(/\s*([{}:;,])\s*/g,"$1").trim()}(e);case"html":case"htm":case"xml":return function(e){let t;do{t=e,e=e.replace(/<!--[^>]*-->/g,"")}while(e!==t);return e.replace(/>\s+</g,"><").replace(/\s+/g," ").trim()}(e);default:return function(e){return e.replace(/\n{3,}/g,"\n\n").split("\n").map(e=>e.trimEnd()).join("\n").trim()}(e)}}catch{return e}}(f,e.path);n.length<t&&(f=n)}catch{}if(!f||0===f.trim().length)return{status:"empty",path:e.path,totalLines:l,researchGoal:e.researchGoal,reasoning:e.reasoning,hints:ja("LOCAL_FETCH_CONTENT","empty")};if(!e.charLength&&f.length>Ta)return _u((t=f.length,new hu(su,`Pagination required: ${t} characters`,{itemCount:t})),"LOCAL_FETCH_CONTENT",e,{path:e.path,totalLines:l,hints:["RECOMMENDED: charLength=10000 (paginate results)","ALTERNATIVE: Use matchString for targeted extraction","NOTE: Results >10K chars require pagination for safety"]});const p=ku(f,e.charOffset??0,e.charLength),h=ja("LOCAL_FETCH_CONTENT","hasResults"),m=e.charLength?Au(p,{toolName:"local_fetch_content"}):[];return{status:"hasResults",path:e.path,content:p.paginatedContent,contentLength:p.paginatedContent.length,isPartial:d,totalLines:l,...e.charLength&&{pagination:Du(p)},researchGoal:e.researchGoal,reasoning:e.reasoning,hints:[...h,...m]}}catch(t){return _u(t,"LOCAL_FETCH_CONTENT",e,{path:e.path})}var t}function Lu(e){return e.split("")}function Iu(e,t){return t.includes(e)}class Mu extends Error{constructor(e,t){super(),this.name="DefaultsError",this.message=e,this.defs=t}}function zu(e,t,n){!0===e?e={}:null!=e&&"object"==typeof e&&(e={...e});const r=e||{};if(n)for(const e in r)if(Xu(r,e)&&!Xu(t,e))throw new Mu("`"+e+"` is not a supported option",t);for(const n in t)if(Xu(t,n))if(e&&Xu(e,n))if("ecma"===n){let t=0|e[n];t>5&&t<2015&&(t+=2009),r[n]=t}else r[n]=e&&Xu(e,n)?e[n]:t[n];else r[n]=t[n];return r}function Bu(){}function ju(){return!1}function Uu(){return!0}function Vu(){return this}function qu(){return null}var Hu=function(){function e(e,n,r=!0){const i=[];for(let o=0;o<e.length;++o){let s=e[o].transform(n,r);s instanceof tl?i.push(s):s instanceof t&&i.push(...s.v)}return i}function t(e){this.v=e}return e.splice=function(e){return new t(e)},e.skip={},e}();function Ku(e,t,n){return n||(n={}),t&&(n.start||(n.start=t.start),n.end||(n.end=t.end)),new e(n)}function Zu(e,t){e.includes(t)||e.push(t)}function Wu(e,t){return e.replace(/{(.+?)}/g,function(e,n){return t&&t[n]})}function Gu(e,t){for(var n=e.length;--n>=0;)e[n]===t&&e.splice(n,1)}function Yu(e,t){return e.length<2?e.slice():function e(n){if(n.length<=1)return n;var r=Math.floor(n.length/2),i=n.slice(0,r),o=n.slice(r);return function(e,n){for(var r=[],i=0,o=0,s=0;i<e.length&&o<n.length;)t(e[i],n[o])<=0?r[s++]=e[i++]:r[s++]=n[o++];return i<e.length&&r.push.apply(r,e.slice(i)),o<n.length&&r.push.apply(r,n.slice(o)),r}(i=e(i),o=e(o))}(e)}function Qu(e){return Array.isArray(e)||(e=e.split(" ")),new Set(e.sort())}function Ju(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}function Xu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ec(e,t){return!0===e||e instanceof RegExp&&e.test(t)}var tc={"\0":"0","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function nc(e){return e.replace(/[\0\n\r\u2028\u2029]/g,function(t,n){return("\\"!=e[n-1]||"\\"==e[n-2]&&!/(?:^|[^\\])(?:\\{2})*$/.test(e.slice(0,n-1))?"\\":"")+tc[t]})}const rc=/^[\\/|\0\s\w^$.[\]()]*$/,ic=e=>rc.test(e);function oc(e,t){return e._annotations&t}function sc(e,t){e._annotations|=t}var ac="",uc=new Map,cc="break case catch class const continue debugger default delete do else export extends finally for function if in instanceof let new return switch throw try typeof var void while with",lc="false null true",fc="enum import super this "+lc+" "+cc,dc="implements interface package private protected public static "+fc,pc="return new delete throw else case yield await";cc=Qu(cc),fc=Qu(fc),pc=Qu(pc),lc=Qu(lc),dc=Qu(dc);var hc=Qu(Lu("+-*&%=<>!?|~^")),mc=/^0x[0-9a-f]+$/i,gc=/^0[0-7]+$/,vc=/^0o[0-7]+$/i,yc=/^0b[01]+$/i,_c=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,bc=/^(0[xob])?[0-9a-f]+n$/i,wc=/in(?:stanceof)?/y,xc=Qu(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","**","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","||=","&&=","??=","/=","*=","**=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","??","||"]),Ec=Qu(Lu(" \n\r\t\f\v\u2028\u2029\ufeff")),kc=Qu(Lu("\n\r\u2028\u2029")),Ac=Qu(Lu(";]),:")),Dc=Qu(Lu("[{(,;:")),Cc=Qu(Lu("[]{}(),;:")),Oc={ID_Start:/[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/(?:[$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])+/};function Sc(e,t){if($c(e.charCodeAt(t))){if(Tc(e.charCodeAt(t+1)))return e.charAt(t)+e.charAt(t+1)}else if(Tc(e.charCodeAt(t))&&$c(e.charCodeAt(t-1)))return e.charAt(t-1)+e.charAt(t);return e.charAt(t)}function $c(e){return e>=55296&&e<=56319}function Tc(e){return e>=56320&&e<=57343}function Pc(e){return e>=48&&e<=57}function Fc(e){return Oc.ID_Start.test(e)}function Rc(e){return Oc.ID_Continue.test(e)}const Nc=/^[a-z_$][a-z0-9_$]*$/i;function Lc(e){return Nc.test(e)}function Ic(e,t){if(Nc.test(e))return!0;if(!t&&/[\ud800-\udfff]/.test(e))return!1;var n=Oc.ID_Start.exec(e);return!(!n||0!==n.index||(e=e.slice(n[0].length))&&(!(n=Oc.ID_Continue.exec(e))||n[0].length!==e.length))}function Mc(e,t=!0){if(!t&&e.includes("e"))return NaN;if(mc.test(e))return parseInt(e.substr(2),16);if(gc.test(e))return parseInt(e.substr(1),8);if(vc.test(e))return parseInt(e.substr(2),8);if(yc.test(e))return parseInt(e.substr(2),2);if(_c.test(e))return parseFloat(e);var n=parseFloat(e);return n==e?n:void 0}class zc extends Error{constructor(e,t,n,r,i){super(),this.name="SyntaxError",this.message=e,this.filename=t,this.line=n,this.col=r,this.pos=i}}function Bc(e,t,n,r,i){throw new zc(e,t,n,r,i)}function jc(e,t,n){return e.type==t&&(null==n||e.value==n)}var Uc={};function Vc(e,t,n,r){var i={text:e,filename:t,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,brace_counter:0,template_braces:[],comments_before:[],directives:{},directive_stack:[]};function o(){return Sc(i.text,i.pos)}function s(){if(46!==i.text.charCodeAt(i.pos+1))return!1;const e=i.text.charCodeAt(i.pos+2);return e<48||e>57}function a(e,t){var n=Sc(i.text,i.pos++);if(e&&!n)throw Uc;return kc.has(n)?(i.newline_before=i.newline_before||!t,++i.line,i.col=0,"\r"==n&&"\n"==o()&&(++i.pos,n="\n")):(n.length>1&&(++i.pos,++i.col),++i.col),n}function u(e){for(;e--;)a()}function c(e){return i.text.substr(i.pos,e.length)==e}function l(){for(var e=i.text,t=i.pos,n=i.text.length;t<n;++t){var r=e[t];if(kc.has(r))return t}return-1}function f(e,t){var n=i.text.indexOf(e,i.pos);if(-1==n)throw Uc;return n}function d(){i.tokline=i.line,i.tokcol=i.col,i.tokpos=i.pos}var p=!1,h=null;function m(e,n,r){i.regex_allowed="operator"==e&&!Hc.has(n)||"keyword"==e&&pc.has(n)||"punc"==e&&Dc.has(n)||"arrow"==e,"punc"!=e||"."!=n&&"?."!=n?r||(p=!1):p=!0;const o=i.tokline,s=i.tokcol,a=i.tokpos,u=i.newline_before,c=t;let l=[],f=[];r||(l=i.comments_before,f=i.comments_before=[]),i.newline_before=!1;const d=new el(e,n,o,s,a,u,l,f,c);return r||(h=d),d}function g(){for(;Ec.has(o());)a()}function v(e){Bc(e,t,i.tokline,i.tokcol,i.tokpos)}function y(e){var t=!1,n=!1,r=!1,i="."==e,s=!1,u=!1,c=function(e){for(var t,n="",r=0;(t=o())&&e(t,r++);)n+=a();return n}(function(o,a){if(s)return!1;var c=o.charCodeAt(0);switch(c){case 95:return u=!0;case 98:case 66:return r=!0;case 111:case 79:case 120:case 88:return!r&&(r=!0);case 101:case 69:return!!r||!t&&(t=n=!0);case 45:return n||0==a&&!e;case 43:return n;case n=!1,46:return!(i||r||t)&&(i=!0);case 110:return s=!0,!0}return c>=48&&c<=57||c>=97&&c<=102||c>=65&&c<=70});if(e&&(c=e+c),ac=c,gc.test(c)&&L.has_directive("use strict")&&v("Legacy octal literals are not allowed in strict mode"),u&&(c.endsWith("_")?v("Numeric separators are not allowed at the end of numeric literals"):c.includes("__")&&v("Only one underscore is allowed as numeric separator"),c=c.replace(/_/g,"")),s){const e=c.slice(0,-1),t=Mc(e,mc.test(e));if(!i&&bc.test(c)&&!isNaN(t))return m("big_int",e);v("Invalid or unexpected token")}var l=Mc(c);if(!isNaN(l))return m("num",l);v("Invalid syntax: "+c)}function _(e){return e>="0"&&e<="7"}function b(e,t,n){var r=a(!0,e);switch(r.charCodeAt(0)){case 110:return"\n";case 114:return"\r";case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 120:return String.fromCharCode(w(2,t));case 117:if("{"==o()){for(a(!0),"}"===o()&&v("Expecting hex-character between {}");"0"==o();)a(!0);var s,u=f("}")-i.pos;return(u>6||(s=w(u,t))>1114111)&&v("Unicode reference out of bounds"),a(!0),function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}(s)}return String.fromCharCode(w(4,t));case 10:return"";case 13:if("\n"==o())return a(!0,e),""}return _(r)?(n&&t&&("0"===r&&!_(o())||v("Octal escape sequences are not allowed in template strings")),function(e,t){var n=o();return n>="0"&&n<="7"&&(e+=a(!0))[0]<="3"&&(n=o())>="0"&&n<="7"&&(e+=a(!0)),"0"===e?"\0":(e.length>0&&L.has_directive("use strict")&&t&&v("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(e,8)))}(r,t)):r}function w(e,t){for(var n=0;e>0;--e){if(!t&&isNaN(parseInt(o(),16)))return parseInt(n,16)||"";var r=a(!0);isNaN(parseInt(r,16))&&v("Invalid hex-character pattern in string"),n+=r}return parseInt(n,16)}var x=N("Unterminated string constant",function(){const e=i.pos;for(var t=a(),n=[];;){var r=a(!0,!0);if("\\"==r)r=b(!0,!0);else if("\r"==r||"\n"==r)v("Unterminated string constant");else if(r==t)break;n.push(r)}var o=m("string",n.join(""));return ac=i.text.slice(e,i.pos),o.quote=t,o}),E=N("Unterminated template",function(e){e&&i.template_braces.push(i.brace_counter);var t,n,r="",s="";for(a(!0,!0);"`"!=(t=a(!0,!0));){if("\r"==t)"\n"==o()&&++i.pos,t="\n";else if("$"==t&&"{"==o())return a(!0,!0),i.brace_counter++,n=m(e?"template_head":"template_cont",r),uc.set(n,s),n.template_end=!1,n;if(s+=t,"\\"==t){var u=i.pos;t=b(!0,!(h&&("name"===h.type||"punc"===h.type&&(")"===h.value||"]"===h.value))),!0),s+=i.text.substr(u,i.pos-u)}r+=t}return i.template_braces.pop(),n=m(e?"template_head":"template_cont",r),uc.set(n,s),n.template_end=!0,n});function k(e){var t,n=i.regex_allowed,r=l();return-1==r?(t=i.text.substr(i.pos),i.pos=i.text.length):(t=i.text.substring(i.pos,r),i.pos=r),i.col=i.tokcol+(i.pos-i.tokpos),i.comments_before.push(m(e,t,!0)),i.regex_allowed=n,L}var A=N("Unterminated multiline comment",function(){var e=i.regex_allowed,t=f("*/"),n=i.text.substring(i.pos,t).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return u(function(e){for(var t=0,n=0;n<e.length;n++)$c(e.charCodeAt(n))&&Tc(e.charCodeAt(n+1))&&(t++,n++);return e.length-t}(n)+2),i.comments_before.push(m("comment2",n,!0)),i.newline_before=i.newline_before||n.includes("\n"),i.regex_allowed=e,L}),D=function(){let e=i.pos,t=e-1,n="c";for(;(n=i.text.charAt(++t))&&(n>="a"&&n<="z"||n>="A"&&n<="Z"););return t>e+1&&n&&"\\"!==n&&!Rc(n)&&n<="~"?(i.pos+=t-e,i.col+=t-e,i.text.slice(e,i.pos)):C()},C=N("Unterminated identifier name",function(){var e,t=[],n=!1,r=function(){return n=!0,a(),"u"!==o()&&v("Expecting UnicodeEscapeSequence -- uXXXX or u{XXXX}"),b(!1,!0)};if("\\"===(e=o()))Fc(e=r())||v("First identifier char is an invalid identifier char");else{if(!Fc(e))return"";a()}for(t.push(e);null!=(e=o());){if("\\"===(e=o()))Rc(e=r())||v("Invalid escaped identifier char");else{if(!Rc(e))break;a()}t.push(e)}const i=t.join("");return fc.has(i)&&n&&v("Escaped characters are not allowed in keywords"),i}),O=N("Unterminated regular expression",function(e){for(var t,n=!1,r=!1;t=a(!0);)if(kc.has(t))v("Unexpected line terminator");else if(n)/^[\u0000-\u007F]$/.test(t)?e+="\\"+t:e+=t,n=!1;else if("["==t)r=!0,e+=t;else if("]"==t&&r)r=!1,e+=t;else{if("/"==t&&!r)break;"\\"==t?n=!0:e+=t}return m("regexp","/"+e+"/"+D())});function S(e){return m("operator",function e(t){if(!o())return t;var n=t+o();return xc.has(n)?(a(),e(n)):t}(e||a()))}function $(){switch(a(),o()){case"/":return a(),k("comment1");case"*":return a(),A()}return i.regex_allowed?O(""):S("/")}function T(){return a(),">"===o()?(a(),m("arrow","=>")):S("=")}function P(){return a(),Pc(o().charCodeAt(0))?y("."):"."===o()?(a(),a(),m("expand","...")):m("punc",".")}function F(){var e=D();return p?m("name",e):lc.has(e)?m("atom",e):cc.has(e)?xc.has(e)?m("operator",e):m("keyword",e):m("name",e)}function R(){return a(),m("privatename",D())}function N(e,t){return function(n){try{return t(n)}catch(t){if(t!==Uc)throw t;v(e)}}}function L(e){if(null!=e)return O(e);for(r&&0==i.pos&&c("#!")&&(d(),u(2),k("comment5"));;){if(g(),d(),n){if(c("\x3c!--")){u(4),k("comment3");continue}if(c("--\x3e")&&i.newline_before){u(3),k("comment4");continue}}var t=o();if(!t)return m("eof");var l=t.charCodeAt(0);switch(l){case 34:case 39:return x();case 46:return P();case 47:var f=$();if(f===L)continue;return f;case 61:return T();case 63:if(!s())break;return a(),a(),m("punc","?.");case 96:return E(!0);case 123:i.brace_counter++;break;case 125:if(i.brace_counter--,i.template_braces.length>0&&i.template_braces[i.template_braces.length-1]===i.brace_counter)return E(!1)}if(Pc(l))return y();if(Cc.has(t))return m("punc",a());if(hc.has(t))return S();if(92==l||Fc(t))return F();if(35==l)return R();break}v("Unexpected character '"+t+"'")}return L.next=a,L.peek=o,L.context=function(e){return e&&(i=e),i},L.add_directive=function(e){i.directive_stack[i.directive_stack.length-1].push(e),void 0===i.directives[e]?i.directives[e]=1:i.directives[e]++},L.push_directives_stack=function(){i.directive_stack.push([])},L.pop_directives_stack=function(){for(var e=i.directive_stack[i.directive_stack.length-1],t=0;t<e.length;t++)i.directives[e[t]]--;i.directive_stack.pop()},L.has_directive=function(e){return i.directives[e]>0},L.peek_next_token_start_or_newline=function(){for(var e=i.pos,t=!1;e<i.text.length;){var n=Sc(i.text,e);if(kc.has(n))return{char:n,pos:e};if(t)"*"==n&&"/"==Sc(i.text,e+1)?(e+=2,t=!1):e++;else{if(!Ec.has(n)){if("/"==n){var r=Sc(i.text,e+1);if("/"==r)return e=l(),{char:Sc(i.text,e),pos:e};if("*"==r){t=!0,e+=2;continue}}return{char:n,pos:e}}e++}}return{char:null,pos:e}},L.ch_starts_binding_identifier=function(e,t){if("\\"==e)return!0;if(Fc(e)){if(wc.lastIndex=t,wc.test(i.text)){var n=Sc(i.text,wc.lastIndex);if(!Rc(n)&&"\\"!=n)return!1}return!0}return!1},L}var qc=Qu(["typeof","void","delete","--","++","!","~","-","+"]),Hc=Qu(["--","++"]),Kc=Qu(["=","+=","-=","??=","&&=","||=","/=","*=","**=","%=",">>=","<<=",">>>=","|=","^=","&="]),Zc=Qu(["??=","&&=","||="]),Wc=function(e,t){for(var n=0;n<e.length;++n)for(const r of e[n])t[r]=n+1;return t}([["||"],["??"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),Gc=Qu(["atom","num","big_int","string","regexp","name"]);function Yc(e,t){const n=new WeakMap;t=zu(t,{bare_returns:!1,ecma:null,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var r={input:"string"==typeof e?Vc(e,t.filename,t.html5_comments,t.shebang):e,token:null,prev:null,peeked:null,in_function:0,in_async:-1,in_generator:-1,in_directives:!0,in_loop:0,labels:[]};function i(e,t){return jc(r.token,e,t)}function o(){return r.peeked||(r.peeked=r.input())}function s(){return r.prev=r.token,r.peeked||o(),r.token=r.peeked,r.peeked=null,r.in_directives=r.in_directives&&("string"==r.token.type||i("punc",";")),r.token}function a(){return r.prev}function u(e,t,n,i){var o=r.input.context();Bc(e,o.filename,null!=t?t:o.tokline,null!=n?n:o.tokcol,null!=i?i:o.tokpos)}function c(e,t){u(t,e.line,e.col)}function l(e){null==e&&(e=r.token),c(e,"Unexpected token: "+e.type+" ("+e.value+")")}function f(e,t){if(i(e,t))return s();c(r.token,"Unexpected token "+r.token.type+" "+r.token.value+", expected "+e+" "+t+"")}function d(e){return f("punc",e)}function p(e){return e.nlb||!e.comments_before.every(e=>!e.nlb)}function h(){return!t.strict&&(i("eof")||i("punc","}")||p(r.token))}function m(){return r.in_generator===r.in_function}function g(){return r.in_async===r.in_function||0===r.in_function&&r.input.has_directive("use strict")}function v(e){i("punc",";")?s():e||h()||l()}function y(){d("(");var e=be(!0);return d(")"),e}function _(e){return function(...t){const n=r.token,i=e(...t);return i.start=n,i.end=a(),i}}function b(){(i("operator","/")||i("operator","/="))&&(r.peeked=null,r.token=r.input(r.token.value.substr(1)))}r.token=s();var w=_(function e(n,m,_){switch(b(),r.token.type){case"string":if(r.in_directives){var w=o();!ac.includes("\\")&&(jc(w,"punc",";")||jc(w,"punc","}")||p(w)||jc(w,"eof"))?r.input.add_directive(r.token.value):r.in_directives=!1}var O=r.in_directives,$=E();return O&&$.body instanceof gd?new il($.body):$;case"template_head":case"num":case"big_int":case"regexp":case"operator":case"atom":return E();case"name":if("async"==r.token.value&&jc(o(),"keyword","function"))return s(),s(),m&&u("functions are not allowed as the body of a loop"),S(Ol,!1,!0,n);if("import"==r.token.value&&!jc(o(),"punc","(")&&!jc(o(),"punc",".")){s();var P=function(){var e,t,n=a();i("name")&&(e=ue(od)),i("punc",",")&&s(),((t=ne(!0))||e)&&f("name","from");var o=r.token;"string"!==o.type&&l(),s();const u=X();return new uf({start:n,imported_name:e,imported_names:t,module_name:new gd({start:o,value:o.value,quote:o.quote,end:o}),attributes:u,end:r.token})}();return v(),P}if("using"==r.token.value&&jc(o(),"name")&&!p(o()))return s(),P=j(),v(),P;if("await"==r.token.value&&g()&&jc(o(),"name","using")&&!p(o())){var F=r.input.peek_next_token_start_or_newline();if(r.input.ch_starts_binding_identifier(F.char,F.pos))return s(),P=U(),v(),P}return jc(o(),"punc",":")?x():E();case"privatename":return r.in_class||u("Private field must be used in an enclosing class"),E();case"punc":switch(r.token.value){case"{":return new cl({start:r.token,body:N(),end:a()});case"[":case"(":return E();case";":return r.in_directives=!1,s(),new ll;default:l()}case"keyword":switch(r.token.value){case"break":return s(),k(Ml);case"continue":return s(),k(zl);case"debugger":return s(),v(),new rl;case"do":s();var I=we(e);f("keyword","while");var V=y();return v(!0),new ml({body:I,condition:V});case"while":return s(),new gl({condition:y(),body:we(function(){return e(!1,!0)})});case"for":return s(),function(){var e="`for await` invalid in this context",t=r.token;"name"==t.type&&"await"==t.value?(g()||c(t,e),s()):t=!1,d("(");var n=null;if(i("punc",";"))t&&c(t,e);else{n=i("keyword","var")?(s(),M(!0)):i("keyword","let")?(s(),z(!0)):i("keyword","const")?(s(),B(!0)):i("name","using")&&jc(o(),"name")&&("of"!=o().value||"="==r.input.peek_next_token_start_or_newline().char)?(s(),j(!0)):i("name","await")&&g()&&jc(o(),"name","using")?(s(),U(!0)):be(!0,!0);var a=i("operator","in"),u=i("name","of");if(t&&!u&&c(t,e),a||u)return n instanceof Ql?(n.definitions.length>1&&c(n.start,"Only one variable declaration allowed in for..in loop"),a&&n instanceof nf&&c(n.start,"Invalid using declaration in for..in loop")):ge(n)||(n=ve(n))instanceof Sl||c(n.start,"Invalid left-hand side in for..in loop"),s(),a?C(n):D(n,!!t)}return A(n)}();case"class":return s(),m&&u("classes are not allowed as the body of a loop"),_&&u("classes are not allowed as the body of an if"),Q(Bf,n);case"function":return s(),m&&u("functions are not allowed as the body of a loop"),S(Ol,!1,!1,n);case"if":return s(),R();case"return":0!=r.in_function||t.bare_returns||u("'return' outside of function"),s();var q=null;return i("punc",";")?s():h()||(q=be(!0),v()),new Nl({value:q});case"switch":return s(),new Vl({expression:y(),body:we(L)});case"throw":return s(),p(r.token)&&u("Illegal newline after 'throw'"),q=be(!0),v(),new Ll({value:q});case"try":return s(),function(){var e,t=null,n=null;if(e=new Wl({start:r.token,body:N(),end:a()}),i("keyword","catch")){var o=r.token;if(s(),i("punc","{"))var c=null;else d("("),c=T(void 0,id),d(")");t=new Gl({start:o,argname:c,body:N(),end:a()})}return i("keyword","finally")&&(o=r.token,s(),n=new Yl({start:o,body:N(),end:a()})),t||n||u("Missing catch/finally blocks"),new Zl({body:e,bcatch:t,bfinally:n})}();case"var":return s(),P=M(),v(),P;case"let":return s(),P=z(),v(),P;case"const":return s(),P=B(),v(),P;case"with":return r.input.has_directive("use strict")&&u("Strict mode may not include a with statement"),s(),new bl({expression:y(),body:e()});case"export":if(!jc(o(),"punc","("))return s(),P=re(),i("punc",";")&&v(),P}}l()});function x(){var e=ue(ad);"await"===e.name&&r.in_async===r.in_function&&c(r.prev,"await cannot be used as label inside async function"),r.labels.some(t=>t.name===e.name)&&u("Label "+e.name+" defined twice"),d(":"),r.labels.push(e);var t=w();return r.labels.pop(),t instanceof pl||e.references.forEach(function(t){t instanceof zl&&(t=t.label.start,u("Continue label `"+e.name+"` refers to non-IterationStatement.",t.line,t.col,t.pos))}),new dl({body:t,label:e})}function E(e){return new ol({body:(e=be(!0),v(),e)})}function k(e){var t,n=null;h()||(n=ue(fd,!0)),null!=n?((t=r.labels.find(e=>e.name===n.name))||u("Undefined label "+n.name),n.thedef=t):0==r.in_loop&&u(e.TYPE+" not inside a loop or switch"),v();var i=new e({label:n});return t&&t.references.push(i),i}function A(e){d(";");var t=i("punc",";")?null:be(!0);d(";");var n=i("punc",")")?null:be(!0);return d(")"),new vl({init:e,condition:t,step:n,body:we(function(){return w(!1,!0)})})}function D(e,t){var n=e instanceof Ql?e.definitions[0].name:null,r=be(!0);return d(")"),new _l({await:t,init:e,name:n,object:r,body:we(function(){return w(!1,!0)})})}function C(e){var t=be(!0);return d(")"),new yl({init:e,object:t,body:we(function(){return w(!1,!0)})})}var O=function(e,t,n){p(r.token)&&u("Unexpected newline before arrow (=>)"),f("arrow","=>");var o=F(i("punc","{"),!1,n);return new Cl({start:e,end:o.end,async:n,argnames:t,body:o})},S=function(e,t,n,r){var o=e===Ol;i("operator","*")&&(t=!0,s());var u=i("name")?ue(o?Jf:td):null;o&&!u&&(r?e=Dl:l()),!u||e===Al||u instanceof Hf||l(a());var c=[],f=F(!0,t,n,u,c);return new e({start:c.start,end:f.end,is_generator:t,async:n,name:u,argnames:c,body:f})};class ${constructor(e,t,n=!1){this.is_parameter=e,this.duplicates_ok=n,this.parameters=new Set,this.duplicate=null,this.default_assignment=!1,this.spread=!1,this.strict_mode=!!t}add_parameter(e){if(this.parameters.has(e.value))null===this.duplicate&&(this.duplicate=e),this.check_strict();else if(this.parameters.add(e.value),this.is_parameter)switch(e.value){case"arguments":case"eval":case"yield":this.strict_mode&&c(e,"Unexpected "+e.value+" identifier as parameter inside strict mode");break;default:fc.has(e.value)&&l()}}mark_default_assignment(e){!1===this.default_assignment&&(this.default_assignment=e)}mark_spread(e){!1===this.spread&&(this.spread=e)}mark_strict_mode(){this.strict_mode=!0}is_strict(){return!1!==this.default_assignment||!1!==this.spread||this.strict_mode}check_strict(){this.is_strict()&&null!==this.duplicate&&!this.duplicates_ok&&c(this.duplicate,"Parameter "+this.duplicate.value+" was used already")}}function T(e,t){var n,o=!1;return void 0===e&&(e=new $(!0,r.input.has_directive("use strict"))),i("expand","...")&&(o=r.token,e.mark_spread(r.token),s()),n=P(e,t),i("operator","=")&&!1===o&&(e.mark_default_assignment(r.token),s(),n=new Af({start:n.start,left:n,operator:"=",right:be(!1),end:r.token})),!1!==o&&(i("punc",")")||l(),n=new El({start:o,expression:n,end:o})),e.check_strict(),n}function P(e,t){var n,c=[],f=!0,p=!1,h=r.token;if(void 0===e){const n=r.input.has_directive("use strict");e=new $(!1,n,t===Kf)}if(t=void 0===t?Qf:t,i("punc","[")){for(s();!i("punc","]");){if(f?f=!1:d(","),i("expand","...")&&(p=!0,n=r.token,e.mark_spread(r.token),s()),i("punc"))switch(r.token.value){case",":c.push(new kd({start:r.token,end:r.token}));continue;case"]":break;case"[":case"{":c.push(P(e,t));break;default:l()}else i("name")?(e.add_parameter(r.token),c.push(ue(t))):u("Invalid function parameter");i("operator","=")&&!1===p&&(e.mark_default_assignment(r.token),s(),c[c.length-1]=new Af({start:c[c.length-1].start,left:c[c.length-1],operator:"=",right:be(!1),end:r.token})),p&&(i("punc","]")||u("Rest element must be last element"),c[c.length-1]=new El({start:n,expression:c[c.length-1],end:n}))}return d("]"),e.check_strict(),new Sl({start:h,names:c,is_array:!0,end:a()})}if(i("punc","{")){for(s();!i("punc","}");){if(f?f=!1:d(","),i("expand","...")&&(p=!0,n=r.token,e.mark_spread(r.token),s()),i("name")&&(jc(o(),"punc")||jc(o(),"operator"))&&[",","}","="].includes(o().value)){e.add_parameter(r.token);var m=a(),g=ue(t);p?c.push(new El({start:n,expression:g,end:g.end})):c.push(new Sf({start:m,key:g.name,value:g,end:g.end}))}else{if(i("punc","}"))continue;var v=r.token,y=ie();null===y?l(a()):"name"!==a().type||i("punc",":")?(d(":"),c.push(new Sf({start:v,quote:v.quote,key:y,value:P(e,t),end:a()}))):c.push(new Sf({start:a(),key:y,value:new t({start:a(),name:y,end:a()}),end:a()}))}p?i("punc","}")||u("Rest element must be last element"):i("operator","=")&&(e.mark_default_assignment(r.token),s(),c[c.length-1].value=new Af({start:c[c.length-1].value.start,left:c[c.length-1].value,operator:"=",right:be(!1),end:r.token}))}return d("}"),e.check_strict(),new Sl({start:h,names:c,is_array:!1,end:a()})}if(i("name"))return e.add_parameter(r.token),ue(t);u("Invalid function parameter")}function F(e,t,n,o,a){var u=r.in_loop,c=r.labels,l=r.in_generator,f=r.in_async;if(++r.in_function,t&&(r.in_generator=r.in_function),n&&(r.in_async=r.in_function),a&&function(e){var t=new $(!0,r.input.has_directive("use strict"));for(d("(");!i("punc",")");){var n=T(t);if(e.push(n),i("punc",")")||d(","),n instanceof El)break}s()}(a),e&&(r.in_directives=!0),r.in_loop=0,r.labels=[],e){r.input.push_directives_stack();var p=N();o&&ae(o),a&&a.forEach(ae),r.input.pop_directives_stack()}else p=[new Nl({start:r.token,value:be(!1),end:r.token})];return--r.in_function,r.in_loop=u,r.labels=c,r.in_generator=l,r.in_async=f,p}function R(){var e=y(),t=w(!1,!1,!0),n=null;return i("keyword","else")&&(s(),n=w(!1,!1,!0)),new Ul({condition:e,body:t,alternative:n})}function N(){d("{");for(var e=[];!i("punc","}");)i("eof")&&l(),e.push(w());return s(),e}function L(){d("{");for(var e,t=[],n=null,o=null;!i("punc","}");)i("eof")&&l(),i("keyword","case")?(o&&(o.end=a()),n=[],o=new Kl({start:(e=r.token,s(),e),expression:be(!0),body:n}),t.push(o),d(":")):i("keyword","default")?(o&&(o.end=a()),n=[],o=new Hl({start:(e=r.token,s(),d(":"),e),body:n}),t.push(o)):(n||l(),n.push(w()));return o&&(o.end=a()),s(),t}function I(e,t){for(var n,o=[];;){var c="var"===t?Kf:"const"===t?Wf:"let"===t?Yf:"using"===t||"await using"===t?Gf:null,l="using"===t||"await using"===t?sf:of;if(i("punc","{")||i("punc","[")?n=new l({start:r.token,name:P(void 0,c),value:i("operator","=")?(f("operator","="),be(!1,e)):null,end:a()}):"import"==(n=new l({start:r.token,name:ue(c),value:i("operator","=")?(s(),be(!1,e)):e||"const"!==t&&"using"!==t&&"await using"!==t?null:u("Missing initializer in "+t+" declaration"),end:a()})).name.name&&u("Unexpected token: import"),o.push(n),!i("punc",","))break;s()}return o}var M=function(e){return new Xl({start:a(),definitions:I(e,"var"),end:a()})},z=function(e){return new ef({start:a(),definitions:I(e,"let"),end:a()})},B=function(e){return new tf({start:a(),definitions:I(e,"const"),end:a()})},j=function(e){return new nf({start:a(),await:!1,definitions:I(e,"using"),end:a()})},U=function(e){return new nf({start:a(),await:!0,definitions:(s(),I(e,"await using")),end:a()})};function V(){var e,t=r.token;switch(t.type){case"name":e=se(ud);break;case"num":e=new vd({start:t,end:t,value:t.value,raw:ac});break;case"big_int":e=new yd({start:t,end:t,value:t.value,raw:ac});break;case"string":ce(e=new gd({start:t,end:t,value:t.value,quote:t.quote}));break;case"regexp":const[n,r,i]=t.value.match(/^\/(.*)\/(\w*)$/);e=new _d({start:t,end:t,value:{source:r,flags:i}});break;case"atom":switch(t.value){case"false":e=new Cd({start:t,end:t});break;case"true":e=new Od({start:t,end:t});break;case"null":e=new wd({start:t,end:t})}}return s(),e}function q(e,t){var n=function(e,t){return t?new Af({start:e.start,left:e,operator:"=",right:t,end:t.end}):e};return e instanceof Cf?n(new Sl({start:e.start,end:e.end,is_array:!1,names:e.properties.map(e=>q(e))}),t):e instanceof Sf?(e.value=q(e.value),n(e,t)):e instanceof kd?e:e instanceof Sl?(e.names=e.names.map(e=>q(e)),n(e,t)):e instanceof ud?n(new Qf({name:e.name,start:e.start,end:e.end}),t):e instanceof El?(e.expression=q(e.expression),n(e,t)):e instanceof Df?n(new Sl({start:e.start,end:e.end,is_array:!0,names:e.elements.map(e=>q(e))}),t):e instanceof kf?n(q(e.left,e.right),t):e instanceof Af?(e.left=q(e.left),e):void u("Invalid function parameter",e.start.line,e.start.col)}var H=function(e,t){if(i("operator","new"))return function(e){var t=r.token;if(f("operator","new"),i("punc","."))return s(),f("name","target"),le(new qf({start:t,end:a()}),e);var n,o=H(!1);i("punc","(")?(s(),n=Z(")",!0)):n=[];var u=new df({start:t,expression:o,args:n,end:a()});return ce(u),le(u,e)}(e);if(i("name","import")&&jc(o(),"punc","."))return function(e){var t=r.token;return f("name","import"),f("punc","."),f("name","meta"),le(new cf({start:t,end:a()}),e)}(e);var u,c=r.token,p=i("name","async")&&"["!=(u=o()).value&&"arrow"!=u.type&&V();if(i("punc")){switch(r.token.value){case"(":if(p&&!e)break;var h=function(e,t){var n,o,u,c=[];for(d("(");!i("punc",")");)n&&l(n),i("expand","...")?(n=r.token,t&&(o=r.token),s(),c.push(new El({start:a(),expression:be(),end:r.token}))):c.push(be()),i("punc",")")||(d(","),i("punc",")")&&(u=a(),t&&(o=u)));return d(")"),e&&i("arrow","=>")?n&&u&&l(u):o&&l(o),c}(t,!p);if(t&&i("arrow","=>"))return O(c,h.map(e=>q(e)),!!p);var m=p?new ff({expression:p,args:h}):_e(c,h);if(m.start){const e=c.comments_before.length;if(n.set(c,e),m.start.comments_before.unshift(...c.comments_before),c.comments_before=m.start.comments_before,0==e&&c.comments_before.length>0){var g=c.comments_before[0];g.nlb||(g.nlb=c.nlb,c.nlb=!1)}c.comments_after=m.start.comments_after}m.start=c;var v=a();return m.end&&(v.comments_before=m.end.comments_before,m.end.comments_after.push(...v.comments_after),v.comments_after=m.end.comments_after),m.end=v,m instanceof ff&&ce(m),le(m,e);case"[":return le(W(),e);case"{":return le(Y(),e)}p||l()}if(t&&i("name")&&jc(o(),"arrow")){var y=new Qf({name:r.token.value,start:c,end:c});return s(),O(c,[y],!!p)}if(i("keyword","function")){s();var _=S(Dl,!1,!!p);return _.start=c,_.end=a(),le(_,e)}if(p)return le(p,e);if(i("keyword","class")){s();var b=Q(Uf);return b.start=c,b.end=a(),le(b,e)}return i("template_head")?le(K(),e):Gc.has(r.token.type)?le(V(),e):void l()};function K(){var e=[],t=r.token;for(e.push(new Pl({start:r.token,raw:uc.get(r.token),value:r.token.value,end:r.token}));!r.token.template_end;)s(),b(),e.push(be(!0)),e.push(new Pl({start:r.token,raw:uc.get(r.token),value:r.token.value,end:r.token}));return s(),new Tl({start:t,segments:e,end:r.token})}function Z(e,t,n){for(var o=!0,u=[];!i("punc",e)&&(o?o=!1:d(","),!t||!i("punc",e));)i("punc",",")&&n?u.push(new kd({start:r.token,end:r.token})):i("expand","...")?(s(),u.push(new El({start:a(),expression:be(),end:r.token}))):u.push(be(!1));return s(),u}var W=_(function(){return d("["),new Df({elements:Z("]",!t.strict,!0)})}),G=_((e,t)=>S(Al,e,t)),Y=_(function(){var e=r.token,n=!0,o=[];for(d("{");!i("punc","}")&&(n?n=!1:d(","),t.strict||!i("punc","}"));){if("expand"==(e=r.token).type){s(),o.push(new El({start:e,expression:be(!1),end:a()}));continue}i("privatename")&&u("private fields are not allowed in an object");var c,f=ie();if(i("punc",":"))null===f?l(a()):(s(),c=be(!1));else{var p=J(f,e);if(p){o.push(p);continue}c=new ud({start:a(),name:f,end:a()})}i("operator","=")&&(s(),c=new kf({start:e,left:c,operator:"=",right:be(!1),logical:!1,end:a()}));const t=new Sf({start:e,quote:e.quote,key:f,value:c,end:a()});o.push(ce(t))}return s(),new Cf({properties:o})});function Q(e,t){var n,o,u,c,f=[];r.input.push_directives_stack(),r.input.add_directive("use strict"),"name"==r.token.type&&"extends"!=r.token.value&&(u=ue(e===Bf?nd:rd)),e!==Bf||u||(t?e=Uf:l()),"extends"==r.token.value&&(s(),c=be(!0)),d("{");const p=r.in_class;for(r.in_class=!0;i("punc",";");)s();for(;!i("punc","}");)for(n=r.token,(o=J(ie(),n,!0))||l(),f.push(o);i("punc",";");)s();return r.in_class=p,r.input.pop_directives_stack(),s(),new e({start:n,name:u,extends:c,properties:f,end:a()})}function J(e,t,n){const o=(e,n)=>"string"==typeof e?new n({start:t,name:e,end:a()}):(null===e&&l(),e);var u="privatename"===a().type;const c=()=>!(i("punc","(")||i("punc",",")||i("punc","}")||i("punc",";")||i("operator","=")||u);var f=!1,d=!1,p=!1,h=null;if(n&&"static"===e&&c()){const t=function(){if(!i("punc","{"))return null;const e=r.token,t=[];for(s();!i("punc","}");)t.push(w());return s(),new jf({start:e,body:t,end:a()})}();if(null!=t)return t;d=!0,e=ie()}"async"===e&&c()&&(f=!0,e=ie()),"operator"===a().type&&"*"===a().value&&(p=!0,e=ie()),"get"!==e&&"set"!==e||!c()||(h=e,e=ie()),u||"privatename"!==a().type||(u=!0);const m=a();if(null!=h){if(u)return ce(new("get"===h?Tf:$f)({start:t,static:d,key:o(e,Xf),value:G(),end:a()}));{const n="get"===h?Ff:Pf;return e=o(e,Xf),ce(new n({start:t,static:d,key:e,quote:e instanceof Xf?m.quote:void 0,value:G(),end:a()}))}}if(i("punc","("))return e=o(e,Xf),ce(new(u?Nf:Rf)({start:t,static:d,key:e,quote:e instanceof Xf?m.quote:void 0,value:G(p,f),end:a()}));if(n){const n=u?Mf:If,r=o(e,u?dd:ed),c=r instanceof ed?m.quote:void 0;if(i("operator","="))return s(),ce(new n({start:t,static:d,quote:c,key:r,value:be(!1),end:a()}));if(i("name")||i("privatename")||i("punc","[")||i("operator","*")||i("punc",";")||i("punc","}")||i("string")||i("num")||i("big_int"))return ce(new n({start:t,static:d,quote:c,key:r,end:a()}))}}function X(){return!i("keyword","with")&&!i("name","assert")||p(r.token)?null:(s(),Y())}function ee(e){function t(e,t){return new e({name:ie(),quote:t||void 0,start:a(),end:a()})}var n,o,u=e?sd:ld,c=e?od:cd,l=r.token;return e?n=t(u,l.quote):o=t(c,l.quote),i("name","as")?(s(),e?o=t(c):n=t(u,r.token.quote)):e?o=new c(n):n=new u(o),new af({start:l,foreign_name:n,name:o,end:a()})}function te(e,t){var n,i,o=e?sd:ld,s=e?od:cd,u=r.token,c=a();return e?n=t:i=t,n=n||new s({start:u,name:"*",end:c}),i=i||new o({start:u,name:"*",end:c}),new af({start:u,foreign_name:i,name:n,end:c})}function ne(e){var t;if(i("punc","{")){for(s(),t=[];!i("punc","}");)t.push(ee(e)),i("punc",",")&&s();s()}else if(i("operator","*")){var n;s(),i("name","as")&&(s(),n=e?ue(od):function(e){if(!i("name")){i("string")||u("Name or string expected");var t=r.token,n=new e({start:t,end:t,name:t.value,quote:t.quote});return s(),n}var o=se(e);return ae(o),s(),o}(ld)),t=[te(e,n)]}return t}function re(){var e,t,n,u,c,f=r.token;if(i("keyword","default"))e=!0,s();else if(t=ne(!1)){if(i("name","from")){s();var d=r.token;"string"!==d.type&&l(),s();const n=X();return new lf({start:f,is_default:e,exported_names:t,module_name:new gd({start:d,value:d.value,quote:d.quote,end:d}),end:a(),attributes:n})}return new lf({start:f,is_default:e,exported_names:t,end:a()})}return i("punc","{")||e&&(i("keyword","class")||i("keyword","function"))&&jc(o(),"punc")?(u=be(!1),v()):(n=w(e))instanceof Jl&&e?l(n.start):n instanceof Jl||n instanceof Ol||n instanceof Bf?c=n:n instanceof Uf||n instanceof Dl?u=n:n instanceof ol?u=n.body:l(n.start),new lf({start:f,is_default:e,exported_value:u,exported_definition:c,end:a(),attributes:null})}function ie(){var e=r.token;switch(e.type){case"punc":if("["===e.value){s();var t=be(!1);return d("]"),t}l(e);case"operator":if("*"===e.value)return s(),null;["delete","in","instanceof","new","typeof","void"].includes(e.value)||l(e);case"name":case"privatename":case"string":case"keyword":case"atom":return s(),e.value;case"num":case"big_int":return s(),""+e.value;default:l(e)}}function oe(){var e=r.token;return"name"!=e.type&&"privatename"!=e.type&&l(),s(),e.value}function se(e){var t=r.token.value;return new("this"==t?pd:"super"==t?hd:e)({name:String(t),start:r.token,end:r.token})}function ae(e){var t=e.name;m()&&"yield"==t&&c(e.start,"Yield cannot be used as identifier inside generators"),r.input.has_directive("use strict")&&("yield"==t&&c(e.start,"Unexpected yield identifier inside strict mode"),e instanceof Hf&&("arguments"==t||"eval"==t)&&c(e.start,"Unexpected "+t+" in strict mode"))}function ue(e,t){if(!i("name"))return t||u("Name expected"),null;var n=se(e);return ae(n),s(),n}function ce(e,t=e.start){var r=t.comments_before;const i=n.get(t);for(var o=null!=i?i:r.length;--o>=0;){var s=r[o];if(/[@#]__/.test(s.value)){if(/[@#]__PURE__/.test(s.value)){sc(e,Rd);break}if(/[@#]__INLINE__/.test(s.value)){sc(e,Nd);break}if(/[@#]__NOINLINE__/.test(s.value)){sc(e,Ld);break}if(/[@#]__KEY__/.test(s.value)){sc(e,Id);break}if(/[@#]__MANGLE_PROP__/.test(s.value)){sc(e,Md);break}}}return e}var le=function(e,t,n){var o=e.start;if(i("punc",".")){s(),i("privatename")&&!r.in_class&&u("Private field must be used in an enclosing class");const c=i("privatename")?gf:mf;return ce(le(new c({start:o,expression:e,optional:!1,property:oe(),end:a()}),t,n))}if(i("punc","[")){s();var c=be(!0);return d("]"),ce(le(new vf({start:o,expression:e,optional:!1,property:c,end:a()}),t,n))}if(t&&i("punc","(")){s();var f=new ff({start:o,expression:e,optional:!1,args:fe(),end:a()});return ce(f),le(f,!0,n)}if(i("punc","?.")){let n;if(s(),t&&i("punc","(")){s();const t=new ff({start:o,optional:!0,expression:e,args:fe(),end:a()});ce(t),n=le(t,!0,!0)}else if(i("name")||i("privatename")){i("privatename")&&!r.in_class&&u("Private field must be used in an enclosing class");const s=i("privatename")?gf:mf;n=ce(le(new s({start:o,expression:e,optional:!0,property:oe(),end:a()}),t,!0))}else if(i("punc","[")){s();const r=be(!0);d("]"),n=ce(le(new vf({start:o,expression:e,optional:!0,property:r,end:a()}),t,!0))}return n||l(),n instanceof yf?n:new yf({start:o,expression:n,end:a()})}return i("template_head")?(n&&l(),le(new $l({start:o,prefix:e,template_string:K(),end:a()}),t)):e};function fe(){for(var e=[];!i("punc",")");)i("expand","...")?(s(),e.push(new El({start:a(),expression:be(!1),end:a()}))):e.push(be(!1)),i("punc",")")||d(",");return s(),e}var de=function(e,t){var n=r.token;if("name"==n.type&&"await"==n.value&&g())return s(),g()||u("Unexpected await expression outside async function",r.prev.line,r.prev.col,r.prev.pos),new Bl({start:a(),end:r.token,expression:de(!0)});if(i("operator")&&qc.has(n.value)){s(),b();var o=pe(bf,n,de(e));return o.start=n,o.end=a(),o}for(var c=H(e,t);i("operator")&&Hc.has(r.token.value)&&!p(r.token);)c instanceof Cl&&l(),(c=pe(wf,r.token,c)).start=n,c.end=r.token,s();return c};function pe(e,t,n){var i=t.value;switch(i){case"++":case"--":ge(n)||u("Invalid use of "+i+" operator",t.line,t.col,t.pos);break;case"delete":n instanceof ud&&r.input.has_directive("use strict")&&u("Calling delete on expression not allowed in strict mode",n.start.line,n.start.col,n.start.pos)}return new e({operator:i,expression:n})}var he=function(e,t,n){var o=i("operator")?r.token.value:null;"in"==o&&n&&(o=null),"**"==o&&e instanceof bf&&!jc(e.start,"punc","(")&&"--"!==e.operator&&"++"!==e.operator&&l(e.start);var a=null!=o?Wc[o]:null;if(null!=a&&(a>t||"**"===o&&t===a)){s();var u=me(n,a,!0);return he(new xf({start:e.start,left:e,operator:o,right:u,end:u.end}),t,n)}return e};function me(e,t,n,o){if(!e&&t<Wc.in&&i("privatename")){r.in_class||u("Private field must be used in an enclosing class");const t=r.token,n=new dd({start:t,name:t.value,end:t});s(),f("operator","in");const i=new zf({start:t,key:n,value:me(e,Wc.in,!0),end:a()});return he(i,0,e)}return he(de(n,o),t,e)}function ge(e){return e instanceof hf||e instanceof ud}function ve(e){if(e instanceof Cf)e=new Sl({start:e.start,names:e.properties.map(ve),is_array:!1,end:e.end});else if(e instanceof Df){for(var t=[],n=0;n<e.elements.length;n++)e.elements[n]instanceof El&&(n+1!==e.elements.length&&c(e.elements[n].start,"Spread must the be last element in destructuring array"),e.elements[n].expression=ve(e.elements[n].expression)),t.push(ve(e.elements[n]));e=new Sl({start:e.start,names:t,is_array:!0,end:e.end})}else e instanceof Of?e.value=ve(e.value):e instanceof kf&&(e=new Af({start:e.start,left:e.left,operator:"=",right:e.right,end:e.end}));return e}var ye=function(e){b();var t=r.token;if("name"==t.type&&"yield"==t.value){if(m())return s(),function(){var e=r.token,t=!1,n=!0;return h()||i("punc")&&Ac.has(r.token.value)||i("template_cont")?n=!1:i("operator","*")&&(t=!0,s()),new jl({start:e,is_star:t,expression:n?be():null,end:a()})}();r.input.has_directive("use strict")&&c(r.token,"Unexpected yield identifier inside strict mode")}var n=function(e){var t=r.token,n=me(e,0,!0,!0);if(i("operator","?")){s();var o=be(!1);return d(":"),new Ef({start:t,condition:n,consequent:o,alternative:be(!1,e),end:a()})}return n}(e),o=r.token.value;if(i("operator")&&Kc.has(o)){if(ge(n)||(n=ve(n))instanceof Sl)return s(),new kf({start:t,left:n,operator:o,right:ye(e),logical:Zc.has(o),end:a()});u("Invalid assignment")}return n},_e=function(e,t){return 1===t.length?t[0]:t.length>1?new pf({start:e,expressions:t,end:o()}):void u("Invalid parenthesized expression")},be=function(e,t){for(var n=r.token,o=[];o.push(ye(t)),e&&i("punc",",");)s(),e=!0;return _e(n,o)};function we(e){++r.in_loop;var t=e();return--r.in_loop,t}return t.expression?be(!0):function(){var e=r.token,n=[];for(r.input.push_directives_stack(),t.module&&r.input.add_directive("use strict");!i("eof");)n.push(w());r.input.pop_directives_stack();var o=a(),s=t.toplevel;return s?(s.body=s.body.concat(n),s.end=o):s=new xl({start:e,body:n,end:o}),uc=new Map,s}()}function Qc(e,t,n,r,i=tl){var o=t=t?t.split(/\s+/):[];i&&i.PROPS&&(t=t.concat(i.PROPS));const s=i&&Object.create(i.prototype);if(s&&(n.prototype=s,n.BASE=i),i&&i.SUBCLASSES.push(n),n.prototype.CTOR=n,n.prototype.constructor=n,n.PROPS=t||null,n.SELF_PROPS=o,n.SUBCLASSES=[],e&&(n.prototype.TYPE=n.TYPE=e),r)for(let e in r)Xu(r,e)&&("$"===e[0]?n[e.substr(1)]=r[e]:n.prototype[e]=r[e]);return n.DEFMETHOD=function(e,t){this.prototype[e]=t},n}const Jc=(e,t)=>Boolean(e.flags&t),Xc=(e,t,n)=>{n?e.flags|=t:e.flags&=~t};class el{constructor(e,t,n,r,i,o,s,a,u){this.flags=o?1:0,this.type=e,this.value=t,this.line=n,this.col=r,this.pos=i,this.comments_before=s,this.comments_after=a,this.file=u,Object.seal(this)}[Symbol.for("nodejs.util.inspect.custom")](e,t){const n=e=>t.stylize(e,"special"),r="string"==typeof this.value&&this.value.includes("`")?"'":"`",i=`${r}${this.value}${r}`;return`${n("[AST_Token")} ${i} at ${this.line}:${this.col}${n("]")}`}get nlb(){return Jc(this,1)}set nlb(e){Xc(this,1,e)}get quote(){return Jc(this,4)?Jc(this,2)?"'":'"':""}set quote(e){Xc(this,2,"'"===e),Xc(this,4,!!e)}get template_end(){return Jc(this,8)}set template_end(e){Xc(this,8,e)}}var tl=Qc("Node","start end",function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{_clone:function(e){if(e){var t=this.clone();return t.transform(new Fd(function(e){if(e!==t)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(e){return e._visit(this)},walk:function(e){return this._walk(e)},_children_backwards:()=>{}},null),nl=Qc("Statement",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class of all statements"}),rl=Qc("Debugger",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Represents a debugger statement"},nl),il=Qc("Directive","value quote",function(e){e&&(this.value=e.value,this.quote=e.quote,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",quote:"[string] the original quote character"}},nl),ol=Qc("SimpleStatement","body",function(e){e&&(this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(e){return e._visit(this,function(){this.body._walk(e)})},_children_backwards(e){e(this.body)}},nl);function sl(e,t){const n=e.body;for(var r=0,i=n.length;r<i;r++)n[r]._walk(t)}function al(e){var t=this._clone(e);return this.block_scope&&(t.block_scope=this.block_scope.clone()),t}var ul=Qc("Block","body block_scope",function(e){e&&(this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements",block_scope:"[AST_Scope] the block scope"},_walk:function(e){return e._visit(this,function(){sl(this,e)})},_children_backwards(e){let t=this.body.length;for(;t--;)e(this.body[t])},clone:al},nl),cl=Qc("BlockStatement",null,function(e){e&&(this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A block statement"},ul),ll=Qc("EmptyStatement",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The empty statement (empty block or simply a semicolon)"},nl),fl=Qc("StatementWithBody","body",function(e){e&&(this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"}},nl),dl=Qc("LabeledStatement","label",function(e){e&&(this.label=e.label,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(e){return e._visit(this,function(){this.label._walk(e),this.body._walk(e)})},_children_backwards(e){e(this.body),e(this.label)},clone:function(e){var t=this._clone(e);if(e){var n=t.label,r=this.label;t.walk(new Pd(function(e){e instanceof Il&&e.label&&e.label.thedef===r&&(e.label.thedef=n,n.references.push(e))}))}return t}},fl),pl=Qc("IterationStatement","block_scope",function(e){e&&(this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Internal class.  All loops inherit from it.",$propdoc:{block_scope:"[AST_Scope] the block scope for this iteration statement."},clone:al},fl),hl=Qc("DWLoop","condition",function(e){e&&(this.condition=e.condition,this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"}},pl),ml=Qc("Do",null,function(e){e&&(this.condition=e.condition,this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `do` statement",_walk:function(e){return e._visit(this,function(){this.body._walk(e),this.condition._walk(e)})},_children_backwards(e){e(this.condition),e(this.body)}},hl),gl=Qc("While",null,function(e){e&&(this.condition=e.condition,this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `while` statement",_walk:function(e){return e._visit(this,function(){this.condition._walk(e),this.body._walk(e)})},_children_backwards(e){e(this.body),e(this.condition)}},hl),vl=Qc("For","init condition step",function(e){e&&(this.init=e.init,this.condition=e.condition,this.step=e.step,this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(e){return e._visit(this,function(){this.init&&this.init._walk(e),this.condition&&this.condition._walk(e),this.step&&this.step._walk(e),this.body._walk(e)})},_children_backwards(e){e(this.body),this.step&&e(this.step),this.condition&&e(this.condition),this.init&&e(this.init)}},pl),yl=Qc("ForIn","init object",function(e){e&&(this.init=e.init,this.object=e.object,this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",object:"[AST_Node] the object that we're looping through"},_walk:function(e){return e._visit(this,function(){this.init._walk(e),this.object._walk(e),this.body._walk(e)})},_children_backwards(e){e(this.body),this.object&&e(this.object),this.init&&e(this.init)}},pl),_l=Qc("ForOf","await",function(e){e&&(this.await=e.await,this.init=e.init,this.object=e.object,this.block_scope=e.block_scope,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `for ... of` statement"},yl),bl=Qc("With","expression",function(e){e&&(this.expression=e.expression,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(e){return e._visit(this,function(){this.expression._walk(e),this.body._walk(e)})},_children_backwards(e){e(this.body),e(this.expression)}},fl),wl=Qc("Scope","variables uses_with uses_eval parent_scope enclosed cname",function(e){e&&(this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{variables:"[Map/S] a map of name -> SymbolDef for all variables/functions defined in this scope",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)"},get_defun_scope:function(){for(var e=this;e.is_block_scope();)e=e.parent_scope;return e},clone:function(e,t){var n=this._clone(e);return e&&this.variables&&t&&!this._block_scope?n.figure_out_scope({},{toplevel:t,parent_scope:this.parent_scope}):(this.variables&&(n.variables=new Map(this.variables)),this.enclosed&&(n.enclosed=this.enclosed.slice()),this._block_scope&&(n._block_scope=this._block_scope)),n},pinned:function(){return this.uses_eval||this.uses_with}},ul),xl=Qc("Toplevel","globals",function(e){e&&(this.globals=e.globals,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The toplevel scope",$propdoc:{globals:"[Map/S] a map of name -> SymbolDef for all undeclared names"},wrap_commonjs:function(e){var t=this.body,n="(function(exports){'$ORIG';})(typeof "+e+"=='undefined'?("+e+"={}):"+e+");";return(n=Yc(n)).transform(new Fd(function(e){if(e instanceof il&&"$ORIG"==e.value)return Hu.splice(t)}))},wrap_enclose:function(e){"string"!=typeof e&&(e="");var t=e.indexOf(":");t<0&&(t=e.length);var n=this.body;return Yc(["(function(",e.slice(0,t),'){"$ORIG"})(',e.slice(t+1),")"].join("")).transform(new Fd(function(e){if(e instanceof il&&"$ORIG"==e.value)return Hu.splice(n)}))}},wl),El=Qc("Expansion","expression",function(e){e&&(this.expression=e.expression,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An expandible argument, such as ...rest, a splat, such as [1,2,...all], or an expansion in a variable declaration, such as var [first, ...rest] = list",$propdoc:{expression:"[AST_Node] the thing to be expanded"},_walk:function(e){return e._visit(this,function(){this.expression.walk(e)})},_children_backwards(e){e(this.expression)}}),kl=Qc("Lambda","name argnames uses_arguments is_generator async",function(e){e&&(this.name=e.name,this.argnames=e.argnames,this.uses_arguments=e.uses_arguments,this.is_generator=e.is_generator,this.async=e.async,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg|AST_Destructuring|AST_Expansion|AST_DefaultAssign*] array of function arguments, destructurings, or expanding arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array",is_generator:"[boolean] is this a generator method",async:"[boolean] is this method async"},args_as_names:function(){for(var e=[],t=0;t<this.argnames.length;t++)this.argnames[t]instanceof Sl?e.push(...this.argnames[t].all_symbols()):e.push(this.argnames[t]);return e},_walk:function(e){return e._visit(this,function(){this.name&&this.name._walk(e);for(var t=this.argnames,n=0,r=t.length;n<r;n++)t[n]._walk(e);sl(this,e)})},_children_backwards(e){let t=this.body.length;for(;t--;)e(this.body[t]);for(t=this.argnames.length;t--;)e(this.argnames[t]);this.name&&e(this.name)},is_braceless(){return this.body[0]instanceof Nl&&this.body[0].value},length_property(){let e=0;for(const t of this.argnames)(t instanceof Qf||t instanceof Sl)&&e++;return e}},wl),Al=Qc("Accessor",null,function(e){e&&(this.name=e.name,this.argnames=e.argnames,this.uses_arguments=e.uses_arguments,this.is_generator=e.is_generator,this.async=e.async,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A setter/getter function.  The `name` property is always null."},kl),Dl=Qc("Function",null,function(e){e&&(this.name=e.name,this.argnames=e.argnames,this.uses_arguments=e.uses_arguments,this.is_generator=e.is_generator,this.async=e.async,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A function expression"},kl),Cl=Qc("Arrow",null,function(e){e&&(this.name=e.name,this.argnames=e.argnames,this.uses_arguments=e.uses_arguments,this.is_generator=e.is_generator,this.async=e.async,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An ES6 Arrow function ((a) => b)"},kl),Ol=Qc("Defun",null,function(e){e&&(this.name=e.name,this.argnames=e.argnames,this.uses_arguments=e.uses_arguments,this.is_generator=e.is_generator,this.async=e.async,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A function definition"},kl),Sl=Qc("Destructuring","names is_array",function(e){e&&(this.names=e.names,this.is_array=e.is_array,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A destructuring of several names. Used in destructuring assignment and with destructuring function argument names",$propdoc:{names:"[AST_Node*] Array of properties or elements",is_array:"[Boolean] Whether the destructuring represents an object or array"},_walk:function(e){return e._visit(this,function(){this.names.forEach(function(t){t._walk(e)})})},_children_backwards(e){let t=this.names.length;for(;t--;)e(this.names[t])},all_symbols:function(){var e=[];return Sd(this,t=>{if(t instanceof Hf&&e.push(t),t instanceof kl)return!0}),e}}),$l=Qc("PrefixedTemplateString","template_string prefix",function(e){e&&(this.template_string=e.template_string,this.prefix=e.prefix,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A templatestring with a prefix, such as String.raw`foobarbaz`",$propdoc:{template_string:"[AST_TemplateString] The template string",prefix:"[AST_Node] The prefix, which will get called."},_walk:function(e){return e._visit(this,function(){this.prefix._walk(e),this.template_string._walk(e)})},_children_backwards(e){e(this.template_string),e(this.prefix)}}),Tl=Qc("TemplateString","segments",function(e){e&&(this.segments=e.segments,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A template string literal",$propdoc:{segments:"[AST_Node*] One or more segments, starting with AST_TemplateSegment. AST_Node may follow AST_TemplateSegment, but each AST_Node must be followed by AST_TemplateSegment."},_walk:function(e){return e._visit(this,function(){this.segments.forEach(function(t){t._walk(e)})})},_children_backwards(e){let t=this.segments.length;for(;t--;)e(this.segments[t])}}),Pl=Qc("TemplateSegment","value raw",function(e){e&&(this.value=e.value,this.raw=e.raw,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A segment of a template string literal",$propdoc:{value:"Content of the segment",raw:"Raw source of the segment"}}),Fl=Qc("Jump",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for jumps (for now that's `return`, `throw`, `break` and `continue`)"},nl),Rl=Qc("Exit","value",function(e){e&&(this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for exits (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(e){return e._visit(this,this.value&&function(){this.value._walk(e)})},_children_backwards(e){this.value&&e(this.value)}},Fl),Nl=Qc("Return",null,function(e){e&&(this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `return` statement"},Rl),Ll=Qc("Throw",null,function(e){e&&(this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `throw` statement"},Rl),Il=Qc("LoopControl","label",function(e){e&&(this.label=e.label,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_walk:function(e){return e._visit(this,this.label&&function(){this.label._walk(e)})},_children_backwards(e){this.label&&e(this.label)}},Fl),Ml=Qc("Break",null,function(e){e&&(this.label=e.label,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `break` statement"},Il),zl=Qc("Continue",null,function(e){e&&(this.label=e.label,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `continue` statement"},Il),Bl=Qc("Await","expression",function(e){e&&(this.expression=e.expression,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An `await` statement",$propdoc:{expression:"[AST_Node] the mandatory expression being awaited"},_walk:function(e){return e._visit(this,function(){this.expression._walk(e)})},_children_backwards(e){e(this.expression)}}),jl=Qc("Yield","expression is_star",function(e){e&&(this.expression=e.expression,this.is_star=e.is_star,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `yield` statement",$propdoc:{expression:"[AST_Node?] the value returned or thrown by this statement; could be null (representing undefined) but only when is_star is set to false",is_star:"[Boolean] Whether this is a yield or yield* statement"},_walk:function(e){return e._visit(this,this.expression&&function(){this.expression._walk(e)})},_children_backwards(e){this.expression&&e(this.expression)}}),Ul=Qc("If","condition alternative",function(e){e&&(this.condition=e.condition,this.alternative=e.alternative,this.body=e.body,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(e){return e._visit(this,function(){this.condition._walk(e),this.body._walk(e),this.alternative&&this.alternative._walk(e)})},_children_backwards(e){this.alternative&&e(this.alternative),e(this.body),e(this.condition)}},fl),Vl=Qc("Switch","expression",function(e){e&&(this.expression=e.expression,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` discriminant"},_walk:function(e){return e._visit(this,function(){this.expression._walk(e),sl(this,e)})},_children_backwards(e){let t=this.body.length;for(;t--;)e(this.body[t]);e(this.expression)}},ul),ql=Qc("SwitchBranch",null,function(e){e&&(this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for `switch` branches"},ul),Hl=Qc("Default",null,function(e){e&&(this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `default` switch branch"},ql),Kl=Qc("Case","expression",function(e){e&&(this.expression=e.expression,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(e){return e._visit(this,function(){this.expression._walk(e),sl(this,e)})},_children_backwards(e){let t=this.body.length;for(;t--;)e(this.body[t]);e(this.expression)}},ql),Zl=Qc("Try","body bcatch bfinally",function(e){e&&(this.body=e.body,this.bcatch=e.bcatch,this.bfinally=e.bfinally,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `try` statement",$propdoc:{body:"[AST_TryBlock] the try block",bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(e){return e._visit(this,function(){this.body._walk(e),this.bcatch&&this.bcatch._walk(e),this.bfinally&&this.bfinally._walk(e)})},_children_backwards(e){this.bfinally&&e(this.bfinally),this.bcatch&&e(this.bcatch),e(this.body)}},nl),Wl=Qc("TryBlock",null,function(e){e&&(this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `try` block of a try statement"},ul),Gl=Qc("Catch","argname",function(e){e&&(this.argname=e.argname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch|AST_Destructuring|AST_Expansion|AST_DefaultAssign] symbol for the exception"},_walk:function(e){return e._visit(this,function(){this.argname&&this.argname._walk(e),sl(this,e)})},_children_backwards(e){let t=this.body.length;for(;t--;)e(this.body[t]);this.argname&&e(this.argname)}},ul),Yl=Qc("Finally",null,function(e){e&&(this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},ul),Ql=Qc("DefinitionsLike","definitions",function(e){e&&(this.definitions=e.definitions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for variable definitions and `using`",$propdoc:{definitions:"[AST_VarDef*|AST_UsingDef*] array of variable definitions"},_walk:function(e){return e._visit(this,function(){for(var t=this.definitions,n=0,r=t.length;n<r;n++)t[n]._walk(e)})},_children_backwards(e){let t=this.definitions.length;for(;t--;)e(this.definitions[t])}},nl),Jl=Qc("Definitions",null,function(e){e&&(this.definitions=e.definitions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)"},Ql),Xl=Qc("Var",null,function(e){e&&(this.definitions=e.definitions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `var` statement"},Jl),ef=Qc("Let",null,function(e){e&&(this.definitions=e.definitions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `let` statement"},Jl),tf=Qc("Const",null,function(e){e&&(this.definitions=e.definitions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `const` statement"},Jl),nf=Qc("Using","await",function(e){e&&(this.await=e.await,this.definitions=e.definitions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `using` statement",$propdoc:{await:"[boolean] Whether it's `await using`"}},Ql),rf=Qc("VarDefLike","name value",function(e){e&&(this.name=e.name,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A name=value pair in a variable definition statement or `using`",$propdoc:{name:"[AST_Destructuring|AST_SymbolDeclaration] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(e){return e._visit(this,function(){this.name._walk(e),this.value&&this.value._walk(e)})},_children_backwards(e){this.value&&e(this.value),e(this.name)},declarations_as_names(){return this.name instanceof Hf?[this.name]:this.name.all_symbols()}}),of=Qc("VarDef",null,function(e){e&&(this.name=e.name,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A variable declaration; only appears in a AST_Definitions node"},rf),sf=Qc("UsingDef",null,function(e){e&&(this.name=e.name,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Like VarDef but specific to AST_Using"},rf),af=Qc("NameMapping","foreign_name name",function(e){e&&(this.foreign_name=e.foreign_name,this.name=e.name,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The part of the export/import statement that declare names from a module.",$propdoc:{foreign_name:"[AST_SymbolExportForeign|AST_SymbolImportForeign] The name being exported/imported (as specified in the module)",name:"[AST_SymbolExport|AST_SymbolImport] The name as it is visible to this module."},_walk:function(e){return e._visit(this,function(){this.foreign_name._walk(e),this.name._walk(e)})},_children_backwards(e){e(this.name),e(this.foreign_name)}}),uf=Qc("Import","imported_name imported_names module_name attributes",function(e){e&&(this.imported_name=e.imported_name,this.imported_names=e.imported_names,this.module_name=e.module_name,this.attributes=e.attributes,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An `import` statement",$propdoc:{imported_name:"[AST_SymbolImport] The name of the variable holding the module's default export.",imported_names:"[AST_NameMapping*] The names of non-default imported variables",module_name:"[AST_String] String literal describing where this module came from",attributes:"[AST_Object?] The import attributes (with {...})"},_walk:function(e){return e._visit(this,function(){this.imported_name&&this.imported_name._walk(e),this.imported_names&&this.imported_names.forEach(function(t){t._walk(e)}),this.module_name._walk(e)})},_children_backwards(e){if(e(this.module_name),this.imported_names){let t=this.imported_names.length;for(;t--;)e(this.imported_names[t])}this.imported_name&&e(this.imported_name)}}),cf=Qc("ImportMeta",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A reference to import.meta"}),lf=Qc("Export","exported_definition exported_value is_default exported_names module_name attributes",function(e){e&&(this.exported_definition=e.exported_definition,this.exported_value=e.exported_value,this.is_default=e.is_default,this.exported_names=e.exported_names,this.module_name=e.module_name,this.attributes=e.attributes,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An `export` statement",$propdoc:{exported_definition:"[AST_Defun|AST_Definitions|AST_DefClass?] An exported definition",exported_value:"[AST_Node?] An exported value",exported_names:"[AST_NameMapping*?] List of exported names",module_name:"[AST_String?] Name of the file to load exports from",is_default:"[Boolean] Whether this is the default exported value of this module",attributes:"[AST_Object?] The import attributes"},_walk:function(e){return e._visit(this,function(){this.exported_definition&&this.exported_definition._walk(e),this.exported_value&&this.exported_value._walk(e),this.exported_names&&this.exported_names.forEach(function(t){t._walk(e)}),this.module_name&&this.module_name._walk(e)})},_children_backwards(e){if(this.module_name&&e(this.module_name),this.exported_names){let t=this.exported_names.length;for(;t--;)e(this.exported_names[t])}this.exported_value&&e(this.exported_value),this.exported_definition&&e(this.exported_definition)}},nl),ff=Qc("Call","expression args optional _annotations",function(e){e&&(this.expression=e.expression,this.args=e.args,this.optional=e.optional,this._annotations=e._annotations,this.start=e.start,this.end=e.end,this.initialize()),this.flags=0},{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments",optional:"[boolean] whether this is an optional call (IE ?.() )",_annotations:"[number] bitfield containing information about the call"},initialize(){null==this._annotations&&(this._annotations=0)},_walk(e){return e._visit(this,function(){for(var t=this.args,n=0,r=t.length;n<r;n++)t[n]._walk(e);this.expression._walk(e)})},_children_backwards(e){let t=this.args.length;for(;t--;)e(this.args[t]);e(this.expression)}}),df=Qc("New",null,function(e){e&&(this.expression=e.expression,this.args=e.args,this.optional=e.optional,this._annotations=e._annotations,this.start=e.start,this.end=e.end,this.initialize()),this.flags=0},{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},ff),pf=Qc("Sequence","expressions",function(e){e&&(this.expressions=e.expressions,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_walk:function(e){return e._visit(this,function(){this.expressions.forEach(function(t){t._walk(e)})})},_children_backwards(e){let t=this.expressions.length;for(;t--;)e(this.expressions[t])}}),hf=Qc("PropAccess","expression property optional",function(e){e&&(this.expression=e.expression,this.property=e.property,this.optional=e.optional,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the container expression",property:"[AST_Node|string] the property to access.  For AST_Dot & AST_DotHash this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",optional:"[boolean] whether this is an optional property access (IE ?.)"}}),mf=Qc("Dot","quote",function(e){e&&(this.quote=e.quote,this.expression=e.expression,this.property=e.property,this.optional=e.optional,this._annotations=e._annotations,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A dotted property access expression",$propdoc:{quote:"[string] the original quote character when transformed from AST_Sub"},_walk:function(e){return e._visit(this,function(){this.expression._walk(e)})},_children_backwards(e){e(this.expression)}},hf),gf=Qc("DotHash","",function(e){e&&(this.expression=e.expression,this.property=e.property,this.optional=e.optional,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A dotted property access to a private property",_walk:function(e){return e._visit(this,function(){this.expression._walk(e)})},_children_backwards(e){e(this.expression)}},hf),vf=Qc("Sub",null,function(e){e&&(this.expression=e.expression,this.property=e.property,this.optional=e.optional,this._annotations=e._annotations,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(e){return e._visit(this,function(){this.expression._walk(e),this.property._walk(e)})},_children_backwards(e){e(this.property),e(this.expression)}},hf),yf=Qc("Chain","expression",function(e){e&&(this.expression=e.expression,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A chain expression like a?.b?.(c)?.[d]",$propdoc:{expression:"[AST_Call|AST_Dot|AST_DotHash|AST_Sub] chain element."},_walk:function(e){return e._visit(this,function(){this.expression._walk(e)})},_children_backwards(e){e(this.expression)}}),_f=Qc("Unary","operator expression",function(e){e&&(this.operator=e.operator,this.expression=e.expression,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(e){return e._visit(this,function(){this.expression._walk(e)})},_children_backwards(e){e(this.expression)}}),bf=Qc("UnaryPrefix",null,function(e){e&&(this.operator=e.operator,this.expression=e.expression,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},_f),wf=Qc("UnaryPostfix",null,function(e){e&&(this.operator=e.operator,this.expression=e.expression,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Unary postfix expression, i.e. `i++`"},_f),xf=Qc("Binary","operator left right",function(e){e&&(this.operator=e.operator,this.left=e.left,this.right=e.right,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(e){return e._visit(this,function(){this.left._walk(e),this.right._walk(e)})},_children_backwards(e){e(this.right),e(this.left)}}),Ef=Qc("Conditional","condition consequent alternative",function(e){e&&(this.condition=e.condition,this.consequent=e.consequent,this.alternative=e.alternative,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(e){return e._visit(this,function(){this.condition._walk(e),this.consequent._walk(e),this.alternative._walk(e)})},_children_backwards(e){e(this.alternative),e(this.consequent),e(this.condition)}}),kf=Qc("Assign","logical",function(e){e&&(this.logical=e.logical,this.operator=e.operator,this.left=e.left,this.right=e.right,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An assignment expression  `a = b + 5`",$propdoc:{logical:"Whether it's a logical assignment"}},xf),Af=Qc("DefaultAssign",null,function(e){e&&(this.operator=e.operator,this.left=e.left,this.right=e.right,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A default assignment expression like in `(a = 3) => a`"},xf),Df=Qc("Array","elements",function(e){e&&(this.elements=e.elements,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(e){return e._visit(this,function(){for(var t=this.elements,n=0,r=t.length;n<r;n++)t[n]._walk(e)})},_children_backwards(e){let t=this.elements.length;for(;t--;)e(this.elements[t])}}),Cf=Qc("Object","properties",function(e){e&&(this.properties=e.properties,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(e){return e._visit(this,function(){for(var t=this.properties,n=0,r=t.length;n<r;n++)t[n]._walk(e)})},_children_backwards(e){let t=this.properties.length;for(;t--;)e(this.properties[t])}}),Of=Qc("ObjectProperty","key value",function(e){e&&(this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name. For ObjectKeyVal this is a string. For getters, setters and computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters, setters and methods this is an AST_Accessor."},_walk:function(e){return e._visit(this,function(){this.key instanceof tl&&this.key._walk(e),this.value._walk(e)})},_children_backwards(e){e(this.value),this.key instanceof tl&&e(this.key)}}),Sf=Qc("ObjectKeyVal","quote",function(e){e&&(this.quote=e.quote,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$documentation:"A key: value object property",$propdoc:{quote:"[string] the original quote character"},computed_key(){return this.key instanceof tl}},Of),$f=Qc("PrivateSetter","static",function(e){e&&(this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$propdoc:{static:"[boolean] whether this is a static private setter"},$documentation:"A private setter property",computed_key:()=>!1},Of),Tf=Qc("PrivateGetter","static",function(e){e&&(this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$propdoc:{static:"[boolean] whether this is a static private getter"},$documentation:"A private getter property",computed_key:()=>!1},Of),Pf=Qc("ObjectSetter","quote static",function(e){e&&(this.quote=e.quote,this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] whether this is a static setter (classes only)"},$documentation:"An object setter property",computed_key(){return!(this.key instanceof Xf)}},Of),Ff=Qc("ObjectGetter","quote static",function(e){e&&(this.quote=e.quote,this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] whether this is a static getter (classes only)"},$documentation:"An object getter property",computed_key(){return!(this.key instanceof Xf)}},Of),Rf=Qc("ConciseMethod","quote static",function(e){e&&(this.quote=e.quote,this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] is this method static (classes only)"},$documentation:"An ES6 concise method inside an object or class",computed_key(){return!(this.key instanceof Xf)}},Of),Nf=Qc("PrivateMethod","static",function(e){e&&(this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A private class method inside a class",$propdoc:{static:"[boolean] is this a static private method"},computed_key:()=>!1},Of),Lf=Qc("Class","name extends properties",function(e){e&&(this.name=e.name,this.extends=e.extends,this.properties=e.properties,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$propdoc:{name:"[AST_SymbolClass|AST_SymbolDefClass?] optional class name.",extends:"[AST_Node]? optional parent class",properties:"[AST_ObjectProperty|AST_ClassStaticBlock]* array of properties or static blocks"},$documentation:"An ES6 class",_walk:function(e){return e._visit(this,function(){this.name&&this.name._walk(e),this.extends&&this.extends._walk(e),this.properties.forEach(t=>t._walk(e))})},_children_backwards(e){let t=this.properties.length;for(;t--;)e(this.properties[t]);this.extends&&e(this.extends),this.name&&e(this.name)},visit_nondeferred_class_parts(e){this.extends&&this.extends._walk(e),this.properties.forEach(t=>{t instanceof jf?t._walk(e):(t.computed_key()&&(e.push(t),t.key._walk(e),e.pop()),(t instanceof Mf&&t.static&&t.value||t instanceof If&&t.static&&t.value)&&(e.push(t),t.value._walk(e),e.pop()))})},visit_deferred_class_parts(e){this.properties.forEach(t=>{t instanceof Rf||t instanceof Nf?t.walk(e):(t instanceof If&&!t.static&&t.value||t instanceof Mf&&!t.static&&t.value)&&(e.push(t),t.value._walk(e),e.pop())})},is_self_referential:function(){const e=this.name&&this.name.definition().id;let t=!1,n=!0;return this.visit_nondeferred_class_parts(new Pd((r,i)=>{if(t)return!0;if(r instanceof pd)return t=n;if(r instanceof ud)return t=r.definition().id===e;if(r instanceof kl&&!(r instanceof Cl)){const e=n;return n=!1,i(),n=e,!0}})),t}},wl),If=Qc("ClassProperty","static quote",function(e){e&&(this.static=e.static,this.quote=e.quote,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$documentation:"A class property",$propdoc:{static:"[boolean] whether this is a static key",quote:"[string] which quote is being used"},_walk:function(e){return e._visit(this,function(){this.key instanceof tl&&this.key._walk(e),this.value instanceof tl&&this.value._walk(e)})},_children_backwards(e){this.value instanceof tl&&e(this.value),this.key instanceof tl&&e(this.key)},computed_key(){return!(this.key instanceof ed)}},Of),Mf=Qc("ClassPrivateProperty","",function(e){e&&(this.static=e.static,this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A class property for a private property",_walk:function(e){return e._visit(this,function(){this.value instanceof tl&&this.value._walk(e)})},_children_backwards(e){this.value instanceof tl&&e(this.value)},computed_key:()=>!1},Of),zf=Qc("PrivateIn","key value",function(e){e&&(this.key=e.key,this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"An `in` binop when the key is private, eg #x in this",_walk:function(e){return e._visit(this,function(){this.key._walk(e),this.value._walk(e)})},_children_backwards(e){e(this.value),e(this.key)}}),Bf=Qc("DefClass",null,function(e){e&&(this.name=e.name,this.extends=e.extends,this.properties=e.properties,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A class definition"},Lf),jf=Qc("ClassStaticBlock","body block_scope",function(e){this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end},{$documentation:"A block containing statements to be executed in the context of the class",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(e){return e._visit(this,function(){sl(this,e)})},_children_backwards(e){let t=this.body.length;for(;t--;)e(this.body[t])},clone:al,computed_key:()=>!1},wl),Uf=Qc("ClassExpression",null,function(e){e&&(this.name=e.name,this.extends=e.extends,this.properties=e.properties,this.variables=e.variables,this.uses_with=e.uses_with,this.uses_eval=e.uses_eval,this.parent_scope=e.parent_scope,this.enclosed=e.enclosed,this.cname=e.cname,this.body=e.body,this.block_scope=e.block_scope,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A class expression."},Lf),Vf=Qc("Symbol","scope name thedef",function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols"}),qf=Qc("NewTarget",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A reference to new.target"}),Hf=Qc("SymbolDeclaration","init",function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)"},Vf),Kf=Qc("SymbolVar",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol defining a variable"},Hf),Zf=Qc("SymbolBlockDeclaration",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for block-scoped declaration symbols"},Hf),Wf=Qc("SymbolConst",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A constant declaration"},Zf),Gf=Qc("SymbolUsing",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A `using` declaration"},Zf),Yf=Qc("SymbolLet",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A block-scoped `let` declaration"},Zf),Qf=Qc("SymbolFunarg",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol naming a function argument"},Kf),Jf=Qc("SymbolDefun",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol defining a function"},Hf),Xf=Qc("SymbolMethod",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol in an object defining a method"},Vf),ed=Qc("SymbolClassProperty",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol for a class property"},Vf),td=Qc("SymbolLambda",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol naming a function expression"},Hf),nd=Qc("SymbolDefClass",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol naming a class's name in a class declaration. Lexically scoped to its containing scope, and accessible within the class."},Zf),rd=Qc("SymbolClass",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol naming a class's name. Lexically scoped to the class."},Hf),id=Qc("SymbolCatch",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol naming the exception in catch"},Zf),od=Qc("SymbolImport",null,function(e){e&&(this.init=e.init,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol referring to an imported name"},Zf),sd=Qc("SymbolImportForeign","quote",function(e){e&&(this.quote=e.quote,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A symbol imported from a module, but it is defined in the other module, and its real name is irrelevant for this module's purposes"},Vf),ad=Qc("Label","references",function(e){e&&(this.references=e.references,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end,this.initialize()),this.flags=0},{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},Vf),ud=Qc("SymbolRef",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Reference to some symbol (not definition/declaration)"},Vf),cd=Qc("SymbolExport","quote",function(e){e&&(this.quote=e.quote,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Symbol referring to a name to export"},ud),ld=Qc("SymbolExportForeign","quote",function(e){e&&(this.quote=e.quote,this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A symbol exported from this module, but it is used in the other module, and its real name is irrelevant for this module's purposes"},Vf),fd=Qc("LabelRef",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Reference to a label symbol"},Vf),dd=Qc("SymbolPrivateProperty",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A symbol that refers to a private property"},Vf),pd=Qc("This",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `this` symbol"},Vf),hd=Qc("Super",null,function(e){e&&(this.scope=e.scope,this.name=e.name,this.thedef=e.thedef,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `super` symbol"},pd),md=Qc("Constant",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for all constants",getValue:function(){return this.value}}),gd=Qc("String","value quote",function(e){e&&(this.value=e.value,this.quote=e.quote,this.start=e.start,this.end=e.end,this._annotations=e._annotations),this.flags=0},{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string",quote:"[string] the original quote character"}},md),vd=Qc("Number","value raw",function(e){e&&(this.value=e.value,this.raw=e.raw,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value",raw:"[string] numeric value as string"}},md),yd=Qc("BigInt","value raw",function(e){e&&(this.value=e.value,this.raw=e.raw,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A big int literal",$propdoc:{value:"[string] big int value, represented as a string",raw:"[string] the original format preserved"}},md),_d=Qc("RegExp","value",function(e){e&&(this.value=e.value,this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},md),bd=Qc("Atom",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for atoms"},md),wd=Qc("Null",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `null` atom",value:null},bd),xd=Qc("NaN",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The impossible value",value:NaN},bd),Ed=Qc("Undefined",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `undefined` value",value:void 0},bd),kd=Qc("Hole",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"A hole in an array",value:void 0},bd),Ad=Qc("Infinity",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `Infinity` value",value:1/0},bd),Dd=Qc("Boolean",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"Base class for booleans"},bd),Cd=Qc("False",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `false` atom",value:!1},Dd),Od=Qc("True",null,function(e){e&&(this.start=e.start,this.end=e.end),this.flags=0},{$documentation:"The `true` atom",value:!0},Dd);function Sd(e,t,n=[e]){const r=n.push.bind(n);for(;n.length;){const e=n.pop(),i=t(e,n);if(i){if(i===Td)return!0}else e._children_backwards(r)}return!1}function $d(e,t,n){const r=[e],i=r.push.bind(r),o=n?n.slice():[],s=[];let a;const u={parent:(e=0)=>-1===e?a:n&&e>=o.length?(e-=o.length,n[n.length-(e+1)]):o[o.length-(1+e)]};for(;r.length;){for(a=r.pop();s.length&&r.length==s[s.length-1];)o.pop(),s.pop();const e=t(a,u);if(e){if(e===Td)return!0;continue}const n=r.length;a._children_backwards(i),r.length>n&&(o.push(a),s.push(n-1))}return!1}const Td=Symbol("abort walk");class Pd{constructor(e){this.visit=e,this.stack=[],this.directives=Object.create(null)}_visit(e,t){this.push(e);var n=this.visit(e,t?function(){t.call(e)}:Bu);return!n&&t&&t.call(e),this.pop(),n}parent(e){return this.stack[this.stack.length-2-(e||0)]}push(e){e instanceof kl?this.directives=Object.create(this.directives):e instanceof il&&!this.directives[e.value]?this.directives[e.value]=e:e instanceof Lf&&(this.directives=Object.create(this.directives),this.directives["use strict"]||(this.directives["use strict"]=e)),this.stack.push(e)}pop(){var e=this.stack.pop();(e instanceof kl||e instanceof Lf)&&(this.directives=Object.getPrototypeOf(this.directives))}self(){return this.stack[this.stack.length-1]}find_parent(e){for(var t=this.stack,n=t.length;--n>=0;){var r=t[n];if(r instanceof e)return r}}is_within_loop(){let e=this.stack.length-1,t=this.stack[e];for(;e--;){const n=this.stack[e];if(n instanceof kl)return!1;if(n instanceof pl&&!(n instanceof vl&&t===n.init)&&(!(n instanceof yl||n instanceof _l)||t!==n.object))return!0;t=n}return!1}find_scope(){for(var e=this.stack,t=e.length;--t>=0;){const n=e[t];if(n instanceof xl)return n;if(n instanceof kl)return n;if(n.block_scope)return n.block_scope}}has_directive(e){var t=this.directives[e];if(t)return t;var n=this.stack[this.stack.length-1];if(n instanceof wl&&n.body)for(var r=0;r<n.body.length;++r){var i=n.body[r];if(!(i instanceof il))break;if(i.value==e)return i}}loopcontrol_target(e){var t=this.stack;if(e.label){for(var n=t.length;--n>=0;)if((r=t[n])instanceof dl&&r.label.name==e.label.name)return r.body}else for(n=t.length;--n>=0;){var r;if((r=t[n])instanceof pl||e instanceof Ml&&r instanceof Vl)return r}}}class Fd extends Pd{constructor(e,t){super(),this.before=e,this.after=t}}const Rd=1,Nd=2,Ld=4,Id=8,Md=16;function zd(e,t){e.DEFMETHOD("transform",function(e,n){let r;if(e.push(this),e.before&&(r=e.before(this,t,n)),void 0===r&&(r=this,t(r,e),e.after)){const t=e.after(r,n);void 0!==t&&(r=t)}return e.pop(),r})}function Bd(e){let t=e.parent(-1);for(let n,r=0;n=e.parent(r);r++){if(n instanceof nl&&n.body===t)return!0;if(!(n instanceof pf&&n.expressions[0]===t||"Call"===n.TYPE&&n.expression===t||n instanceof $l&&n.prefix===t||n instanceof mf&&n.expression===t||n instanceof vf&&n.expression===t||n instanceof yf&&n.expression===t||n instanceof Ef&&n.condition===t||n instanceof xf&&n.left===t||n instanceof wf&&n.expression===t))return!1;t=n}}function jd(e){return e instanceof Cf||(e instanceof pf?jd(e.expressions[0]):"Call"===e.TYPE?jd(e.expression):e instanceof $l?jd(e.prefix):e instanceof mf||e instanceof vf||e instanceof yf?jd(e.expression):e instanceof Ef?jd(e.condition):e instanceof xf?jd(e.left):e instanceof wf&&jd(e.expression))}zd(tl,Bu),zd(dl,function(e,t){e.label=e.label.transform(t),e.body=e.body.transform(t)}),zd(ol,function(e,t){e.body=e.body.transform(t)}),zd(ul,function(e,t){e.body=Hu(e.body,t)}),zd(ml,function(e,t){e.body=e.body.transform(t),e.condition=e.condition.transform(t)}),zd(gl,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t)}),zd(vl,function(e,t){e.init&&(e.init=e.init.transform(t)),e.condition&&(e.condition=e.condition.transform(t)),e.step&&(e.step=e.step.transform(t)),e.body=e.body.transform(t)}),zd(yl,function(e,t){e.init=e.init.transform(t),e.object=e.object.transform(t),e.body=e.body.transform(t)}),zd(bl,function(e,t){e.expression=e.expression.transform(t),e.body=e.body.transform(t)}),zd(Rl,function(e,t){e.value&&(e.value=e.value.transform(t))}),zd(Il,function(e,t){e.label&&(e.label=e.label.transform(t))}),zd(Ul,function(e,t){e.condition=e.condition.transform(t),e.body=e.body.transform(t),e.alternative&&(e.alternative=e.alternative.transform(t))}),zd(Vl,function(e,t){e.expression=e.expression.transform(t),e.body=Hu(e.body,t)}),zd(Kl,function(e,t){e.expression=e.expression.transform(t),e.body=Hu(e.body,t)}),zd(Zl,function(e,t){e.body=e.body.transform(t),e.bcatch&&(e.bcatch=e.bcatch.transform(t)),e.bfinally&&(e.bfinally=e.bfinally.transform(t))}),zd(Gl,function(e,t){e.argname&&(e.argname=e.argname.transform(t)),e.body=Hu(e.body,t)}),zd(Ql,function(e,t){e.definitions=Hu(e.definitions,t)}),zd(rf,function(e,t){e.name=e.name.transform(t),e.value&&(e.value=e.value.transform(t))}),zd(Sl,function(e,t){e.names=Hu(e.names,t)}),zd(kl,function(e,t){e.name&&(e.name=e.name.transform(t)),e.argnames=Hu(e.argnames,t,!1),e.body instanceof tl?e.body=e.body.transform(t):e.body=Hu(e.body,t)}),zd(ff,function(e,t){e.expression=e.expression.transform(t),e.args=Hu(e.args,t,!1)}),zd(pf,function(e,t){const n=Hu(e.expressions,t);e.expressions=n.length?n:[new vd({value:0})]}),zd(hf,function(e,t){e.expression=e.expression.transform(t)}),zd(vf,function(e,t){e.expression=e.expression.transform(t),e.property=e.property.transform(t)}),zd(yf,function(e,t){e.expression=e.expression.transform(t)}),zd(jl,function(e,t){e.expression&&(e.expression=e.expression.transform(t))}),zd(Bl,function(e,t){e.expression=e.expression.transform(t)}),zd(_f,function(e,t){e.expression=e.expression.transform(t)}),zd(xf,function(e,t){e.left=e.left.transform(t),e.right=e.right.transform(t)}),zd(zf,function(e,t){e.key=e.key.transform(t),e.value=e.value.transform(t)}),zd(Ef,function(e,t){e.condition=e.condition.transform(t),e.consequent=e.consequent.transform(t),e.alternative=e.alternative.transform(t)}),zd(Df,function(e,t){e.elements=Hu(e.elements,t)}),zd(Cf,function(e,t){e.properties=Hu(e.properties,t)}),zd(Of,function(e,t){e.key instanceof tl&&(e.key=e.key.transform(t)),e.value&&(e.value=e.value.transform(t))}),zd(Lf,function(e,t){e.name&&(e.name=e.name.transform(t)),e.extends&&(e.extends=e.extends.transform(t)),e.properties=Hu(e.properties,t)}),zd(jf,function(e,t){e.body=Hu(e.body,t)}),zd(El,function(e,t){e.expression=e.expression.transform(t)}),zd(af,function(e,t){e.foreign_name=e.foreign_name.transform(t),e.name=e.name.transform(t)}),zd(uf,function(e,t){e.imported_name&&(e.imported_name=e.imported_name.transform(t)),e.imported_names&&Hu(e.imported_names,t),e.module_name=e.module_name.transform(t)}),zd(lf,function(e,t){e.exported_definition&&(e.exported_definition=e.exported_definition.transform(t)),e.exported_value&&(e.exported_value=e.exported_value.transform(t)),e.exported_names&&Hu(e.exported_names,t),e.module_name&&(e.module_name=e.module_name.transform(t))}),zd(Tl,function(e,t){e.segments=Hu(e.segments,t)}),zd($l,function(e,t){e.prefix=e.prefix.transform(t),e.template_string=e.template_string.transform(t)}),function(){var e=function(e){for(var t=0;t<e.length;t++){if(!(e[t]instanceof nl&&e[t].body instanceof gd))return e;e[t]=new il({start:e[t].start,end:e[t].end,quote:'"',value:e[t].body.value})}return e};function t(e){return e&&e.length>0?new Cf({start:i(e),end:o(e),properties:e.map(e=>new Sf({start:i(e),end:o(e),key:e.key.name||e.key.value,value:a(e.value)}))}):null}var n={Program:function(t){return new xl({start:i(t),end:o(t),body:e(t.body.map(a))})},ArrayPattern:function(e){return new Sl({start:i(e),end:o(e),names:e.elements.map(function(e){return null===e?new kd:a(e)}),is_array:!0})},ObjectPattern:function(e){return new Sl({start:i(e),end:o(e),names:e.properties.map(a),is_array:!1})},AssignmentPattern:function(e){return new Af({start:i(e),end:o(e),left:a(e.left),operator:"=",right:a(e.right)})},SpreadElement:function(e){return new El({start:i(e),end:o(e),expression:a(e.argument)})},RestElement:function(e){return new El({start:i(e),end:o(e),expression:a(e.argument)})},TemplateElement:function(e){return new Pl({start:i(e),end:o(e),value:e.value.cooked,raw:e.value.raw})},TemplateLiteral:function(e){for(var t=[],n=0;n<e.quasis.length;n++)t.push(a(e.quasis[n])),e.expressions[n]&&t.push(a(e.expressions[n]));return new Tl({start:i(e),end:o(e),segments:t})},TaggedTemplateExpression:function(e){return new $l({start:i(e),end:o(e),template_string:a(e.quasi),prefix:a(e.tag)})},FunctionDeclaration:function(t){return new Ol({start:i(t),end:o(t),name:t.id&&c(Jf,t.id),argnames:t.params.map(e=>f(e,Qf)),is_generator:t.generator,async:t.async,body:e(a(t.body).body)})},FunctionExpression:function(e){return l(e,!1)},ArrowFunctionExpression:function(e){const t="BlockStatement"===e.body.type?a(e.body).body:[Ku(Nl,{},{value:a(e.body)})];return new Cl({start:i(e),end:o(e),argnames:e.params.map(e=>f(e,Qf)),body:t,async:e.async})},ExpressionStatement:function(e){return new ol({start:i(e),end:o(e),body:a(e.expression)})},TryStatement:function(e){var t=e.handlers||[e.handler];if(t.length>1||e.guardedHandlers&&e.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new Zl({start:i(e),end:o(e),body:new Wl(a(e.block)),bcatch:a(t[0]),bfinally:e.finalizer?new Yl(a(e.finalizer)):null})},Property:function(e){if("init"==e.kind&&!e.method){var t={start:i(e.key||e.value),end:o(e.value),key:e.computed?a(e.key):e.key.name||String(e.key.value),quote:u(e.key,e.computed),static:!1,value:a(e.value)};return new Sf(t)}var n=l(e.value,!0);return t={start:i(e.key||e.value),end:o(e.value),key:e.computed?a(e.key):c(Xf,e.key),quote:u(e.key,e.computed),static:!1,value:n},"get"==e.kind?new Ff(t):"set"==e.kind?new Pf(t):e.method?new Rf(t):void 0},MethodDefinition:function(e){const t="PrivateIdentifier"===e.key.type,n=e.computed?a(e.key):new Xf({name:e.key.name||String(e.key.value)});var r={start:i(e),end:o(e),key:n,quote:u(e.key,e.computed),value:l(e.value,!0),static:e.static};return"get"==e.kind?new(t?Tf:Ff)(r):"set"==e.kind?new(t?$f:Pf)(r):new(t?Nf:Rf)(r)},FieldDefinition:function(e){let t;if(e.computed)t=a(e.key);else{if("Identifier"!==e.key.type)throw new Error("Non-Identifier key in FieldDefinition");t=a(e.key)}return new If({start:i(e),end:o(e),quote:u(e.key,e.computed),key:t,value:a(e.value),static:e.static})},PropertyDefinition:function(e){let t;if(e.computed)t=a(e.key);else{if("PrivateIdentifier"===e.key.type)return new Mf({start:i(e),end:o(e),key:a(e.key),value:a(e.value),static:e.static});t=c(ed,e.key)}return new If({start:i(e),end:o(e),quote:u(e.key,e.computed),key:t,value:a(e.value),static:e.static})},PrivateIdentifier:function(e){return new dd({start:i(e),end:o(e),name:e.name})},StaticBlock:function(e){return new jf({start:i(e),end:o(e),body:e.body.map(a)})},ArrayExpression:function(e){return new Df({start:i(e),end:o(e),elements:e.elements.map(function(e){return null===e?new kd:a(e)})})},ObjectExpression:function(e){return new Cf({start:i(e),end:o(e),properties:e.properties.map(function(e){return"SpreadElement"===e.type||(e.type="Property"),a(e)})})},SequenceExpression:function(e){return new pf({start:i(e),end:o(e),expressions:e.expressions.map(a)})},MemberExpression:function(e){return"PrivateIdentifier"===e.property.type?new gf({start:i(e),end:o(e),property:e.property.name,expression:a(e.object),optional:e.optional||!1}):new(e.computed?vf:mf)({start:i(e),end:o(e),property:e.computed?a(e.property):e.property.name,expression:a(e.object),optional:e.optional||!1})},ChainExpression:function(e){return new yf({start:i(e),end:o(e),expression:a(e.expression)})},SwitchCase:function(e){return new(e.test?Kl:Hl)({start:i(e),end:o(e),expression:a(e.test),body:e.consequent.map(a)})},VariableDeclaration:function(e){let t,n,r=of,s=!1;"const"===e.kind?(t=tf,n=Wf):"let"===e.kind?(t=ef,n=Yf):"using"===e.kind?(t=nf,r=sf,n=Gf):"await using"===e.kind?(t=nf,r=sf,n=Gf,s=!0):(t=Xl,n=Kf);const u=e.declarations.map(e=>new r({start:i(e),end:o(e),name:f(e.id,n),value:a(e.init)}));return new t({start:i(e),end:o(e),definitions:u,await:s})},ImportDeclaration:function(e){var n=null,r=null;return e.specifiers.forEach(function(e){"ImportSpecifier"===e.type||"ImportNamespaceSpecifier"===e.type?(r||(r=[]),r.push(a(e))):"ImportDefaultSpecifier"===e.type&&(n=a(e))}),new uf({start:i(e),end:o(e),imported_name:n,imported_names:r,module_name:a(e.source),attributes:t(e.attributes||e.assertions)})},ImportSpecifier:function(e){return new af({start:i(e),end:o(e),foreign_name:c(sd,e.imported,"Literal"===e.imported.type),name:c(od,e.local)})},ImportDefaultSpecifier:function(e){return c(od,e.local)},ImportNamespaceSpecifier:function(e){return new af({start:i(e),end:o(e),foreign_name:new sd({name:"*"}),name:c(od,e.local)})},ImportExpression:function(e){const t=[a(e.source)];return e.options&&t.push(a(e.options)),new ff({start:i(e),end:o(e),expression:a({type:"Identifier",name:"import"}),optional:!1,args:t})},ExportAllDeclaration:function(e){var n=null==e.exported?new ld({name:"*"}):c(ld,e.exported,"Literal"===e.exported.type);return new lf({start:i(e),end:o(e),exported_names:[new af({start:i(e),end:o(e),name:new cd({name:"*"}),foreign_name:n})],module_name:a(e.source),attributes:t(e.attributes||e.assertions)})},ExportNamedDeclaration:function(e){return e.declaration?new lf({start:i(e),end:o(e),exported_definition:a(e.declaration),exported_names:null,module_name:null,attributes:null}):new lf({start:i(e),end:o(e),exported_definition:null,exported_names:e.specifiers&&e.specifiers.length?e.specifiers.map(a):[],module_name:a(e.source),attributes:t(e.attributes||e.assertions)})},ExportDefaultDeclaration:function(e){return new lf({start:i(e),end:o(e),exported_value:a(e.declaration),is_default:!0})},ExportSpecifier:function(e){return new af({start:i(e),end:o(e),foreign_name:c(ld,e.exported,"Literal"===e.exported.type),name:c(cd,e.local,"Literal"===e.local.type)})},Literal:function(e){var t=e.value,n={start:i(e),end:o(e)},r=e.regex;if(r&&r.pattern)return n.value={source:r.pattern,flags:r.flags},new _d(n);if(r){const r=e.raw||t,i=r.match(/^\/(.*)\/(\w*)$/);if(!i)throw new Error("Invalid regex source "+r);const[o,s,a]=i;return n.value={source:s,flags:a},new _d(n)}const s="bigint"==typeof e.value?e.value.toString():e.bigint;if("string"==typeof s)return n.value=s,n.raw=e.raw,new yd(n);if(null===t)return new wd(n);switch(typeof t){case"string":return n.quote='"',n.value=t,new gd(n);case"number":return n.value=t,n.raw=e.raw||t.toString(),new vd(n);case"boolean":return new(t?Od:Cd)(n)}},MetaProperty:function(e){return"new"===e.meta.name&&"target"===e.property.name?new qf({start:i(e),end:o(e)}):"import"===e.meta.name&&"meta"===e.property.name?new cf({start:i(e),end:o(e)}):void 0},Identifier:function(e){return new ud({start:i(e),end:o(e),name:e.name})},EmptyStatement:function(e){return new ll({start:i(e),end:o(e)})},BlockStatement:function(e){return new cl({start:i(e),end:o(e),body:e.body.map(a)})},IfStatement:function(e){return new Ul({start:i(e),end:o(e),condition:a(e.test),body:a(e.consequent),alternative:a(e.alternate)})},LabeledStatement:function(e){try{const t=c(ad,e.label);return s.push(t),new dl({start:i(e),end:o(e),label:t,body:a(e.body)})}finally{s.pop()}},BreakStatement:function(e){return new Ml({start:i(e),end:o(e),label:d(e.label)})},ContinueStatement:function(e){return new zl({start:i(e),end:o(e),label:d(e.label)})},WithStatement:function(e){return new bl({start:i(e),end:o(e),expression:a(e.object),body:a(e.body)})},SwitchStatement:function(e){return new Vl({start:i(e),end:o(e),expression:a(e.discriminant),body:e.cases.map(a)})},ReturnStatement:function(e){return new Nl({start:i(e),end:o(e),value:a(e.argument)})},ThrowStatement:function(e){return new Ll({start:i(e),end:o(e),value:a(e.argument)})},WhileStatement:function(e){return new gl({start:i(e),end:o(e),condition:a(e.test),body:a(e.body)})},DoWhileStatement:function(e){return new ml({start:i(e),end:o(e),condition:a(e.test),body:a(e.body)})},ForStatement:function(e){return new vl({start:i(e),end:o(e),init:a(e.init),condition:a(e.test),step:a(e.update),body:a(e.body)})},ForInStatement:function(e){return new yl({start:i(e),end:o(e),init:a(e.left),object:a(e.right),body:a(e.body)})},ForOfStatement:function(e){return new _l({start:i(e),end:o(e),init:a(e.left),object:a(e.right),body:a(e.body),await:e.await})},AwaitExpression:function(e){return new Bl({start:i(e),end:o(e),expression:a(e.argument)})},YieldExpression:function(e){return new jl({start:i(e),end:o(e),expression:a(e.argument),is_star:e.delegate})},DebuggerStatement:function(e){return new rl({start:i(e),end:o(e)})},CatchClause:function(e){return new Gl({start:i(e),end:o(e),argname:e.param?f(e.param,id):null,body:a(e.body).body})},ThisExpression:function(e){return new pd({start:i(e),name:"this",end:o(e)})},Super:function(e){return new hd({start:i(e),end:o(e),name:"super"})},BinaryExpression:function(e){return"PrivateIdentifier"===e.left.type?new zf({start:i(e),end:o(e),key:new dd({start:i(e.left),end:o(e.left),name:e.left.name}),value:a(e.right)}):new xf({start:i(e),end:o(e),operator:e.operator,left:a(e.left),right:a(e.right)})},LogicalExpression:function(e){return new xf({start:i(e),end:o(e),operator:e.operator,left:a(e.left),right:a(e.right)})},AssignmentExpression:function(e){return new kf({start:i(e),end:o(e),operator:e.operator,logical:"??="===e.operator||"&&="===e.operator||"||="===e.operator,left:a(e.left),right:a(e.right)})},ConditionalExpression:function(e){return new Ef({start:i(e),end:o(e),condition:a(e.test),consequent:a(e.consequent),alternative:a(e.alternate)})},NewExpression:function(e){return new df({start:i(e),end:o(e),expression:a(e.callee),args:e.arguments.map(a)})},CallExpression:function(e){return new ff({start:i(e),end:o(e),expression:a(e.callee),optional:e.optional,args:e.arguments.map(a)})}};function r(e){const t=[];if(e)for(const{key:n,value:r}of e.properties){const e=Lc(n)?{type:"Identifier",name:n}:{type:"Literal",value:n,raw:JSON.stringify(n)};t.push({type:"ImportAttribute",key:e,value:m(r)})}return t}function i(e){var t=e.loc,n=t&&t.start,r=e.range;return new el("","",n&&n.line||0,n&&n.column||0,r?r[0]:e.start,!1,[],[],t&&t.source)}function o(e){var t=e.loc,n=t&&t.end,r=e.range;return new el("","",n&&n.line||0,n&&n.column||0,r?r[0]:e.end,!1,[],[],t&&t.source)}n.UpdateExpression=n.UnaryExpression=function(e){return new(("prefix"in e?e.prefix:"UnaryExpression"==e.type)?bf:wf)({start:i(e),end:o(e),operator:e.operator,expression:a(e.argument)})},n.ClassDeclaration=n.ClassExpression=function(e){return new("ClassDeclaration"===e.type?Bf:Uf)({start:i(e),end:o(e),name:e.id&&c("ClassDeclaration"===e.type?nd:rd,e.id),extends:a(e.superClass),properties:e.body.body.map(a)})},p(ll,function(){return{type:"EmptyStatement"}}),p(cl,function(e){return{type:"BlockStatement",body:e.body.map(m)}}),p(Ul,function(e){return{type:"IfStatement",test:m(e.condition),consequent:m(e.body),alternate:m(e.alternative)}}),p(dl,function(e){return{type:"LabeledStatement",label:m(e.label),body:m(e.body)}}),p(Ml,function(e){return{type:"BreakStatement",label:m(e.label)}}),p(zl,function(e){return{type:"ContinueStatement",label:m(e.label)}}),p(bl,function(e){return{type:"WithStatement",object:m(e.expression),body:m(e.body)}}),p(Vl,function(e){return{type:"SwitchStatement",discriminant:m(e.expression),cases:e.body.map(m)}}),p(Nl,function(e){return{type:"ReturnStatement",argument:m(e.value)}}),p(Ll,function(e){return{type:"ThrowStatement",argument:m(e.value)}}),p(gl,function(e){return{type:"WhileStatement",test:m(e.condition),body:m(e.body)}}),p(ml,function(e){return{type:"DoWhileStatement",test:m(e.condition),body:m(e.body)}}),p(vl,function(e){return{type:"ForStatement",init:m(e.init),test:m(e.condition),update:m(e.step),body:m(e.body)}}),p(yl,function(e){return{type:"ForInStatement",left:m(e.init),right:m(e.object),body:m(e.body)}}),p(_l,function(e){return{type:"ForOfStatement",left:m(e.init),right:m(e.object),body:m(e.body),await:e.await}}),p(Bl,function(e){return{type:"AwaitExpression",argument:m(e.expression)}}),p(jl,function(e){return{type:"YieldExpression",argument:m(e.expression),delegate:e.is_star}}),p(rl,function(){return{type:"DebuggerStatement"}}),p(rf,function(e){return{type:"VariableDeclarator",id:m(e.name),init:m(e.value)}}),p(pd,function(){return{type:"ThisExpression"}}),p(hd,function(){return{type:"Super"}}),p(Ef,function(e){return{type:"ConditionalExpression",test:m(e.condition),consequent:m(e.consequent),alternate:m(e.alternative)}}),p(df,function(e){return{type:"NewExpression",callee:m(e.expression),arguments:e.args.map(m)}}),p(ff,function(e){if(e.expression instanceof ud&&"import"===e.expression.name){const[t,n]=e.args.map(m);return{type:"ImportExpression",source:t,options:n||null}}return{type:"CallExpression",callee:m(e.expression),optional:e.optional,arguments:e.args.map(m)}}),p(xl,function(e){return b("Program",e)}),p(El,function(e){return{type:y()?"RestElement":"SpreadElement",argument:m(e.expression)}}),p($l,function(e){return{type:"TaggedTemplateExpression",tag:m(e.prefix),quasi:m(e.template_string)}}),p(Tl,function(e){for(var t=[],n=[],r=0;r<e.segments.length;r++)r%2!=0?n.push(m(e.segments[r])):t.push({type:"TemplateElement",value:{raw:e.segments[r].raw,cooked:e.segments[r].value},tail:r===e.segments.length-1});return{type:"TemplateLiteral",quasis:t,expressions:n}}),p(Ol,function(e){return{type:"FunctionDeclaration",id:m(e.name),params:e.argnames.map(v),generator:e.is_generator,async:e.async,body:b("BlockStatement",e)}}),p(Dl,function(e){return{type:"FunctionExpression",id:m(e.name),params:e.argnames.map(v),generator:e.is_generator||!1,async:e.async||!1,body:b("BlockStatement",e)}}),p(Cl,function(e){var t=1===e.body.length&&e.body[0]instanceof Nl&&e.body[0].value?m(e.body[0].value):{type:"BlockStatement",body:e.body.map(m)};return{type:"ArrowFunctionExpression",params:e.argnames.map(v),async:e.async,body:t}}),p(Sl,function(e){return e.is_array?{type:"ArrayPattern",elements:e.names.map(e=>e instanceof kd?null:v(e))}:{type:"ObjectPattern",properties:e.names.map(e=>{if(e instanceof Sf){var t=e.computed_key();const[n,r]=g(e.key,t,e.quote,e.value);return{type:"Property",computed:t,kind:"init",key:r,method:!1,shorthand:n,value:v(e.value)}}return v(e)})}}),p(Af,function(e){return{type:"AssignmentPattern",left:v(e.left),right:m(e.right)}}),p(il,function(e){return{type:"ExpressionStatement",expression:{type:"Literal",value:e.value,raw:e.print_to_string()},directive:e.value}}),p(ol,function(e){return{type:"ExpressionStatement",expression:m(e.body)}}),p(ql,function(e){return{type:"SwitchCase",test:m(e.expression),consequent:e.body.map(m)}}),p(Zl,function(e){return{type:"TryStatement",block:_(e.body),handler:m(e.bcatch),guardedHandlers:[],finalizer:m(e.bfinally)}}),p(Gl,function(e){return{type:"CatchClause",param:null!=e.argname?v(e.argname):null,body:_(e)}}),p(Ql,function(e){return{type:"VariableDeclaration",kind:e instanceof tf?"const":e instanceof ef?"let":e instanceof nf?e.await?"await using":"using":"var",declarations:e.definitions.map(m)}}),p(lf,function(e){if(e.exported_names){var t=e.exported_names[0];if(t&&"*"===t.name.name&&!t.name.quote){var n=t.foreign_name,i="*"!==n.name||n.quote?m(n):null;return{type:"ExportAllDeclaration",source:m(e.module_name),exported:i,attributes:r(e.attributes)}}return{type:"ExportNamedDeclaration",specifiers:e.exported_names.map(function(e){return{type:"ExportSpecifier",exported:m(e.foreign_name),local:m(e.name)}}),declaration:m(e.exported_definition),source:m(e.module_name),attributes:r(e.attributes)}}return e.is_default?{type:"ExportDefaultDeclaration",declaration:m(e.exported_value||e.exported_definition)}:{type:"ExportNamedDeclaration",declaration:m(e.exported_value||e.exported_definition),specifiers:[],source:null}}),p(uf,function(e){var t=[];if(e.imported_name&&t.push({type:"ImportDefaultSpecifier",local:m(e.imported_name)}),e.imported_names){var n=e.imported_names[0].foreign_name;"*"!==n.name||n.quote?e.imported_names.forEach(function(e){t.push({type:"ImportSpecifier",local:m(e.name),imported:m(e.foreign_name)})}):t.push({type:"ImportNamespaceSpecifier",local:m(e.imported_names[0].name)})}return{type:"ImportDeclaration",specifiers:t,source:m(e.module_name),attributes:r(e.attributes)}}),p(cf,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"import"},property:{type:"Identifier",name:"meta"}}}),p(pf,function(e){return{type:"SequenceExpression",expressions:e.expressions.map(m)}}),p(gf,function(e){return{type:"MemberExpression",object:m(e.expression),computed:!1,property:{type:"PrivateIdentifier",name:e.property},optional:e.optional}}),p(hf,function(e){var t=e instanceof vf;return{type:"MemberExpression",object:m(e.expression),computed:t,property:t?m(e.property):{type:"Identifier",name:e.property},optional:e.optional}}),p(yf,function(e){return{type:"ChainExpression",expression:m(e.expression)}}),p(_f,function(e){return{type:"++"==e.operator||"--"==e.operator?"UpdateExpression":"UnaryExpression",operator:e.operator,prefix:e instanceof bf,argument:m(e.expression)}}),p(xf,function(e){return"="==e.operator&&y()?{type:"AssignmentPattern",left:m(e.left),right:m(e.right)}:{type:"&&"==e.operator||"||"==e.operator||"??"===e.operator?"LogicalExpression":"BinaryExpression",left:m(e.left),operator:e.operator,right:m(e.right)}}),p(kf,function(e){return{type:"AssignmentExpression",operator:e.operator,left:m(e.left),right:m(e.right)}}),p(zf,function(e){return{type:"BinaryExpression",left:{type:"PrivateIdentifier",name:e.key.name},operator:"in",right:m(e.value)}}),p(Df,function(e){return{type:"ArrayExpression",elements:e.elements.map(m)}}),p(Cf,function(e){return{type:"ObjectExpression",properties:e.properties.map(m)}}),p(Of,function(e,t){var n=e.computed_key();const[r,i]=g(e.key,n,e.quote,e.value);var o;return e instanceof Ff?o="get":e instanceof Pf&&(o="set"),e instanceof Tf||e instanceof $f?{type:"MethodDefinition",computed:!1,kind:e instanceof Tf?"get":"set",static:e.static,key:{type:"PrivateIdentifier",name:e.key.name},value:m(e.value)}:e instanceof Mf?{type:"PropertyDefinition",key:{type:"PrivateIdentifier",name:e.key.name},value:m(e.value),computed:!1,static:e.static}:e instanceof If?{type:"PropertyDefinition",key:i,value:m(e.value),computed:n,static:e.static}:t instanceof Lf?{type:"MethodDefinition",computed:n,kind:o,static:e.static,key:m(e.key),value:m(e.value)}:{type:"Property",computed:n,method:!1,shorthand:r,kind:o,key:i,value:m(e.value)}}),p(Sf,function(e){var t=e.computed_key();const[n,r]=g(e.key,t,e.quote,e.value);return{type:"Property",computed:t,shorthand:n,method:!1,kind:"init",key:r,value:m(e.value)}}),p(Rf,function(e,t){const n=e.computed_key(),[r,i]=g(e.key,n,e.quote,e.value);return t instanceof Cf?{type:"Property",kind:"init",computed:n,method:!0,shorthand:!1,key:i,value:m(e.value)}:{type:"MethodDefinition",kind:n||"constructor"!==e.key.name?"method":"constructor",computed:n,key:i,value:m(e.value),static:e.static}}),p(Nf,function(e){return{type:"MethodDefinition",kind:"method",key:{type:"PrivateIdentifier",name:e.key.name},value:m(e.value),computed:!1,static:e.static}}),p(Lf,function(e){return{type:e instanceof Uf?"ClassExpression":"ClassDeclaration",superClass:m(e.extends),id:e.name?m(e.name):null,body:{type:"ClassBody",body:e.properties.map(m)}}}),p(jf,function(e){return{type:"StaticBlock",body:e.body.map(m)}}),p(qf,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),p(Vf,function(e,t){if(e instanceof Xf&&t.quote||(e instanceof sd||e instanceof ld||e instanceof cd)&&e.quote)return{type:"Literal",value:e.name};var n=e.definition();return{type:"Identifier",name:n?n.mangled_name||n.name:e.name}}),p(_d,function(e){const t=e.value.source,n=e.value.flags;return{type:"Literal",value:null,raw:e.print_to_string(),regex:{pattern:t,flags:n}}}),p(md,function(e){return{type:"Literal",value:e.value,raw:e.raw||e.print_to_string()}}),p(bd,function(e){return{type:"Identifier",name:String(e.value)}}),p(yd,e=>({type:"Literal",value:null,bigint:"function"==typeof BigInt?BigInt(e.value).toString():e.value,raw:e.raw})),Dd.DEFMETHOD("to_mozilla_ast",md.prototype.to_mozilla_ast),wd.DEFMETHOD("to_mozilla_ast",md.prototype.to_mozilla_ast),kd.DEFMETHOD("to_mozilla_ast",function(){return null}),ul.DEFMETHOD("to_mozilla_ast",cl.prototype.to_mozilla_ast),kl.DEFMETHOD("to_mozilla_ast",Dl.prototype.to_mozilla_ast);var s=null;function a(e){return null==e?null:n[e.type](e)}function u(e,t){return t||"Literal"!==e.type||"string"!=typeof e.value?"":'"'}function c(e,t,n){return new e({start:i(t),quote:n?'"':void 0,name:"Identifier"===t.type?t.name:String(t.value),end:o(t)})}function l(t,n){return new(n?Al:Dl)({start:i(t),end:o(t),name:t.id&&c(n?Xf:td,t.id),argnames:t.params.map(e=>f(e,Qf)),is_generator:t.generator,async:t.async,body:e(a(t.body).body)})}function f(e,t){switch(e.type){case"ObjectPattern":return new Sl({start:i(e),end:o(e),names:e.properties.map(e=>f(e,t)),is_array:!1});case"Property":var n=e.key,r={start:i(n||e.value),end:o(e.value),key:"Identifier"==n.type?n.name:String(n.value),quote:e.computed||"Literal"!==n.type||"string"!=typeof n.value?"":'"',value:f(e.value,t)};return e.computed&&(r.key=a(e.key)),new Sf(r);case"ArrayPattern":return new Sl({start:i(e),end:o(e),names:e.elements.map(function(e){return null===e?new kd:f(e,t)}),is_array:!0});case"SpreadElement":case"RestElement":return new El({start:i(e),end:o(e),expression:f(e.argument,t)});case"AssignmentPattern":return new Af({start:i(e),end:o(e),left:f(e.left,t),operator:"=",right:a(e.right)});case"Identifier":return new t({start:i(e),end:o(e),name:e.name});default:throw new Error("Invalid node type for destructuring: "+e.type)}}function d(e){if(!e)return null;const t=c(fd,e);let n=s.length;for(;n--;){const e=s[n];if(t.name===e.name){t.thedef=e;break}}return t}function p(e,t){e.DEFMETHOD("to_mozilla_ast",function(e){return n=t(this,e),r=this.start,i=this.end,r&&i?(null!=r.pos&&null!=i.endpos&&(n.range=[r.pos,i.endpos]),r.line&&(n.loc={start:{line:r.line,column:r.col},end:i.endline?{line:i.endline,column:i.endcol}:null},r.file&&(n.loc.source=r.file)),n):n;var n,r,i})}tl.from_mozilla_ast=function(e){var t=s;s=[];var n=a(e);return s=t,n};var h=null;function m(e){null===h&&(h=[]),h.push(e);var t=null!=e?e.to_mozilla_ast(h[h.length-2]):null;return h.pop(),0===h.length&&(h=null),t}function g(e,t=!1,n=!1,r=null){if(t)return[!1,m(e)];const i="string"==typeof e?e:e.name;let o;return o=n?{type:"Literal",value:i,raw:JSON.stringify(i)}:""+ +i===i&&+i>=0?{type:"Literal",value:+i,raw:JSON.stringify(+i)}:{type:"Identifier",name:i},["Identifier"===o.type&&o.name===i&&(r instanceof Vf&&r.name===i||r instanceof Af&&r.left.name===i),o]}function v(e){if(e instanceof El)return{type:"RestElement",argument:v(e.expression)};if(e instanceof Vf||e instanceof Sl||e instanceof Af||e instanceof hf)return m(e);throw new Error(e.TYPE)}function y(){for(var e=h.length;e--;)if(h[e]instanceof Sl)return!0;return!1}function _(e){return{type:"BlockStatement",body:e.body.map(m)}}function b(e,t){var n=t.body.map(m);return t.body[0]instanceof ol&&t.body[0].body instanceof gd&&n.unshift(m(new ll(t.body[0]))),{type:e,body:n}}}();const Ud=/[@#]__(PURE|INLINE|NOINLINE)__/;function Vd(e){return("comment2"===e.type||"comment1"===e.type)&&/@preserve|@copyright|@lic|@cc_on|^\**!/i.test(e.value)}class qd{constructor(){this.committed="",this.current=""}append(e){this.current.length>8e3?(this.committed+=this.current+e,this.current=""):this.current+=e}insertAt(e,t){const{committed:n,current:r}=this;t<n.length?this.committed=n.slice(0,t)+e+n.slice(t):t===n.length?this.committed+=e:(t-=n.length,this.committed+=r.slice(0,t)+e,this.current=r.slice(t))}charAt(e){const{committed:t}=this;return e<t.length?t[e]:this.current[e-t.length]}charCodeAt(e){const{committed:t}=this;return e<t.length?t.charCodeAt(e):this.current.charCodeAt(e-t.length)}length(){return this.committed.length+this.current.length}expectDirective(){let e,t=this.length();if(t<=0)return!0;for(;(e=this.charCodeAt(--t))&&(32==e||10==e););return!e||59===e||123===e}hasNLB(){let e=this.length()-1;for(;e>=0;){const t=this.charCodeAt(e--);if(10===t)return!0;if(32!==t)return!1}return!0}toString(){return this.committed+this.current}}function Hd(e){var t=!e;void 0===(e=zu(e,{ascii_only:!1,beautify:!1,braces:!1,comments:"some",ecma:5,ie8:!1,indent_level:4,indent_start:0,inline_script:!0,keep_numbers:!1,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_annotations:!1,quote_keys:!1,quote_style:0,safari10:!1,semicolons:!0,shebang:!0,shorthand:void 0,source_map:null,webkit:!1,width:80,wrap_iife:!1,wrap_func_args:!1,_destroy_ast:!1},!0)).shorthand&&(e.shorthand=e.ecma>5);var n=ju;if(e.comments){let t=e.comments;if("string"==typeof e.comments&&/^\/.*\/[a-zA-Z]*$/.test(e.comments)){var r=e.comments.lastIndexOf("/");t=new RegExp(e.comments.substr(1,r-1),e.comments.substr(r+1))}n=t instanceof RegExp?function(e){return"comment5"!=e.type&&t.test(e.value)}:"function"==typeof t?function(e){return"comment5"!=e.type&&t(this,e)}:"some"===t?Vd:Uu}if(e.preserve_annotations){let e=n;n=function(t){return Ud.test(t.value)||e.apply(this,arguments)}}var i=0,o=0,s=1,a=0,u=new qd;let c=new Set;var l=e.ascii_only?function(t,n=!1,r=!1){return e.ecma>=2015&&!e.safari10&&!r&&(t=t.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){var t=function(e){return $c(e.charCodeAt(0))?65536+(e.charCodeAt(0)-55296<<10)+e.charCodeAt(1)-56320:e.charCodeAt(0)}(e).toString(16);return"\\u{"+t+"}"})),t.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var t=e.charCodeAt(0).toString(16);if(t.length<=2&&!n){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}:function(e){return e.replace(/[\ud800-\udbff][\udc00-\udfff]|([\ud800-\udbff]|[\udc00-\udfff])/g,function(e,t){return t?"\\u"+t.charCodeAt(0).toString(16):e})};function f(t,n){var r=function(t,n){var r=0,i=0;function o(){return"'"+t.replace(/\x27/g,"\\'")+"'"}function s(){return'"'+t.replace(/\x22/g,'\\"')+'"'}if(t=t.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(n,o){switch(n){case'"':return++r,'"';case"'":return++i,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return e.ie8?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(Sc(t,o+1))?"\\x00":"\\0"}return n}),t=l(t),"`"===n)return"`"+t.replace(/`/g,"\\`")+"`";switch(e.quote_style){case 1:return o();case 2:return s();case 3:return"'"==n?o():s();default:return r>i?o():s()}}(t,n);return e.inline_script&&(r=(r=(r=r.replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2")).replace(/\x3c!--/g,"\\x3c!--")).replace(/--\x3e/g,"--\\x3e")),r}var d,p,h=!1,m=!1,g=!1,v=0,y=!1,_=!1,b=-1,w="",x=e.source_map&&[],E=x?function(){x.forEach(function(t){try{let{name:n,token:r}=t;!1!==n&&("name"==r.type||"privatename"===r.type?n=r.value:n instanceof Vf&&(n="string"===r.type?r.value:n.name)),e.source_map.add(t.token.file,t.line,t.col,t.token.line,t.token.col,Lc(n)?n:void 0)}catch(e){}}),x=[]}:Bu,k=e.max_line_len?function(){if(o>e.max_line_len&&v){u.insertAt("\n",v);const e=u.length()-v-1;if(x){var t=e-o;x.forEach(function(e){e.line++,e.col+=t})}s++,a++,o=e}v&&(v=0,E())}:Bu,A=Qu("( [ + * / - , . `");function D(t){var n=Sc(t=String(t),0);y&&n&&(y=!1,"\n"!==n&&(D("\n"),O())),_&&n&&(_=!1,/[\s;})]/.test(n)||C()),b=-1;var r=w.charAt(w.length-1);g&&(g=!1,(":"!==r||"}"!==n)&&(n&&";}".includes(n)||";"===r)||(e.semicolons||A.has(n)?(u.append(";"),o++,a++):(k(),o>0&&(u.append("\n"),a++,s++,o=0),/^\s+$/.test(t)&&(g=!0)),e.beautify||(m=!1))),m&&((Rc(r)&&(Rc(n)||"\\"==n)||"/"==n&&n==r||("+"==n||"-"==n)&&n==w)&&(u.append(" "),o++,a++),m=!1),d&&(x.push({token:d,name:p,line:s,col:o}),d=!1,v||E()),u.append(t),h="("==t[t.length-1],a+=t.length;var i=t.split(/\r?\n/),c=i.length-1;s+=c,o+=i[0].length,c>0&&(k(),o=i[c].length),w=t}var C=e.beautify?function(){D(" ")}:function(){m=!0},O=e.beautify?function(t){var n;e.beautify&&D((n=t?.5:0," ".repeat(e.indent_start+i-n*e.indent_level)))}:Bu,S=e.beautify?function(e,t){!0===e&&(e=F());var n=i;i=e;var r=t();return i=n,r}:function(e,t){return t()},$=e.beautify?function(){if(b<0)return D("\n");"\n"!=u.charAt(b)&&(u.insertAt("\n",b),a++,s++),b++}:e.max_line_len?function(){k(),v=u.length()}:Bu,T=e.beautify?function(){D(";")}:function(){g=!0};function P(){g=!1,D(";")}function F(){return i+e.indent_level}var R=x?function(e,t){d=e,p=t}:Bu;function N(){return v&&k(),u.toString()}function L(t){return e.preserve_annotations||(t=t.replace(Ud," ")),/^\s*$/.test(t)?"":t.replace(/(<\s*\/\s*)(script)/i,"<\\/$2")}const I=e._destroy_ast?function(e){e.body.length=0,e.argnames.length=0}:Bu;var M=[];return{get:N,toString:N,indent:O,in_directive:!1,use_asm:null,active_scope:null,indentation:function(){return i},current_width:function(){return o-i},should_break:function(){return e.width&&this.current_width()>=e.width},has_parens:function(){return h},newline:$,print:D,star:function(){D("*")},space:C,comma:function(){D(","),C()},colon:function(){D(":"),C()},last:function(){return w},semicolon:T,force_semicolon:P,to_utf8:l,print_name:function(e){D(function(e){return e=e.toString(),l(e,!0)}(e))},print_string:function(e,t,n){var r=f(e,t);!0!==n||r.includes("\\")||(u.expectDirective()||P(),P()),D(r)},print_template_string_chars:function(e){var t=f(e,"`").replace(/\${/g,"\\${");return D(t.substr(1,t.length-2))},encode_string:f,next_indent:F,with_indent:S,with_block:function(e){var t;return D("{"),$(),S(F(),function(){t=e()}),O(),D("}"),t},with_parens:function(e){D("(");var t=e();return D(")"),t},with_square:function(e){D("[");var t=e();return D("]"),t},add_mapping:R,option:function(t){return e[t]},gc_scope:I,printed_comments:c,prepend_comments:t?Bu:function(t){var r=t.start;if(!r)return;var i=this.printed_comments;const o=t instanceof Rl&&t.value||(t instanceof Bl||t instanceof jl)&&t.expression;if(r.comments_before&&i.has(r.comments_before)){if(!o)return;r.comments_before=[]}var s=r.comments_before;if(s||(s=r.comments_before=[]),i.add(s),o){var c=new Pd(function(e){var t=c.parent();if(!(t instanceof Rl||t instanceof Bl||t instanceof jl||t instanceof xf&&t.left===e||"Call"==t.TYPE&&t.expression===e||t instanceof Ef&&t.condition===e||t instanceof mf&&t.expression===e||t instanceof pf&&t.expressions[0]===e||t instanceof vf&&t.expression===e||t instanceof wf))return!0;if(e.start){var n=e.start.comments_before;n&&!i.has(n)&&(i.add(n),s=s.concat(n))}});c.push(t),o.walk(c)}if(0==a){s.length>0&&e.shebang&&"comment5"===s[0].type&&!i.has(s[0])&&(D("#!"+s.shift().value+"\n"),O());var l=e.preamble;l&&D(l.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"))}if(0!=(s=s.filter(n,t).filter(e=>!i.has(e))).length){var f=u.hasNLB();s.forEach(function(e,t){if(i.add(e),f||(e.nlb?(D("\n"),O(),f=!0):t>0&&C()),/comment[134]/.test(e.type))(n=L(e.value))&&(D("//"+n+"\n"),O()),f=!0;else if("comment2"==e.type){var n;(n=L(e.value))&&D("/*"+n+"*/"),f=!1}}),f||(r.nlb?(D("\n"),O()):C())}},append_comments:t||n===ju?Bu:function(e,t){var r=e.end;if(r){var i=this.printed_comments,o=r[t?"comments_before":"comments_after"];if(o&&!i.has(o)&&(e instanceof nl||o.every(e=>!/comment[134]/.test(e.type)))){i.add(o);var s=u.length();o.filter(n,e).forEach(function(e,n){if(!i.has(e))if(i.add(e),_=!1,y?(D("\n"),O(),y=!1):e.nlb&&(n>0||!u.hasNLB())?(D("\n"),O()):(n>0||!t)&&C(),/comment[134]/.test(e.type)){const t=L(e.value);t&&D("//"+t),y=!0}else if("comment2"==e.type){const t=L(e.value);t&&D("/*"+t+"*/"),_=!0}}),u.length()>s&&(b=s)}}},line:function(){return s},col:function(){return o},pos:function(){return a},push_node:function(e){M.push(e)},pop_node:function(){return M.pop()},parent:function(e){return M[M.length-2-(e||0)]}}}!function(){function e(e,t){e.DEFMETHOD("_codegen",t)}function t(e,n){Array.isArray(e)?e.forEach(function(e){t(e,n)}):e.DEFMETHOD("needs_parens",n)}function n(e,t,n,r){var i=e.length-1;n.in_directive=r,e.forEach(function(e,r){!0!==n.in_directive||e instanceof il||e instanceof ll||e instanceof ol&&e.body instanceof gd||(n.in_directive=!1),e instanceof ll||(n.indent(),e.print(n),r==i&&t||(n.newline(),t&&n.newline())),!0===n.in_directive&&e instanceof ol&&e.body instanceof gd&&(n.in_directive=!1)}),n.in_directive=!1}function r(e,t){t.print("{"),t.with_indent(t.next_indent(),function(){t.append_comments(e,!0)}),t.add_mapping(e.end),t.print("}")}function i(e,t,i){e.body.length>0?t.with_block(function(){n(e.body,!1,t,i),t.add_mapping(e.end)}):r(e,t)}function o(e,t,n){var r=!1;n&&(r=Sd(e,e=>e instanceof wl&&!(e instanceof Cl)||(e instanceof xf&&"in"==e.operator||e instanceof zf?Td:void 0))),e.print(t,r)}function s(e,t,n){return n.option("quote_keys")?(n.print_string(e),!1):""+ +e==e&&e>=0?n.option("keep_numbers")?(n.print(e),!1):(n.print(f(e)),!1):(dc.has(e)?n.option("ie8"):n.option("ecma")<2015||n.option("safari10")?!Lc(e):!Ic(e,!0))||t&&n.option("keep_quoted_props")?(n.print_string(e,t),!1):(n.print_name(e),!0)}tl.DEFMETHOD("print",function(e,t){var n=this,r=n._codegen;function i(){e.prepend_comments(n),n.add_source_map(e),r(n,e),e.append_comments(n)}n instanceof wl?e.active_scope=n:!e.use_asm&&n instanceof il&&"use asm"==n.value&&(e.use_asm=e.active_scope),e.push_node(n),t||n.needs_parens(e)?e.with_parens(i):i(),e.pop_node(),n===e.use_asm&&(e.use_asm=null)}),tl.DEFMETHOD("_print",tl.prototype.print),tl.DEFMETHOD("print_to_string",function(e){var t=Hd(e);return this.print(t),t.get()}),t(tl,ju),t(Dl,function(e){return!(e.has_parens()||!Bd(e))||(!!(e.option("webkit")&&(t=e.parent())instanceof hf&&t.expression===this)||(!!(e.option("wrap_iife")&&(t=e.parent())instanceof ff&&t.expression===this)||!!(e.option("wrap_func_args")&&(t=e.parent())instanceof ff&&t.args.includes(this))));var t}),t(Cl,function(e){var t=e.parent();return!!(e.option("wrap_func_args")&&t instanceof ff&&t.args.includes(this))||t instanceof hf&&t.expression===this||t instanceof Ef&&t.condition===this}),t(Cf,function(e){return!e.has_parens()&&Bd(e)}),t(Uf,Bd),t(_f,function(e){var t=e.parent();return t instanceof hf&&t.expression===this||t instanceof ff&&t.expression===this||t instanceof xf&&"**"===t.operator&&this instanceof bf&&t.left===this&&"++"!==this.operator&&"--"!==this.operator}),t(Bl,function(e){var t=e.parent();return t instanceof hf&&t.expression===this||t instanceof ff&&t.expression===this||t instanceof xf&&"**"===t.operator&&t.left===this||e.option("safari10")&&t instanceof bf}),t(pf,function(e){var t=e.parent();return t instanceof ff||t instanceof _f||t instanceof xf||t instanceof rf||t instanceof hf||t instanceof Df||t instanceof Of||t instanceof Ef||t instanceof Cl||t instanceof Af||t instanceof El||t instanceof _l&&this===t.object||t instanceof jl||t instanceof lf}),t(xf,function(e){var t=e.parent();if(t instanceof ff&&t.expression===this)return!0;if(t instanceof _f)return!0;if(t instanceof hf&&t.expression===this)return!0;if(t instanceof xf){const e=t.operator,n=this.operator;if("??"===n&&("||"===e||"&&"===e))return!0;if("??"===e&&("||"===n||"&&"===n))return!0;const r=Wc[e],i=Wc[n];if(r>i||r==i&&(this===t.right||"**"==e))return!0}if(t instanceof zf){const e=this.operator,n=Wc.in,r=Wc[e];if(n>r||n==r&&this===t.value)return!0}}),t(zf,function(e){var t=e.parent();if(t instanceof ff&&t.expression===this)return!0;if(t instanceof _f)return!0;if(t instanceof hf&&t.expression===this)return!0;if(t instanceof xf){const e=t.operator,n=Wc[e],r=Wc.in;if(n>r||n==r&&(this===t.right||"**"==e))return!0}return t instanceof zf&&this===t.value||void 0}),t(jl,function(e){var t=e.parent();return t instanceof xf&&"="!==t.operator||t instanceof ff&&t.expression===this||t instanceof Ef&&t.condition===this||t instanceof _f||t instanceof hf&&t.expression===this||void 0}),t(yf,function(e){var t=e.parent();return(t instanceof ff||t instanceof hf)&&t.expression===this}),t(hf,function(e){var t=e.parent();if(t instanceof df&&t.expression===this)return Sd(this,e=>e instanceof wl||(e instanceof ff?Td:void 0))}),t(ff,function(e){var t,n=e.parent();return!!(n instanceof df&&n.expression===this||n instanceof lf&&n.is_default&&this.expression instanceof Dl)||this.expression instanceof Dl&&n instanceof hf&&n.expression===this&&(t=e.parent(1))instanceof kf&&t.left===n}),t(df,function(e){var t=e.parent();if(0===this.args.length&&(t instanceof hf||t instanceof ff&&t.expression===this||t instanceof $l&&t.prefix===this))return!0}),t(vd,function(e){var t=e.parent();if(t instanceof hf&&t.expression===this){var n=this.getValue();if(n<0||/^0/.test(f(n)))return!0}}),t(yd,function(e){var t=e.parent();if(t instanceof hf&&t.expression===this&&this.getValue().startsWith("-"))return!0}),t([kf,Ef],function(e){var t=e.parent();return t instanceof _f||t instanceof xf&&!(t instanceof kf)||t instanceof ff&&t.expression===this||t instanceof Ef&&t.condition===this||t instanceof hf&&t.expression===this||this instanceof kf&&this.left instanceof Sl&&!1===this.left.is_array||void 0}),e(il,function(e,t){t.print_string(e.value,e.quote),t.semicolon()}),e(El,function(e,t){t.print("..."),e.expression.print(t)}),e(Sl,function(e,t){t.print(e.is_array?"[":"{");var n=e.names.length;e.names.forEach(function(e,r){r>0&&t.comma(),e.print(t),r==n-1&&e instanceof kd&&t.comma()}),t.print(e.is_array?"]":"}")}),e(rl,function(e,t){t.print("debugger"),t.semicolon()}),fl.DEFMETHOD("_do_print_body",function(e){l(this.body,e)}),e(nl,function(e,t){e.body.print(t),t.semicolon()}),e(xl,function(e,t){n(e.body,!0,t,!0),t.print("")}),e(dl,function(e,t){e.label.print(t),t.colon(),e.body.print(t)}),e(ol,function(e,t){e.body.print(t),t.semicolon()}),e(cl,function(e,t){i(e,t)}),e(ll,function(e,t){t.semicolon()}),e(ml,function(e,t){t.print("do"),t.space(),d(e.body,t),t.space(),t.print("while"),t.space(),t.with_parens(function(){e.condition.print(t)}),t.semicolon()}),e(gl,function(e,t){t.print("while"),t.space(),t.with_parens(function(){e.condition.print(t)}),t.space(),e._do_print_body(t)}),e(vl,function(e,t){t.print("for"),t.space(),t.with_parens(function(){e.init?(e.init instanceof Ql?e.init.print(t):o(e.init,t,!0),t.print(";"),t.space()):t.print(";"),e.condition?(e.condition.print(t),t.print(";"),t.space()):t.print(";"),e.step&&e.step.print(t)}),t.space(),e._do_print_body(t)}),e(yl,function(e,t){t.print("for"),e.await&&(t.space(),t.print("await")),t.space(),t.with_parens(function(){e.init.print(t),t.space(),t.print(e instanceof _l?"of":"in"),t.space(),e.object.print(t)}),t.space(),e._do_print_body(t)}),e(bl,function(e,t){t.print("with"),t.space(),t.with_parens(function(){e.expression.print(t)}),t.space(),e._do_print_body(t)}),kl.DEFMETHOD("_do_print",function(e,t){var n=this;t||(n.async&&(e.print("async"),e.space()),e.print("function"),n.is_generator&&e.star(),n.name&&e.space()),n.name instanceof Vf?n.name.print(e):t&&n.name instanceof tl&&e.with_square(function(){n.name.print(e)}),e.with_parens(function(){n.argnames.forEach(function(t,n){n&&e.comma(),t.print(e)})}),e.space(),i(n,e,!0)}),e(kl,function(e,t){e._do_print(t),t.gc_scope(e)}),e($l,function(e,t){var n=e.prefix,r=n instanceof kl||n instanceof xf||n instanceof Ef||n instanceof pf||n instanceof _f||n instanceof mf&&n.expression instanceof Cf;r&&t.print("("),e.prefix.print(t),r&&t.print(")"),e.template_string.print(t)}),e(Tl,function(e,t){var n=t.parent()instanceof $l;t.print("`");for(var r=0;r<e.segments.length;r++)e.segments[r]instanceof Pl?n?t.print(e.segments[r].raw):t.print_template_string_chars(e.segments[r].value):(t.print("${"),e.segments[r].print(t),t.print("}"));t.print("`")}),e(Pl,function(e,t){t.print_template_string_chars(e.value)}),Cl.DEFMETHOD("_do_print",function(e){var t=this,n=e.parent(),r=n instanceof xf&&!(n instanceof kf)&&!(n instanceof Af)||n instanceof _f||n instanceof ff&&t===n.expression;r&&e.print("("),t.async&&(e.print("async"),e.space()),1===t.argnames.length&&t.argnames[0]instanceof Vf?t.argnames[0].print(e):e.with_parens(function(){t.argnames.forEach(function(t,n){n&&e.comma(),t.print(e)})}),e.space(),e.print("=>"),e.space();const o=t.body[0];if(1===t.body.length&&o instanceof Nl){const t=o.value;t?jd(t)?(e.print("("),t.print(e),e.print(")")):t.print(e):e.print("{}")}else i(t,e);r&&e.print(")"),e.gc_scope(t)}),Rl.DEFMETHOD("_do_print",function(e,t){if(e.print(t),this.value){e.space();const t=this.value.start.comments_before;t&&t.length&&!e.printed_comments.has(t)?(e.print("("),this.value.print(e),e.print(")")):this.value.print(e)}e.semicolon()}),e(Nl,function(e,t){e._do_print(t,"return")}),e(Ll,function(e,t){e._do_print(t,"throw")}),e(jl,function(e,t){var n=e.is_star?"*":"";t.print("yield"+n),e.expression&&(t.space(),e.expression.print(t))}),e(Bl,function(e,t){t.print("await"),t.space();var n=e.expression,r=!(n instanceof ff||n instanceof ud||n instanceof hf||n instanceof _f||n instanceof md||n instanceof Bl||n instanceof Cf);r&&t.print("("),e.expression.print(t),r&&t.print(")")}),Il.DEFMETHOD("_do_print",function(e,t){e.print(t),this.label&&(e.space(),this.label.print(e)),e.semicolon()}),e(Ml,function(e,t){e._do_print(t,"break")}),e(zl,function(e,t){e._do_print(t,"continue")}),e(Ul,function(e,t){t.print("if"),t.space(),t.with_parens(function(){e.condition.print(t)}),t.space(),e.alternative?(function(e,t){var n=e.body;if(t.option("braces")||t.option("ie8")&&n instanceof ml)return d(n,t);if(!n)return t.force_semicolon();for(;;)if(n instanceof Ul){if(!n.alternative)return void d(e.body,t);n=n.alternative}else{if(!(n instanceof fl))break;n=n.body}l(e.body,t)}(e,t),t.space(),t.print("else"),t.space(),e.alternative instanceof Ul?e.alternative.print(t):l(e.alternative,t)):e._do_print_body(t)}),e(Vl,function(e,t){t.print("switch"),t.space(),t.with_parens(function(){e.expression.print(t)}),t.space();var n=e.body.length-1;n<0?r(e,t):t.with_block(function(){e.body.forEach(function(e,r){t.indent(!0),e.print(t),r<n&&e.body.length>0&&t.newline()})})}),ql.DEFMETHOD("_do_print_body",function(e){e.newline(),this.body.forEach(function(t){e.indent(),t.print(e),e.newline()})}),e(Hl,function(e,t){t.print("default:"),e._do_print_body(t)}),e(Kl,function(e,t){t.print("case"),t.space(),e.expression.print(t),t.print(":"),e._do_print_body(t)}),e(Zl,function(e,t){t.print("try"),t.space(),e.body.print(t),e.bcatch&&(t.space(),e.bcatch.print(t)),e.bfinally&&(t.space(),e.bfinally.print(t))}),e(Wl,function(e,t){i(e,t)}),e(Gl,function(e,t){t.print("catch"),e.argname&&(t.space(),t.with_parens(function(){e.argname.print(t)})),t.space(),i(e,t)}),e(Yl,function(e,t){t.print("finally"),t.space(),i(e,t)}),Ql.DEFMETHOD("_do_print",function(e,t){e.print(t),e.space(),this.definitions.forEach(function(t,n){n&&e.comma(),t.print(e)});var n=e.parent();(!(n instanceof vl||n instanceof yl)||n&&n.init!==this)&&e.semicolon()}),e(ef,function(e,t){e._do_print(t,"let")}),e(Xl,function(e,t){e._do_print(t,"var")}),e(tf,function(e,t){e._do_print(t,"const")}),e(nf,function(e,t){e._do_print(t,e.await?"await using":"using")}),e(uf,function(e,t){t.print("import"),t.space(),e.imported_name&&e.imported_name.print(t),e.imported_name&&e.imported_names&&(t.print(","),t.space()),e.imported_names&&(1!==e.imported_names.length||"*"!==e.imported_names[0].foreign_name.name||e.imported_names[0].foreign_name.quote?(t.print("{"),e.imported_names.forEach(function(n,r){t.space(),n.print(t),r<e.imported_names.length-1&&t.print(",")}),t.space(),t.print("}")):e.imported_names[0].print(t)),(e.imported_name||e.imported_names)&&(t.space(),t.print("from"),t.space()),e.module_name.print(t),e.attributes&&(t.print("with"),e.attributes.print(t)),t.semicolon()}),e(cf,function(e,t){t.print("import.meta")}),e(af,function(e,t){var n=t.parent()instanceof uf,r=e.name.definition(),i=e.foreign_name,o=(r&&r.mangled_name||e.name.name)!==i.name;o||"*"!==i.name||!!i.quote==!!e.name.quote||(o=!0);var s=!i.quote;o?(n?s?t.print(i.name):t.print_string(i.name,i.quote):e.name.quote?t.print_string(e.name.name,e.name.quote):e.name.print(t),t.space(),t.print("as"),t.space(),n?e.name.print(t):s?t.print(i.name):t.print_string(i.name,i.quote)):e.name.quote?t.print_string(e.name.name,e.name.quote):e.name.print(t)}),e(lf,function(e,t){if(t.print("export"),t.space(),e.is_default&&(t.print("default"),t.space()),e.exported_names)1!==e.exported_names.length||"*"!==e.exported_names[0].name.name||e.exported_names[0].name.quote?(t.print("{"),e.exported_names.forEach(function(n,r){t.space(),n.print(t),r<e.exported_names.length-1&&t.print(",")}),t.space(),t.print("}")):e.exported_names[0].print(t);else if(e.exported_value)e.exported_value.print(t);else if(e.exported_definition&&(e.exported_definition.print(t),e.exported_definition instanceof Jl))return;e.module_name&&(t.space(),t.print("from"),t.space(),e.module_name.print(t)),e.attributes&&(t.print("with"),e.attributes.print(t)),(e.exported_value&&!(e.exported_value instanceof Ol||e.exported_value instanceof Dl||e.exported_value instanceof Lf)||e.module_name||e.exported_names)&&t.semicolon()}),e(rf,function(e,t){if(e.name.print(t),e.value){t.space(),t.print("="),t.space();var n=t.parent(1),r=n instanceof vl||n instanceof yl;o(e.value,t,r)}}),e(ff,function(e,t){e.expression.print(t),e instanceof df&&0===e.args.length||((e.expression instanceof ff||e.expression instanceof kl)&&t.add_mapping(e.start),e.optional&&t.print("?."),t.with_parens(function(){e.args.forEach(function(e,n){n&&t.comma(),e.print(t)})}))}),e(df,function(e,t){t.print("new"),t.space(),ff.prototype._codegen(e,t)}),pf.DEFMETHOD("_do_print",function(e){this.expressions.forEach(function(t,n){n>0&&(e.comma(),e.should_break()&&(e.newline(),e.indent())),t.print(e)})}),e(pf,function(e,t){e._do_print(t)}),e(mf,function(e,t){var n=e.expression;n.print(t);var r=e.property,i=dc.has(r)?t.option("ie8"):!Ic(r,t.option("ecma")>=2015&&!t.option("safari10"));e.optional&&t.print("?."),i?(t.print("["),t.add_mapping(e.end),t.print_string(r),t.print("]")):(n instanceof vd&&n.getValue()>=0&&(/[xa-f.)]/i.test(t.last())||t.print(".")),e.optional||t.print("."),t.add_mapping(e.end),t.print_name(r))}),e(gf,function(e,t){e.expression.print(t);var n=e.property;e.optional&&t.print("?"),t.print(".#"),t.add_mapping(e.end),t.print_name(n)}),e(vf,function(e,t){e.expression.print(t),e.optional&&t.print("?."),t.print("["),e.property.print(t),t.print("]")}),e(yf,function(e,t){e.expression.print(t)}),e(bf,function(e,t){var n=e.operator;"--"===n&&t.last().endsWith("!")&&t.print(" "),t.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&e.expression instanceof bf&&/^[+-]/.test(e.expression.operator))&&t.space(),e.expression.print(t)}),e(wf,function(e,t){e.expression.print(t),t.print(e.operator)}),e(xf,function(e,t){var n=e.operator;e.left.print(t),">"==n[0]&&t.last().endsWith("--")?t.print(" "):t.space(),t.print(n),t.space(),e.right.print(t)}),e(Ef,function(e,t){e.condition.print(t),t.space(),t.print("?"),t.space(),e.consequent.print(t),t.space(),t.colon(),e.alternative.print(t)}),e(Df,function(e,t){t.with_square(function(){var n=e.elements,r=n.length;r>0&&t.space(),n.forEach(function(e,n){n&&t.comma(),e.print(t),n===r-1&&e instanceof kd&&t.comma()}),r>0&&t.space()})}),e(Cf,function(e,t){e.properties.length>0?t.with_block(function(){e.properties.forEach(function(e,n){n&&(t.print(","),t.newline()),t.indent(),e.print(t)}),t.newline()}):r(e,t)}),e(Lf,function(e,t){if(t.print("class"),t.space(),e.name&&(e.name.print(t),t.space()),e.extends){var n=!(e.extends instanceof ud||e.extends instanceof hf||e.extends instanceof Uf||e.extends instanceof Dl);t.print("extends"),n?t.print("("):t.space(),e.extends.print(t),n?t.print(")"):t.space()}e.properties.length>0?t.with_block(function(){e.properties.forEach(function(e,n){n&&t.newline(),t.indent(),e.print(t)}),t.newline()}):t.print("{}")}),e(qf,function(e,t){t.print("new.target")}),e(Sf,function(e,t){function n(e){var t=e.definition();return t?t.mangled_name||t.name:e.name}const r=t.option("shorthand")&&!(e.key instanceof tl);r&&e.value instanceof Vf&&n(e.value)===e.key&&!dc.has(e.key)?s(e.key,e.quote,t)||(t.colon(),e.value.print(t)):r&&e.value instanceof Af&&e.value.left instanceof Vf&&n(e.value.left)===e.key?(s(e.key,e.quote,t)||(t.colon(),e.value.left.print(t)),t.space(),t.print("="),t.space(),e.value.right.print(t)):(e.key instanceof tl?t.with_square(function(){e.key.print(t)}):s(e.key,e.quote,t),t.colon(),e.value.print(t))}),e(Mf,(e,t)=>{e.static&&(t.print("static"),t.space()),t.print("#"),s(e.key.name,void 0,t),e.value&&(t.print("="),e.value.print(t)),t.semicolon()}),e(If,(e,t)=>{e.static&&(t.print("static"),t.space()),e.key instanceof ed?s(e.key.name,e.quote,t):(t.print("["),e.key.print(t),t.print("]")),e.value&&(t.print("="),e.value.print(t)),t.semicolon()}),Of.DEFMETHOD("_print_getter_setter",function(e,t,n){var r=this;r.static&&(n.print("static"),n.space()),e&&(n.print(e),n.space()),r.key instanceof Xf?(t&&n.print("#"),s(r.key.name,r.quote,n),r.key.add_source_map(n)):n.with_square(function(){r.key.print(n)}),r.value._do_print(n,!0)}),e(Pf,function(e,t){e._print_getter_setter("set",!1,t)}),e(Ff,function(e,t){e._print_getter_setter("get",!1,t)}),e($f,function(e,t){e._print_getter_setter("set",!0,t)}),e(Tf,function(e,t){e._print_getter_setter("get",!0,t)}),e(Rf,function(e,t){var n;e.value.is_generator&&e.value.async?n="async*":e.value.is_generator?n="*":e.value.async&&(n="async"),e._print_getter_setter(n,!1,t)}),e(Nf,function(e,t){var n;e.value.is_generator&&e.value.async?n="async*":e.value.is_generator?n="*":e.value.async&&(n="async"),e._print_getter_setter(n,!0,t)}),e(zf,function(e,t){e.key.print(t),t.space(),t.print("in"),t.space(),e.value.print(t)}),e(dd,function(e,t){t.print("#"+e.name)}),e(jf,function(e,t){t.print("static"),t.space(),i(e,t)}),Vf.DEFMETHOD("_do_print",function(e){var t=this.definition();e.print_name(t?t.mangled_name||t.name:this.name)}),e(Vf,function(e,t){e._do_print(t)}),e(kd,Bu),e(pd,function(e,t){t.print("this")}),e(hd,function(e,t){t.print("super")}),e(md,function(e,t){t.print(e.getValue())}),e(gd,function(e,t){t.print_string(e.getValue(),e.quote,t.in_directive)}),e(vd,function(e,t){(t.option("keep_numbers")||t.use_asm)&&e.raw?t.print(e.raw):t.print(f(e.getValue()))}),e(yd,function(e,t){t.option("keep_numbers")&&e.raw?t.print(e.raw):t.print(e.getValue()+"n")});const a=/(<\s*\/\s*script)/i,u=/^\s*script/i,c=(e,t)=>t.replace("/","\\/");function l(e,t){t.option("braces")?d(e,t):!e||e instanceof ll?t.force_semicolon():e instanceof Ql&&!(e instanceof Xl)||e instanceof Lf?d(e,t):e.print(t)}function f(e){var t,n,r,i=e.toString(10).replace(/^0\./,".").replace("e+","e"),o=[i];return Math.floor(e)===e&&(e<0?o.push("-0x"+(-e).toString(16).toLowerCase()):o.push("0x"+e.toString(16).toLowerCase())),(t=/^\.0+/.exec(i))?(n=t[0].length,r=i.slice(n),o.push(r+"e-"+(r.length+n-1))):(t=/0+$/.exec(i))?(n=t[0].length,o.push(i.slice(0,-n)+"e"+n)):(t=/^(\d)\.(\d+)e(-?\d+)$/.exec(i))&&o.push(t[1]+t[2]+"e"+(t[3]-t[2].length)),function(e){for(var t=e[0],n=t.length,r=1;r<e.length;++r)e[r].length<n&&(n=(t=e[r]).length);return t}(o)}function d(e,t){!e||e instanceof ll?t.print("{}"):e instanceof cl?e.print(t):t.with_block(function(){t.indent(),e.print(t),t.newline()})}function p(e,t){e.forEach(function(e){e.DEFMETHOD("add_source_map",t)})}e(_d,function(e,t){let{source:n,flags:r}=e.getValue();n=nc(n),r=r?function(e){const t=new Set(e.split(""));let n="";for(const e of"dgimsuyv")t.has(e)&&(n+=e,t.delete(e));return t.size&&t.forEach(e=>{n+=e}),n}(r):"",n=n.replace(a,c),u.test(n)&&t.last().endsWith("<")&&t.print(" "),t.print(t.to_utf8(`/${n}/${r}`,!1,!0));const i=t.parent();i instanceof xf&&/^\w/.test(i.operator)&&i.left===e&&t.print(" ")}),p([tl,dl,xl],Bu),p([Df,cl,Gl,Lf,md,rl,Ql,il,Yl,Fl,kl,df,Cf,fl,Vf,Vl,ql,Tl,Pl,Zl],function(e){e.add_mapping(this.start)}),p([Ff,Pf,Tf,$f,Rf,Nf],function(e){e.add_mapping(this.start,!1)}),p([Xf,dd],function(e){const t=this.end&&this.end.type;"name"===t||"privatename"===t?e.add_mapping(this.end,this.name):e.add_mapping(this.end)}),p([Of],function(e){e.add_mapping(this.start,this.key)})}();const Kd=(e,t)=>null===e&&null===t||e.TYPE===t.TYPE&&e.shallow_cmp(t),Zd=()=>!0;tl.prototype.shallow_cmp=function(){throw new Error("did not find a shallow_cmp function for "+this.constructor.name)},rl.prototype.shallow_cmp=Zd,il.prototype.shallow_cmp=function(e){return this.value===e.value},ol.prototype.shallow_cmp=Zd,ul.prototype.shallow_cmp=Zd,ll.prototype.shallow_cmp=Zd,dl.prototype.shallow_cmp=function(e){return this.label.name===e.label.name},ml.prototype.shallow_cmp=Zd,gl.prototype.shallow_cmp=Zd,vl.prototype.shallow_cmp=function(e){return(null==this.init?null==e.init:this.init===e.init)&&(null==this.condition?null==e.condition:this.condition===e.condition)&&(null==this.step?null==e.step:this.step===e.step)},yl.prototype.shallow_cmp=Zd,_l.prototype.shallow_cmp=Zd,bl.prototype.shallow_cmp=Zd,xl.prototype.shallow_cmp=Zd,El.prototype.shallow_cmp=Zd,kl.prototype.shallow_cmp=function(e){return this.is_generator===e.is_generator&&this.async===e.async},Sl.prototype.shallow_cmp=function(e){return this.is_array===e.is_array},$l.prototype.shallow_cmp=Zd,Tl.prototype.shallow_cmp=Zd,Pl.prototype.shallow_cmp=function(e){return this.value===e.value},Fl.prototype.shallow_cmp=Zd,Il.prototype.shallow_cmp=Zd,Bl.prototype.shallow_cmp=Zd,jl.prototype.shallow_cmp=function(e){return this.is_star===e.is_star},Ul.prototype.shallow_cmp=function(e){return null==this.alternative?null==e.alternative:this.alternative===e.alternative},Vl.prototype.shallow_cmp=Zd,ql.prototype.shallow_cmp=Zd,Zl.prototype.shallow_cmp=function(e){return this.body===e.body&&(null==this.bcatch?null==e.bcatch:this.bcatch===e.bcatch)&&(null==this.bfinally?null==e.bfinally:this.bfinally===e.bfinally)},Gl.prototype.shallow_cmp=function(e){return null==this.argname?null==e.argname:this.argname===e.argname},Yl.prototype.shallow_cmp=Zd,Ql.prototype.shallow_cmp=Zd,rf.prototype.shallow_cmp=function(e){return null==this.value?null==e.value:this.value===e.value},af.prototype.shallow_cmp=Zd,uf.prototype.shallow_cmp=function(e){return(null==this.imported_name?null==e.imported_name:this.imported_name===e.imported_name)&&(null==this.imported_names?null==e.imported_names:this.imported_names===e.imported_names)&&(null==this.attributes?null==e.attributes:this.attributes===e.attributes)},cf.prototype.shallow_cmp=Zd,lf.prototype.shallow_cmp=function(e){return(null==this.exported_definition?null==e.exported_definition:this.exported_definition===e.exported_definition)&&(null==this.exported_value?null==e.exported_value:this.exported_value===e.exported_value)&&(null==this.exported_names?null==e.exported_names:this.exported_names===e.exported_names)&&(null==this.attributes?null==e.attributes:this.attributes===e.attributes)&&this.module_name===e.module_name&&this.is_default===e.is_default},ff.prototype.shallow_cmp=Zd,pf.prototype.shallow_cmp=Zd,hf.prototype.shallow_cmp=Zd,yf.prototype.shallow_cmp=Zd,mf.prototype.shallow_cmp=function(e){return this.property===e.property},gf.prototype.shallow_cmp=function(e){return this.property===e.property},_f.prototype.shallow_cmp=function(e){return this.operator===e.operator},xf.prototype.shallow_cmp=function(e){return this.operator===e.operator},zf.prototype.shallow_cmp=Zd,Ef.prototype.shallow_cmp=Zd,Df.prototype.shallow_cmp=Zd,Cf.prototype.shallow_cmp=Zd,Of.prototype.shallow_cmp=Zd,Sf.prototype.shallow_cmp=function(e){return this.key===e.key&&this.quote===e.quote},Pf.prototype.shallow_cmp=function(e){return this.static===e.static},Ff.prototype.shallow_cmp=function(e){return this.static===e.static},Rf.prototype.shallow_cmp=function(e){return this.static===e.static},Nf.prototype.shallow_cmp=function(e){return this.static===e.static},Lf.prototype.shallow_cmp=function(e){return(null==this.name?null==e.name:this.name===e.name)&&(null==this.extends?null==e.extends:this.extends===e.extends)},If.prototype.shallow_cmp=function(e){return this.static===e.static&&("string"!=typeof this.key||this.key===e.key)},Mf.prototype.shallow_cmp=function(e){return this.static===e.static},Vf.prototype.shallow_cmp=function(e){return this.name===e.name},qf.prototype.shallow_cmp=Zd,pd.prototype.shallow_cmp=Zd,hd.prototype.shallow_cmp=Zd,gd.prototype.shallow_cmp=function(e){return this.value===e.value},vd.prototype.shallow_cmp=function(e){return this.value===e.value},yd.prototype.shallow_cmp=function(e){return this.value===e.value},_d.prototype.shallow_cmp=function(e){return this.value.flags===e.value.flags&&this.value.source===e.value.source},bd.prototype.shallow_cmp=Zd;let Wd=null,Gd=null,Yd=null;class Qd{constructor(e,t,n){this.name=t.name,this.orig=[t],this.init=n,this.eliminated=0,this.assignments=0,this.scope=e,this.replaced=0,this.global=!1,this.export=0,this.mangled_name=null,this.undeclared=!1,this.id=Qd.next_id++,this.chained=!1,this.direct_access=!1,this.escaped=0,this.recursive_refs=0,this.references=[],this.should_replace=void 0,this.single_use=!1,this.fixed=!1,Object.seal(this)}fixed_value(){return!this.fixed||this.fixed instanceof tl?this.fixed:this.fixed()}unmangleable(e){return e||(e={}),!!(Wd&&Wd.has(this.id)&&ec(e.keep_fnames,this.orig[0].name))||this.global&&!e.toplevel||1&this.export||this.undeclared||!e.eval&&this.scope.pinned()||(this.orig[0]instanceof td||this.orig[0]instanceof Jf)&&ec(e.keep_fnames,this.orig[0].name)||this.orig[0]instanceof Xf||(this.orig[0]instanceof rd||this.orig[0]instanceof nd)&&ec(e.keep_classnames,this.orig[0].name)}mangle(e){const t=e.cache&&e.cache.props;if(this.global&&t&&t.has(this.name))this.mangled_name=t.get(this.name);else if(!this.mangled_name&&!this.unmangleable(e)){var n=this.scope,r=this.orig[0];e.ie8&&r instanceof td&&(n=n.parent_scope);const i=Jd(this);this.mangled_name=i?i.mangled_name||i.name:n.next_mangled(e,this),this.global&&t&&t.set(this.name,this.mangled_name)}}}function Jd(e){if(e.orig[0]instanceof id&&e.scope.is_block_scope())return e.scope.get_defun_scope().variables.get(e.name)}function Xd(e,t){let n;Yd&&(n=e.get_defun_scope())&&Yd.has(n)&&(e=n);var r=e.enclosed,i=t.nth_identifier;e:for(;;){var o=i.get(++e.cname);if(!dc.has(o)&&!(t.reserved.has(o)||Gd&&Gd.has(o))){for(let e=r.length;--e>=0;){const n=r[e];if(o==(n.mangled_name||n.unmangleable(t)&&n.name))continue e}return o}}}function ep(e){return(e=zu(e,{eval:!1,nth_identifier:tp,ie8:!1,keep_classnames:!1,keep_fnames:!1,module:!1,reserved:[],toplevel:!1})).module&&(e.toplevel=!0),Array.isArray(e.reserved)||e.reserved instanceof Set||(e.reserved=[]),e.reserved=new Set(e.reserved),e.reserved.add("arguments"),e}Qd.next_id=1,wl.DEFMETHOD("figure_out_scope",function(e,{parent_scope:t,toplevel:n=this}={}){if(e=zu(e,{cache:null,ie8:!1,safari10:!1,module:!1}),!(n instanceof xl))throw new Error("Invalid toplevel scope");var r=this.parent_scope=t,i=new Map,o=null,s=null,a=[],u=new Pd((t,n)=>{if(t.is_block_scope()){const i=r;if(t.block_scope=r=new wl(t),r._block_scope=!0,r.init_scope_vars(i),r.uses_with=i.uses_with,r.uses_eval=i.uses_eval,e.safari10&&(t instanceof vl||t instanceof yl||t instanceof _l)&&a.push(r),t instanceof Vl){const e=r;r=i,t.expression.walk(u),r=e;for(let e=0;e<t.body.length;e++)t.body[e].walk(u)}else n();return r=i,!0}if(t instanceof Sl){const e=s;return s=t,n(),s=e,!0}if(t instanceof wl){t.init_scope_vars(r);var l=r,f=o,d=i;return o=r=t,i=new Map,n(),r=l,o=f,i=d,!0}if(t instanceof dl){var p=t.label;if(i.has(p.name))throw new Error(Wu("Label {name} defined twice",p));return i.set(p.name,p),n(),i.delete(p.name),!0}if(t instanceof bl)for(var h=r;h;h=h.parent_scope)h.uses_with=!0;else{if(t instanceof Vf&&(t.scope=r),t instanceof ad&&(t.thedef=t,t.references=[]),t instanceof td)o.def_function(t,"arguments"==t.name?void 0:o);else if(t instanceof Jf){const e=o.parent_scope;t.scope=u.directives["use strict"]?e:e.get_defun_scope(),c(t.scope.def_function(t,o),1)}else if(t instanceof rd)c(o.def_variable(t,o),1);else if(t instanceof od)r.def_variable(t);else if(t instanceof nd)c((t.scope=o.parent_scope).def_function(t,o),1);else if(t instanceof Kf||t instanceof Yf||t instanceof Wf||t instanceof Gf||t instanceof id){if((m=t instanceof Zf?r.def_variable(t,null):o.def_variable(t,"SymbolVar"==t.TYPE?null:void 0)).orig.every(e=>e===t||(t instanceof Zf?e instanceof td:!(e instanceof Yf||e instanceof Wf||e instanceof Gf)))||Bc(`"${t.name}" is redeclared`,t.start.file,t.start.line,t.start.col,t.start.pos),t instanceof Qf||c(m,2),o!==r){t.mark_enclosed();var m=r.find_variable(t);t.thedef!==m&&(t.thedef=m,t.reference())}}else if(t instanceof fd){var g=i.get(t.name);if(!g)throw new Error(Wu("Undefined label {name} [{line},{col}]",{name:t.name,line:t.start.line,col:t.start.col}));t.thedef=g}r instanceof xl||!(t instanceof lf||t instanceof uf)||Bc(`"${t.TYPE}" statement may only appear at the top level`,t.start.file,t.start.line,t.start.col,t.start.pos)}});function c(e,t){if(s){var n=0;do{t++}while(u.parent(n++)!==s)}var r=u.parent(t);if(e.export=r instanceof lf?1:0){var i=r.exported_definition;(i instanceof Ol||i instanceof Bf)&&r.is_default&&(e.export=2)}}if(e.module&&(u.directives["use strict"]=!0),this.walk(u),this instanceof xl&&(this.globals=new Map),u=new Pd(e=>{if(e instanceof Il&&e.label)return e.label.thedef.references.push(e),!0;if(e instanceof ud){var t,r=e.name;if("eval"==r&&u.parent()instanceof ff)for(var i=e.scope;i&&!i.uses_eval;i=i.parent_scope)i.uses_eval=!0;return u.parent()instanceof af&&u.parent(1).module_name||!(t=e.scope.find_variable(r))?(t=n.def_global(e),e instanceof cd&&(t.export=1)):t.scope instanceof kl&&"arguments"==r&&(t.scope.get_defun_scope().uses_arguments=!0),e.thedef=t,e.reference(),!e.scope.is_block_scope()||t.orig[0]instanceof Zf||(e.scope=e.scope.get_defun_scope()),!0}var o;if(e instanceof id&&(o=Jd(e.definition())))for(i=e.scope;i&&(Zu(i.enclosed,o),i!==o.scope);)i=i.parent_scope}),this.walk(u),(e.ie8||e.safari10)&&Sd(this,e=>{if(e instanceof id){var t=e.name,r=e.thedef.references,i=e.scope.get_defun_scope(),o=i.find_variable(t)||n.globals.get(t)||i.def_variable(e);return r.forEach(function(e){e.thedef=o,e.reference()}),e.thedef=o,e.reference(),!0}}),e.safari10)for(const e of a)e.parent_scope.variables.forEach(function(t){Zu(e.enclosed,t)})}),xl.DEFMETHOD("def_global",function(e){var t=this.globals,n=e.name;if(t.has(n))return t.get(n);var r=new Qd(this,e);return r.undeclared=!0,r.global=!0,t.set(n,r),r}),wl.DEFMETHOD("init_scope_vars",function(e){this.variables=new Map,this.uses_with=!1,this.uses_eval=!1,this.parent_scope=e,this.enclosed=[],this.cname=-1}),wl.DEFMETHOD("conflicting_def",function(e){return this.enclosed.find(t=>t.name===e)||this.variables.has(e)||this.parent_scope&&this.parent_scope.conflicting_def(e)}),wl.DEFMETHOD("conflicting_def_shallow",function(e){return this.enclosed.find(t=>t.name===e)||this.variables.has(e)}),wl.DEFMETHOD("add_child_scope",function(e){if(e.parent_scope===this)return;e.parent_scope=this,e instanceof Cl&&this instanceof kl&&!this.uses_arguments&&(this.uses_arguments=Sd(e,e=>e instanceof ud&&e.scope instanceof kl&&"arguments"===e.name?Td:e instanceof kl&&!(e instanceof Cl)||void 0)),this.uses_with=this.uses_with||e.uses_with,this.uses_eval=this.uses_eval||e.uses_eval;const t=(()=>{const e=[];let t=this;do{e.push(t)}while(t=t.parent_scope);return e.reverse(),e})(),n=new Set(e.enclosed),r=[];for(const e of t){r.forEach(t=>Zu(e.enclosed,t));for(const t of e.variables.values())n.has(t)&&(Zu(r,t),Zu(e.enclosed,t))}}),wl.DEFMETHOD("create_symbol",function(e,{source:t,tentative_name:n,scope:r,conflict_scopes:i=[r],init:o=null}={}){let s;if(i=function(e){const t=new Set;for(const n of new Set(e))(function e(n){null==n||t.has(n)||(t.add(n),e(n.parent_scope))})(n);return[...t]}(i),n){n=s=n.replace(/(?:^[^a-z_$]|[^a-z0-9_$])/gi,"_");let e=0;for(;i.find(e=>e.conflicting_def_shallow(s));)s=n+"$"+e++}if(!s)throw new Error("No symbol name could be generated in create_symbol()");const a=Ku(e,t,{name:s,scope:r});return this.def_variable(a,o||null),a.mark_enclosed(),a}),tl.DEFMETHOD("is_block_scope",ju),Lf.DEFMETHOD("is_block_scope",ju),kl.DEFMETHOD("is_block_scope",ju),xl.DEFMETHOD("is_block_scope",ju),ql.DEFMETHOD("is_block_scope",ju),ul.DEFMETHOD("is_block_scope",Uu),wl.DEFMETHOD("is_block_scope",function(){return this._block_scope||!1}),pl.DEFMETHOD("is_block_scope",Uu),kl.DEFMETHOD("init_scope_vars",function(){wl.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1,this.def_variable(new Qf({name:"arguments",start:this.start,end:this.end}))}),Cl.DEFMETHOD("init_scope_vars",function(){wl.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1}),Vf.DEFMETHOD("mark_enclosed",function(){for(var e=this.definition(),t=this.scope;t&&(Zu(t.enclosed,e),t!==e.scope);)t=t.parent_scope}),Vf.DEFMETHOD("reference",function(){this.definition().references.push(this),this.mark_enclosed()}),wl.DEFMETHOD("find_variable",function(e){return e instanceof Vf&&(e=e.name),this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),wl.DEFMETHOD("def_function",function(e,t){var n=this.def_variable(e,t);return(!n.init||n.init instanceof Ol)&&(n.init=t),n}),wl.DEFMETHOD("def_variable",function(e,t){var n=this.variables.get(e.name);return n?(n.orig.push(e),n.init&&(n.scope!==e.scope||n.init instanceof Dl)&&(n.init=t)):(n=new Qd(this,e,t),this.variables.set(e.name,n),n.global=!this.parent_scope),e.thedef=n}),wl.DEFMETHOD("next_mangled",function(e){return Xd(this,e)}),xl.DEFMETHOD("next_mangled",function(e){let t;const n=this.mangled_names;do{t=Xd(this,e)}while(n.has(t));return t}),Dl.DEFMETHOD("next_mangled",function(e,t){for(var n=t.orig[0]instanceof Qf&&this.name&&this.name.definition(),r=n?n.mangled_name||n.name:null;;){var i=Xd(this,e);if(!r||r!=i)return i}}),Vf.DEFMETHOD("unmangleable",function(e){var t=this.definition();return!t||t.unmangleable(e)}),ad.DEFMETHOD("unmangleable",ju),Vf.DEFMETHOD("unreferenced",function(){return!this.definition().references.length&&!this.scope.pinned()}),Vf.DEFMETHOD("definition",function(){return this.thedef}),Vf.DEFMETHOD("global",function(){return this.thedef.global}),xl.DEFMETHOD("mangle_names",function(e){var t=(e=ep(e)).nth_identifier,n=-1,r=[];e.keep_fnames&&(Wd=new Set);const i=this.mangled_names=new Set;Gd=new Set,e.cache&&(this.globals.forEach(s),e.cache.props&&e.cache.props.forEach(function(e){i.add(e)}));var o=new Pd(function(i,a){if(i instanceof dl){var u=n;return a(),n=u,!0}if(i instanceof Ol&&!(o.parent()instanceof wl)&&(Yd=Yd||new Set,Yd.add(i.parent_scope.get_defun_scope())),i instanceof wl)i.variables.forEach(s);else if(i.is_block_scope())i.block_scope.variables.forEach(s);else if(Wd&&i instanceof of&&i.value instanceof kl&&!i.value.name&&ec(e.keep_fnames,i.name.name))Wd.add(i.name.definition().id);else{if(i instanceof ad){let e;do{e=t.get(++n)}while(dc.has(e));return i.mangled_name=e,!0}!e.ie8&&!e.safari10&&i instanceof id&&r.push(i.definition())}});function s(t){1&t.export?Gd.add(t.name):e.reserved.has(t.name)||r.push(t)}this.walk(o),(e.keep_fnames||e.keep_classnames)&&r.forEach(t=>{t.name.length<6&&t.unmangleable(e)&&Gd.add(t.name)}),r.forEach(t=>{t.mangle(e)}),Wd=null,Gd=null,Yd=null}),xl.DEFMETHOD("find_colliding_names",function(e){const t=e.cache&&e.cache.props,n=new Set;return e.reserved.forEach(r),this.globals.forEach(i),this.walk(new Pd(function(e){e instanceof wl&&e.variables.forEach(i),e instanceof id&&i(e.definition())})),n;function r(e){n.add(e)}function i(n){var i=n.name;if(n.global&&t&&t.has(i))i=t.get(i);else if(!n.unmangleable(e))return;r(i)}}),xl.DEFMETHOD("expand_names",function(e){var t=(e=ep(e)).nth_identifier;t.reset&&t.sort&&(t.reset(),t.sort());var n=this.find_colliding_names(e),r=0;function i(i){if(i.global&&e.cache)return;if(i.unmangleable(e))return;if(e.reserved.has(i.name))return;const o=Jd(i),s=i.name=o?o.name:function(){var e;do{e=t.get(r++)}while(n.has(e)||dc.has(e));return e}();i.orig.forEach(function(e){e.name=s}),i.references.forEach(function(e){e.name=s})}this.globals.forEach(i),this.walk(new Pd(function(e){e instanceof wl&&e.variables.forEach(i),e instanceof id&&i(e.definition())}))}),tl.DEFMETHOD("tail_node",Vu),pf.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),xl.DEFMETHOD("compute_char_frequency",function(e){var t=(e=ep(e)).nth_identifier;if(t.reset&&t.consider&&t.sort){t.reset();try{tl.prototype.print=function(r,i){this._print(r,i),this instanceof Vf&&!this.unmangleable(e)?t.consider(this.name,-1):e.properties&&(this instanceof gf?t.consider("#"+this.property,-1):this instanceof mf?t.consider(this.property,-1):this instanceof vf&&n(this.property))},t.consider(this.print_to_string(),1)}finally{tl.prototype.print=tl.prototype._print}t.sort()}function n(e){e instanceof gd?t.consider(e.value,-1):e instanceof Ef?(n(e.consequent),n(e.alternative)):e instanceof pf&&n(e.tail_node())}});const tp=(()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_".split(""),t="0123456789".split("");let n,r;function i(){r=new Map,e.forEach(function(e){r.set(e,0)}),t.forEach(function(e){r.set(e,0)})}function o(e,t){return r.get(t)-r.get(e)}function s(){n=Yu(e,o).concat(Yu(t,o))}return i(),s(),{get:function(e){var t="",r=54;e++;do{e--,t+=n[e%r],e=Math.floor(e/r),r=64}while(e>0);return t},consider:function(e,t){for(var n=e.length;--n>=0;)r.set(e[n],r.get(e[n])+t)},reset:i,sort:s}})();let np;tl.prototype.size=function(e,t){np=e&&e._mangle_options;let n=0;return $d(this,(e,t)=>{if(n+=e._size(t),e instanceof Cl&&e.is_braceless())return n+=e.body[0].value._size(t),!0},t||e&&e.stack),np=void 0,n},tl.prototype._size=()=>0,rl.prototype._size=()=>8,il.prototype._size=function(){return 2+this.value.length};const rp=e=>e.length&&e.length-1;ul.prototype._size=function(){return 2+rp(this.body)},xl.prototype._size=function(){return rp(this.body)},ll.prototype._size=()=>1,dl.prototype._size=()=>2,ml.prototype._size=()=>9,gl.prototype._size=()=>7,vl.prototype._size=()=>8,yl.prototype._size=()=>8,bl.prototype._size=()=>6,El.prototype._size=()=>3;const ip=e=>(e.is_generator?1:0)+(e.async?6:0);Al.prototype._size=function(){return ip(this)+4+rp(this.argnames)+rp(this.body)},Dl.prototype._size=function(e){return 2*!!Bd(e)+ip(this)+12+rp(this.argnames)+rp(this.body)},Ol.prototype._size=function(){return ip(this)+13+rp(this.argnames)+rp(this.body)},Cl.prototype._size=function(){let e=2+rp(this.argnames);1===this.argnames.length&&this.argnames[0]instanceof Vf||(e+=2);const t=this.is_braceless()?0:rp(this.body)+2;return ip(this)+e+t},Sl.prototype._size=()=>2,Tl.prototype._size=function(){return 2+3*Math.floor(this.segments.length/2)},Pl.prototype._size=function(){return this.value.length},Nl.prototype._size=function(){return this.value?7:6},Ll.prototype._size=()=>6,Ml.prototype._size=function(){return this.label?6:5},zl.prototype._size=function(){return this.label?9:8},Ul.prototype._size=()=>4,Vl.prototype._size=function(){return 8+rp(this.body)},Kl.prototype._size=function(){return 5+rp(this.body)},Hl.prototype._size=function(){return 8+rp(this.body)},Zl.prototype._size=()=>3,Gl.prototype._size=function(){let e=7+rp(this.body);return this.argname&&(e+=2),e},Yl.prototype._size=function(){return 7+rp(this.body)},Xl.prototype._size=function(){return 4+rp(this.definitions)},ef.prototype._size=function(){return 4+rp(this.definitions)},tf.prototype._size=function(){return 6+rp(this.definitions)},nf.prototype._size=function(){return 6+(this.await?6:0)+rp(this.definitions)},rf.prototype._size=function(){return this.value?1:0},af.prototype._size=function(){return this.name?4:0},uf.prototype._size=function(){let e=6;return this.imported_name&&(e+=1),(this.imported_name||this.imported_names)&&(e+=5),this.imported_names&&(e+=2+rp(this.imported_names)),e},cf.prototype._size=()=>11,lf.prototype._size=function(){let e=7+(this.is_default?8:0);return this.exported_value&&(e+=this.exported_value._size()),this.exported_names&&(e+=2+rp(this.exported_names)),this.module_name&&(e+=5),e},ff.prototype._size=function(){return this.optional?4+rp(this.args):2+rp(this.args)},df.prototype._size=function(){return 6+rp(this.args)},pf.prototype._size=function(){return rp(this.expressions)},mf.prototype._size=function(){return this.optional?this.property.length+2:this.property.length+1},gf.prototype._size=function(){return this.optional?this.property.length+3:this.property.length+2},vf.prototype._size=function(){return this.optional?4:2},_f.prototype._size=function(){return"typeof"===this.operator?7:"void"===this.operator?5:this.operator.length},xf.prototype._size=function(e){if("in"===this.operator)return 4;let t=this.operator.length;return("+"===this.operator||"-"===this.operator)&&this.right instanceof _f&&this.right.operator===this.operator&&(t+=1),this.needs_parens(e)&&(t+=2),t},Ef.prototype._size=()=>3,Df.prototype._size=function(){return 2+rp(this.elements)},Cf.prototype._size=function(e){let t=2;return Bd(e)&&(t+=2),t+rp(this.properties)};const op=e=>"string"==typeof e?e.length:0;Sf.prototype._size=function(){return op(this.key)+1};const sp=e=>e?7:0;Ff.prototype._size=function(){return 5+sp(this.static)+op(this.key)},Pf.prototype._size=function(){return 5+sp(this.static)+op(this.key)},Rf.prototype._size=function(){return sp(this.static)+op(this.key)},Nf.prototype._size=function(){return Rf.prototype._size.call(this)+1},Tf.prototype._size=function(){return Rf.prototype._size.call(this)+4},$f.prototype._size=function(){return Rf.prototype._size.call(this)+4},zf.prototype._size=function(){return 5},Lf.prototype._size=function(){return(this.name?8:7)+(this.extends?8:0)},jf.prototype._size=function(){return 8+rp(this.body)},If.prototype._size=function(){return sp(this.static)+("string"==typeof this.key?this.key.length+2:0)+(this.value?1:0)},Mf.prototype._size=function(){return If.prototype._size.call(this)+1},Vf.prototype._size=function(){return np&&this.thedef&&!this.thedef.unmangleable(np)?1:this.name.length},ed.prototype._size=function(){return this.name.length},ud.prototype._size=Hf.prototype._size=function(){return"arguments"===this.name?9:Vf.prototype._size.call(this)},qf.prototype._size=()=>10,sd.prototype._size=function(){return this.name.length},ld.prototype._size=function(){return this.name.length},pd.prototype._size=()=>4,hd.prototype._size=()=>5,gd.prototype._size=function(){return this.value.length+2},vd.prototype._size=function(){const{value:e}=this;return 0===e?1:e>0&&Math.floor(e)===e?Math.floor(Math.log10(e)+1):e.toString().length},yd.prototype._size=function(){return this.value.length},_d.prototype._size=function(){return this.value.toString().length},wd.prototype._size=()=>4,xd.prototype._size=()=>3,Ed.prototype._size=()=>6,kd.prototype._size=()=>0,Ad.prototype._size=()=>8,Od.prototype._size=()=>4,Cd.prototype._size=()=>5,Bl.prototype._size=()=>6,jl.prototype._size=()=>6;const ap=32,up=256,cp=(e,t)=>e.flags&t,lp=(e,t)=>{e.flags|=t},fp=(e,t)=>{e.flags&=~t};function dp(e,t){return t instanceof pf?e.push(...t.expressions):e.push(t),e}function pp(e,t){if(1==t.length)return t[0];if(0==t.length)throw new Error("trying to create a sequence with length zero!");return Ku(pf,e,{expressions:t.reduce(dp,[])})}function hp(e){return Ku(Dl,e,{uses_arguments:!1,argnames:[],body:[],is_generator:!1,async:!1,variables:new Map,uses_with:!1,uses_eval:!1,parent_scope:null,enclosed:[],cname:0,block_scope:void 0})}function mp(e,t){switch(typeof e){case"string":return Ku(gd,t,{value:e});case"number":return isNaN(e)?Ku(xd,t):isFinite(e)?1/e<0?Ku(bf,t,{operator:"-",expression:Ku(vd,t,{value:-e})}):Ku(vd,t,{value:e}):e<0?Ku(bf,t,{operator:"-",expression:Ku(Ad,t)}):Ku(Ad,t);case"bigint":return Ku(yd,t,{value:e.toString()});case"boolean":return Ku(e?Od:Cd,t);case"undefined":return Ku(Ed,t);default:if(null===e)return Ku(wd,t,{value:null});if(e instanceof RegExp)return Ku(_d,t,{value:{source:nc(e.source),flags:e.flags}});throw new Error(Wu("Can't handle constant of type: {type}",{type:typeof e}))}}function gp(e,t){return e.size()>t.size()?t:e}function vp(e,t,n){return Bd(e)?function(e,t){return gp(Ku(ol,e,{body:e}),Ku(ol,t,{body:t})).body}(t,n):gp(t,n)}function yp(e){return e instanceof md?e.getValue():e instanceof bf&&"void"==e.operator&&e.expression instanceof md?void 0:e}function _p(e,t){if(!((t=yp(t))instanceof tl)){var n;if(e instanceof Df){var r=e.elements;if("length"==t)return mp(r.length,e);"number"==typeof t&&t in r&&(n=r[t])}else if(e instanceof Cf){t=""+t;for(var i=e.properties,o=i.length;--o>=0;){if(!(i[o]instanceof Sf))return;n||i[o].key!==t||(n=i[o].value)}}return n instanceof ud&&n.fixed_value()||n}}function bp(e,t){var n=!1,r=new Pd(function(t){return!!(n||t instanceof wl)||(t instanceof Il&&r.loopcontrol_target(t)===e?n=!0:void 0)});return t instanceof dl&&r.push(t),r.push(e),e.body.walk(r),n}function wp(e,t,n){return xp(e,t,n)?pp(t,[Ku(vd,t,{value:0}),n]):n}function xp(e,t,n){return e instanceof bf&&"delete"==e.operator||e instanceof ff&&e.expression===t&&(n instanceof yf||n instanceof hf||n instanceof ud&&"eval"==n.name)}function Ep(e){return e instanceof Cl||e instanceof Dl}function kp(e){return"Call"==e.TYPE&&(e.expression instanceof Dl||kp(e.expression))}function Ap(e){return null===e||e instanceof ll||e instanceof cl&&0==e.body.length}const Dp=Qu("Infinity NaN undefined");function Cp(e){return e instanceof Ad||e instanceof xd||e instanceof Ed}function Op(e,t){if(!(e instanceof ud))return!1;for(var n=e.definition().orig,r=n.length;--r>=0;)if(n[r]instanceof t)return!0}function Sp(e){return!(e instanceof Bf||e instanceof Ol||e instanceof ef||e instanceof tf||e instanceof nf||e instanceof lf||e instanceof uf)}function $p(e){if(null===e)return[];if(e instanceof cl)return e.body;if(e instanceof ll)return[];if(e instanceof nl)return[e];throw new Error("Can't convert thing to statement array")}function Tp(e,t){const n=e=>{if(e instanceof ud&&t.includes(e.definition()))return Td};return $d(e,(t,r)=>{if(t instanceof wl&&t!==e){var i=r.parent();if(i instanceof ff&&i.expression===t&&!t.async&&!t.is_generator)return;return!Sd(t,n)||Td}})}function Pp(e,t){for(var n,r=0;n=e.parent(r);r++)if(n instanceof kl||n instanceof Lf){var i=n.name;if(i&&i.definition()===t)return!0}return!1}function Fp(e,t){return t.top_retain&&e instanceof Ol&&cp(e,1024)&&e.name&&t.top_retain(e.name.definition())}function Rp(e){const t=new Map;for(var n of Object.keys(e))t.set(n,Qu(e[n]));return(e,n)=>{const r=t.get(e);return null!=r&&r.has(n)}}const Np=new Set(["Number","String","Array","Object","Function","Promise"]),Lp=["constructor","toString","valueOf"],Ip=Rp({Array:["at","flat","includes","indexOf","join","lastIndexOf","slice",...Lp],Boolean:Lp,Function:Lp,Number:["toExponential","toFixed","toPrecision",...Lp],Object:Lp,RegExp:["test",...Lp],String:["at","charAt","charCodeAt","charPointAt","concat","endsWith","fromCharCode","fromCodePoint","includes","indexOf","italics","lastIndexOf","localeCompare","match","matchAll","normalize","padStart","padEnd","repeat","replace","replaceAll","search","slice","split","startsWith","substr","substring","repeat","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimEnd","trimStart",...Lp]}),Mp=Rp({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","hasOwn","keys"],String:["fromCharCode"]}),zp=Rp({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),Bp=e=>e instanceof ud&&e.definition().undeclared,jp=Qu("<<< >> << & | ^ ~"),Up=Qu("&& || ??"),Vp=Qu("delete ++ --");var qp,Hp;function Kp(e,t){return cp(e,8)||e instanceof Ed||e instanceof bf&&"void"==e.operator&&!e.expression.has_side_effects(t)}function Zp(e,t){let n;return e instanceof wd||Kp(e,t)||e instanceof ud&&(n=e.definition().fixed)instanceof tl&&Gp(n,t)}function Wp(e,t){return e instanceof hf||e instanceof ff?e.optional&&Zp(e.expression,t)||Wp(e.expression,t):e instanceof yf&&Wp(e.expression,t)}function Gp(e,t){return!!Zp(e,t)||Wp(e,t)}function Yp(e,t){return t instanceof _f&&Vp.has(t.operator)?t.expression:t instanceof kf&&t.left===e||t instanceof yl&&t.init===e?e:void 0}!function(e){const t=Qu("! delete"),n=Qu("in instanceof == != === !== < <= >= >");e(tl,ju),e(bf,function(){return t.has(this.operator)}),e(xf,function(){return n.has(this.operator)||Up.has(this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),e(Ef,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),e(kf,function(){return"="==this.operator&&this.right.is_boolean()}),e(pf,function(){return this.tail_node().is_boolean()}),e(Od,Uu),e(Cd,Uu)}(function(e,t){e.DEFMETHOD("is_boolean",t)}),function(e){e(tl,ju),e(vd,Uu);const t=Qu("+ - ~ ++ --");e(_f,function(e){return t.has(this.operator)&&this.expression.is_number(e)});const n=Qu("- * / % & | ^ << >> >>>");e(xf,function(e){return"+"===this.operator?this.left.is_number(e)&&this.right.is_number_or_bigint(e)||this.right.is_number(e)&&this.left.is_number_or_bigint(e):!!n.has(this.operator)&&(this.left.is_number(e)||this.right.is_number(e))}),e(kf,function(e){return("="===this.operator||n.has(this.operator.slice(0,-1)))&&this.right.is_number(e)}),e(pf,function(e){return this.tail_node().is_number(e)}),e(Ef,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)})}(function(e,t){e.DEFMETHOD("is_number",t)}),function(e){e(tl,ju),e(yd,Uu);const t=Qu("+ - ~ ++ --");e(_f,function(e){return t.has(this.operator)&&this.expression.is_bigint(e)});const n=Qu("- * / % & | ^ << >>");e(xf,function(e){return"+"===this.operator?this.left.is_bigint(e)&&this.right.is_number_or_bigint(e)||this.right.is_bigint(e)&&this.left.is_number_or_bigint(e):!!n.has(this.operator)&&(this.left.is_bigint(e)||this.right.is_bigint(e))}),e(kf,function(e){return(n.has(this.operator.slice(0,-1))||"="==this.operator)&&this.right.is_bigint(e)}),e(pf,function(e){return this.tail_node().is_bigint(e)}),e(Ef,function(e){return this.consequent.is_bigint(e)&&this.alternative.is_bigint(e)})}(function(e,t){e.DEFMETHOD("is_bigint",t)}),function(e){e(tl,ju),e(vd,Uu),e(yd,Uu);const t=Qu("+ - ~ ++ --");e(_f,function(e){return t.has(this.operator)});const n=Qu("- * / % & | ^ << >>");e(xf,function(e){return"+"===this.operator?this.left.is_number_or_bigint(e)&&this.right.is_number_or_bigint(e):n.has(this.operator)}),e(kf,function(e){return n.has(this.operator.slice(0,-1))||"="==this.operator&&this.right.is_number_or_bigint(e)}),e(pf,function(e){return this.tail_node().is_number_or_bigint(e)}),e(Ef,function(e){return this.consequent.is_number_or_bigint(e)&&this.alternative.is_number_or_bigint(e)})}(function(e,t){e.DEFMETHOD("is_number_or_bigint",t)}),(qp=function(e,t){e.DEFMETHOD("is_32_bit_integer",t)})(tl,ju),qp(vd,function(e){return this.value===(0|this.value)}),qp(bf,function(e){return"~"==this.operator?this.expression.is_number(e):"+"===this.operator&&this.expression.is_32_bit_integer(e)}),qp(xf,function(e){return jp.has(this.operator)&&(this.left.is_number(e)||this.right.is_number(e))}),(Hp=function(e,t){e.DEFMETHOD("is_string",t)})(tl,ju),Hp(gd,Uu),Hp(Tl,Uu),Hp(bf,function(){return"typeof"==this.operator}),Hp(xf,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))}),Hp(kf,function(e){return("="==this.operator||"+="==this.operator)&&this.right.is_string(e)}),Hp(pf,function(e){return this.tail_node().is_string(e)}),Hp(Ef,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),function(e){function t(e,t){for(var n=e.length;--n>=0;)if(e[n].has_side_effects(t))return!0;return!1}e(tl,Uu),e(ll,ju),e(md,ju),e(pd,ju),e(ul,function(e){return t(this.body,e)}),e(ff,function(e){return!(this.is_callee_pure(e)||this.expression.is_call_pure(e)&&!this.expression.has_side_effects(e))||t(this.args,e)}),e(Vl,function(e){return this.expression.has_side_effects(e)||t(this.body,e)}),e(Kl,function(e){return this.expression.has_side_effects(e)||t(this.body,e)}),e(Zl,function(e){return this.body.has_side_effects(e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(Ul,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(cf,ju),e(dl,function(e){return this.body.has_side_effects(e)}),e(ol,function(e){return this.body.has_side_effects(e)}),e(kl,ju),e(Lf,function(e){return!(!this.extends||!this.extends.has_side_effects(e))||t(this.properties,e)}),e(jf,function(e){return t(this.body,e)}),e(xf,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)}),e(kf,Uu),e(Ef,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(_f,function(e){return Vp.has(this.operator)||this.expression.has_side_effects(e)}),e(ud,function(e){return!this.is_declared(e)&&!Np.has(this.name)}),e(ed,ju),e(Hf,ju),e(Cf,function(e){return t(this.properties,e)}),e(Sf,function(e){return this.computed_key()&&this.key.has_side_effects(e)||this.value&&this.value.has_side_effects(e)}),e([If,Mf],function(e){return this.computed_key()&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e([Nf,Tf,$f,Rf,Ff,Pf],function(e){return this.computed_key()&&this.key.has_side_effects(e)}),e(Df,function(e){return t(this.elements,e)}),e(mf,function(e){return Gp(this,e)?this.expression.has_side_effects(e):!(this.optional||!this.expression.may_throw_on_access(e))||this.expression.has_side_effects(e)}),e(vf,function(e){if(Gp(this,e))return this.expression.has_side_effects(e);if(!this.optional&&this.expression.may_throw_on_access(e))return!0;var t=this.property.has_side_effects(e);return!(!t||!this.optional)||t||this.expression.has_side_effects(e)}),e(yf,function(e){return this.expression.has_side_effects(e)}),e(pf,function(e){return t(this.expressions,e)}),e(Jl,function(e){return t(this.definitions,e)}),e(of,function(){return null!=this.value}),e(Pl,ju),e(Tl,function(e){return t(this.segments,e)})}(function(e,t){for(const n of[].concat(e))n.DEFMETHOD("has_side_effects",t)}),function(e){function t(e,t){for(var n=e.length;--n>=0;)if(e[n].may_throw(t))return!0;return!1}e(tl,Uu),e(md,ju),e(ll,ju),e(kl,ju),e(Hf,ju),e(pd,ju),e(cf,ju),e(Lf,function(e){return!(!this.extends||!this.extends.may_throw(e))||t(this.properties,e)}),e(jf,function(e){return t(this.body,e)}),e(Df,function(e){return t(this.elements,e)}),e(kf,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof ud)&&this.left.may_throw(e)}),e(xf,function(e){return this.left.may_throw(e)||this.right.may_throw(e)}),e(ul,function(e){return t(this.body,e)}),e(ff,function(e){return!Gp(this,e)&&(!!t(this.args,e)||!this.is_callee_pure(e)&&(!!this.expression.may_throw(e)||!(this.expression instanceof kl)||t(this.expression.body,e)))}),e(Kl,function(e){return this.expression.may_throw(e)||t(this.body,e)}),e(Ef,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(Jl,function(e){return t(this.definitions,e)}),e(Ul,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(dl,function(e){return this.body.may_throw(e)}),e(Cf,function(e){return t(this.properties,e)}),e(Sf,function(e){return!!(this.computed_key()&&this.key.may_throw(e)||this.value)&&this.value.may_throw(e)}),e([If,Mf],function(e){return this.computed_key()&&this.key.may_throw(e)||this.static&&this.value&&this.value.may_throw(e)}),e([Rf,Ff,Pf],function(e){return this.computed_key()&&this.key.may_throw(e)}),e([Nf,Tf,$f],ju),e(Nl,function(e){return this.value&&this.value.may_throw(e)}),e(pf,function(e){return t(this.expressions,e)}),e(ol,function(e){return this.body.may_throw(e)}),e(mf,function(e){return!Gp(this,e)&&(!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e))}),e(vf,function(e){return!Gp(this,e)&&(!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e))}),e(yf,function(e){return this.expression.may_throw(e)}),e(Vl,function(e){return this.expression.may_throw(e)||t(this.body,e)}),e(ud,function(e){return!this.is_declared(e)&&!Np.has(this.name)}),e(ed,ju),e(Zl,function(e){return this.bcatch?this.bcatch.may_throw(e):this.body.may_throw(e)||this.bfinally&&this.bfinally.may_throw(e)}),e(_f,function(e){return!("typeof"==this.operator&&this.expression instanceof ud)&&this.expression.may_throw(e)}),e(of,function(e){return!!this.value&&this.value.may_throw(e)})}(function(e,t){for(const n of[].concat(e))n.DEFMETHOD("may_throw",t)}),function(e){function t(e){let t=!0;return Sd(this,n=>{if(n instanceof ud){if(cp(this,16))return t=!1,Td;var r=n.definition();if(Iu(r,this.enclosed)&&!this.variables.has(r.name)){if(e){var i=e.find_variable(n);if(r.undeclared?!i:i===r)return t="f",!0}return t=!1,Td}return!0}if(n instanceof pd&&this instanceof Cl)return t=!1,Td}),t}e(tl,ju),e(md,Uu),e(Lf,function(e){if(this.extends&&!this.extends.is_constant_expression(e))return!1;for(const t of this.properties){if(t.computed_key()&&!t.key.is_constant_expression(e))return!1;if(t.static&&t.value&&!t.value.is_constant_expression(e))return!1;if(t instanceof jf)return!1}return t.call(this,e)}),e(kl,t),e(_f,function(){return this.expression.is_constant_expression()}),e(xf,function(){return this.left.is_constant_expression()&&this.right.is_constant_expression()}),e(Df,function(){return this.elements.every(e=>e.is_constant_expression())}),e(Cf,function(){return this.properties.every(e=>e.is_constant_expression())}),e(Of,function(){return!(this.key instanceof tl||!this.value||!this.value.is_constant_expression())})}(function(e,t){e.DEFMETHOD("is_constant_expression",t)}),function(e){function t(e){return/strict/.test(e.option("pure_getters"))}tl.DEFMETHOD("may_throw_on_access",function(e){return!e.option("pure_getters")||this._dot_throw(e)}),e(tl,t),e(wd,Uu),e(Ed,Uu),e(md,ju),e(Df,ju),e(Cf,function(e){if(!t(e))return!1;for(var n=this.properties.length;--n>=0;)if(this.properties[n]._dot_throw(e))return!0;return!1}),e(Lf,ju),e(Of,ju),e(Ff,Uu),e(El,function(e){return this.expression._dot_throw(e)}),e(Dl,ju),e(Cl,ju),e(wf,ju),e(bf,function(){return"void"==this.operator}),e(xf,function(e){return("&&"==this.operator||"||"==this.operator||"??"==this.operator)&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(kf,function(e){return!!this.logical||"="==this.operator&&this.right._dot_throw(e)}),e(Ef,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(mf,function(e){return!(!t(e)||"prototype"==this.property&&(this.expression instanceof Dl||this.expression instanceof Lf))}),e(yf,function(e){return this.expression._dot_throw(e)}),e(pf,function(e){return this.tail_node()._dot_throw(e)}),e(ud,function(e){if("arguments"===this.name&&this.scope instanceof kl)return!1;if(cp(this,8))return!0;if(!t(e))return!1;if(Bp(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;var n=this.fixed_value();return!n||n._dot_throw(e)})}(function(e,t){e.DEFMETHOD("_dot_throw",t)}),function(e){function t(e){return Ku(bf,e,{operator:"!",expression:e})}function n(e,n,r){var i=t(e);if(r){var o=Ku(ol,n,{body:n});return gp(i,o)===o?n:i}return gp(i,n)}e(tl,function(){return t(this)}),e(nl,function(){throw new Error("Cannot negate a statement")}),e(Dl,function(){return t(this)}),e(Lf,function(){return t(this)}),e(Cl,function(){return t(this)}),e(bf,function(){return"!"==this.operator?this.expression:t(this)}),e(pf,function(e){var t=this.expressions.slice();return t.push(t.pop().negate(e)),pp(this,t)}),e(Ef,function(e,t){var r=this.clone();return r.consequent=r.consequent.negate(e),r.alternative=r.alternative.negate(e),n(this,r,t)}),e(xf,function(e,r){var i=this.clone(),o=this.operator;if(e.option("unsafe_comps"))switch(o){case"<=":return i.operator=">",i;case"<":return i.operator=">=",i;case">=":return i.operator="<",i;case">":return i.operator="<=",i}switch(o){case"==":return i.operator="!=",i;case"!=":return i.operator="==",i;case"===":return i.operator="!==",i;case"!==":return i.operator="===",i;case"&&":return i.operator="||",i.left=i.left.negate(e,r),i.right=i.right.negate(e),n(this,i,r);case"||":return i.operator="&&",i.left=i.left.negate(e,r),i.right=i.right.negate(e),n(this,i,r)}return t(this)})}(function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})}),function(e){function t(e){return Ku(bf,e,{operator:"~",expression:e})}e(tl,function(e){return t(this)}),e(vd,function(e){const n=~this.value;return n.toString().length>this.value.toString().length?t(this):Ku(vd,this,{value:n})}),e(bf,function(e,n){return"~"==this.operator&&(this.expression.is_32_bit_integer(e)||(null!=n?n:e.in_32_bit_context()))?this.expression:t(this)})}(function(e,t){e.DEFMETHOD("bitwise_negate",t)});var Qp=Qu("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError");ff.DEFMETHOD("is_callee_pure",function(e){if(e.option("unsafe")){var t=this.expression,n=this.args&&this.args[0]&&this.args[0].evaluate(e);if(t.expression&&"hasOwnProperty"===t.expression.name&&(null==n||n.thedef&&n.thedef.undeclared))return!1;if(Bp(t)&&Qp.has(t.name))return!0;if(t instanceof mf&&Bp(t.expression)&&Mp(t.expression.name,t.property))return!0}return!!(this instanceof df&&e.option("pure_new"))||!(!e.option("side_effects")||!oc(this,Rd))||!e.pure_funcs(this)}),tl.DEFMETHOD("is_call_pure",ju),mf.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return;const t=this.expression;let n;return t instanceof Df?n="Array":t.is_boolean()?n="Boolean":t.is_number(e)?n="Number":t instanceof _d?n="RegExp":t.is_string(e)?n="String":this.may_throw_on_access(e)||(n="Object"),null!=n&&Ip(n,this.property)});const Jp=e=>e&&e.aborts();function Xp(e,t,n,r,i,o){var s=t.parent(i),a=Yp(n,s);if(a)return a;if(!o&&s instanceof ff&&s.expression===n&&!(r instanceof Cl)&&!(r instanceof Lf)&&!s.is_callee_pure(e)&&(!(r instanceof Dl)||!(s instanceof df)&&r.contains_this()))return!0;if(s instanceof Df)return Xp(e,t,s,s,i+1);if(s instanceof Sf&&n===s.value){var u=t.parent(i+1);return Xp(e,t,u,u,i+2)}if(s instanceof hf&&s.expression===n){var c=_p(r,s.property);return!o&&Xp(e,t,s,c,i+1)}}function eh(e){for(let t,n,r=-1;t=e.parent(r),n=e.parent(r+1);r++){if(!(n instanceof pf)){if(n instanceof _f){const e=n.operator;if("void"===e)return!1;if("typeof"===e||"+"===e||"-"===e||"!"===e||"~"===e)continue}return!(n instanceof ol||n instanceof dl||n instanceof wl)}if(n.expressions.indexOf(t)!==n.expressions.length-1){const t=e.parent(r+2);return!(n.expressions.length>2||1===n.expressions.length||!xp(t,n,n.expressions[1]))}}return!0}function th(e,t){e.DEFMETHOD("_eval",t)}!function(e){function t(){for(var e=0;e<this.body.length;e++)if(Jp(this.body[e]))return this.body[e];return null}e(nl,qu),e(Fl,Vu),e(uf,qu),e(cl,t),e(ql,t),e(Bf,function(){for(const e of this.properties)if(e instanceof jf&&e.aborts())return e;return null}),e(jf,t),e(Ul,function(){return this.alternative&&Jp(this.body)&&Jp(this.alternative)&&this})}(function(e,t){e.DEFMETHOD("aborts",t)}),tl.DEFMETHOD("contains_this",function(){return Sd(this,e=>e instanceof pd?Td:e!==this&&e instanceof wl&&!(e instanceof Cl)||void 0)});const nh=Symbol("This AST_Chain is nullish");tl.DEFMETHOD("evaluate",function(e){if(!e.option("evaluate"))return this;var t=this._eval(e,1);if(!t||t instanceof RegExp)return t;if("function"==typeof t||"object"==typeof t||t==nh)return this;if("string"==typeof t){const n=this.size(e);if(t.length+2>n)return this}return t});var rh=Qu("! ~ - + void");tl.DEFMETHOD("is_constant",function(){return this instanceof md?!(this instanceof _d):this instanceof bf&&rh.has(this.operator)&&(this.expression instanceof md||this.expression.is_constant())}),th(nl,function(){throw new Error(Wu("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),th(kl,Vu),th(Lf,Vu),th(tl,Vu),th(md,function(){return this.getValue()});const ih="function"==typeof BigInt;th(yd,function(){return ih?BigInt(this.value):this}),th(_d,function(e){let t=e.evaluated_regexps.get(this.value);if(void 0===t&&ic(this.value.source)){try{const{source:e,flags:n}=this.value;t=new RegExp(e,n)}catch(e){t=null}e.evaluated_regexps.set(this.value,t)}return t||this}),th(Tl,function(){return 1!==this.segments.length?this:this.segments[0].value}),th(Dl,function(e){if(e.option("unsafe")){var t=function(){};return t.node=this,t.toString=()=>this.print_to_string(),t}return this}),th(Df,function(e,t){if(e.option("unsafe")){for(var n=[],r=0,i=this.elements.length;r<i;r++){var o=this.elements[r],s=o._eval(e,t);if(o===s)return this;n.push(s)}return n}return this}),th(Cf,function(e,t){if(e.option("unsafe")){for(var n={},r=0,i=this.properties.length;r<i;r++){var o=this.properties[r];if(o instanceof El)return this;var s=o.key;if(s instanceof Vf)s=s.name;else if(s instanceof tl&&(s=s._eval(e,t))===o.key)return this;if("function"==typeof Object.prototype[s])return this;if(!(o.value instanceof Dl)&&(n[s]=o.value._eval(e,t),n[s]===o.value))return this}return n}return this});var oh=Qu("! typeof void");th(bf,function(e,t){var n=this.expression;if(e.option("typeofs")&&"typeof"==this.operator){if(n instanceof kl||n instanceof ud&&n.fixed_value()instanceof kl)return"function";if((n instanceof Cf||n instanceof Df||n instanceof ud&&(n.fixed_value()instanceof Cf||n.fixed_value()instanceof Df))&&!n.has_side_effects(e))return"object"}if(oh.has(this.operator)||t++,(n=n._eval(e,t))===this.expression)return this;switch(this.operator){case"!":return!n;case"typeof":return n instanceof RegExp?this:typeof n;case"void":return;case"~":return~n;case"-":return-n;case"+":return+n}return this});var sh=Qu("&& || ?? === !==");const ah=Qu("== != === !=="),uh=e=>"object"==typeof e||"function"==typeof e||"symbol"==typeof e;th(xf,function(e,t){sh.has(this.operator)||t++;var n=this.left._eval(e,t);if(n===this.left)return this;var r,i=this.right._eval(e,t);if(i===this.right)return this;if(null!=n&&null!=i&&ah.has(this.operator)&&uh(n)&&uh(i)&&typeof n==typeof i)return this;if("bigint"==typeof n!=("bigint"==typeof i)||"bigint"==typeof n&&(">>>"===this.operator||"/"===this.operator&&0===Number(i)))return this;switch(this.operator){case"&&":r=n&&i;break;case"||":r=n||i;break;case"??":r=null!=n?n:i;break;case"|":r=n|i;break;case"&":r=n&i;break;case"^":r=n^i;break;case"+":r=n+i;break;case"*":r=n*i;break;case"**":r=n**i;break;case"/":r=n/i;break;case"%":r=n%i;break;case"-":r=n-i;break;case"<<":r=n<<i;break;case">>":r=n>>i;break;case">>>":r=n>>>i;break;case"==":r=n==i;break;case"===":r=n===i;break;case"!=":r=n!=i;break;case"!==":r=n!==i;break;case"<":r=n<i;break;case"<=":r=n<=i;break;case">":r=n>i;break;case">=":r=n>=i;break;default:return this}return"number"==typeof r&&isNaN(r)&&e.find_parent(bl)?this:r}),th(Ef,function(e,t){var n=this.condition._eval(e,t);if(n===this.condition)return this;var r=n?this.consequent:this.alternative,i=r._eval(e,t);return i===r?this:i});const ch=new Set;th(ud,function(e,t){if(ch.has(this))return this;var n=this.fixed_value();if(!n)return this;ch.add(this);const r=n._eval(e,t);if(ch.delete(this),r===n)return this;if(r&&"object"==typeof r){var i=this.definition().escaped;if(i&&t>i)return this}return r});const lh={Array:Array,Math:Math,Number:Number,Object:Object,String:String},fh=new Set(["dotAll","global","ignoreCase","multiline","sticky","unicode"]);function dh(e,t){for(const n of[].concat(e))n.DEFMETHOD("drop_side_effect_free",t)}function ph(e,t,n){var r=e.length;if(!r)return null;for(var i=[],o=!1,s=0;s<r;s++){var a=e[s].drop_side_effect_free(t,n);o|=a!==e[s],a&&(i.push(a),n=!1)}return o?i.length?i:null:e}th(hf,function(e,t){let n=this.expression._eval(e,t+1);if(n===nh||this.optional&&null==n)return nh;if("length"===this.property){if("string"==typeof n)return n.length;if(n instanceof Df&&n.elements.every(e=>!(e instanceof El))&&n.elements.every(t=>!t.has_side_effects(e)))return n.elements.length}if(e.option("unsafe")){var r=this.property;if(r instanceof tl&&(r=r._eval(e,t))===this.property)return this;var i=this.expression;if(Bp(i)){var o,s="hasOwnProperty"===i.name&&"call"===r&&(o=e.parent()&&e.parent().args)&&o&&o[0]&&o[0].evaluate(e);if(null==(s=s instanceof mf?s.expression:s)||s.thedef&&s.thedef.undeclared)return this.clone();if(!zp(i.name,r))return this;n=lh[i.name]}else{if(n instanceof RegExp){if("source"==r)return nc(n.source);if("flags"==r||fh.has(r))return n[r]}if(!n||n===i||!Xu(n,r))return this;if("function"==typeof n)switch(r){case"name":return n.node.name?n.node.name.name:"";case"length":return n.node.length_property();default:return this}}return n[r]}return this}),th(yf,function(e,t){const n=this.expression._eval(e,t);return n===nh?void 0:n===this.expression?this:n}),th(ff,function(e,t){var n=this.expression;const r=n._eval(e,t);if(r===nh||this.optional&&null==r)return nh;if(e.option("unsafe")&&n instanceof hf){var i,o=n.property;if(o instanceof tl&&(o=o._eval(e,t))===n.property)return this;var s=n.expression;if(Bp(s)){var a="hasOwnProperty"===s.name&&"call"===o&&this.args[0]&&this.args[0].evaluate(e);if(null==(a=a instanceof mf?a.expression:a)||a.thedef&&a.thedef.undeclared)return this.clone();if(!Mp(s.name,o))return this;i=lh[s.name]}else{if((i=s._eval(e,t+1))===s||!i)return this;if(!Ip(i.constructor.name,o))return this}for(var u=[],c=0,l=this.args.length;c<l;c++){var f=this.args[c],d=f._eval(e,t);if(f===d)return this;if(f instanceof kl)return this;u.push(d)}try{return i[o].apply(i,u)}catch(e){}}return this}),th(df,Vu),dh(tl,Vu),dh(md,qu),dh(pd,qu),dh(ff,function(e,t){if(Wp(this,e))return this.expression.drop_side_effect_free(e,t);if(!this.is_callee_pure(e)){if(this.expression.is_call_pure(e)){var n=this.args.slice();return n.unshift(this.expression.expression),(n=ph(n,e,t))&&pp(this,n)}if(Ep(this.expression)&&(!this.expression.name||!this.expression.name.definition().references.length)){var r=this.clone();return r.expression.process_expression(!1,e),r}return this}var i=ph(this.args,e,t);return i&&pp(this,i)}),dh(Al,qu),dh(Dl,qu),dh(Cl,qu),dh(Lf,function(e){const t=[];if(this.is_self_referential()&&this.has_side_effects(e))return this;const n=this.extends&&this.extends.drop_side_effect_free(e);n&&t.push(n);for(const n of this.properties)if(n instanceof jf){if(n.has_side_effects(e))return this}else{const r=n.drop_side_effect_free(e);r&&t.push(r)}if(!t.length)return null;const r=pp(this,t);return this instanceof Bf?Ku(ol,this,{body:r}):r}),dh([If,Mf],function(e){const t=this.computed_key()&&this.key.drop_side_effect_free(e),n=this.static&&this.value&&this.value.drop_side_effect_free(e);return t&&n?pp(this,[t,n]):t||n||null}),dh(xf,function(e,t){var n=this.right.drop_side_effect_free(e);if(!n)return this.left.drop_side_effect_free(e,t);if(Up.has(this.operator)){if(n===this.right)return this;var r=this.clone();return r.right=n,r}var i=this.left.drop_side_effect_free(e,t);return i?pp(this,[i,n]):this.right.drop_side_effect_free(e,t)}),dh(kf,function(e){if(this.logical)return this;var t=this.left;if(t.has_side_effects(e)||e.has_directive("use strict")&&t instanceof hf&&t.expression.is_constant())return this;for(lp(this,ap);t instanceof hf;)t=t.expression;return t.is_constant_expression(e.find_parent(wl))?this.right.drop_side_effect_free(e):this}),dh(Ef,function(e){var t=this.consequent.drop_side_effect_free(e),n=this.alternative.drop_side_effect_free(e);if(t===this.consequent&&n===this.alternative)return this;if(!t)return n?Ku(xf,this,{operator:"||",left:this.condition,right:n}):this.condition.drop_side_effect_free(e);if(!n)return Ku(xf,this,{operator:"&&",left:this.condition,right:t});var r=this.clone();return r.consequent=t,r.alternative=n,r}),dh(_f,function(e,t){if(Vp.has(this.operator))return this.expression.has_side_effects(e)?fp(this,ap):lp(this,ap),this;if("typeof"==this.operator&&this.expression instanceof ud)return null;var n=this.expression.drop_side_effect_free(e,t);return t&&n&&kp(n)?n===this.expression&&"!"==this.operator?this:n.negate(e,t):n}),dh(ud,function(e){return this.is_declared(e)||Np.has(this.name)?null:this}),dh(Cf,function(e,t){var n=ph(this.properties,e,t);return n&&pp(this,n)}),dh(Sf,function(e,t){const n=this.key instanceof tl&&this.key.drop_side_effect_free(e,t),r=this.value.drop_side_effect_free(e,t);return n&&r?pp(this,[n,r]):n||r}),dh([Rf,Ff,Pf],function(){return this.computed_key()?this.key:null}),dh([Nf,Tf,$f],function(){return null}),dh(Df,function(e,t){var n=ph(this.elements,e,t);return n&&pp(this,n)}),dh(mf,function(e,t){return Wp(this,e)?this.expression.drop_side_effect_free(e,t):!this.optional&&this.expression.may_throw_on_access(e)?this:this.expression.drop_side_effect_free(e,t)}),dh(vf,function(e,t){if(Wp(this,e))return this.expression.drop_side_effect_free(e,t);if(!this.optional&&this.expression.may_throw_on_access(e))return this;var n=this.property.drop_side_effect_free(e);if(n&&this.optional)return this;var r=this.expression.drop_side_effect_free(e,t);return r&&n?pp(this,[r,n]):r||n}),dh(yf,function(e,t){return this.expression.drop_side_effect_free(e,t)}),dh(pf,function(e){var t=this.tail_node(),n=t.drop_side_effect_free(e);if(n===t)return this;var r=this.expressions.slice(0,-1);return n&&r.push(n),r.length?pp(this,r):Ku(vd,this,{value:0})}),dh(El,function(e,t){return this.expression.drop_side_effect_free(e,t)}),dh(Pl,qu),dh(Tl,function(e){var t=ph(this.segments,e,Bd);return t&&pp(this,t)});const hh=/keep_assign/;function mh(e,t){e.DEFMETHOD("reduce_vars",t)}function gh(e,t){t.assignments=0,t.chained=!1,t.direct_access=!1,t.escaped=0,t.recursive_refs=0,t.references=[],t.single_use=void 0,t.scope.pinned()||t.orig[0]instanceof Qf&&t.scope.uses_arguments?t.fixed=!1:t.orig[0]instanceof Wf||!e.exposed(t)?t.fixed=t.init:t.fixed=!1}function vh(e,t,n){n.variables.forEach(function(n){gh(t,n),null===n.fixed?(e.defs_to_safe_ids.set(n.id,e.safe_ids),wh(e,n,!0)):n.fixed&&(e.loop_ids.set(n.id,e.in_loop),wh(e,n,!0))})}function yh(e,t){t.block_scope&&t.block_scope.variables.forEach(t=>{gh(e,t)})}function _h(e){e.safe_ids=Object.create(e.safe_ids)}function bh(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function wh(e,t,n){e.safe_ids[t.id]=n}function xh(e,t){if("m"==t.single_use)return!1;if(e.safe_ids[t.id]){if(null==t.fixed){var n=t.orig[0];if(n instanceof Qf||"arguments"==n.name)return!1;t.fixed=Ku(Ed,n)}return!0}return t.fixed instanceof Ol}function Eh(e,t,n,r){if(void 0===t.fixed)return!0;let i;return null===t.fixed&&(i=e.defs_to_safe_ids.get(t.id))?(i[t.id]=!1,e.defs_to_safe_ids.delete(t.id),!0):!!Xu(e.safe_ids,t.id)&&!!xh(e,t)&&!1!==t.fixed&&!(null!=t.fixed&&(!r||t.references.length>t.assignments))&&(t.fixed instanceof Ol?r instanceof tl&&t.fixed.parent_scope===n:t.orig.every(e=>!(e instanceof Wf||e instanceof Jf||e instanceof td)))}function kh(e,t,n,r,i,o=0,s=1){var a=e.parent(o);if(i){if(i.is_constant())return;if(i instanceof Uf)return}if(a instanceof kf&&("="===a.operator||a.logical)&&r===a.right||a instanceof ff&&(r!==a.expression||a instanceof df)||a instanceof Rl&&r===a.value&&r.scope!==t.scope||a instanceof rf&&r===a.value||a instanceof jl&&r===a.value&&r.scope!==t.scope)return!(s>1)||i&&i.is_constant_expression(n)||(s=1),void((!t.escaped||t.escaped>s)&&(t.escaped=s));if(a instanceof Df||a instanceof Bl||a instanceof xf&&Up.has(a.operator)||a instanceof Ef&&r!==a.condition||a instanceof El||a instanceof pf&&r===a.tail_node())kh(e,t,n,a,a,o+1,s);else if(a instanceof Sf&&r===a.value){var u=e.parent(o+1);kh(e,t,n,u,u,o+2,s)}else if(a instanceof hf&&r===a.expression&&(kh(e,t,n,a,i=_p(i,a.property),o+1,s+1),i))return;o>0||a instanceof pf&&r!==a.tail_node()||a instanceof ol||(t.direct_access=!0)}wl.DEFMETHOD("drop_unused",function(e){if(!e.option("unused"))return;if(e.has_directive("use asm"))return;if(!this.variables)return;var t=this;if(t.pinned())return;var n=!(t instanceof xl)||e.toplevel.funcs,r=!(t instanceof xl)||e.toplevel.vars;const i=hh.test(e.option("unused"))?ju:function(e){return e instanceof kf&&!e.logical&&(cp(e,ap)||"="==e.operator)?e.left:e instanceof _f&&cp(e,ap)?e.expression:void 0};var o=new Map,s=new Map;t instanceof xl&&e.top_retain&&t.variables.forEach(function(t){e.top_retain(t)&&o.set(t.id,t)});var a=new Map,u=new Map,c=this,l=new Pd(function(i,f){if(i instanceof kl&&i.uses_arguments&&!l.has_directive("use strict")&&i.argnames.forEach(function(e){if(e instanceof Hf){var t=e.definition();o.set(t.id,t)}}),i===t)return;if(i instanceof Lf&&i.has_side_effects(e)&&(i.is_self_referential()?f():i.visit_nondeferred_class_parts(l)),i instanceof Ol||i instanceof Bf){var p=i.name.definition();return(l.parent()instanceof lf||!n&&c===t)&&p.global&&o.set(p.id,p),Ju(u,p.id,i),!0}const h=c===t;if(i instanceof Qf&&h&&Ju(a,i.definition().id,i),i instanceof Jl&&h){const t=l.parent()instanceof lf;return i.definitions.forEach(function(n){if(n.name instanceof Kf&&Ju(a,n.name.definition().id,n),!t&&r||Sd(n.name,e=>{if(e instanceof Hf){const t=e.definition();t.global&&o.set(t.id,t)}}),n.name instanceof Sl&&n.walk(l),n.name instanceof Hf&&n.value){var i=n.name.definition();Ju(u,i.id,n.value),i.chained||n.name.fixed_value()!==n.value||s.set(i.id,n),n.value.has_side_effects(e)&&n.value.walk(l)}}),!0}return d(i,f)});t.walk(l),l=new Pd(d),o.forEach(function(e){var t=u.get(e.id);t&&t.forEach(function(e){e.walk(l)})});var f=new Fd(function(u,l,d){var p=f.parent();if(r){const t=i(u);if(t instanceof ud){var h=t.definition(),m=o.has(h.id);if(u instanceof kf){if(!m||s.has(h.id)&&s.get(h.id)!==u){const t=u.right.transform(f);return m||t.has_side_effects(e)||eh(f)?wp(p,u,t):d?Hu.skip:Ku(vd,u,{value:0})}}else if(!m)return d?Hu.skip:Ku(vd,u,{value:0})}}if(c===t){if(u.name&&(u instanceof Uf&&!ec(e.option("keep_classnames"),(h=u.name.definition()).name)||u instanceof Dl&&!ec(e.option("keep_fnames"),(h=u.name.definition()).name))&&(!o.has(h.id)||h.orig.length>1)&&(u.name=null),u instanceof kl&&!(u instanceof Al))for(var g=!e.option("keep_fargs")||p instanceof ff&&p.expression===u&&!u.pinned()&&(!u.name||u.name.unreferenced()),v=u.argnames,y=v.length;--y>=0;){var _=v[y];_ instanceof El&&(_=_.expression),_ instanceof Af&&(_=_.left),_ instanceof Sl||o.has(_.definition().id)?g=!1:(lp(_,1),g&&v.pop())}if(u instanceof Bf&&u!==t){const t=u.name.definition();if(l(u,this),!(t.global&&!n||o.has(t.id))){const n=u.drop_side_effect_free(e);return null==n?(t.eliminated++,d?Hu.skip:Ku(ll,u)):n}return u}if(u instanceof Ol&&u!==t){const e=u.name.definition();if(!(e.global&&!n||o.has(e.id)))return e.eliminated++,d?Hu.skip:Ku(ll,u)}if(u instanceof Jl&&!(p instanceof yl&&p.init===u)){var b=!(p instanceof xl||u instanceof Xl),w=[],x=[],E=[],k=[];switch(u.definitions.forEach(function(t){t.value&&(t.value=t.value.transform(f));var n=t.name instanceof Sl,i=n?new Qd(null,{name:"<destructure>"}):t.name.definition();if(b&&i.global)return E.push(t);if(!r&&!b||n&&(t.name.names.length||t.name.is_array||1!=e.option("pure_getters"))||o.has(i.id)){if(t.value&&s.has(i.id)&&s.get(i.id)!==t&&(t.value=t.value.drop_side_effect_free(e)),t.name instanceof Kf){var c=a.get(i.id);if(c.length>1&&(!t.value||i.orig.indexOf(t.name)>i.eliminated)){if(t.value){var l=Ku(ud,t.name,t.name);i.references.push(l);var d=Ku(kf,t,{operator:"=",logical:!1,left:l,right:t.value});s.get(i.id)===t&&s.set(i.id,d),k.push(d.transform(f))}return Gu(c,t),void i.eliminated++}}t.value?(k.length>0&&(E.length>0?(k.push(t.value),t.value=pp(t.value,k)):w.push(Ku(ol,u,{body:pp(u,k)})),k=[]),E.push(t)):x.push(t)}else if(i.orig[0]instanceof id)(p=t.value&&t.value.drop_side_effect_free(e))&&k.push(p),t.value=null,x.push(t);else{var p;(p=t.value&&t.value.drop_side_effect_free(e))&&k.push(p),i.eliminated++}}),(x.length>0||E.length>0)&&(u.definitions=x.concat(E),w.push(u)),k.length>0&&w.push(Ku(ol,u,{body:pp(u,k)})),w.length){case 0:return d?Hu.skip:Ku(ll,u);case 1:return w[0];default:return d?Hu.splice(w):Ku(cl,u,{body:w})}}if(u instanceof vl)return l(u,this),u.init instanceof cl&&(A=u.init,u.init=A.body.pop(),A.body.push(u)),u.init instanceof ol?u.init=u.init.body:Ap(u.init)&&(u.init=null),A?d?Hu.splice(A.body):A:u;if(u instanceof dl&&u.body instanceof vl){if(l(u,this),u.body instanceof cl){var A=u.body;return u.body=A.body.pop(),A.body.push(u),d?Hu.splice(A.body):A}return u}if(u instanceof cl)return l(u,this),d&&u.body.every(Sp)?Hu.splice(u.body):u;if(u instanceof wl&&!(u instanceof jf)){const e=c;return c=u,l(u,this),c=e,u}}},function(e,t){if(e instanceof pf)switch(e.expressions.length){case 0:return t?Hu.skip:Ku(vd,e,{value:0});case 1:return e.expressions[0]}});function d(e,n){var r;const a=i(e);if(a instanceof ud&&!Op(e.left,Zf)&&t.variables.get(a.name)===(r=a.definition()))return e instanceof kf&&(e.right.walk(l),r.chained||e.left.fixed_value()!==e.right||s.set(r.id,e)),!0;if(e instanceof ud){if(r=e.definition(),!o.has(r.id)&&(o.set(r.id,r),r.orig[0]instanceof id)){const e=r.scope.is_block_scope()&&r.scope.get_defun_scope().variables.get(r.name);e&&o.set(e.id,e)}return!0}if(e instanceof Lf)return n(),!0;if(e instanceof wl&&!(e instanceof jf)){var u=c;return c=e,n(),c=u,!0}}t.transform(f)}),mh(tl,Bu);const Ah=e=>Sd(e,e=>{if(e instanceof Vf){var t=e.definition();t&&(e instanceof ud&&t.references.push(e),t.fixed=!1)}});function Dh(e){const t=[];Sd(e,n=>{if(n!==e)return n instanceof Ol?(t.push(n),!0):n instanceof wl||n instanceof ol||void 0});const n=new Map,r=new Map,i=new Set,o=new Set;for(const s of t){const t=s.name.definition(),a=[];for(const r of s.enclosed)!1!==r.fixed&&r!==t&&r.scope.get_defun_scope()===e&&(i.add(r.id),0===r.assignments&&1===r.orig.length&&r.orig[0]instanceof Jf?(o.add(r.id),i.add(r.id),o.add(t.id),i.add(t.id),n.has(t.id)||n.set(t.id,[]),n.get(t.id).push(r.id)):a.push(r));a.length&&(r.set(t.id,a),o.add(t.id),i.add(t.id))}if(!r.size)return;let s=1;const a=new Map,u=new Map;$d(e,(e,t)=>{if(e instanceof Vf&&e.thedef){const n=e.definition().id;s++,i.has(n)&&(e instanceof Hf||Yp(e,t.parent()))&&u.set(n,s),o.has(n)&&(a.has(n)||Pp(t,n)||a.set(n,s))}});for(const[e,t]of a){const r=new Set(n.get(e));for(const e of r){let i=a.get(e);if(!(null!=i&&i<t)){a.set(e,t);for(const t of n.get(e)||[])r.add(t)}}}for(const[e,t]of r){const n=a.get(e);if(void 0!==n)for(const e of t)!1!==e.fixed&&n<(u.get(e.id)||0)&&(e.fixed=!1)}}function Ch(e){return e instanceof pl&&e.body instanceof cl?e.body:e}function Oh(e){if(e instanceof pd)return!0;if(e instanceof ud)return e.definition().orig[0]instanceof td;if(e instanceof hf){if((e=e.expression)instanceof ud){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||!(e instanceof _d)&&(e instanceof md||Oh(e))}return!1}function Sh(e,t,n){Sd(t,r=>{if(r instanceof Xl){const e=(o=[],(i=r).definitions.forEach(function(e){e.name instanceof Hf?(e.value=null,o.push(e)):e.declarations_as_names().forEach(t=>{o.push(Ku(of,e,{name:t,value:null}))})}),o.length?Ku(Xl,i,{definitions:o}):null);return e&&n.push(e),!0}var i,o;return r instanceof Ol&&(r===t||!e.has_directive("use strict"))?(n.push(r===t?r:Ku(Xl,r,{definitions:[Ku(of,r,{name:Ku(Kf,r.name,r.name),value:null})]})),!0):r instanceof lf||r instanceof uf?(n.push(r),!0):r instanceof wl||r instanceof Lf||void 0})}function $h(e,t){const n=t.find_scope(),r=n.get_defun_scope(),{in_loop:i,in_try:o}=function(){var e=t.self(),n=0,r=!1,i=!1;do{if(e instanceof pl)r=!0;else{if(e instanceof wl)break;e instanceof Wl&&(i=!0)}}while(e=t.parent(n++));return{in_loop:r,in_try:i}}();var s,a=10;do{s=!1,c(e),t.option("dead_code")&&f(e,t),t.option("if_return")&&l(e,t),t.sequences_limit>0&&(p(e,t),m(e,t)),t.option("join_vars")&&v(e),t.option("collapse_vars")&&u(e,t)}while(s&&a-- >0);function u(e,t){if(n.pinned()||r.pinned())return e;for(var a,u=[],c=e.length,l=new Fd(function(e){if(D)return e;if(!A)return e!==d[p]?e:++p<d.length?T(e):(A=!0,(g=L(e,0))===e&&(D=!0),e);var r,i=l.parent();if(e instanceof kf&&(e.logical||"="!=e.operator&&y.equivalent_to(e.left))||e instanceof Bl||e instanceof nf||e instanceof ff&&y instanceof hf&&y.equivalent_to(e.expression)||(e instanceof ff||e instanceof hf)&&e.optional||e instanceof rl||e instanceof Sl||e instanceof El&&e.expression instanceof Vf&&(e.expression instanceof pd||e.expression.definition().references.length>1)||e instanceof pl&&!(e instanceof vl)||e instanceof Il||e instanceof Zl||e instanceof bl||e instanceof jl||e instanceof lf||e instanceof Lf||i instanceof vl&&e!==i.init||!x&&e instanceof ud&&!e.is_declared(t)&&!Np.has(e)||e instanceof ud&&i instanceof ff&&oc(i,Ld)||e instanceof Of&&e.key instanceof tl)return D=!0,e;if(v||b&&x||!(i instanceof xf&&Up.has(i.operator)&&i.left!==e||i instanceof Ef&&i.condition!==e||i instanceof Ul&&i.condition!==e)||(v=i),O&&!(e instanceof Hf)&&y.equivalent_to(e)&&!function(e,t){for(const{def:n}of t.values()){const t=e.find_variable(n.name);if(t){if(t===n)continue;return!0}}return!1}(l.find_scope()||n,_)){if(v)return D=!0,e;if(Yp(e,i))return m&&C++,e;if(C++,m&&h instanceof of)return e;if(s=D=!0,h instanceof wf)return Ku(bf,h,h);if(h instanceof of){var a=h.name.definition(),u=h.value;return a.references.length-a.replaced!=1||t.exposed(a)?Ku(kf,h,{operator:"=",logical:!1,left:Ku(ud,h.name,h.name),right:u}):(a.replaced++,k&&Cp(u)?u.transform(t):wp(i,e,u))}return fp(h,ap),h}return(e instanceof ff||e instanceof Rl&&(w||y instanceof hf||q(y))||e instanceof hf&&(w||e.expression.may_throw_on_access(t))||e instanceof ud&&(_.has(e.name)&&_.get(e.name).modified||w&&q(e))||e instanceof of&&e.value&&(_.has(e.name.name)||w&&q(e.name))||e instanceof nf||(r=Yp(e.left,e))&&(r instanceof hf||_.has(r.name))||E&&(o?e.has_side_effects(t):H(e)))&&(g=e,e instanceof wl&&(D=!0)),T(e)},function(e){D||(g===e&&(D=!0),v===e&&(v=null))}),f=new Fd(function(e){if(D)return e;if(!A){if(e!==d[p])return e;if(++p<d.length)return;return A=!0,e}return e instanceof ud&&e.name==$.name?(--C||(D=!0),Yp(e,f.parent())?e:($.replaced++,m.replaced--,h.value)):e instanceof Hl||e instanceof wl?e:void 0});--c>=0;){0==c&&t.option("unused")&&R();var d=[];for(N(e[c]);u.length>0;){d=u.pop();var p=0,h=d[d.length-1],m=null,g=null,v=null,y=I(h);if(y&&!Oh(y)&&!y.has_side_effects(t)){var _=z(h),b=j(y);y instanceof ud&&_.set(y.name,{def:y.definition(),modified:!1});var w=U(h),x=V(),E=h.may_throw(t),k=h.name instanceof Qf,A=k,D=!1,C=0,O=!a||!A;if(!O){for(let e=t.self().argnames.lastIndexOf(h.name)+1;!D&&e<a.length;e++)a[e].transform(l);O=!0}for(var S=c;!D&&S<e.length;S++)e[S].transform(l);if(m){var $=h.name.definition();if(D&&$.references.length-$.replaced>C)C=!1;else{for(D=!1,p=0,A=k,S=c;!D&&S<e.length;S++)e[S].transform(f);m.single_use=!1}}C&&!B(h)&&e.splice(c,1)}}}function T(e){if(e instanceof wl)return e;if(e instanceof Vl){e.expression=e.expression.transform(l);for(var t=0,n=e.body.length;!D&&t<n;t++){var r=e.body[t];if(r instanceof Kl){if(!A){if(r!==d[p])continue;p++}if(r.expression=r.expression.transform(l),!x)break}}return D=!0,e}}function P(e,t,n){var i=!1,o=!(e instanceof Cl);return t.walk(new Pd(function(t,s){if(i)return!0;if(t instanceof ud&&(e.variables.has(t.name)||function(e,t){if(e.global)return!1;let n=e.scope;for(;n&&n!==t;){if(n.variables.has(e.name))return!0;n=n.parent_scope}return!1}(t.definition(),e))){var a=t.definition().scope;if(a!==r)for(;a=a.parent_scope;)if(a===r)return!0;return i=!0}if((n||o)&&t instanceof pd)return i=!0;if(t instanceof wl&&!(t instanceof Cl)){var u=o;return o=!1,s(),o=u,!0}})),i}function F(e){return!(e instanceof El)&&!Sd(e,e=>{if(e instanceof Bl)return Td})}function R(){var e,n=t.self();if(Ep(n)&&!n.name&&!n.uses_arguments&&!n.pinned()&&(e=t.parent())instanceof ff&&e.expression===n&&e.args.every(F)){var r=t.has_directive("use strict");r&&!Iu(r,n.body)&&(r=!1);var i=n.argnames.length;a=e.args.slice(i);for(var o=new Set,s=i;--s>=0;){var c=n.argnames[s],l=e.args[s];const i=c.definition&&c.definition();if(!(i&&i.orig.length>1||(a.unshift(Ku(of,c,{name:c,value:l})),o.has(c.name))))if(o.add(c.name),c instanceof El){var f=e.args.slice(s);f.every(e=>!P(n,e,r))&&u.unshift([Ku(of,c,{name:c.expression,value:Ku(Df,e,{elements:f})})])}else l?(l instanceof kl&&l.pinned()||P(n,l,r))&&(l=null):l=Ku(Ed,c).transform(t),l&&u.unshift([Ku(of,c,{name:c,value:l})])}}}function N(e){if(d.push(e),e instanceof kf)e.left.has_side_effects(t)||e.right instanceof yf||u.push(d.slice()),N(e.right);else if(e instanceof xf)N(e.left),N(e.right);else if(e instanceof ff&&!oc(e,Ld))N(e.expression),e.args.forEach(N);else if(e instanceof Kl)N(e.expression);else if(e instanceof Ef)N(e.condition),N(e.consequent),N(e.alternative);else if(e instanceof Jl){var n=e.definitions.length,r=n-200;for(r<0&&(r=0);r<n;r++)N(e.definitions[r])}else e instanceof hl?(N(e.condition),e.body instanceof ul||N(e.body)):e instanceof Rl?e.value&&N(e.value):e instanceof vl?(e.init&&N(e.init),e.condition&&N(e.condition),e.step&&N(e.step),e.body instanceof ul||N(e.body)):e instanceof yl?(N(e.object),e.body instanceof ul||N(e.body)):e instanceof Ul?(N(e.condition),e.body instanceof ul||N(e.body),!e.alternative||e.alternative instanceof ul||N(e.alternative)):e instanceof pf?e.expressions.forEach(N):e instanceof ol?N(e.body):e instanceof Vl?(N(e.expression),e.body.forEach(N)):e instanceof _f?"++"!=e.operator&&"--"!=e.operator||u.push(d.slice()):e instanceof of&&(!e.value||e.value instanceof yf||(u.push(d.slice()),N(e.value)));d.pop()}function L(e,t,n){var r=l.parent(t);return r instanceof kf?!n||r.logical||r.left instanceof hf||_.has(r.left.name)?e:L(r,t+1,n):r instanceof xf?!n||Up.has(r.operator)&&r.left!==e?e:L(r,t+1,n):r instanceof ff||r instanceof Kl?e:r instanceof Ef?n&&r.condition===e?L(r,t+1,n):e:r instanceof Jl?L(r,t+1,!0):r instanceof Rl?n?L(r,t+1,n):e:r instanceof Ul?n&&r.condition===e?L(r,t+1,n):e:r instanceof pl?e:r instanceof pf?L(r,t+1,r.tail_node()!==e):r instanceof ol?L(r,t+1,!0):r instanceof Vl||r instanceof of?e:null}function I(e){if(e instanceof kf&&e.logical)return!1;if(!(e instanceof of&&e.name instanceof Hf)){const t=e instanceof kf?e.left:e.expression;return!Op(t,Wf)&&!Op(t,Yf)&&!Op(t,Gf)&&t}var n=e.name.definition();if(Iu(e.name,n.orig)){var r=n.references.length-n.replaced;if(r)return n.orig.length-n.eliminated>1&&!(e.name instanceof Qf)||(r>1?function(e){var t=e.value;if(t instanceof ud&&"arguments"!=t.name){var n=t.definition();if(!n.undeclared)return m=n}}(e):!t.exposed(n))?Ku(ud,e.name,e.name):void 0}}function M(e){return e instanceof kf?e.right:e.value}function z(e){var n=new Map;if(e instanceof _f)return n;var r=new Pd(function(e){for(var i=e;i instanceof hf;)i=i.expression;if(i instanceof ud){const o=n.get(i.name);o&&o.modified||n.set(i.name,{def:i.definition(),modified:Xp(t,r,e,e,0)})}});return M(e).walk(r),n}function B(n){if(n.name instanceof Qf){var r=t.parent(),i=t.self().argnames,o=i.indexOf(n.name);if(o<0)r.args.length=Math.min(r.args.length,i.length-1);else{var s=r.args;s[o]&&(s[o]=Ku(vd,s[o],{value:0}))}return!0}var a=!1;return e[c].transform(new Fd(function(e,t,r){return a?e:e===n||e.body===n?(a=!0,e instanceof of?(e.value=e.name instanceof Wf?Ku(Ed,e.value):null,e):r?Hu.skip:null):void 0},function(e){if(e instanceof pf)switch(e.expressions.length){case 0:return null;case 1:return e.expressions[0]}}))}function j(e){for(;e instanceof hf;)e=e.expression;return e instanceof ud&&e.definition().scope.get_defun_scope()===r&&!(i&&(_.has(e.name)||h instanceof _f||h instanceof kf&&!h.logical&&"="!=h.operator))}function U(e){return e instanceof _f?Vp.has(e.operator):M(e).has_side_effects(t)}function V(){if(w)return!1;if(m)return!0;if(y instanceof ud){var e=y.definition();if(e.references.length-e.replaced==(h instanceof of?1:2))return!0}return!1}function q(e){if(!e.definition)return!0;var t=e.definition();return!(1==t.orig.length&&t.orig[0]instanceof Jf)&&(t.scope.get_defun_scope()!==r||t.references.some(e=>e.scope.get_defun_scope()!==r))}function H(e,t){if(e instanceof kf)return H(e.left,!0);if(e instanceof _f)return H(e.expression,!0);if(e instanceof of)return e.value&&H(e.value);if(t){if(e instanceof mf)return H(e.expression,!0);if(e instanceof vf)return H(e.expression,!0);if(e instanceof ud)return e.definition().scope.get_defun_scope()!==r}return!1}}function c(e){for(var t=[],n=0;n<e.length;){var r=e[n];r instanceof cl&&r.body.every(Sp)?(s=!0,c(r.body),e.splice(n,1,...r.body),n+=r.body.length):r instanceof ll?(s=!0,e.splice(n,1)):r instanceof il?t.indexOf(r.value)<0?(n++,t.push(r.value)):(s=!0,e.splice(n,1)):n++}}function l(e,t){for(var n=t.self(),r=function(e){for(var t=0,n=e.length;--n>=0;){var r=e[n];if(r instanceof Ul&&r.body instanceof Nl&&++t>1)return!0}return!1}(e),i=n instanceof kl,o=Math.min(e.length,500);--o>=0;){var a=e[o],u=g(o),c=e[u];if(i&&!c&&a instanceof Nl){if(!a.value){s=!0,e.splice(o,1);continue}if(a.value instanceof bf&&"void"==a.value.operator){s=!0,e[o]=Ku(ol,a,{body:a.value.expression});continue}}if(a instanceof Ul){let n,r;if(n=Jp(a.body),p(n)&&(r=m(a.body,n))){n.label&&Gu(n.label.thedef.references,n),s=!0,(a=a.clone()).condition=a.condition.negate(t),a.body=Ku(cl,a,{body:$p(a.alternative).concat(h())}),a.alternative=Ku(cl,a,{body:r}),e[o]=a.transform(t);continue}if(n=Jp(a.alternative),p(n)&&(r=m(a.alternative,n))){n.label&&Gu(n.label.thedef.references,n),s=!0,(a=a.clone()).body=Ku(cl,a.body,{body:$p(a.body).concat(h())}),a.alternative=Ku(cl,a.alternative,{body:r}),e[o]=a.transform(t);continue}}if(a instanceof Ul&&a.body instanceof Nl){var l=a.body.value;if(!l&&!a.alternative&&(i&&!c||c instanceof Nl&&!c.value)){s=!0,e[o]=Ku(ol,a.condition,{body:a.condition});continue}if(l&&!a.alternative&&c instanceof Nl&&c.value){s=!0,(a=a.clone()).alternative=c,e[o]=a.transform(t),e.splice(u,1);continue}if(l&&!a.alternative&&(!c&&i&&r||c instanceof Nl)){s=!0,(a=a.clone()).alternative=c||Ku(Nl,a,{value:null}),e[o]=a.transform(t),c&&e.splice(u,1);continue}var f=e[v(o)];if(t.option("sequences")&&i&&!a.alternative&&f instanceof Ul&&f.body instanceof Nl&&g(u)==e.length&&c instanceof ol){s=!0,(a=a.clone()).alternative=Ku(cl,c,{body:[c,Ku(Nl,c,{value:null})]}),e[o]=a.transform(t),e.splice(u,1);continue}}}function p(r){if(!r)return!1;for(var s=o+1,a=e.length;s<a;s++){var u=e[s];if(u instanceof Ql&&!(u instanceof Xl))return!1}var c=r instanceof Il?t.loopcontrol_target(r):null;return r instanceof Nl&&i&&function(e){return!e||e instanceof bf&&"void"==e.operator}(r.value)||r instanceof zl&&n===Ch(c)||r instanceof Ml&&c instanceof cl&&n===c}function h(){var t=e.slice(o+1);return e.length=o+1,t.filter(function(t){return!(t instanceof Ol&&(e.push(t),1))})}function m(e,t){var n=$p(e);if(t===n[n.length-1]&&(n=n.slice(0,-1)).every(e=>Sp(e)))return t.value&&n.push(Ku(ol,t.value,{body:t.value.expression})),n}function g(t){for(var n=t+1,r=e.length;n<r;n++){var i=e[n];if(!(i instanceof Xl&&d(i)))break}return n}function v(t){for(var n=t;--n>=0;){var r=e[n];if(!(r instanceof Xl&&d(r)))break}return n}}function f(e,t){for(var n,r=t.self(),i=0,o=0,a=e.length;i<a;i++){var u=e[i];if(u instanceof Il){var c=t.loopcontrol_target(u);u instanceof Ml&&!(c instanceof pl)&&Ch(c)===r||u instanceof zl&&Ch(c)===r?u.label&&Gu(u.label.thedef.references,u):e[o++]=u}else e[o++]=u;if(Jp(u)){n=e.slice(i+1);break}}e.length=o,s=o!=a,n&&n.forEach(function(n){Sh(t,n,e)})}function d(e){return e.definitions.every(e=>!e.value)}function p(e,t){if(!(e.length<2)){for(var n=[],r=0,i=0,o=e.length;i<o;i++){var a=e[i];if(a instanceof ol){n.length>=t.sequences_limit&&c();var u=a.body;n.length>0&&(u=u.drop_side_effect_free(t)),u&&dp(n,u)}else a instanceof Jl&&d(a)||a instanceof Ol||c(),e[r++]=a}c(),e.length=r,r!=o&&(s=!0)}function c(){if(n.length){var t=pp(n[0],n);e[r++]=Ku(ol,t,{body:t}),n=[]}}}function h(e,t){if(!(e instanceof cl))return e;for(var n=null,r=0,i=e.body.length;r<i;r++){var o=e.body[r];if(o instanceof Xl&&d(o))t.push(o);else{if(n||o instanceof Ql&&!(o instanceof Xl))return!1;n=o}}return n}function m(e,t){function n(e){i--,s=!0;var n=r.body;return pp(n,[n,e]).transform(t)}for(var r,i=0,o=0;o<e.length;o++){var a=e[o];if(r&&(a instanceof Rl?a.value=n(a.value||Ku(Ed,a).transform(t)):a instanceof vl?a.init instanceof Ql||Sd(r.body,e=>e instanceof wl||(e instanceof xf&&"in"===e.operator?Td:void 0))||(a.init?a.init=n(a.init):(a.init=r.body,i--,s=!0)):a instanceof yl?a.init instanceof Ql&&!(a.init instanceof Xl)||(a.object=n(a.object)):a instanceof Ul?a.condition=n(a.condition):(a instanceof Vl||a instanceof bl)&&(a.expression=n(a.expression))),t.option("conditionals")&&a instanceof Ul){var u=[],c=h(a.body,u),l=h(a.alternative,u);if(!1!==c&&!1!==l&&u.length>0){var f=u.length;u.push(Ku(Ul,a,{condition:a.condition,body:c||Ku(ll,a.body),alternative:l})),u.unshift(i,1),[].splice.apply(e,u),o+=f,i+=f+1,r=null,s=!0;continue}}e[i++]=a,r=a instanceof ol?a:null}e.length=i}function g(e,r){if(e instanceof Jl){var i,o=e.definitions[e.definitions.length-1];if(o.value instanceof Cf&&(r instanceof kf&&!r.logical?i=[r]:r instanceof pf&&(i=r.expressions.slice()),i)){var s=!1;do{var a=i[0];if(!(a instanceof kf))break;if("="!=a.operator)break;if(!(a.left instanceof hf))break;var u=a.left.expression;if(!(u instanceof ud))break;if(o.name.name!=u.name)break;if(!a.right.is_constant_expression(n))break;var c=a.left.property;if(c instanceof tl&&(c=c.evaluate(t)),c instanceof tl)break;c=""+c;var l=t.option("ecma")<2015&&t.has_directive("use strict")?function(e){return e.key!=c&&e.key&&e.key.name!=c}:function(e){return e.key&&e.key.name!=c};if(!o.value.properties.every(l))break;var f=o.value.properties.filter(function(e){return e.key===c})[0];f?f.value=new pf({start:f.start,expressions:[f.value.clone(),a.right.clone()],end:f.end}):o.value.properties.push(Ku(Sf,a,{key:c,value:a.right})),i.shift(),s=!0}while(i.length);return s&&i}}}function v(e){for(var t,n=0,r=-1,i=e.length;n<i;n++){var o=e[n],a=e[r];if(o instanceof Jl)a&&a.TYPE==o.TYPE?(a.definitions=a.definitions.concat(o.definitions),s=!0):t&&t.TYPE==o.TYPE&&d(o)?(t.definitions=t.definitions.concat(o.definitions),s=!0):(e[++r]=o,t=o);else if(o instanceof nf&&a instanceof nf&&a.await===o.await)a.definitions=a.definitions.concat(o.definitions);else if(o instanceof Rl)o.value=c(o.value);else if(o instanceof vl)(u=g(a,o.init))?(s=!0,o.init=u.length?pp(o.init,u):null,e[++r]=o):a instanceof Xl&&(!o.init||o.init.TYPE==a.TYPE)?(o.init&&(a.definitions=a.definitions.concat(o.init.definitions)),o.init=a,e[r]=o,s=!0):t instanceof Xl&&o.init instanceof Xl&&d(o.init)?(t.definitions=t.definitions.concat(o.init.definitions),o.init=null,e[++r]=o,s=!0):e[++r]=o;else if(o instanceof yl)o.object=c(o.object);else if(o instanceof Ul)o.condition=c(o.condition);else if(o instanceof ol){var u;if(u=g(a,o.body)){if(s=!0,!u.length)continue;o.body=pp(o.body,u)}e[++r]=o}else o instanceof Vl||o instanceof bl?o.expression=c(o.expression):e[++r]=o}function c(t){e[++r]=o;var n=g(a,t);return n?(s=!0,n.length?pp(t,n):t instanceof pf?t.tail_node().left:t.left):t}e.length=r+1}}function Th(e,t){for(const n of t.enclosed){if(t.variables.has(n.name))continue;const r=e.find_variable(n.name);if(r){if(r===n)continue;return!0}}return!1}function Ph(e,t){return(t instanceof kl||t instanceof Lf)&&!!e.is_within_loop()}mh(Al,function(e,t,n){return _h(e),vh(e,n,this),t(),bh(e),!0}),mh(kf,function(e,t,n){var r=this;if(r.left instanceof Sl)return void Ah(r.left);const i=()=>{if(r.logical)return r.left.walk(e),_h(e),r.right.walk(e),bh(e),!0};var o=r.left;if(!(o instanceof ud))return i();var s=o.definition(),a=Eh(e,s,o.scope,r.right);if(s.assignments++,!a)return i();var u=s.fixed;if(!u&&"="!=r.operator&&!r.logical)return i();var c="="==r.operator,l=c?r.right:r;return Xp(n,e,r,l,0)?i():(s.references.push(o),r.logical||(c||(s.chained=!0),s.fixed=c?function(){return r.right}:function(){return Ku(xf,r,{operator:r.operator.slice(0,-1),left:u instanceof tl?u:u(),right:r.right})}),r.logical?(wh(e,s,!1),_h(e),r.right.walk(e),bh(e),!0):(wh(e,s,!1),r.right.walk(e),wh(e,s,!0),kh(e,s,o.scope,r,l,0,1),!0))}),mh(xf,function(e){if(Up.has(this.operator))return this.left.walk(e),_h(e),this.right.walk(e),bh(e),!0}),mh(ul,function(e,t,n){yh(n,this)}),mh(Kl,function(e){return _h(e),this.expression.walk(e),bh(e),_h(e),sl(this,e),bh(e),!0}),mh(Lf,function(e,t){return fp(this,16),_h(e),t(),bh(e),!0}),mh(jf,function(e,t,n){yh(n,this)}),mh(Ef,function(e){return this.condition.walk(e),_h(e),this.consequent.walk(e),bh(e),_h(e),this.alternative.walk(e),bh(e),!0}),mh(yf,function(e,t){const n=e.safe_ids;return t(),e.safe_ids=n,!0}),mh(ff,function(e){this.expression.walk(e),this.optional&&_h(e);for(const t of this.args)t.walk(e);return!0}),mh(hf,function(e){if(this.optional)return this.expression.walk(e),_h(e),this.property instanceof tl&&this.property.walk(e),!0}),mh(Hl,function(e,t){return _h(e),t(),bh(e),!0}),mh(kl,function(e,t,n){var r;return fp(this,16),_h(e),vh(e,n,this),!this.name&&!this.uses_arguments&&!this.pinned()&&(r=e.parent())instanceof ff&&r.expression===this&&!r.args.some(e=>e instanceof El)&&this.argnames.every(e=>e instanceof Vf)&&this.argnames.forEach((t,n)=>{if(t.definition){var i=t.definition();i.orig.length>1||(void 0!==i.fixed||this.uses_arguments&&!e.has_directive("use strict")?i.fixed=!1:(i.fixed=function(){return r.args[n]||Ku(Ed,r)},e.loop_ids.set(i.id,e.in_loop),wh(e,i,!0)))}}),t(),bh(e),Dh(this),!0}),mh(ml,function(e,t,n){yh(n,this);const r=e.in_loop;return e.in_loop=this,_h(e),this.body.walk(e),bp(this)&&(bh(e),_h(e)),this.condition.walk(e),bh(e),e.in_loop=r,!0}),mh(vl,function(e,t,n){yh(n,this),this.init&&this.init.walk(e);const r=e.in_loop;return e.in_loop=this,_h(e),this.condition&&this.condition.walk(e),this.body.walk(e),this.step&&(bp(this)&&(bh(e),_h(e)),this.step.walk(e)),bh(e),e.in_loop=r,!0}),mh(yl,function(e,t,n){yh(n,this),Ah(this.init),this.object.walk(e);const r=e.in_loop;return e.in_loop=this,_h(e),this.body.walk(e),bh(e),e.in_loop=r,!0}),mh(Ul,function(e){return this.condition.walk(e),_h(e),this.body.walk(e),bh(e),this.alternative&&(_h(e),this.alternative.walk(e),bh(e)),!0}),mh(dl,function(e){return _h(e),this.body.walk(e),bh(e),!0}),mh(id,function(){this.definition().fixed=!1}),mh(ud,function(e,t,n){var r,i,o=this.definition();o.references.push(this),1==o.references.length&&!o.fixed&&o.orig[0]instanceof Jf&&e.loop_ids.set(o.id,e.in_loop),void 0!==o.fixed&&xh(e,o)?o.fixed&&((r=this.fixed_value())instanceof kl&&Pp(e,o)?o.recursive_refs++:r&&!n.exposed(o)&&function(e,t,n){return t.option("unused")&&!n.scope.pinned()&&n.references.length-n.recursive_refs==1&&e.loop_ids.get(n.id)===e.in_loop}(e,n,o)?o.single_use=r instanceof kl&&!r.pinned()||r instanceof Lf||o.scope===this.scope&&r.is_constant_expression():o.single_use=!1,Xp(n,e,this,r,0,!!(i=r)&&(i.is_constant()||i instanceof kl||i instanceof pd))&&(o.single_use?o.single_use="m":o.fixed=!1)):o.fixed=!1,kh(e,o,this.scope,this,r,0,1)}),mh(xl,function(e,t,n){return this.globals.forEach(function(e){gh(n,e)}),vh(e,n,this),t(),Dh(this),!0}),mh(Zl,function(e,t,n){return yh(n,this),_h(e),this.body.walk(e),bh(e),this.bcatch&&(_h(e),this.bcatch.walk(e),bh(e)),this.bfinally&&this.bfinally.walk(e),!0}),mh(_f,function(e){var t=this;if("++"===t.operator||"--"===t.operator){var n=t.expression;if(n instanceof ud){var r=n.definition(),i=Eh(e,r,n.scope,!0);if(r.assignments++,i){var o=r.fixed;if(o)return r.references.push(n),r.chained=!0,r.fixed=function(){return Ku(xf,t,{operator:t.operator.slice(0,-1),left:Ku(bf,t,{operator:"+",expression:o instanceof tl?o:o()}),right:Ku(vd,t,{value:1})})},wh(e,r,!0),!0}}}}),mh(of,function(e,t){var n=this;if(n.name instanceof Sl)Ah(n.name);else{var r=n.name.definition();if(n.value){if(Eh(e,r,n.name.scope,n.value))return r.fixed=function(){return n.value},e.loop_ids.set(r.id,e.in_loop),wh(e,r,!1),t(),wh(e,r,!0),!0;r.fixed=!1}}}),mh(sf,function(){Ah(this.name)}),mh(gl,function(e,t,n){yh(n,this);const r=e.in_loop;return e.in_loop=this,_h(e),t(),bh(e),e.in_loop=r,!0}),function(e){function t(e,n){if(e instanceof tl)return e instanceof md||(e=e.clone(!0)),Ku(e.CTOR,n,e);if(Array.isArray(e))return Ku(Df,n,{elements:e.map(function(e){return t(e,n)})});if(e&&"object"==typeof e){var r=[];for(var i in e)Xu(e,i)&&r.push(Ku(Sf,n,{key:i,value:t(e[i],n)}));return Ku(Cf,n,{properties:r})}return mp(e,n)}xl.DEFMETHOD("resolve_defines",function(e){return e.option("global_defs")?(this.figure_out_scope({ie8:e.option("ie8")}),this.transform(new Fd(function(t){var n=t._find_defs(e,"");if(n){for(var r,i=0,o=t;(r=this.parent(i++))&&r instanceof hf&&r.expression===o;)o=r;if(!Yp(o,r))return n}}))):this}),e(tl,Bu),e(yf,function(e,t){return this.expression._find_defs(e,t)}),e(mf,function(e,t){return this.expression._find_defs(e,"."+this.property+t)}),e(Hf,function(){this.global()}),e(ud,function(e,n){if(this.global()){var r=e.option("global_defs"),i=this.name+n;return Xu(r,i)?t(r[i],this):void 0}}),e(cf,function(e,n){var r=e.option("global_defs"),i="import.meta"+n;if(Xu(r,i))return t(r[i],this)})}(function(e,t){e.DEFMETHOD("_find_defs",t)});class Fh extends Pd{constructor(e,{false_by_default:t=!1,mangle_options:n=!1}){super(),void 0===e.defaults||e.defaults||(t=!0),this.options=zu(e,{arguments:!1,arrows:!t,booleans:!t,booleans_as_integers:!1,collapse_vars:!t,comparisons:!t,computed_props:!t,conditionals:!t,dead_code:!t,defaults:!0,directives:!t,drop_console:!1,drop_debugger:!t,ecma:5,evaluate:!t,expression:!1,global_defs:!1,hoist_funs:!1,hoist_props:!t,hoist_vars:!1,ie8:!1,if_return:!t,inline:!t,join_vars:!t,keep_classnames:!1,keep_fargs:!0,keep_fnames:!1,keep_infinity:!1,lhs_constants:!t,loops:!t,module:!1,negate_iife:!t,passes:1,properties:!t,pure_getters:!t&&"strict",pure_funcs:null,pure_new:!1,reduce_funcs:!t,reduce_vars:!t,sequences:!t,side_effects:!t,switches:!t,top_retain:null,toplevel:!(!e||!e.top_retain),typeofs:!t,unsafe:!1,unsafe_arrows:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_symbols:!1,unsafe_methods:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!t,warnings:!1},!0);var r=this.options.global_defs;if("object"==typeof r)for(var i in r)"@"===i[0]&&Xu(r,i)&&(r[i.slice(1)]=Yc(r[i],{expression:!0}));!0===this.options.inline&&(this.options.inline=3);var o=this.options.pure_funcs;this.pure_funcs="function"==typeof o?o:o?function(e){return!o.includes(e.expression.print_to_string())}:Uu;var s=this.options.top_retain;s instanceof RegExp?this.top_retain=function(e){return s.test(e.name)}:"function"==typeof s?this.top_retain=s:s&&("string"==typeof s&&(s=s.split(/,/)),this.top_retain=function(e){return s.includes(e.name)}),this.options.module&&(this.directives["use strict"]=!0,this.options.toplevel=!0);var a=this.options.toplevel;this.toplevel="string"==typeof a?{funcs:/funcs/.test(a),vars:/vars/.test(a)}:{funcs:a,vars:a};var u=this.options.sequences;this.sequences_limit=1==u?800:0|u,this.evaluated_regexps=new Map,this._toplevel=void 0,this._mangle_options=n?ep(n):n}mangle_options(){var e=this._mangle_options&&this._mangle_options.nth_identifier||tp,t=this._mangle_options&&this._mangle_options.module||this.option("module");return{ie8:this.option("ie8"),nth_identifier:e,module:t}}option(e){return this.options[e]}exposed(e){if(e.export)return!0;if(e.global)for(var t=0,n=e.orig.length;t<n;t++)if(!this.toplevel[e.orig[t]instanceof Jf?"funcs":"vars"])return!0;return!1}in_boolean_context(){if(!this.option("booleans"))return!1;for(var e,t=this.self(),n=0;e=this.parent(n);n++){if(e instanceof ol||e instanceof Ef&&e.condition===t||e instanceof hl&&e.condition===t||e instanceof vl&&e.condition===t||e instanceof Ul&&e.condition===t||e instanceof bf&&"!"==e.operator&&e.expression===t)return!0;if(!(e instanceof xf&&("&&"==e.operator||"||"==e.operator||"??"==e.operator)||e instanceof Ef||e.tail_node()===t))return!1;t=e}}in_32_bit_context(e){if(!this.option("evaluate"))return!1;for(var t,n=this.self(),r=0;t=this.parent(r);r++){if(t instanceof xf&&jp.has(t.operator))return!e||(n===t.left?t.right:t.left).is_number(this);if(t instanceof bf)return"~"===t.operator;if(!(t instanceof xf&&("&&"==t.operator&&t.right===n||"||"==t.operator&&t.right===n||"??"==t.operator&&t.right===n)||t instanceof Ef&&t.condition!==n||t.tail_node()===n))return!1;n=t}}in_computed_key(){if(!this.option("evaluate"))return!1;for(var e,t=this.self(),n=0;e=this.parent(n);n++)if(e instanceof Of&&e.key===t)return!0;return!1}get_toplevel(){return this._toplevel}compress(e){e=e.resolve_defines(this),this._toplevel=e,this.option("expression")&&this._toplevel.process_expression(!0);for(var t=+this.options.passes||1,n=1/0,r=!1,i=this.mangle_options(),o=0;o<t;o++)if(this._toplevel.figure_out_scope(i),0===o&&this.option("drop_console")&&(this._toplevel=this._toplevel.drop_console(this.option("drop_console"))),(o>0||this.option("reduce_vars"))&&this._toplevel.reset_opt_flags(this),this._toplevel=this._toplevel.transform(this),t>1){let e=0;if(Sd(this._toplevel,()=>{e++}),e<n)n=e,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&this._toplevel.process_expression(!1),e=this._toplevel,this._toplevel=void 0,e}before(e,t){if(cp(e,up))return e;var n=!1;e instanceof wl&&(e=(e=e.hoist_properties(this)).hoist_declarations(this),n=!0),t(e,this),t(e,this);var r=e.optimize(this);return n&&r instanceof wl&&(r.drop_unused(this),t(r,this)),r===e&&lp(r,up),r}is_lhs(){return Yp(this.stack[this.stack.length-1],this.stack[this.stack.length-2])}}function Rh(e,t){e.DEFMETHOD("optimize",function(e){var n=this;if(cp(n,512))return n;if(e.has_directive("use asm"))return n;var r=t(n,e);return lp(r,512),r})}function Nh(e,t){for(var n,r=0;(n=e.parent(r++))&&!(n instanceof wl);)if(n instanceof Gl&&n.argname){n=n.argname.definition().scope;break}return n.find_variable(t)}Rh(tl,function(e){return e}),xl.DEFMETHOD("drop_console",function(e){const t=Array.isArray(e),n=new Fd(function(r){if("Call"===r.TYPE){var i=r.expression;if(i instanceof hf){for(var o=i.expression,s=i.property,a=2;o.expression;)s=o.property,o=o.expression,a++;if((!t||e.includes(s))&&Bp(o)&&"console"==o.name){if(3!==a||["call","apply"].includes(i.property)||!eh(n))return Ku(Ed,r);i.expression=hp(r),lp(i.expression,up),r.args=[]}}}});return this.transform(n)}),tl.DEFMETHOD("equivalent_to",function(e){return((e,t)=>{if(!Kd(e,t))return!1;const n=[e],r=[t],i=n.push.bind(n),o=r.push.bind(r);for(;n.length&&r.length;){const e=n.pop(),t=r.pop();if(!Kd(e,t))return!1;if(e._children_backwards(i),t._children_backwards(o),n.length!==r.length)return!1}return 0==n.length&&0==r.length})(this,e)}),wl.DEFMETHOD("process_expression",function(e,t){var n=this,r=new Fd(function(i){if(e&&i instanceof ol)return Ku(Nl,i,{value:i.body});if(!e&&i instanceof Nl){if(t){var o=i.value&&i.value.drop_side_effect_free(t,!0);return o?Ku(ol,i,{body:o}):Ku(ll,i)}return Ku(ol,i,{body:i.value||Ku(bf,i,{operator:"void",expression:Ku(vd,i,{value:0})})})}if(i instanceof Lf||i instanceof kl&&i!==n)return i;if(i instanceof ul){var s=i.body.length-1;s>=0&&(i.body[s]=i.body[s].transform(r))}else i instanceof Ul?(i.body=i.body.transform(r),i.alternative&&(i.alternative=i.alternative.transform(r))):i instanceof bl&&(i.body=i.body.transform(r));return i});n.transform(r)}),xl.DEFMETHOD("reset_opt_flags",function(e){const t=this,n=e.option("reduce_vars"),r=new Pd(function(i,o){if(fp(i,1792),n)return e.top_retain&&i instanceof Ol&&r.parent()===t&&lp(i,1024),i.reduce_vars(r,o,e)});r.safe_ids=Object.create(null),r.in_loop=null,r.loop_ids=new Map,r.defs_to_safe_ids=new Map,t.walk(r)}),Vf.DEFMETHOD("fixed_value",function(){var e=this.thedef.fixed;return!e||e instanceof tl?e:e()}),ud.DEFMETHOD("is_immutable",function(){var e=this.definition().orig;return 1==e.length&&e[0]instanceof td});var Lh=Qu("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Math Number parseFloat parseInt RangeError ReferenceError RegExp Object setInterval setTimeout String SyntaxError TypeError unescape URIError");ud.DEFMETHOD("is_declared",function(e){return!this.definition().undeclared||e.option("unsafe")&&Lh.has(this.name)});var Ih=new Set(["use asm","use strict"]);function Mh(e,t){return $h(e.body,t),t.option("side_effects")&&1==e.body.length&&e.body[0]===t.has_directive("use strict")&&(e.body.length=0),e}function zh(e,t){var n=e.body instanceof cl?e.body.body[0]:e.body;if(t.option("dead_code")&&i(n)){var r=[];return e.init instanceof nl?r.push(e.init):e.init&&r.push(Ku(ol,e.init,{body:e.init})),e.condition&&r.push(Ku(ol,e.condition,{body:e.condition})),Sh(t,e.body,r),Ku(cl,e,{body:r})}return n instanceof Ul&&(i(n.body)?(e.condition?e.condition=Ku(xf,e.condition,{left:e.condition,operator:"&&",right:n.condition.negate(t)}):e.condition=n.condition.negate(t),o(n.alternative)):i(n.alternative)&&(e.condition?e.condition=Ku(xf,e.condition,{left:e.condition,operator:"&&",right:n.condition}):e.condition=n.condition,o(n.body))),e;function i(e){return e instanceof Ml&&t.loopcontrol_target(e)===t.self()}function o(n){n=$p(n),e.body instanceof cl?(e.body=e.body.clone(),e.body.body=n.concat(e.body.body.slice(1)),e.body=e.body.transform(t)):e.body=Ku(cl,e.body,{body:n}).transform(t),e=zh(e,t)}}Rh(il,function(e,t){return!t.option("directives")||Ih.has(e.value)&&t.has_directive(e.value)===e?e:Ku(ll,e)}),Rh(rl,function(e,t){return t.option("drop_debugger")?Ku(ll,e):e}),Rh(dl,function(e,t){return e.body instanceof Ml&&t.loopcontrol_target(e.body)===e.body?Ku(ll,e):0==e.label.references.length?e.body:e}),Rh(ul,function(e,t){return $h(e.body,t),e}),Rh(cl,function(e,t){switch($h(e.body,t),e.body.length){case 1:if(!t.has_directive("use strict")&&t.parent()instanceof Ul&&!((n=e.body[0])instanceof tf||n instanceof ef||n instanceof nf||n instanceof Lf)||Sp(e.body[0]))return e.body[0];break;case 0:return Ku(ll,e)}var n;return e}),Rh(kl,Mh),wl.DEFMETHOD("hoist_declarations",function(e){var t=this;if(e.has_directive("use asm"))return t;var n=e.option("hoist_funs"),r=e.option("hoist_vars");if(n||r){var i=[],o=[],s=new Map,a=0,u=0;Sd(t,e=>e instanceof wl&&e!==t||(e instanceof Xl?(++u,!0):void 0)),r=r&&u>1;var c=new Fd(function(u){if(u!==t){if(u instanceof il)return i.push(u),Ku(ll,u);if(n&&u instanceof Ol&&!(c.parent()instanceof lf)&&c.parent()===t)return o.push(u),Ku(ll,u);if(r&&u instanceof Xl&&!u.definitions.some(e=>e.name instanceof Sl)){u.definitions.forEach(function(e){s.set(e.name.name,e),++a});var l=u.to_assignments(e),f=c.parent();if(f instanceof yl&&f.init===u){if(null==l){var d=u.definitions[0].name;return Ku(ud,d,d)}return l}return f instanceof vl&&f.init===u?l:l?Ku(ol,u,{body:l}):Ku(ll,u)}if(u instanceof wl)return u}});if(t=t.transform(c),a>0){var l=[];const e=t instanceof kl,n=e?t.args_as_names():null;if(s.forEach((t,r)=>{e&&n.some(e=>e.name===t.name.name)?s.delete(r):((t=t.clone()).value=null,l.push(t),s.set(r,t))}),l.length>0){for(;0<t.body.length;){if(t.body[0]instanceof ol){var f,d,p=t.body[0].body;if(p instanceof kf&&"="==p.operator&&(f=p.left)instanceof Vf&&s.has(f.name)){if((h=s.get(f.name)).value)break;h.value=p.right,Gu(l,h),l.push(h),t.body.splice(0,1);continue}if(p instanceof pf&&(d=p.expressions[0])instanceof kf&&"="==d.operator&&(f=d.left)instanceof Vf&&s.has(f.name)){var h;if((h=s.get(f.name)).value)break;h.value=d.right,Gu(l,h),l.push(h),t.body[0].body=pp(p,p.expressions.slice(1));continue}}if(t.body[0]instanceof ll)t.body.splice(0,1);else{if(!(t.body[0]instanceof cl))break;t.body.splice(0,1,...t.body[0].body)}}l=Ku(Xl,t,{definitions:l}),o.push(l)}}t.body=i.concat(o,t.body)}return t}),wl.DEFMETHOD("hoist_properties",function(e){var t=this;if(!e.option("hoist_props")||e.has_directive("use asm"))return t;var n=t instanceof xl&&e.top_retain||ju,r=new Map,i=new Fd(function(o,s){if(o instanceof of){const a=o.name;let u,c;if(!(a.scope!==t||a instanceof Gf||1==(u=a.definition()).escaped||u.assignments||u.direct_access||u.single_use||e.exposed(u)||n(u)||(c=a.fixed_value())!==o.value)&&c instanceof Cf&&!c.properties.some(e=>e instanceof El||e.computed_key())){s(o,this);const e=new Map,n=[];return c.properties.forEach(({key:r,value:s})=>{const u=i.find_scope(),c=t.create_symbol(a.CTOR,{source:a,scope:u,conflict_scopes:new Set([u,...a.definition().references.map(e=>e.scope)]),tentative_name:a.name+"_"+r});e.set(String(r),c.definition()),n.push(Ku(of,o,{name:c,value:s}))}),r.set(u.id,e),Hu.splice(n)}}else if(o instanceof hf&&o.expression instanceof ud){const e=r.get(o.expression.definition().id);if(e){const t=e.get(String(yp(o.property))),n=Ku(ud,o,{name:t.name,scope:o.expression.scope,thedef:t});return n.reference({}),n}}});return t.transform(i)}),Rh(ol,function(e,t){if(t.option("side_effects")){var n=e.body,r=n.drop_side_effect_free(t,!0);if(!r)return Ku(ll,e);if(r!==n)return Ku(ol,e,{body:r})}return e}),Rh(gl,function(e,t){return t.option("loops")?Ku(vl,e,e).optimize(t):e}),Rh(ml,function(e,t){if(!t.option("loops"))return e;var n=e.condition.tail_node().evaluate(t);if(!(n instanceof tl)){if(n)return Ku(vl,e,{body:Ku(cl,e.body,{body:[e.body,Ku(ol,e.condition,{body:e.condition})]})}).optimize(t);if(!bp(e,t.parent()))return Ku(cl,e.body,{body:[e.body,Ku(ol,e.condition,{body:e.condition})]}).optimize(t)}return e}),Rh(vl,function(e,t){if(!t.option("loops"))return e;if(t.option("side_effects")&&e.init&&(e.init=e.init.drop_side_effect_free(t)),e.condition){var n=e.condition.evaluate(t);if(!(n instanceof tl))if(n)e.condition=null;else if(!t.option("dead_code")){var r=e.condition;e.condition=mp(n,e.condition),e.condition=gp(e.condition.transform(t),r)}if(t.option("dead_code")&&(n instanceof tl&&(n=e.condition.tail_node().evaluate(t)),!n)){var i=[];return Sh(t,e.body,i),e.init instanceof nl?i.push(e.init):e.init&&i.push(Ku(ol,e.init,{body:e.init})),i.push(Ku(ol,e.condition,{body:e.condition})),Ku(cl,e,{body:i}).optimize(t)}}return zh(e,t)}),Rh(Ul,function(e,t){if(Ap(e.alternative)&&(e.alternative=null),!t.option("conditionals"))return e;var n=e.condition.evaluate(t);if(!(t.option("dead_code")||n instanceof tl)){var r=e.condition;e.condition=mp(n,r),e.condition=gp(e.condition.transform(t),r)}if(t.option("dead_code")){if(n instanceof tl&&(n=e.condition.tail_node().evaluate(t)),!n){var i=[];return Sh(t,e.body,i),i.push(Ku(ol,e.condition,{body:e.condition})),e.alternative&&i.push(e.alternative),Ku(cl,e,{body:i}).optimize(t)}if(!(n instanceof tl))return(i=[]).push(Ku(ol,e.condition,{body:e.condition})),i.push(e.body),e.alternative&&Sh(t,e.alternative,i),Ku(cl,e,{body:i}).optimize(t)}var o=e.condition.negate(t),s=e.condition.size(),a=o.size(),u=a<s;if(e.alternative&&u){u=!1,e.condition=o;var c=e.body;e.body=e.alternative||Ku(ll,e),e.alternative=c}if(Ap(e.body)&&Ap(e.alternative))return Ku(ol,e.condition,{body:e.condition.clone()}).optimize(t);if(e.body instanceof ol&&e.alternative instanceof ol)return Ku(ol,e,{body:Ku(Ef,e,{condition:e.condition,consequent:e.body.body,alternative:e.alternative.body})}).optimize(t);if(Ap(e.alternative)&&e.body instanceof ol)return s===a&&!u&&e.condition instanceof xf&&"||"==e.condition.operator&&(u=!0),u?Ku(ol,e,{body:Ku(xf,e,{operator:"||",left:o,right:e.body.body})}).optimize(t):Ku(ol,e,{body:Ku(xf,e,{operator:"&&",left:e.condition,right:e.body.body})}).optimize(t);if(e.body instanceof ll&&e.alternative instanceof ol)return Ku(ol,e,{body:Ku(xf,e,{operator:"||",left:e.condition,right:e.alternative.body})}).optimize(t);if(e.body instanceof Rl&&e.alternative instanceof Rl&&e.body.TYPE==e.alternative.TYPE)return Ku(e.body.CTOR,e,{value:Ku(Ef,e,{condition:e.condition,consequent:e.body.value||Ku(Ed,e.body),alternative:e.alternative.value||Ku(Ed,e.alternative)}).transform(t)}).optimize(t);if(e.body instanceof Ul&&!e.body.alternative&&!e.alternative&&(e=Ku(Ul,e,{condition:Ku(xf,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),Jp(e.body)&&e.alternative){var l=e.alternative;return e.alternative=null,Ku(cl,e,{body:[e,l]}).optimize(t)}return Jp(e.alternative)?(i=e.body,e.body=e.alternative,e.condition=u?o:e.condition.negate(t),e.alternative=null,Ku(cl,e,{body:[e,i]}).optimize(t)):e}),Rh(Vl,function(e,t){if(!t.option("switches"))return e;var n,r=e.expression.evaluate(t);if(!(r instanceof tl)){var i=e.expression;e.expression=mp(r,i),e.expression=gp(e.expression.transform(t),i)}if(!t.option("dead_code"))return e;r instanceof tl&&(r=e.expression.tail_node().evaluate(t));for(var o,s,a=[],u=[],c=0,l=e.body.length;c<l&&!s;c++){if((n=e.body[c])instanceof Hl)o?h(n,u[u.length-1]):o=n;else if(!(r instanceof tl)){var f=n.expression.evaluate(t);if(!(f instanceof tl)&&f!==r){h(n,u[u.length-1]);continue}if(f instanceof tl&&!f.has_side_effects(t)&&(f=n.expression.tail_node().evaluate(t)),f===r&&(s=n,o)){var d=u.indexOf(o);u.splice(d,1),h(o,u[d-1]),o=null}}u.push(n)}for(;c<l;)h(e.body[c++],u[u.length-1]);e.body=u;let p=o||s;if(o=null,s=null,u.every((e,t)=>(e===p||e.expression instanceof md)&&(0===e.body.length||Jp(e)||u.length-1===t)))for(let e=0;e<u.length;e++){const t=u[e];for(let n=e+1;n<u.length;n++){const r=u[n];if(0===r.body.length)continue;const i=n===u.length-1,o=m(r,t,!1);if(o||i&&m(r,t,!0)){!o&&i&&r.body.push(Ku(Ml));let t=n-1,s=0;for(;t>e&&_(u[t--]);)s++;const a=u.splice(n-s,1+s);u.splice(e+1,0,...a),e+=a.length}}}for(let e=0;e<u.length;e++){let t=u[e];if(0!==t.body.length&&Jp(t))for(let n=e+1;n<u.length;e++,n++){let e=u[n];if(0!==e.body.length){if(!(m(e,t,!1)||n===u.length-1&&m(e,t,!0)))break;t.body=[],t=e}}}{let e=u.length-1;for(;e>=0;e--){let n=u[e].body;for(;y(n[n.length-1],t);)n.pop();if(!_(u[e]))break}if(e++,!p||u.indexOf(p)>=e)for(let n=u.length-1;n>=e;n--){let e=u[n];if(e===p)p=null,h(u.pop());else{if(e.expression.has_side_effects(t))break;h(u.pop())}}}e:if(p){let e=u.indexOf(p),n=e;for(;n<u.length-1&&_(u[n]);n++);if(n<u.length-1)break e;let r=u.length-1;for(;r>=0;r--){let e=u[r];if(e!==p&&e.expression.has_side_effects(t))break}if(n>r){let t=e-1;for(;t>=0&&_(u[t]);t--);let i=Math.max(r,t)+1,o=e;r>e?(o=r,u[r].body=u[n].body):p.body=u[n].body,u.splice(o+1,n-o),u.splice(i,e-i)}}e:if(p){let n,r=u.findIndex(e=>!_(e));if(r===u.length-1){let t=u[r];if(v(e))break e;n=Ku(cl,t,{body:t.body}),t.body=[]}else if(-1!==r)break e;let i=u.find(e=>e!==p&&e.expression.has_side_effects(t));if(!i)return Ku(cl,e,{body:a.concat(g(e.expression),p.expression?g(p.expression):[],n||[])}).optimize(t);const o=u.indexOf(p);if(u.splice(o,1),p=null,n)return Ku(cl,e,{body:a.concat(e,n)}).optimize(t)}if(u.length>0&&(u[0].body=a.concat(u[0].body)),0==u.length)return Ku(cl,e,{body:a.concat(g(e.expression))}).optimize(t);if(1==u.length&&!v(e)){let n=u[0];return Ku(Ul,e,{condition:Ku(xf,e,{operator:"===",left:e.expression,right:n.expression}),body:Ku(cl,n,{body:n.body}),alternative:null}).optimize(t)}if(2===u.length&&p&&!v(e)){let n=u[0]===p?u[1]:u[0],r=p.expression&&g(p.expression);if(Jp(u[0])){let i=u[0];return y(i.body[i.body.length-1],t)&&i.body.pop(),Ku(Ul,e,{condition:Ku(xf,e,{operator:"===",left:e.expression,right:n.expression}),body:Ku(cl,n,{body:n.body}),alternative:Ku(cl,p,{body:[].concat(r||[],p.body)})}).optimize(t)}let i="===",o=Ku(cl,n,{body:n.body}),s=Ku(cl,p,{body:[].concat(r||[],p.body)});if(u[0]===p){i="!==";let e=s;s=o,o=e}return Ku(cl,e,{body:[Ku(Ul,e,{condition:Ku(xf,e,{operator:i,left:e.expression,right:n.expression}),body:o,alternative:null}),s]}).optimize(t)}return e;function h(e,n){n&&!Jp(n)?n.body=n.body.concat(e.body):Sh(t,e,a)}function m(e,t,n){let r=e.body,i=t.body;if(n&&(r=r.concat(Ku(Ml))),r.length!==i.length)return!1;let o=Ku(cl,e,{body:r}),s=Ku(cl,t,{body:i});return o.equivalent_to(s)}function g(e){return Ku(ol,e,{body:e})}function v(e){let t=!1,n=new Pd(e=>{if(t)return!0;if(e instanceof kl)return!0;if(e instanceof ol)return!0;if(!y(e,n))return;let r=n.parent();r instanceof ql&&r.body[r.body.length-1]===e||(t=!0)});return e.walk(n),t}function y(t,n){return t instanceof Ml&&n.loopcontrol_target(t)===e}function _(e){return!Jp(e)&&!Ku(cl,e,{body:e.body}).has_side_effects(t)}}),Rh(Zl,function(e,t){if(e.bcatch&&e.bfinally&&e.bfinally.body.every(Ap)&&(e.bfinally=null),t.option("dead_code")&&e.body.body.every(Ap)){var n=[];return e.bcatch&&Sh(t,e.bcatch,n),e.bfinally&&n.push(...e.bfinally.body),Ku(cl,e,{body:n}).optimize(t)}return e}),Jl.DEFMETHOD("to_assignments",function(e){var t=e.option("reduce_vars"),n=[];for(const e of this.definitions){if(e.value){var r=Ku(ud,e.name,e.name);n.push(Ku(kf,e,{operator:"=",logical:!1,left:r,right:e.value})),t&&(r.definition().fixed=!1)}const i=e.name.definition();i.eliminated++,i.replaced--}return 0==n.length?null:pp(this,n)}),Rh(Jl,function(e){return 0==e.definitions.length?Ku(ll,e):e}),Rh(of,function(e,t){return e.name instanceof Yf&&null!=e.value&&Kp(e.value,t)&&(e.value=null),e}),Rh(uf,function(e){return e}),Rh(ff,function(e,t){var n=e.expression,r=n;Kh(e.args);var i=e.args.every(e=>!(e instanceof El));t.option("reduce_vars")&&r instanceof ud&&(r=r.fixed_value());var o=r instanceof kl;if(o&&r.pinned())return e;if(t.option("unused")&&i&&o&&!r.uses_arguments){for(var s=0,a=0,u=0,c=e.args.length;u<c;u++){if(r.argnames[u]instanceof El){if(cp(r.argnames[u].expression,1))for(;u<c;)(h=e.args[u++].drop_side_effect_free(t))&&(e.args[s++]=h);else for(;u<c;)e.args[s++]=e.args[u++];a=s;break}var l=u>=r.argnames.length;if(l||cp(r.argnames[u],1)){if(h=e.args[u].drop_side_effect_free(t))e.args[s++]=h;else if(!l){e.args[s++]=Ku(vd,e.args[u],{value:0});continue}}else e.args[s++]=e.args[u];a=s}e.args.length=a}if(n instanceof mf&&n.expression instanceof ud&&"console"===n.expression.name&&n.expression.definition().undeclared&&"assert"===n.property){const n=e.args[0];if(n){const r=n.evaluate(t);if(1===r||!0===r)return Ku(Ed,e)}}if(t.option("unsafe")&&!n.contains_optional()){if(n instanceof mf&&"Array"===n.start.value&&"from"===n.property&&1===e.args.length){const[n]=e.args;if(n instanceof Df)return Ku(Df,n,{elements:n.elements}).optimize(t)}if(Bp(n))switch(n.name){case"Array":if(1!=e.args.length)return Ku(Df,e,{elements:e.args}).optimize(t);if(e.args[0]instanceof vd&&e.args[0].value<=11){const t=[];for(let n=0;n<e.args[0].value;n++)t.push(new kd);return new Df({elements:t})}break;case"Object":if(0==e.args.length)return Ku(Cf,e,{properties:[]});break;case"String":if(0==e.args.length)return Ku(gd,e,{value:""});if(e.args.length<=1)return Ku(xf,e,{left:e.args[0],operator:"+",right:Ku(gd,e,{value:""})}).optimize(t);break;case"Number":if(0==e.args.length)return Ku(vd,e,{value:0});if(1==e.args.length&&t.option("unsafe_math"))return Ku(bf,e,{expression:e.args[0],operator:"+"}).optimize(t);break;case"Symbol":1==e.args.length&&e.args[0]instanceof gd&&t.option("unsafe_symbols")&&(e.args.length=0);break;case"Boolean":if(0==e.args.length)return Ku(Cd,e);if(1==e.args.length)return Ku(bf,e,{expression:Ku(bf,e,{expression:e.args[0],operator:"!"}),operator:"!"}).optimize(t);break;case"RegExp":var f=[];if(e.args.length>=1&&e.args.length<=2&&e.args.every(e=>{var n=e.evaluate(t);return f.push(n),e!==n})&&ic(f[0])){let[n,r]=f;n=nc(new RegExp(n).source);const i=Ku(_d,e,{value:{source:n,flags:r}});if(i._eval(t)!==i)return i}}else if(n instanceof mf)switch(n.property){case"toString":if(0==e.args.length&&!n.expression.may_throw_on_access(t))return Ku(xf,e,{left:Ku(gd,e,{value:""}),operator:"+",right:n.expression}).optimize(t);break;case"join":if(n.expression instanceof Df)e:{var d;if(!(e.args.length>0&&(d=e.args[0].evaluate(t))===e.args[0])){var p,h,m=[],g=[];for(u=0,c=n.expression.elements.length;u<c;u++){var v=n.expression.elements[u];if(v instanceof El)break e;var y=v.evaluate(t);y!==v?g.push(y):(g.length>0&&(m.push(Ku(gd,e,{value:g.join(d)})),g.length=0),m.push(v))}return g.length>0&&m.push(Ku(gd,e,{value:g.join(d)})),0==m.length?Ku(gd,e,{value:""}):1==m.length?m[0].is_string(t)?m[0]:Ku(xf,m[0],{operator:"+",left:Ku(gd,e,{value:""}),right:m[0]}):""==d?(p=m[0].is_string(t)||m[1].is_string(t)?m.shift():Ku(gd,e,{value:""}),m.reduce(function(e,t){return Ku(xf,t,{operator:"+",left:e,right:t})},p).optimize(t)):((h=e.clone()).expression=h.expression.clone(),h.expression.expression=h.expression.expression.clone(),h.expression.expression.elements=m,vp(t,e,h))}}break;case"charAt":if(n.expression.is_string(t)){var _=e.args[0],b=_?_.evaluate(t):0;if(b!==_)return Ku(vf,n,{expression:n.expression,property:mp(0|b,_||n)}).optimize(t)}break;case"apply":if(2==e.args.length&&e.args[1]instanceof Df){var w=e.args[1].elements.slice();return w.unshift(e.args[0]),Ku(ff,e,{expression:Ku(mf,n,{expression:n.expression,optional:!1,property:"call"}),args:w}).optimize(t)}break;case"call":var x=n.expression;if(x instanceof ud&&(x=x.fixed_value()),x instanceof kl&&!x.contains_this())return(e.args.length?pp(this,[e.args[0],Ku(ff,e,{expression:n.expression,args:e.args.slice(1)})]):Ku(ff,e,{expression:n.expression,args:[]})).optimize(t)}}if(t.option("unsafe_Function")&&Bp(n)&&"Function"==n.name){if(0==e.args.length)return hp(e).optimize(t);if(e.args.every(e=>e instanceof gd))try{var E="n(function("+e.args.slice(0,-1).map(function(e){return e.value}).join(",")+"){"+e.args[e.args.length-1].value+"})",k=Yc(E),A=t.mangle_options();k.figure_out_scope(A);var D,C=new Fh(t.options,{mangle_options:t._mangle_options});return(k=k.transform(C)).figure_out_scope(A),k.compute_char_frequency(A),k.mangle_names(A),Sd(k,e=>{if(Ep(e))return D=e,Td}),E=Hd(),cl.prototype._codegen.call(D,D,E),e.args=[Ku(gd,e,{value:D.argnames.map(function(e){return e.print_to_string()}).join(",")}),Ku(gd,e.args[e.args.length-1],{value:E.get().replace(/^{|}$/g,"")})],e}catch(e){if(!(e instanceof zc))throw e}}return function(e,t){if(t.in_computed_key())return e;var n=e.expression,r=n,i=e.args.every(e=>!(e instanceof El));if(t.option("reduce_vars")&&r instanceof ud&&!oc(e,Ld)){const i=r.fixed_value();if(Fp(i,t)||!t.toplevel.funcs&&n.definition().global)return e;r=i}if(Ph(t,r)&&!oc(e,Nd))return e;var o=r instanceof kl,s=o&&r.body[0],a=o&&!r.is_generator&&!r.async,u=a&&t.option("inline")&&!e.is_callee_pure(t);if(u&&s instanceof Nl){let n=s.value;if(!n||n.is_constant_expression()){n=n?n.clone(!0):Ku(Ed,e);const r=e.args.concat(n);return pp(e,r).optimize(t)}if(1===r.argnames.length&&r.argnames[0]instanceof Qf&&e.args.length<2&&!(e.args[0]instanceof El)&&n instanceof ud&&n.name===r.argnames[0].name){const n=(e.args[0]||Ku(Ed)).optimize(t);let r;return n instanceof hf&&(r=t.parent())instanceof ff&&r.expression===e?pp(e,[Ku(vd,e,{value:0}),n]):n}}if(u){var c,l,f=-1;let o,a,u;if(i&&!r.uses_arguments&&!(t.parent()instanceof Lf)&&!(r.name&&r instanceof Dl)&&(a=function(e){var n=r.body,i=n.length;if(t.option("inline")<3)return 1==i&&h(e);e=null;for(var o=0;o<i;o++){var s=n[o];if(s instanceof Xl){if(e&&!s.definitions.every(e=>!e.value))return!1}else{if(e)return!1;s instanceof ll||(e=s)}}return h(e)}(s))&&(n===r||oc(e,Nd)||t.option("unused")&&1==(o=n.definition()).references.length&&!Pp(t,o)&&r.is_constant_expression(n.scope))&&!oc(e,Rd|Ld)&&!r.contains_this()&&function(){var e=new Set;do{if((c=t.parent(++f)).is_block_scope()&&c.block_scope&&c.block_scope.variables.forEach(function(t){e.add(t.name)}),c instanceof Gl)c.argname&&e.add(c.argname.name);else if(c instanceof pl)l=[];else if(c instanceof ud&&c.fixed_value()instanceof wl)return!1}while(!(c instanceof wl));var n=!(c instanceof xl)||t.toplevel.vars,i=t.option("inline");return!(!function(e,t){for(var n=r.body.length,i=0;i<n;i++){var o=r.body[i];if(o instanceof Xl){if(!t)return!1;for(var s=o.definitions.length;--s>=0;){var a=o.definitions[s].name;if(a instanceof Sl||e.has(a.name)||Dp.has(a.name)||c.conflicting_def(a.name))return!1;l&&l.push(a.definition())}}}return!0}(e,i>=3&&n)||!function(e,t){for(var n=0,i=r.argnames.length;n<i;n++){var o=r.argnames[n];if(o instanceof Af){if(cp(o.left,1))continue;return!1}if(o instanceof Sl)return!1;if(o instanceof El){if(cp(o.expression,1))continue;return!1}if(!cp(o,1)){if(!t||e.has(o.name)||Dp.has(o.name)||c.conflicting_def(o.name))return!1;l&&l.push(o.definition())}}return!0}(e,i>=2&&n)||l&&0!=l.length&&Tp(r,l))}()&&(u=t.find_scope())&&!Th(u,r)&&!function(){let e,n=0;for(;e=t.parent(n++);){if(e instanceof Af)return!0;if(e instanceof ul)break}return!1}()&&!(c instanceof Lf))return lp(r,up),u.add_child_scope(r),pp(e,function(n){var i=[],o=[];if(function(t,n){for(var i=r.argnames.length,o=e.args.length;--o>=i;)n.push(e.args[o]);for(o=i;--o>=0;){var s=r.argnames[o],a=e.args[o];if(cp(s,1)||!s.name||c.conflicting_def(s.name))a&&n.push(a);else{var u=Ku(Kf,s,s);s.definition().orig.push(u),!a&&l&&(a=Ku(Ed,e)),m(t,n,u,a)}}t.reverse(),n.reverse()}(i,o),function(e,t){for(var n=t.length,i=0,o=r.body.length;i<o;i++){var s=r.body[i];if(s instanceof Xl)for(var a=0,u=s.definitions.length;a<u;a++){var c=s.definitions[a],f=c.name;if(m(e,t,f,c.value),l&&r.argnames.every(e=>e.name!=f.name)){var d=r.variables.get(f.name),p=Ku(ud,f,f);d.references.push(p),t.splice(n++,0,Ku(kf,c,{operator:"=",logical:!1,left:p,right:Ku(Ed,f)}))}}}}(i,o),o.push(n),i.length){const e=c.body.indexOf(t.parent(f-1))+1;c.body.splice(e,0,Ku(Xl,r,{definitions:i}))}return o.map(e=>e.clone(!0))}(a)).optimize(t)}if(u&&oc(e,Nd))return lp(r,up),(r=(r=Ku(r.CTOR===Ol?Dl:r.CTOR,r,r)).clone(!0)).figure_out_scope({},{parent_scope:t.find_scope(),toplevel:t.get_toplevel()}),Ku(ff,e,{expression:r,args:e.args}).optimize(t);if(a&&t.option("side_effects")&&r.body.every(Ap)){var d=e.args.concat(Ku(Ed,e));return pp(e,d).optimize(t)}if(t.option("negate_iife")&&t.parent()instanceof ol&&kp(e))return e.negate(t,!0);var p=e.evaluate(t);return p!==e?(p=mp(p,e).optimize(t),vp(t,p,e)):e;function h(t){return t?t instanceof Nl?t.value?t.value.clone(!0):Ku(Ed,e):t instanceof ol?Ku(bf,t,{operator:"void",expression:t.body.clone(!0)}):void 0:Ku(Ed,e)}function m(t,n,r,i){var o=r.definition();c.variables.has(r.name)||(c.variables.set(r.name,o),c.enclosed.push(o),t.push(Ku(of,r,{name:r,value:null})));var s=Ku(ud,r,r);o.references.push(s),i&&n.push(Ku(kf,e,{operator:"=",logical:!1,left:s,right:i.clone()}))}}(e,t)}),tl.DEFMETHOD("contains_optional",function(){return(this instanceof hf||this instanceof ff||this instanceof yf)&&(!!this.optional||this.expression.contains_optional())}),Rh(df,function(e,t){return t.option("unsafe")&&Bp(e.expression)&&["Object","RegExp","Function","Error","Array"].includes(e.expression.name)?Ku(ff,e,e).transform(t):e}),Rh(pf,function(e,t){if(!t.option("side_effects"))return e;var n,r,i=[];n=Bd(t),r=e.expressions.length-1,e.expressions.forEach(function(e,o){o<r&&(e=e.drop_side_effect_free(t,n)),e&&(dp(i,e),n=!1)});var o=i.length-1;return function(){for(;o>0&&Kp(i[o],t);)o--;o<i.length-1&&(i[o]=Ku(bf,e,{operator:"void",expression:i[o]}),i.length=o+1)}(),0==o?((e=wp(t.parent(),t.self(),i[0]))instanceof pf||(e=e.optimize(t)),e):(e.expressions=i,e)}),_f.DEFMETHOD("lift_sequences",function(e){if(e.option("sequences")&&this.expression instanceof pf){var t=this.expression.expressions.slice(),n=this.clone();return n.expression=t.pop(),t.push(n),pp(this,t).optimize(e)}return this}),Rh(wf,function(e,t){return e.lift_sequences(t)}),Rh(bf,function(e,t){var n=e.expression;if("delete"==e.operator&&!(n instanceof ud||n instanceof hf||n instanceof yf||Cp(n)))return pp(e,[n,Ku(Od,e)]).optimize(t);var r=e.lift_sequences(t);if(r!==e)return r;if(t.option("side_effects")&&"void"==e.operator)return(n=n.drop_side_effect_free(t))?(e.expression=n,e):Ku(Ed,e).optimize(t);if(t.in_boolean_context())switch(e.operator){case"!":if(n instanceof bf&&"!"==n.operator)return n.expression;n instanceof xf&&(e=vp(t,e,n.negate(t,Bd(t))));break;case"typeof":return(n instanceof ud?Ku(Od,e):pp(e,[n,Ku(Od,e)])).optimize(t)}if("-"==e.operator&&n instanceof Ad&&(n=n.transform(t)),n instanceof xf&&("+"==e.operator||"-"==e.operator)&&("*"==n.operator||"/"==n.operator||"%"==n.operator))return Ku(xf,e,{operator:n.operator,left:Ku(bf,n.left,{operator:e.operator,expression:n.left}),right:n.right});if(t.option("evaluate")){if("~"===e.operator&&e.expression instanceof bf&&"~"===e.expression.operator&&(t.in_32_bit_context(!1)||e.expression.expression.is_32_bit_integer(t)))return e.expression.expression;if("~"===e.operator&&n instanceof xf&&"^"===n.operator)return n.left instanceof bf&&"~"===n.left.operator?n.left=n.left.bitwise_negate(t,!0):n.right=n.right.bitwise_negate(t,!0),n}if("-"!=e.operator||!(n instanceof vd||n instanceof Ad||n instanceof yd)){var i=e.evaluate(t);if(i!==e)return vp(t,i=mp(i,e).optimize(t),e)}return e}),xf.DEFMETHOD("lift_sequences",function(e){if(e.option("sequences")){if(this.left instanceof pf){var t=this.left.expressions.slice();return(n=this.clone()).left=t.pop(),t.push(n),pp(this,t).optimize(e)}if(this.right instanceof pf&&!this.left.has_side_effects(e)){for(var n,r="="==this.operator&&this.left instanceof ud,i=(t=this.right.expressions).length-1,o=0;o<i&&(r||!t[o].has_side_effects(e));o++);if(o==i)return t=t.slice(),(n=this.clone()).right=t.pop(),t.push(n),pp(this,t).optimize(e);if(o>0)return(n=this.clone()).right=pp(this.right,t.slice(o)),(t=t.slice(0,o)).push(n),pp(this,t).optimize(e)}}return this});var Bh=Qu("== === != !== * & | ^");function jh(e,t){return e instanceof ud||e.TYPE===t.TYPE}Rh(xf,function(e,t){function n(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(t)&&!e.right.has_side_effects(t)}function r(t){if(n()){t&&(e.operator=t);var r=e.left;e.left=e.right,e.right=r}}if(t.option("lhs_constants")&&Bh.has(e.operator)&&e.right.is_constant()&&!e.left.is_constant()&&(e.left instanceof xf&&Wc[e.left.operator]>=Wc[e.operator]||r()),e=e.lift_sequences(t),t.option("comparisons"))switch(e.operator){case"===":case"!==":var i=!0;(e.left.is_string(t)&&e.right.is_string(t)||e.left.is_number(t)&&e.right.is_number(t)||e.left.is_bigint(t)&&e.right.is_bigint(t)||e.left.is_boolean()&&e.right.is_boolean()||e.left.equivalent_to(e.right))&&(e.operator=e.operator.substr(0,2));case"==":case"!=":if(!i&&Kp(e.left,t))e.left=Ku(wd,e.left);else if(!i&&Kp(e.right,t))e.right=Ku(wd,e.right);else if(t.option("typeofs")&&e.left instanceof gd&&"undefined"==e.left.value&&e.right instanceof bf&&"typeof"==e.right.operator)((o=e.right.expression)instanceof ud?!o.is_declared(t):o instanceof hf&&t.option("ie8"))||(e.right=o,e.left=Ku(Ed,e.left).optimize(t),2==e.operator.length&&(e.operator+="="));else if(t.option("typeofs")&&e.left instanceof bf&&"typeof"==e.left.operator&&e.right instanceof gd&&"undefined"==e.right.value){var o;((o=e.left.expression)instanceof ud?!o.is_declared(t):o instanceof hf&&t.option("ie8"))||(e.left=o,e.right=Ku(Ed,e.right).optimize(t),2==e.operator.length&&(e.operator+="="))}else{if(e.left instanceof ud&&e.right instanceof ud&&e.left.definition()===e.right.definition()&&((u=e.left.fixed_value())instanceof Df||u instanceof kl||u instanceof Cf||u instanceof Lf))return Ku("="==e.operator[0]?Od:Cd,e);if(e.left.is_32_bit_integer(t)&&e.right.is_32_bit_integer(t)){const n=e=>Ku(bf,e,{operator:"!",expression:e}),r=(e,r)=>r?t.in_boolean_context()?e:n(n(e)):n(e);if(e.left instanceof vd&&0===e.left.value)return r(e.right,"!"===e.operator[0]);if(e.right instanceof vd&&0===e.right.value)return r(e.left,"!"===e.operator[0]);let i,o,s;if((i=e.left instanceof xf?e.left:e.right instanceof xf?e.right:null)&&(s=i===e.left?e.right:e.left)&&"&"===i.operator&&s instanceof vd&&s.is_32_bit_integer(t)&&(o=i.left.equivalent_to(s)?i.right:i.right.equivalent_to(s)?i.left:null)){let n=r(Ku(xf,e,{operator:"&",left:s,right:Ku(bf,e,{operator:"~",expression:o})}),"!"===e.operator[0]);return vp(t,n,e)}}}break;case"&&":case"||":var s=e.left;if(s.operator==e.operator&&(s=s.right),s instanceof xf&&s.operator==("&&"==e.operator?"!==":"===")&&e.right instanceof xf&&s.operator==e.right.operator&&(Kp(s.left,t)&&e.right.left instanceof wd||s.left instanceof wd&&Kp(e.right.left,t))&&!s.right.has_side_effects(t)&&s.right.equivalent_to(e.right.right)){var a=Ku(xf,e,{operator:s.operator.slice(0,-1),left:Ku(wd,e),right:s.right});return s!==e.left&&(a=Ku(xf,e,{operator:e.operator,left:e.left.left,right:a})),a}}var u;if("+"==e.operator&&t.in_boolean_context()){var c=e.left.evaluate(t),l=e.right.evaluate(t);if(c&&"string"==typeof c)return pp(e,[e.right,Ku(Od,e)]).optimize(t);if(l&&"string"==typeof l)return pp(e,[e.left,Ku(Od,e)]).optimize(t)}if(t.option("comparisons")&&e.is_boolean()){if(!(t.parent()instanceof xf)||t.parent()instanceof kf){var f=Ku(bf,e,{operator:"!",expression:e.negate(t,Bd(t))});e=vp(t,e,f)}if(t.option("unsafe_comps"))switch(e.operator){case"<":r(">");break;case"<=":r(">=")}}if("+"==e.operator){if(e.right instanceof gd&&""==e.right.getValue()&&e.left.is_string(t))return e.left;if(e.left instanceof gd&&""==e.left.getValue()&&e.right.is_string(t))return e.right;if(e.left instanceof xf&&"+"==e.left.operator&&e.left.left instanceof gd&&""==e.left.left.getValue()&&e.right.is_string(t))return e.left=e.left.right,e}if(t.option("evaluate")){switch(e.operator){case"&&":if(!(c=!!cp(e.left,2)||!cp(e.left,4)&&e.left.evaluate(t)))return wp(t.parent(),t.self(),e.left).optimize(t);if(!(c instanceof tl))return pp(e,[e.left,e.right]).optimize(t);if(l=e.right.evaluate(t)){if(!(l instanceof tl)&&("&&"==(d=t.parent()).operator&&d.left===t.self()||t.in_boolean_context()))return e.left.optimize(t)}else{if(t.in_boolean_context())return pp(e,[e.left,Ku(Cd,e)]).optimize(t);lp(e,4)}if("||"==e.left.operator&&!(p=e.left.right.evaluate(t)))return Ku(Ef,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(t);break;case"||":var d,p;if(!(c=!!cp(e.left,2)||!cp(e.left,4)&&e.left.evaluate(t)))return pp(e,[e.left,e.right]).optimize(t);if(!(c instanceof tl))return wp(t.parent(),t.self(),e.left).optimize(t);if(l=e.right.evaluate(t)){if(!(l instanceof tl)){if(t.in_boolean_context())return pp(e,[e.left,Ku(Od,e)]).optimize(t);lp(e,2)}}else if("||"==(d=t.parent()).operator&&d.left===t.self()||t.in_boolean_context())return e.left.optimize(t);if("&&"==e.left.operator&&(p=e.left.right.evaluate(t))&&!(p instanceof tl))return Ku(Ef,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(t);break;case"??":if(Gp(e.left,t))return e.right;if(!((c=e.left.evaluate(t))instanceof tl))return null==c?e.right:e.left;if(t.in_boolean_context()){const n=e.right.evaluate(t);if(!(n instanceof tl||n))return e.left}}var h=!0;switch(e.operator){case"+":if(e.right instanceof md&&e.left instanceof xf&&"+"==e.left.operator&&e.left.is_string(t)){var m=(g=Ku(xf,e,{operator:"+",left:e.left.right,right:e.right})).optimize(t);g!==m&&(e=Ku(xf,e,{operator:"+",left:e.left.left,right:m}))}if(e.left instanceof xf&&"+"==e.left.operator&&e.left.is_string(t)&&e.right instanceof xf&&"+"==e.right.operator&&e.right.is_string(t)){var g,v=(g=Ku(xf,e,{operator:"+",left:e.left.right,right:e.right.left})).optimize(t);g!==v&&(e=Ku(xf,e,{operator:"+",left:Ku(xf,e.left,{operator:"+",left:e.left.left,right:v}),right:e.right.right}))}if(e.right instanceof bf&&"-"==e.right.operator&&e.left.is_number_or_bigint(t)){e=Ku(xf,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof bf&&"-"==e.left.operator&&n()&&e.right.is_number_or_bigint(t)){e=Ku(xf,e,{operator:"-",left:e.right,right:e.left.expression});break}if(e.left instanceof Tl){var y=e.left;if((m=e.right.evaluate(t))!=e.right)return y.segments[y.segments.length-1].value+=String(m),y}if(e.right instanceof Tl&&(m=e.right,(y=e.left.evaluate(t))!=e.left))return m.segments[0].value=String(y)+m.segments[0].value,m;if(e.left instanceof Tl&&e.right instanceof Tl){var _=(y=e.left).segments;m=e.right,_[_.length-1].value+=m.segments[0].value;for(var b=1;b<m.segments.length;b++)_.push(m.segments[b]);return y}case"*":h=t.option("unsafe_math");case"&":case"|":case"^":if(e.left.is_number_or_bigint(t)&&e.right.is_number_or_bigint(t)&&n()&&!(e.left instanceof xf&&e.left.operator!=e.operator&&Wc[e.left.operator]>=Wc[e.operator])){var w=Ku(xf,e,{operator:e.operator,left:e.right,right:e.left});e=e.right instanceof md&&!(e.left instanceof md)?vp(t,w,e):vp(t,e,w)}h&&e.is_number_or_bigint(t)&&(e.right instanceof xf&&e.right.operator==e.operator&&(e=Ku(xf,e,{operator:e.operator,left:Ku(xf,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof md&&e.left instanceof xf&&e.left.operator==e.operator&&(e.left.left instanceof md?e=Ku(xf,e,{operator:e.operator,left:Ku(xf,e.left,{operator:e.operator,left:e.left.left,right:e.right,start:e.left.left.start,end:e.right.end}),right:e.left.right}):e.left.right instanceof md&&(e=Ku(xf,e,{operator:e.operator,left:Ku(xf,e.left,{operator:e.operator,left:e.left.right,right:e.right,start:e.left.right.start,end:e.right.end}),right:e.left.left}))),e.left instanceof xf&&e.left.operator==e.operator&&e.left.right instanceof md&&e.right instanceof xf&&e.right.operator==e.operator&&e.right.left instanceof md&&(e=Ku(xf,e,{operator:e.operator,left:Ku(xf,e.left,{operator:e.operator,left:Ku(xf,e.left.left,{operator:e.operator,left:e.left.right,right:e.right.left,start:e.left.right.start,end:e.right.left.end}),right:e.left.left}),right:e.right.right})))}if(jp.has(e.operator)){let n,r,i,o,s=e.left;if("&"===e.operator&&e.right instanceof xf&&"|"===e.right.operator&&"number"==typeof(r=e.left.evaluate(t))&&("number"==typeof(n=e.right.right.evaluate(t))?(i=e.right.left,o=e.right.right):"number"==typeof(n=e.right.left.evaluate(t))&&(i=e.right.right,o=e.right.left),i&&o))if(0===(n&r))e=Ku(xf,e,{operator:e.operator,left:s,right:i});else{const a=Ku(xf,e,{operator:"|",left:Ku(xf,e,{operator:"&",left:i,right:s}),right:mp(n&r,o)});e=vp(t,e,a)}"|"!==e.operator&&"&"!==e.operator||!e.left.equivalent_to(e.right)||e.left.has_side_effects(t)||!t.in_32_bit_context(!0)||(e.left=Ku(vd,e,{value:0}),e.operator="|"),"^"===e.operator&&e.left instanceof bf&&"~"===e.left.operator&&e.right instanceof bf&&"~"===e.right.operator&&(e=Ku(xf,e,{operator:"^",left:e.left.expression,right:e.right.expression})),("<<"===e.operator||">>"===e.operator)&&e.right instanceof vd&&0===e.right.value&&(e.operator="|");const a=e.right instanceof vd&&0===e.right.value?e.right:e.left instanceof vd&&0===e.left.value?e.left:null,u=a&&(a===e.right?e.left:e.right);if(a&&("|"===e.operator||"^"===e.operator)&&(u.is_32_bit_integer(t)||t.in_32_bit_context(!0)))return u;if(a&&"&"===e.operator&&!u.has_side_effects(t)&&u.is_32_bit_integer(t))return a;const c=e=>e instanceof vd&&-1===e.value||e instanceof bf&&"-"===e.operator&&e.expression instanceof vd&&1===e.expression.value,l=c(e.right)?e.right:c(e.left)?e.left:null,f=l===e.right?e.left:e.right;if(l&&"&"===e.operator&&(f.is_32_bit_integer(t)||t.in_32_bit_context(!0)))return f;if(l&&"^"===e.operator&&(f.is_32_bit_integer(t)||t.in_32_bit_context(!0)))return f.bitwise_negate(t)}}if(e.right instanceof xf&&e.right.operator==e.operator&&(Up.has(e.operator)||"+"==e.operator&&(e.right.left.is_string(t)||e.left.is_string(t)&&e.right.right.is_string(t))))return e.left=Ku(xf,e.left,{operator:e.operator,left:e.left.transform(t),right:e.right.left.transform(t)}),e.right=e.right.right.transform(t),e.transform(t);var x=e.evaluate(t);return x!==e?(x=mp(x,e).optimize(t),vp(t,x,e)):e}),Rh(cd,function(e){return e}),Rh(ud,function(e,t){if(!t.option("ie8")&&Bp(e)&&!t.find_parent(bl))switch(e.name){case"undefined":return Ku(Ed,e).optimize(t);case"NaN":return Ku(xd,e).optimize(t);case"Infinity":return Ku(Ad,e).optimize(t)}return t.option("reduce_vars")&&!t.is_lhs()?function(e,t){if(t.in_computed_key())return e;const n=t.parent(),r=e.definition(),i=t.find_scope();let o=e.fixed_value();if(t.top_retain&&r.global&&t.top_retain(r)&&function(e,t){return 1!==e.orig.length||!t||t.size()>e.name.length}(r,o))return r.fixed=!1,r.single_use=!1,e;if(Ph(t,o))return e;let s=r.single_use&&!(n instanceof ff&&n.is_callee_pure(t)||oc(n,Ld))&&!(n instanceof lf&&o instanceof kl&&o.name);if(s&&o instanceof tl&&(s=!o.has_side_effects(t)&&!o.may_throw(t)),o instanceof Lf&&r.scope!==e.scope)return e;if(s&&(o instanceof kl||o instanceof Lf))if(Fp(o,t))s=!1;else if(r.scope===e.scope||1!=r.escaped&&!cp(o,16)&&!function(e){for(var t,n=0;t=e.parent(n++);){if(t instanceof nl)return!1;if(t instanceof Df||t instanceof Sf||t instanceof Cf)return!0}return!1}(t)&&t.option("reduce_funcs")){if(Pp(t,r))s=!1;else if((r.scope!==e.scope||r.orig[0]instanceof Qf)&&(s=o.is_constant_expression(e.scope),"f"==s)){var a=e.scope;do{(a instanceof Ol||Ep(a))&&lp(a,16)}while(a=a.parent_scope)}}else s=!1;if(s&&(o instanceof kl||o instanceof Lf)&&(s=r.scope===e.scope&&!Th(i,o)||n instanceof ff&&n.expression===e&&!Th(i,o)&&!(o.name&&o.name.definition().recursive_refs>0)),s&&o){if(o instanceof Bf&&(lp(o,up),o=Ku(Uf,o,o)),o instanceof Ol&&(lp(o,up),o=Ku(Dl,o,o)),r.recursive_refs>0&&o.name instanceof Jf){const e=o.name.definition();let t=o.variables.get(o.name.name),n=t&&t.orig[0];n instanceof td||(n=Ku(td,o.name,o.name),n.scope=o,o.name=n,t=o.def_function(n)),Sd(o,n=>{n instanceof ud&&n.definition()===e&&(n.thedef=t,t.references.push(n))})}return(o instanceof kl||o instanceof Lf)&&o.parent_scope!==i&&(o=o.clone(!0,t.get_toplevel()),i.add_child_scope(o)),o.optimize(t)}if(o){let n;if(o instanceof pd)r.orig[0]instanceof Qf||!r.references.every(e=>r.scope===e.scope)||(n=o);else{var u=o.evaluate(t);u===o||!t.option("unsafe_regexp")&&u instanceof RegExp||(n=mp(u,o))}if(n){const i=e.size(t),s=n.size(t);let a=0;if(t.option("unused")&&!t.exposed(r)&&(a=(i+2+o.size(t))/(r.references.length-r.assignments)),s<=i+a)return n}}return e}(e,t):e}),Rh(Ed,function(e,t){if(t.option("unsafe_undefined")){var n=Nh(t,"undefined");if(n){var r=Ku(ud,e,{name:"undefined",scope:n.scope,thedef:n});return lp(r,8),r}}var i=t.is_lhs();return i&&jh(i,e)?e:Ku(bf,e,{operator:"void",expression:Ku(vd,e,{value:0})})}),Rh(Ad,function(e,t){var n=t.is_lhs();return n&&jh(n,e)?e:!t.option("keep_infinity")||n&&!jh(n,e)||Nh(t,"Infinity")?Ku(xf,e,{operator:"/",left:Ku(vd,e,{value:1}),right:Ku(vd,e,{value:0})}):e}),Rh(xd,function(e,t){var n=t.is_lhs();return n&&!jh(n,e)||Nh(t,"NaN")?Ku(xf,e,{operator:"/",left:Ku(vd,e,{value:0}),right:Ku(vd,e,{value:0})}):e});const Uh=Qu("+ - / * % >> << >>> | ^ &"),Vh=Qu("* | ^ &");function qh(e,t){return e instanceof ud&&(e=e.fixed_value()),!!e&&(!(e instanceof kl||e instanceof Lf)||!(e instanceof kl&&e.contains_this())||t.parent()instanceof df)}function Hh(e,t){return t.in_boolean_context()?vp(t,e,pp(e,[e,Ku(Od,e)]).optimize(t)):e}function Kh(e){for(var t=0;t<e.length;t++){var n=e[t];if(n instanceof El){var r=n.expression;r instanceof Df&&!r.elements.some(e=>e instanceof kd)&&(e.splice(t,1,...r.elements),t--)}}}function Zh(e,t){if(!t.option("computed_props"))return e;if(!(e.key instanceof md))return e;if(e.key instanceof gd||e.key instanceof vd){const n=e.key.value.toString();if("__proto__"===n)return e;if("constructor"==n&&t.parent()instanceof Lf)return e;e instanceof Sf?(e.quote=e.key.quote,e.key=n):e instanceof If?(e.quote=e.key.quote,e.key=Ku(ed,e.key,{name:n})):(e.quote=e.key.quote,e.key=Ku(Xf,e.key,{name:n}))}return e}Rh(kf,function(e,t){if(e.logical)return e.lift_sequences(t);var n;if("="===e.operator&&e.left instanceof ud&&"arguments"!==e.left.name&&!(n=e.left.definition()).undeclared&&e.right.equivalent_to(e.left))return e.right;if(t.option("dead_code")&&e.left instanceof ud&&(n=e.left.definition()).scope===t.find_parent(kl)){var r,i=0,o=e;do{if(r=o,(o=t.parent(i++))instanceof Rl){if(s(i,o))break;if(Tp(n.scope,[n]))break;return"="==e.operator?e.right:(n.fixed=!1,Ku(xf,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}).optimize(t))}}while(o instanceof xf&&o.right===r||o instanceof pf&&o.tail_node()===r)}return"="==(e=e.lift_sequences(t)).operator&&e.left instanceof ud&&e.right instanceof xf&&(e.right.left instanceof ud&&e.right.left.name==e.left.name&&Uh.has(e.right.operator)?(e.operator=e.right.operator+"=",e.right=e.right.right):e.right.right instanceof ud&&e.right.right.name==e.left.name&&Vh.has(e.right.operator)&&!e.right.left.has_side_effects(t)&&(e.operator=e.right.operator+"=",e.right=e.right.left)),e;function s(n,r){function i(){const n=e.right;e.right=Ku(wd,n);const i=r.may_throw(t);return e.right=n,i}for(var o,s=e.left.definition().scope.get_defun_scope();(o=t.parent(n++))!==s;)if(o instanceof Zl){if(o.bfinally)return!0;if(o.bcatch&&i())return!0}}}),Rh(Af,function(e,t){if(!t.option("evaluate"))return e;var n=e.right.evaluate(t);let r,i;return void 0===n?(r=t.parent())instanceof kl&&!1!==t.option("keep_fargs")&&("Call"!==(i=t.parent(1)).TYPE||i.expression!==r)||(e=e.left):n!==e.right&&(n=mp(n,e.right),e.right=gp(n,e.right)),e}),Rh(Ef,function(e,t){if(!t.option("conditionals"))return e;if(e.condition instanceof pf){var n=e.condition.expressions.slice();return e.condition=n.pop(),n.push(e),pp(e,n)}var r=e.condition.evaluate(t);if(r!==e.condition)return wp(t.parent(),t.self(),r?e.consequent:e.alternative);var i=r.negate(t,Bd(t));vp(t,r,i)===i&&(e=Ku(Ef,e,{condition:i,consequent:e.alternative,alternative:e.consequent}));var o,s=e.condition,a=e.consequent,u=e.alternative;if(s instanceof ud&&a instanceof ud&&s.definition()===a.definition())return Ku(xf,e,{operator:"||",left:s,right:u});if(a instanceof kf&&u instanceof kf&&a.operator===u.operator&&a.logical===u.logical&&a.left.equivalent_to(u.left)&&(!e.condition.has_side_effects(t)||"="==a.operator&&!a.left.has_side_effects(t)))return Ku(kf,e,{operator:a.operator,left:a.left,logical:a.logical,right:Ku(Ef,e,{condition:e.condition,consequent:a.right,alternative:u.right})});if(a instanceof ff&&u.TYPE===a.TYPE&&a.args.length>0&&a.args.length==u.args.length&&a.expression.equivalent_to(u.expression)&&!e.condition.has_side_effects(t)&&!a.expression.has_side_effects(t)&&"number"==typeof(o=function(){for(var e=a.args,t=u.args,n=0,r=e.length;n<r;n++){if(e[n]instanceof El)return;if(!e[n].equivalent_to(t[n])){if(t[n]instanceof El)return;for(var i=n+1;i<r;i++){if(e[i]instanceof El)return;if(!e[i].equivalent_to(t[i]))return}return n}}}())){var c=a.clone();return c.args[o]=Ku(Ef,e,{condition:e.condition,consequent:a.args[o],alternative:u.args[o]}),c}if(u instanceof Ef&&a.equivalent_to(u.consequent))return Ku(Ef,e,{condition:Ku(xf,e,{operator:"||",left:s,right:u.condition}),consequent:a,alternative:u.alternative}).optimize(t);if(t.option("ecma")>=2020&&function(e,t,n){if(t.may_throw(n))return!1;let r;if(e instanceof xf&&"=="===e.operator&&((r=Gp(e.left,n)&&e.left)||(r=Gp(e.right,n)&&e.right))&&(r===e.left?e.right:e.left).equivalent_to(t))return!0;if(e instanceof xf&&"||"===e.operator){let r,i;const o=e=>{if(!(e instanceof xf)||"==="!==e.operator&&"=="!==e.operator)return!1;let o,s=0;return e.left instanceof wd&&(s++,r=e,o=e.right),e.right instanceof wd&&(s++,r=e,o=e.left),Kp(e.left,n)&&(s++,i=e,o=e.right),Kp(e.right,n)&&(s++,i=e,o=e.left),1===s&&!!o.equivalent_to(t)};if(!o(e.left))return!1;if(!o(e.right))return!1;if(r&&i&&r!==i)return!0}return!1}(s,u,t))return Ku(xf,e,{operator:"??",left:u,right:a}).optimize(t);if(u instanceof pf&&a.equivalent_to(u.expressions[u.expressions.length-1]))return pp(e,[Ku(xf,e,{operator:"||",left:s,right:pp(e,u.expressions.slice(0,-1))}),a]).optimize(t);if(u instanceof xf&&"&&"==u.operator&&a.equivalent_to(u.right))return Ku(xf,e,{operator:"&&",left:Ku(xf,e,{operator:"||",left:s,right:u.left}),right:a}).optimize(t);if(a instanceof Ef&&a.alternative.equivalent_to(u))return Ku(Ef,e,{condition:Ku(xf,e,{left:e.condition,operator:"&&",right:a.condition}),consequent:a.consequent,alternative:u});if(a.equivalent_to(u))return pp(e,[e.condition,a]).optimize(t);if(a instanceof xf&&"||"==a.operator&&a.right.equivalent_to(u))return Ku(xf,e,{operator:"||",left:Ku(xf,e,{operator:"&&",left:e.condition,right:a.left}),right:u}).optimize(t);const l=t.in_boolean_context();return d(e.consequent)?p(e.alternative)?f(e.condition):Ku(xf,e,{operator:"||",left:f(e.condition),right:e.alternative}):p(e.consequent)?d(e.alternative)?f(e.condition.negate(t)):Ku(xf,e,{operator:"&&",left:f(e.condition.negate(t)),right:e.alternative}):d(e.alternative)?Ku(xf,e,{operator:"||",left:f(e.condition.negate(t)),right:e.consequent}):p(e.alternative)?Ku(xf,e,{operator:"&&",left:f(e.condition),right:e.consequent}):e;function f(e){return e.is_boolean()?e:Ku(bf,e,{operator:"!",expression:e.negate(t)})}function d(e){return e instanceof Od||l&&e instanceof md&&e.getValue()||e instanceof bf&&"!"==e.operator&&e.expression instanceof md&&!e.expression.getValue()}function p(e){return e instanceof Cd||l&&e instanceof md&&!e.getValue()||e instanceof bf&&"!"==e.operator&&e.expression instanceof md&&e.expression.getValue()}}),Rh(Dd,function(e,t){if(t.in_boolean_context())return Ku(vd,e,{value:+e.value});var n=t.parent();return t.option("booleans_as_integers")?(n instanceof xf&&("==="==n.operator||"!=="==n.operator)&&(n.operator=n.operator.replace(/=$/,"")),Ku(vd,e,{value:+e.value})):t.option("booleans")?n instanceof xf&&("=="==n.operator||"!="==n.operator)?Ku(vd,e,{value:+e.value}):Ku(bf,e,{operator:"!",expression:Ku(vd,e,{value:1-e.value})}):e}),hf.DEFMETHOD("flatten_object",function(e,t){if(t.option("properties")&&"__proto__"!==e&&!(this instanceof gf)){var n=t.option("unsafe_arrows")&&t.option("ecma")>=2015,r=this.expression;if(r instanceof Cf)for(var i=r.properties,o=i.length;--o>=0;){var s=i[o];if(""+(s instanceof Rf?s.key.name:s.key)==e){if(!i.every(e=>(e instanceof Sf||n&&e instanceof Rf&&!e.value.is_generator)&&!e.computed_key()))return;if(!qh(s.value,t))return;return Ku(vf,this,{expression:Ku(Df,r,{elements:i.map(function(e){var t=e.value;t instanceof Al&&(t=Ku(Dl,t,t));var n=e.key;return n instanceof tl&&!(n instanceof Xf)?pp(e,[n,t]):t})}),property:Ku(vd,this,{value:o})})}}}}),Rh(vf,function(e,t){var n,r=e.expression,i=e.property;if(t.option("properties")){var o=i.evaluate(t);if(o!==i){"string"==typeof o&&("undefined"==o?o=void 0:(w=parseFloat(o)).toString()==o&&(o=w)),i=e.property=gp(i,mp(o,i).transform(t));var s=""+o;if(Lc(s)&&s.length<=i.size()+1)return Ku(mf,e,{expression:r,optional:e.optional,property:s,quote:i.quote}).optimize(t)}}e:if(t.option("arguments")&&r instanceof ud&&"arguments"==r.name&&1==r.definition().orig.length&&(n=r.scope)instanceof kl&&n.uses_arguments&&!(n instanceof Cl)&&i instanceof vd){for(var a=i.getValue(),u=new Set,c=n.argnames,l=0;l<c.length;l++){if(!(c[l]instanceof Qf))break e;var f=c[l].name;if(u.has(f))break e;u.add(f)}var d=n.argnames[a];if(d&&t.has_directive("use strict")){var p=d.definition();(!t.option("reduce_vars")||p.assignments||p.orig.length>1)&&(d=null)}else if(!d&&!t.option("keep_fargs")&&a<n.argnames.length+5)for(;a>=n.argnames.length;)d=n.create_symbol(Qf,{source:n,scope:n,tentative_name:"argument_"+n.argnames.length}),n.argnames.push(d);if(d){var h=Ku(ud,e,d);return h.reference({}),fp(d,1),h}}if(t.is_lhs())return e;if(o!==i){var m=e.flatten_object(s,t);m&&(r=e.expression=m.expression,i=e.property=m.property)}if(t.option("properties")&&t.option("side_effects")&&i instanceof vd&&r instanceof Df){a=i.getValue();var g=r.elements,v=g[a];e:if(qh(v,t)){for(var y=!0,_=[],b=g.length;--b>a;)(w=g[b].drop_side_effect_free(t))&&(_.unshift(w),y&&w.has_side_effects(t)&&(y=!1));if(v instanceof El)break e;for(v=v instanceof kd?Ku(Ed,v):v,y||_.unshift(v);--b>=0;){var w;if((w=g[b])instanceof El)break e;(w=w.drop_side_effect_free(t))?_.unshift(w):a--}return y?(_.push(v),pp(e,_).optimize(t)):Ku(vf,e,{expression:Ku(Df,r,{elements:_}),property:Ku(vd,i,{value:a})})}}var x=e.evaluate(t);return x!==e?vp(t,x=mp(x,e).optimize(t),e):e}),Rh(yf,function(e,t){if(Gp(e.expression,t)){let n=t.parent();return n instanceof bf&&"delete"===n.operator?mp(0,e):Ku(Ed,e)}return e.expression instanceof hf||e.expression instanceof ff?e:e.expression}),Rh(mf,function(e,t){const n=t.parent();if(t.is_lhs())return e;if(t.option("unsafe_proto")&&e.expression instanceof mf&&"prototype"==e.expression.property){var r=e.expression.expression;if(Bp(r))switch(r.name){case"Array":e.expression=Ku(Df,e.expression,{elements:[]});break;case"Function":e.expression=hp(e.expression);break;case"Number":e.expression=Ku(vd,e.expression,{value:0});break;case"Object":e.expression=Ku(Cf,e.expression,{properties:[]});break;case"RegExp":e.expression=Ku(_d,e.expression,{value:{source:"t",flags:""}});break;case"String":e.expression=Ku(gd,e.expression,{value:""})}}if(!(n instanceof ff&&oc(n,Ld))){const n=e.flatten_object(e.property,t);if(n)return n.optimize(t)}if(e.expression instanceof hf&&n instanceof hf)return e;let i=e.evaluate(t);return i!==e?(i=mp(i,e).optimize(t),vp(t,i,e)):e}),Rh(Df,function(e,t){var n=Hh(e,t);return n!==e?n:(Kh(e.elements),e)}),Rh(Cf,function(e,t){var n=Hh(e,t);return n!==e?n:(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n instanceof El){const r=n.expression;r instanceof Cf&&r.properties.every(e=>e instanceof Sf)?(e.splice(t,1,...r.properties),t--):!(r instanceof md||r.is_constant())||r instanceof gd||(e.splice(t,1),t--)}}}(e.properties),e)}),Rh(_d,Hh),Rh(Nl,function(e,t){return e.value&&Kp(e.value,t)&&(e.value=null),e}),Rh(Cl,Mh),Rh(Dl,function(e,t){return e=Mh(e,t),!(t.option("unsafe_arrows")&&t.option("ecma")>=2015)||e.name||e.is_generator||e.uses_arguments||e.pinned()||Sd(e,e=>{if(e instanceof pd)return Td})?e:Ku(Cl,e,e).optimize(t)}),Rh(Lf,function(e){for(let t=0;t<e.properties.length;t++){const n=e.properties[t];n instanceof jf&&0==n.body.length&&(e.properties.splice(t,1),t--)}return e}),Rh(jf,function(e,t){return $h(e.body,t),e}),Rh(jl,function(e,t){return e.expression&&!e.is_star&&Kp(e.expression,t)&&(e.expression=null),e}),Rh(Tl,function(e,t){if(!t.option("evaluate")||t.parent()instanceof $l)return e;for(var n=[],r=0;r<e.segments.length;r++){var i=e.segments[r];if(i instanceof tl){var o=i.evaluate(t);if(o!==i&&(o+"").length<=i.size()+3){n[n.length-1].value=n[n.length-1].value+o+e.segments[++r].value;continue}if(i instanceof Tl){var s=i.segments;n[n.length-1].value+=s[0].value;for(var a=1;a<s.length;a++)i=s[a],n.push(i);continue}}n.push(i)}if(e.segments=n,1==n.length)return Ku(gd,e,n[0]);if(3===n.length&&n[1]instanceof tl&&(n[1].is_string(t)||n[1].is_number_or_bigint(t)||Gp(n[1],t)||t.option("unsafe"))){if(""===n[2].value)return Ku(xf,e,{operator:"+",left:Ku(gd,e,{value:n[0].value}),right:n[1]});if(""===n[0].value)return Ku(xf,e,{operator:"+",left:n[1],right:Ku(gd,e,{value:n[2].value})})}return e}),Rh($l,function(e){return e}),Rh(Of,Zh),Rh(Rf,function(e,t){if(Zh(e,t),t.option("arrows")&&t.parent()instanceof Cf&&!e.value.is_generator&&!e.value.uses_arguments&&!e.value.pinned()&&1==e.value.body.length&&e.value.body[0]instanceof Nl&&e.value.body[0].value&&!e.value.contains_this()){var n=Ku(Cl,e.value,e.value);return n.async=e.value.async,n.is_generator=e.value.is_generator,Ku(Sf,e,{key:e.key instanceof Xf?e.key.name:e.key,value:n,quote:e.quote})}return e}),Rh(Sf,function(e,t){Zh(e,t);var n=t.option("unsafe_methods");if(n&&t.option("ecma")>=2015&&(!(n instanceof RegExp)||n.test(e.key+""))){var r=e.key,i=e.value;if((i instanceof Cl&&Array.isArray(i.body)&&!i.contains_this()||i instanceof Dl)&&!i.name)return Ku(Rf,e,{key:r instanceof tl?r:Ku(Xf,e,{name:r}),value:Ku(Al,i,i),quote:e.quote})}return e}),Rh(Sl,function(e,t){if(1==t.option("pure_getters")&&t.option("unused")&&!e.is_array&&Array.isArray(e.names)&&!function(e){for(var t=[/^VarDef$/,/^(Const|Let|Var)$/,/^Export$/],n=0,r=0,i=t.length;n<i;r++){var o=e.parent(r);if(!o)return!1;if(0!==n||"Destructuring"!=o.TYPE){if(!t[n].test(o.TYPE))return!1;n++}}return!0}(t)&&!(e.names[e.names.length-1]instanceof El)){for(var n=[],r=0;r<e.names.length;r++){var i=e.names[r];i instanceof Sf&&"string"==typeof i.key&&i.value instanceof Hf&&!o(t,i.value.definition())||n.push(i)}n.length!=e.names.length&&(e.names=n)}return e;function o(e,t){return!!t.references.length||!!t.global&&(!e.toplevel.vars||!!e.top_retain&&e.top_retain(t))}});var Wh=new Uint8Array(64),Gh=new Uint8Array(128);for(let e=0;e<64;e++){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e);Wh[e]=t,Gh[t]=e}var Yh,Qh,Jh,Xh,em,tm,nm,rm,im,om,sm,am,um,cm,lm,fm,dm,pm,hm,mm,gm,vm,ym,_m,bm,wm,xm,Em,km,Am,Dm,Cm,Om,Sm,$m,Tm,Pm,Fm,Rm,Nm,Lm,Im,Mm,zm,Bm,jm,Um,Vm,qm,Hm,Km,Zm,Wm,Gm,Ym,Qm,Jm,Xm,eg,tg,ng,rg,ig,og,sg,ag,ug,cg,lg,fg,dg,pg,hg,mg,gg,vg,yg,_g,bg,wg,xg,Eg,kg,Ag,Dg,Cg,Og,Sg,$g,Tg,Pg,Fg,Rg,Ng,Lg,Ig,Mg,zg,Bg,jg,Ug,Vg,qg,Hg,Kg,Zg,Wg,Gg,Yg,Qg,Jg,Xg,ev,tv,nv,rv,iv,ov,sv,av,uv,cv,lv,fv,dv,pv,hv,mv,gv,vv,yv,_v,bv,wv,xv,Ev,kv,Av,Dv,Cv,Ov,Sv,$v,Tv,Pv,Fv,Rv,Nv,Lv,Iv,Mv,zv,Bv,jv,Uv,Vv,qv,Hv,Kv,Zv,Wv,Gv,Yv,Qv,Jv,Xv,ey,ty,ny,ry,iy,oy,sy,ay,uy,cy,ly,fy,dy,py,hy,my,gy,vy,yy,_y,by,wy,xy,Ey,ky,Ay,Dy,Cy,Oy,Sy,$y,Ty,Py={exports:{}};function Fy(){if(tm)return em;tm=1;var e=function(){if(Xh)return Jh;Xh=1;var e=/([0-9]+)/;function t(e){return""+parseInt(e)==e?parseInt(e):e}return Jh=function(n,r){var i,o,s,a,u=(""+n).split(e).map(t),c=(""+r).split(e).map(t);for(s=0,a=Math.min(u.length,c.length);s<a;s++)if((i=u[s])!=(o=c[s]))return i>o?1:-1;return u.length>c.length?1:u.length==c.length?0:-1},Jh}();function t(t,n){return e(t[1],n[1])}function n(e,t){return e[1]>t[1]?1:-1}return em=function(e,r){switch(r){case"natural":return e.sort(t);case"standard":return e.sort(n);case"none":case!1:return e}}}function Ry(){return rm||(rm=1,nm=function e(t,n){var r,i,o,s={};for(r in t)o=t[r],Array.isArray(o)?s[r]=o.slice(0):s[r]="object"==typeof o&&null!==o?e(o,{}):o;for(i in n)o=n[i],i in s&&Array.isArray(o)?s[i]=o.slice(0):s[i]=i in s&&"object"==typeof o&&null!==o?e(s[i],o):o;return s}),nm}function Ny(){if(om)return im;om=1;var e=Ry(),t={AfterAtRule:"afterAtRule",AfterBlockBegins:"afterBlockBegins",AfterBlockEnds:"afterBlockEnds",AfterComment:"afterComment",AfterProperty:"afterProperty",AfterRuleBegins:"afterRuleBegins",AfterRuleEnds:"afterRuleEnds",BeforeBlockEnds:"beforeBlockEnds",BetweenSelectors:"betweenSelectors"},n={CarriageReturnLineFeed:"\r\n",LineFeed:"\n",System:function(){var e="\n";try{e=require("os").EOL}catch(e){}return e}()},r={AroundSelectorRelation:"aroundSelectorRelation",BeforeBlockBegins:"beforeBlockBegins",BeforeValue:"beforeValue"},i={breaks:o(!1),breakWith:n.System,indentBy:0,indentWith:" ",spaces:s(!1),wrapAt:!1,semicolonAfterLastProperty:!1};function o(e){var n={};return n[t.AfterAtRule]=e,n[t.AfterBlockBegins]=e,n[t.AfterBlockEnds]=e,n[t.AfterComment]=e,n[t.AfterProperty]=e,n[t.AfterRuleBegins]=e,n[t.AfterRuleEnds]=e,n[t.BeforeBlockEnds]=e,n[t.BetweenSelectors]=e,n}function s(e){var t={};return t[r.AroundSelectorRelation]=e,t[r.BeforeBlockBegins]=e,t[r.BeforeValue]=e,t}function a(e){switch(e){case"windows":case"crlf":case n.CarriageReturnLineFeed:return n.CarriageReturnLineFeed;case"unix":case"lf":case n.LineFeed:return n.LineFeed;default:return n.System}}function u(e){switch(e){case"space":return" ";case"tab":return"\t";default:return e}}function c(e){for(var n in t){var r=t[n],i=e.breaks[r];e.breaks[r]=!0===i?e.breakWith:!1===i?"":e.breakWith.repeat(parseInt(i))}return e}return im={Breaks:t,Spaces:r,formatFrom:function(t){return void 0!==t&&!1!==t&&("object"==typeof t&&"breakWith"in t&&(t=e(t,{breakWith:a(t.breakWith)})),"object"==typeof t&&"indentBy"in t&&(t=e(t,{indentBy:parseInt(t.indentBy)})),"object"==typeof t&&"indentWith"in t&&(t=e(t,{indentWith:u(t.indentWith)})),"object"==typeof t?c(e(i,t)):"string"==typeof t&&"beautify"==t?c(e(i,{breaks:o(!0),indentBy:2,spaces:s(!0)})):"string"==typeof t&&"keep-breaks"==t?c(e(i,{breaks:{afterAtRule:!0,afterBlockBegins:!0,afterBlockEnds:!0,afterComment:!0,afterRuleEnds:!0,beforeBlockEnds:!0}})):"string"==typeof t?c(e(i,t.split(";").reduce(function(e,t){var n=t.split(":"),r=n[0],i=n[1];return"breaks"==r||"spaces"==r?e[r]=i.split(",").reduce(function(e,t){var n=t.split("="),r=n[0],i=n[1];return e[r]=function(e){switch(e){case"false":case"off":return!1;case"true":case"on":return!0;default:return e}}(i),e},{}):"indentBy"==r||"wrapAt"==r?e[r]=parseInt(i):"indentWith"==r?e[r]=u(i):"breakWith"==r&&(e[r]=a(i)),e},{}))):i)}}}function Ly(){return am?sm:(am=1,sm={ASTERISK:"*",AT:"@",BACK_SLASH:"\\",CARRIAGE_RETURN:"\r",CLOSE_CURLY_BRACKET:"}",CLOSE_ROUND_BRACKET:")",CLOSE_SQUARE_BRACKET:"]",COLON:":",COMMA:",",DOUBLE_QUOTE:'"',EXCLAMATION:"!",FORWARD_SLASH:"/",INTERNAL:"-clean-css-",NEW_LINE_NIX:"\n",OPEN_CURLY_BRACKET:"{",OPEN_ROUND_BRACKET:"(",OPEN_SQUARE_BRACKET:"[",SEMICOLON:";",SINGLE_QUOTE:"'",SPACE:" ",TAB:"\t",UNDERSCORE:"_"})}function Iy(){return cm||(cm=1,um=function(e){var t=e[0],n=e[1],r=e[2];return r?r+":"+t+":"+n:t+":"+n}),um}function My(){if(fm)return lm;fm=1;var e=Ny().Spaces,t=Ly(),n=Iy(),r=/[\s"'][iI]\s*\]/,i=/([\d\w])([iI])\]/g,o=/="([a-zA-Z][a-zA-Z\d\-_]+)"([iI])/g,s=/="([a-zA-Z][a-zA-Z\d\-_]+)"(\s|\])/g,a=/^(?:(?:<!--|-->)\s*)+/,u=/='([a-zA-Z][a-zA-Z\d\-_]+)'([iI])/g,c=/='([a-zA-Z][a-zA-Z\d\-_]+)'(\s|\])/g,l=/[>+~]/,f=/\s/,d=[":current",":future",":has",":host",":host-context",":is",":not",":past",":where"];function p(e){var n,r,i,o,s=!1,a=!1;for(i=0,o=e.length;i<o;i++){if(r=e[i],n);else if(r==t.SINGLE_QUOTE||r==t.DOUBLE_QUOTE)a=!a;else{if(!(a||r!=t.CLOSE_CURLY_BRACKET&&r!=t.EXCLAMATION&&"<"!=r&&r!=t.SEMICOLON)){s=!0;break}if(!a&&0===i&&l.test(r)){s=!0;break}}n=r==t.BACK_SLASH}return s}function h(n,o){var s,a,u,c,d,p,h,g,v,y,_,b,w,x,E=[],k=0,A=!1,D=!1,C=!1,O=r.test(n),S=o&&o.spaces[e.AroundSelectorRelation];for(w=0,x=n.length;w<x;w++){if(a=(s=n[w])==t.NEW_LINE_NIX,u=s==t.NEW_LINE_NIX&&n[w-1]==t.CARRIAGE_RETURN,p=h||g,y=!v&&!c&&0===k&&l.test(s),_=f.test(s),b=(1!=k||s!=t.CLOSE_ROUND_BRACKET)&&(b||0===k&&s==t.COLON&&m(n,w)),d&&p&&u)E.pop(),E.pop();else if(c&&p&&a)E.pop();else if(c)E.push(s);else if(s!=t.OPEN_SQUARE_BRACKET||p)if(s!=t.CLOSE_SQUARE_BRACKET||p)if(s!=t.OPEN_ROUND_BRACKET||p)if(s!=t.CLOSE_ROUND_BRACKET||p)if(s!=t.SINGLE_QUOTE||p)if(s!=t.DOUBLE_QUOTE||p)if(s==t.SINGLE_QUOTE&&p)E.push(s),h=!1;else if(s==t.DOUBLE_QUOTE&&p)E.push(s),g=!1;else{if(_&&D&&!S)continue;!_&&D&&S?(E.push(t.SPACE),E.push(s)):_&&!C&&A&&k>0&&b||(_&&!C&&k>0&&b?E.push(s):_&&(v||k>0)&&!p||_&&C&&!p||(u||a)&&(v||k>0)&&p||(y&&C&&!S?(E.pop(),E.push(s)):y&&!C&&S?(E.push(t.SPACE),E.push(s)):_?E.push(t.SPACE):E.push(s)))}else E.push(s),g=!0;else E.push(s),h=!0;else E.push(s),k--;else E.push(s),k++;else E.push(s),v=!1;else E.push(s),v=!0;d=c,c=s==t.BACK_SLASH,D=y,C=_,A=s==t.COMMA}return O?E.join("").replace(i,"$1 $2]"):E.join("")}function m(e,n){var r=e.substring(n,e.indexOf(t.OPEN_ROUND_BRACKET,n));return d.indexOf(r)>-1}function g(e){return-1==e.indexOf("'")&&-1==e.indexOf('"')?e:e.replace(u,"=$1 $2").replace(c,"=$1$2").replace(o,"=$1 $2").replace(s,"=$1$2")}function v(e){return e.replace("nth-child(1)","first-child").replace("nth-of-type(1)","first-of-type").replace("nth-of-type(even)","nth-of-type(2n)").replace("nth-child(even)","nth-child(2n)").replace("nth-of-type(2n+1)","nth-of-type(odd)").replace("nth-child(2n+1)","nth-child(odd)").replace("nth-last-child(1)","last-child").replace("nth-last-of-type(1)","last-of-type").replace("nth-last-of-type(even)","nth-last-of-type(2n)").replace("nth-last-child(even)","nth-last-child(2n)").replace("nth-last-of-type(2n+1)","nth-last-of-type(odd)").replace("nth-last-child(2n+1)","nth-last-child(odd)")}return lm=function(e,t,r,i,o){var s=[],u=[];function c(e,t){return o.push("HTML comment '"+t+"' at "+n(e[2][0])+". Removing."),""}for(var l=0,f=e.length;l<f;l++){var d=e[l],m=d[1];p(m=m.replace(a,c.bind(null,d)))?o.push("Invalid selector '"+d[1]+"' at "+n(d[2][0])+". Ignoring."):(m=g(m=h(m,i)),r&&m.indexOf("nav")>0&&(m=m.replace(/\+nav(\S|$)/,"+ nav$1")),t&&m.indexOf("*+html ")>-1||t&&m.indexOf("*:first-child+html ")>-1||(m.indexOf("*")>-1&&(m=m.replace(/\*([:#.[])/g,"$1").replace(/^(:first-child)?\+html/,"*$1+html")),u.indexOf(m)>-1||(m=v(m),d[1]=m,u.push(m),s.push(d))))}return 1==s.length&&0===s[0][1].length&&(o.push("Empty selector '"+s[0][1]+"' at "+n(s[0][2][0])+". Ignoring."),s=[]),s},lm}function zy(){return vm?gm:(vm=1,gm={ASTERISK:"asterisk",BANG:"bang",BACKSLASH:"backslash",UNDERSCORE:"underscore"})}function By(){return _m||(_m=1,ym=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n.unused&&n.all.splice(n.position,1)}}),ym}function jy(){if(wm)return bm;wm=1;var e=zy(),t=Ly();function n(e){e.value[e.value.length-1][1]+="!important"}function r(n){n.hack[0]==e.UNDERSCORE?n.name="_"+n.name:n.hack[0]==e.ASTERISK?n.name="*"+n.name:n.hack[0]==e.BACKSLASH?n.value[n.value.length-1][1]+="\\"+n.hack[1]:n.hack[0]==e.BANG&&(n.value[n.value.length-1][1]+=t.SPACE+"!ie")}return bm=function(e,t){var i,o,s,a;for(a=e.length-1;a>=0;a--)(i=e[a]).dynamic&&i.important?n(i):i.dynamic||i.unused||(i.dirty||i.important||i.hack)&&(i.optimizable&&t?(o=t(i),i.value=o):o=i.value,i.important&&n(i),i.hack&&r(i),"all"in i&&((s=i.all[i.position])[1][1]=i.name,s.splice(2,s.length-1),Array.prototype.push.apply(s,o)))},bm}function Uy(){return Em?xm:(Em=1,xm={AT_RULE:"at-rule",AT_RULE_BLOCK:"at-rule-block",AT_RULE_BLOCK_SCOPE:"at-rule-block-scope",COMMENT:"comment",NESTED_BLOCK:"nested-block",NESTED_BLOCK_SCOPE:"nested-block-scope",PROPERTY:"property",PROPERTY_BLOCK:"property-block",PROPERTY_NAME:"property-name",PROPERTY_VALUE:"property-value",RAW:"raw",RULE:"rule",RULE_SCOPE:"rule-scope"})}function Vy(){if(Am)return km;Am=1;var e=zy(),t=Ly(),n=Uy(),r={ASTERISK:"*",BACKSLASH:"\\",BANG:"!",BANG_SUFFIX_PATTERN:/!\w+$/,IMPORTANT_TOKEN_PATTERN:new RegExp("!important$","i"),IMPORTANT_WORD_PATTERN:new RegExp("important$","i"),SUFFIX_BANG_PATTERN:/!$/,UNDERSCORE:"_",VARIABLE_REFERENCE_PATTERN:/var\(--.+\)$/};function i(e){var t,r,i;for(t=2,r=e.length;t<r;t++)if((i=e[t])[0]==n.PROPERTY_VALUE&&o(i[1]))return!0;return!1}function o(e){return r.VARIABLE_REFERENCE_PATTERN.test(e)}function s(e){var r,i,o;for(i=3,o=e.length;i<o;i++)if((r=e[i])[0]==n.PROPERTY_VALUE&&(r[1]==t.COMMA||r[1]==t.FORWARD_SLASH))return!0;return!1}function a(t){var o=function(e){if(e.length<3)return!1;var t=e[e.length-1];return!!r.IMPORTANT_TOKEN_PATTERN.test(t[1])||!(!r.IMPORTANT_WORD_PATTERN.test(t[1])||!r.SUFFIX_BANG_PATTERN.test(e[e.length-2][1]))}(t);o&&function(e){var t=e[e.length-1],n=e[e.length-2];r.IMPORTANT_TOKEN_PATTERN.test(t[1])?t[1]=t[1].replace(r.IMPORTANT_TOKEN_PATTERN,""):(t[1]=t[1].replace(r.IMPORTANT_WORD_PATTERN,""),n[1]=n[1].replace(r.SUFFIX_BANG_PATTERN,"")),0===t[1].length&&e.pop(),0===n[1].length&&e.pop()}(t);var a=function(t){var n=!1,i=t[1][1],o=t[t.length-1];return i[0]==r.UNDERSCORE?n=[e.UNDERSCORE]:i[0]==r.ASTERISK?n=[e.ASTERISK]:o[1][0]!=r.BANG||o[1].match(r.IMPORTANT_WORD_PATTERN)?o[1].indexOf(r.BANG)>0&&!o[1].match(r.IMPORTANT_WORD_PATTERN)&&r.BANG_SUFFIX_PATTERN.test(o[1])?n=[e.BANG]:o[1].indexOf(r.BACKSLASH)>0&&o[1].indexOf(r.BACKSLASH)==o[1].length-r.BACKSLASH.length-1?n=[e.BACKSLASH,o[1].substring(o[1].indexOf(r.BACKSLASH)+1)]:0===o[1].indexOf(r.BACKSLASH)&&2==o[1].length&&(n=[e.BACKSLASH,o[1].substring(1)]):n=[e.BANG],n}(t);return a[0]==e.ASTERISK||a[0]==e.UNDERSCORE?function(e){e[1][1]=e[1][1].substring(1)}(t):a[0]!=e.BACKSLASH&&a[0]!=e.BANG||function(t,n){var i=t[t.length-1];i[1]=i[1].substring(0,i[1].indexOf(n[0]==e.BACKSLASH?r.BACKSLASH:r.BANG)).trim(),0===i[1].length&&t.pop()}(t,a),{block:t[2]&&t[2][0]==n.PROPERTY_BLOCK,components:[],dirty:!1,dynamic:i(t),hack:a,important:o,name:t[1][1],multiplex:t.length>3&&s(t),optimizable:!0,position:0,shorthand:!1,unused:!1,value:t.slice(2)}}return km={all:function(e,t){var r,i,o,s=[];for(o=e.length-1;o>=0;o--)(i=e[o])[0]==n.PROPERTY&&(t&&t.indexOf(i[1][1])>-1||((r=a(i)).all=e,r.position=o,s.unshift(r)));return s},single:a},km}function qy(){if(Cm)return Dm;function e(e){this.name="InvalidPropertyError",this.message=e,this.stack=(new Error).stack}return Cm=1,e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,Dm=e}function Hy(){if(Sm)return Om;Sm=1;var e=qy(),t=Vy().single,n=Uy(),r=Ly(),i=Iy();function o(e){var t,n;for(t=0,n=e.length;t<n;t++)if("inherit"==e[t][1])return!0;return!1}function s(e,r,i){var o=i[e];return o.doubleValues&&2==o.defaultValue.length?t([n.PROPERTY,[n.PROPERTY_NAME,e],[n.PROPERTY_VALUE,o.defaultValue[0]],[n.PROPERTY_VALUE,o.defaultValue[1]]]):o.doubleValues&&1==o.defaultValue.length?t([n.PROPERTY,[n.PROPERTY_NAME,e],[n.PROPERTY_VALUE,o.defaultValue[0]]]):t([n.PROPERTY,[n.PROPERTY_NAME,e],[n.PROPERTY_VALUE,o.defaultValue]])}function a(e,r){var i=r[e.name].components,o=[],s=e.value;if(s.length<1)return[];s.length<2&&(s[1]=s[0].slice(0)),s.length<3&&(s[2]=s[0].slice(0)),s.length<4&&(s[3]=s[1].slice(0));for(var a=i.length-1;a>=0;a--){var u=t([n.PROPERTY,[n.PROPERTY_NAME,i[a]]]);u.value=[s[a]],o.unshift(u)}return o}function u(e,t,n){for(var r,i,o,a=t[e.name],u=[s(a.components[0],0,t),s(a.components[1],0,t),s(a.components[2],0,t)],c=0;c<3;c++){var l=u[c];l.name.indexOf("color")>0?r=l:l.name.indexOf("style")>0?i=l:o=l}if(1==e.value.length&&"inherit"==e.value[0][1]||3==e.value.length&&"inherit"==e.value[0][1]&&"inherit"==e.value[1][1]&&"inherit"==e.value[2][1])return r.value=i.value=o.value=[e.value[0]],u;var f,d,p=e.value.slice(0);return p.length>0&&(d=p.filter(function(e){return function(t){return"inherit"!=t[1]&&(e.isWidth(t[1])||e.isUnit(t[1])||e.isDynamicUnit(t[1]))&&!e.isStyleKeyword(t[1])&&!e.isColorFunction(t[1])}}(n)),(f=d.length>1&&("none"==d[0][1]||"auto"==d[0][1])?d[1]:d[0])&&(o.value=[f],p.splice(p.indexOf(f),1))),p.length>0&&(f=p.filter(function(e){return function(t){return"inherit"!=t[1]&&e.isStyleKeyword(t[1])&&!e.isColorFunction(t[1])}}(n))[0],f&&(i.value=[f],p.splice(p.indexOf(f),1))),p.length>0&&(f=p.filter(function(e){return function(t){return"invert"==t[1]||e.isColor(t[1])||e.isPrefixed(t[1])}}(n))[0],f&&(r.value=[f],p.splice(p.indexOf(f),1))),u}return Om={animation:function(t,n,r){var a,u,c,l=s(t.name+"-duration",0,n),f=s(t.name+"-timing-function",0,n),d=s(t.name+"-delay",0,n),p=s(t.name+"-iteration-count",0,n),h=s(t.name+"-direction",0,n),m=s(t.name+"-fill-mode",0,n),g=s(t.name+"-play-state",0,n),v=s(t.name+"-name",0,n),y=[l,f,d,p,h,m,g,v],_=t.value,b=!1,w=!1,x=!1,E=!1,k=!1,A=!1,D=!1,C=!1;if(1==t.value.length&&"inherit"==t.value[0][1])return l.value=f.value=d.value=p.value=h.value=m.value=g.value=v.value=t.value,y;if(_.length>1&&o(_))throw new e("Invalid animation values at "+i(_[0][2][0])+". Ignoring.");for(u=0,c=_.length;u<c;u++)if(a=_[u],r.isTime(a[1])&&!b)l.value=[a],b=!0;else if(r.isTime(a[1])&&!x)d.value=[a],x=!0;else if(!r.isGlobal(a[1])&&!r.isTimingFunction(a[1])||w)if(!r.isAnimationIterationCountKeyword(a[1])&&!r.isPositiveNumber(a[1])||E)if(r.isAnimationDirectionKeyword(a[1])&&!k)h.value=[a],k=!0;else if(r.isAnimationFillModeKeyword(a[1])&&!A)m.value=[a],A=!0;else if(r.isAnimationPlayStateKeyword(a[1])&&!D)g.value=[a],D=!0;else{if(!r.isAnimationNameKeyword(a[1])&&!r.isIdentifier(a[1])||C)throw new e("Invalid animation value at "+i(a[2][0])+". Ignoring.");v.value=[a],C=!0}else p.value=[a],E=!0;else f.value=[a],w=!0;return y},background:function(t,n,o){var a=s("background-image",0,n),u=s("background-position",0,n),c=s("background-size",0,n),l=s("background-repeat",0,n),f=s("background-attachment",0,n),d=s("background-origin",0,n),p=s("background-clip",0,n),h=s("background-color",0,n),m=[a,u,c,l,f,d,p,h],g=t.value,v=!1,y=!1,_=!1,b=!1,w=!1;if(1==t.value.length&&"inherit"==t.value[0][1])return h.value=a.value=l.value=u.value=c.value=d.value=p.value=t.value,m;if(1==t.value.length&&"0 0"==t.value[0][1])return m;for(var x=g.length-1;x>=0;x--){var E=g[x];if(o.isBackgroundAttachmentKeyword(E[1]))f.value=[E],w=!0;else if(o.isBackgroundClipKeyword(E[1])||o.isBackgroundOriginKeyword(E[1]))y?(d.value=[E],_=!0):(p.value=[E],y=!0),w=!0;else if(o.isBackgroundRepeatKeyword(E[1]))b?l.value.unshift(E):(l.value=[E],b=!0),w=!0;else if(o.isBackgroundPositionKeyword(E[1])||o.isBackgroundSizeKeyword(E[1])||o.isUnit(E[1])||o.isDynamicUnit(E[1])){if(x>0){var k=g[x-1];k[1]==r.FORWARD_SLASH?c.value=[E]:x>1&&g[x-2][1]==r.FORWARD_SLASH?(c.value=[k,E],x-=2):(v||(u.value=[]),u.value.unshift(E),v=!0)}else v||(u.value=[]),u.value.unshift(E),v=!0;w=!0}else h.value[0][1]!=n[h.name].defaultValue&&"none"!=h.value[0][1]||!o.isColor(E[1])&&!o.isPrefixed(E[1])?(o.isUrl(E[1])||o.isFunction(E[1]))&&(a.value=[E],w=!0):(h.value=[E],w=!0)}if(y&&!_&&(d.value=p.value.slice(0)),!w)throw new e("Invalid background value at "+i(g[0][2][0])+". Ignoring.");return m},border:u,borderRadius:function(t,n){for(var o=t.value,u=-1,c=0,l=o.length;c<l;c++)if(o[c][1]==r.FORWARD_SLASH){u=c;break}if(0===u||u===o.length-1)throw new e("Invalid border-radius value at "+i(o[0][2][0])+". Ignoring.");var f=s(t.name,0,n);f.value=u>-1?o.slice(0,u):o.slice(0),f.components=a(f,n);var d=s(t.name,0,n);d.value=u>-1?o.slice(u+1):o.slice(0),d.components=a(d,n);for(var p=0;p<4;p++)f.components[p].multiplex=!0,f.components[p].value=f.components[p].value.concat(d.components[p].value);return f.components},font:function(t,n,a){var u,c,l,f,d=s("font-style",0,n),p=s("font-variant",0,n),h=s("font-weight",0,n),m=s("font-stretch",0,n),g=s("font-size",0,n),v=s("line-height",0,n),y=s("font-family",0,n),_=[d,p,h,m,g,v,y],b=t.value,w=0,x=!1,E=!1,k=!1,A=!1,D=!1;if(!b[w])throw new e("Missing font values at "+i(t.all[t.position][1][2][0])+". Ignoring.");if(1==b.length&&"inherit"==b[0][1])return d.value=p.value=h.value=m.value=g.value=v.value=y.value=b,_;if(1==b.length&&(a.isFontKeyword(b[0][1])||a.isGlobal(b[0][1])||a.isPrefixed(b[0][1])))return b[0][1]=r.INTERNAL+b[0][1],d.value=p.value=h.value=m.value=g.value=v.value=y.value=b,_;if(b.length<2||!function(e,t){var n,r,i;for(r=0,i=e.length;r<i;r++)if(n=e[r],t.isFontSizeKeyword(n[1])||t.isUnit(n[1])&&!t.isDynamicUnit(n[1])||t.isFunction(n[1]))return!0;return!1}(b,a)||!function(e,t){var n,r,i;for(r=0,i=e.length;r<i;r++)if(n=e[r],t.isIdentifier(n[1])||t.isQuotedText(n[1]))return!0;return!1}(b,a))throw new e("Invalid font values at "+i(t.all[t.position][1][2][0])+". Ignoring.");if(b.length>1&&o(b))throw new e("Invalid font values at "+i(b[0][2][0])+". Ignoring.");for(;w<4;){if(u=a.isFontStretchKeyword(b[w][1])||a.isGlobal(b[w][1]),c=a.isFontStyleKeyword(b[w][1])||a.isGlobal(b[w][1]),l=a.isFontVariantKeyword(b[w][1])||a.isGlobal(b[w][1]),f=a.isFontWeightKeyword(b[w][1])||a.isGlobal(b[w][1]),c&&!E)d.value=[b[w]],E=!0;else if(l&&!k)p.value=[b[w]],k=!0;else if(f&&!A)h.value=[b[w]],A=!0;else{if(!u||x){if(c&&E||l&&k||f&&A||u&&x)throw new e("Invalid font style / variant / weight / stretch value at "+i(b[0][2][0])+". Ignoring.");break}m.value=[b[w]],x=!0}w++}if(!(a.isFontSizeKeyword(b[w][1])||a.isUnit(b[w][1])&&!a.isDynamicUnit(b[w][1])))throw new e("Missing font size at "+i(b[0][2][0])+". Ignoring.");if(g.value=[b[w]],!b[++w])throw new e("Missing font family at "+i(b[0][2][0])+". Ignoring.");for(b[w]&&b[w][1]==r.FORWARD_SLASH&&b[w+1]&&(a.isLineHeightKeyword(b[w+1][1])||a.isUnit(b[w+1][1])||a.isNumber(b[w+1][1]))&&(v.value=[b[w+1]],w++,w++),y.value=[];b[w];)b[w][1]==r.COMMA?D=!1:(D?y.value[y.value.length-1][1]+=r.SPACE+b[w][1]:y.value.push(b[w]),D=!0),w++;if(0===y.value.length)throw new e("Missing font family at "+i(b[0][2][0])+". Ignoring.");return _},fourValues:a,listStyle:function(e,t,n){var r=s("list-style-type",0,t),i=s("list-style-position",0,t),o=s("list-style-image",0,t),a=[r,i,o];if(1==e.value.length&&"inherit"==e.value[0][1])return r.value=i.value=o.value=[e.value[0]],a;var u=e.value.slice(0),c=u.length,l=0;for(l=0,c=u.length;l<c;l++)if(n.isUrl(u[l][1])||"0"==u[l][1]){o.value=[u[l]],u.splice(l,1);break}for(l=0,c=u.length;l<c;l++)if(n.isListStylePositionKeyword(u[l][1])){i.value=[u[l]],u.splice(l,1);break}return u.length>0&&(n.isListStyleTypeKeyword(u[0][1])||n.isIdentifier(u[0][1]))&&(r.value=[u[0]]),a},multiplex:function(e){return function(t,i,o){var a,u,c,l,f=[],d=t.value;for(a=0,c=d.length;a<c;a++)","==d[a][1]&&f.push(a);if(0===f.length)return e(t,i,o);var p=[];for(a=0,c=f.length;a<=c;a++){var h=0===a?0:f[a-1]+1,m=a<c?f[a]:d.length,g=s(t.name,0,i);g.value=d.slice(h,m),g.value.length>0&&p.push(e(g,i,o))}var v=p[0];for(a=0,c=v.length;a<c;a++)for(v[a].multiplex=!0,u=1,l=p.length;u<l;u++)v[a].value.push([n.PROPERTY_VALUE,r.COMMA]),Array.prototype.push.apply(v[a].value,p[u][a].value);return v}},outline:u,transition:function(t,n,r){var a,u,c,l=s(t.name+"-property",0,n),f=s(t.name+"-duration",0,n),d=s(t.name+"-timing-function",0,n),p=s(t.name+"-delay",0,n),h=[l,f,d,p],m=t.value,g=!1,v=!1,y=!1,_=!1;if(1==t.value.length&&"inherit"==t.value[0][1])return l.value=f.value=d.value=p.value=t.value,h;if(m.length>1&&o(m))throw new e("Invalid animation values at "+i(m[0][2][0])+". Ignoring.");for(u=0,c=m.length;u<c;u++)if(a=m[u],r.isTime(a[1])&&!g)f.value=[a],g=!0;else if(r.isTime(a[1])&&!v)p.value=[a],v=!0;else if(!r.isGlobal(a[1])&&!r.isTimingFunction(a[1])||_){if(!r.isIdentifier(a[1])||y)throw new e("Invalid animation value at "+i(a[2][0])+". Ignoring.");l.value=[a],y=!0}else d.value=[a],_=!0;return h}},Om}function Ky(){if(Tm)return $m;Tm=1;var e=/(?:^|\W)(-\w+-)/g;function t(t){for(var n,r=[];null!==(n=e.exec(t));)-1==r.indexOf(n[0])&&r.push(n[0]);return r}return $m={unique:t,same:function(e,n){return t(e).sort().join(",")==t(n).sort().join(",")}}}function Zy(){if(Nm)return Rm;Nm=1;var e=function(){if(Fm)return Pm;Fm=1;var e=Ky().same;return Pm=function(t,n,r,i,o){return!(!e(n,r)||o&&t.isVariable(n)!==t.isVariable(r))}}();function t(e,n,r){if(!e.isFunction(n)||!e.isFunction(r))return!1;var i=n.substring(0,n.indexOf("(")),o=r.substring(0,r.indexOf("(")),s=n.substring(i.length+1,n.length-1),a=r.substring(o.length+1,r.length-1);return e.isFunction(s)||e.isFunction(a)?i===o&&t(e,s,a):i===o}function n(t){return function(n,r,i){return!(!e(n,r,i,0,!0)&&!n.isKeyword(t)(i))&&(!(!n.isVariable(r)||!n.isVariable(i))||n.isKeyword(t)(i))}}function r(t){return function(n,r,i){return!!(e(n,r,i,0,!0)||n.isKeyword(t)(i)||n.isGlobal(i))&&(!(!n.isVariable(r)||!n.isVariable(i))||n.isKeyword(t)(i)||n.isGlobal(i))}}function i(e,n,r){return!!t(e,n,r)||n===r}function o(t,n,r){return!(!e(t,n,r,0,!0)&&!t.isUnit(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!(t.isUnit(n)&&!t.isUnit(r))&&(!!t.isUnit(r)||!t.isUnit(n)&&(!(!t.isFunction(n)||t.isPrefixed(n)||!t.isFunction(r)||t.isPrefixed(r))||i(t,n,r))))}function s(e){var t=r(e);return function(e,n,r){return o(e,n,r)||t(e,n,r)}}return Rm={generic:{color:function(t,n,r){return!(!e(t,n,r,0,!0)&&!t.isColor(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!(!t.colorOpacity&&(t.isRgbColor(n)||t.isHslColor(n)))&&!(!t.colorOpacity&&(t.isRgbColor(r)||t.isHslColor(r)))&&!(!t.colorHexAlpha&&(t.isHexAlphaColor(n)||t.isHexAlphaColor(r)))&&(!(!t.isColor(n)||!t.isColor(r))||i(t,n,r)))},components:function(e){return function(t,n,r,i){return e[i](t,n,r)}},image:function(t,n,r){return!(!e(t,n,r,0,!0)&&!t.isImage(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!!t.isImage(r)||!t.isImage(n)&&i(t,n,r))},propertyName:function(t,n,r){return!(!e(t,n,r,0,!0)&&!t.isIdentifier(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||t.isIdentifier(r))},time:function(t,n,r){return!(!e(t,n,r,0,!0)&&!t.isTime(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!(t.isTime(n)&&!t.isTime(r))&&(!!t.isTime(r)||!t.isTime(n)&&(!(!t.isFunction(n)||t.isPrefixed(n)||!t.isFunction(r)||t.isPrefixed(r))||i(t,n,r))))},timingFunction:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isTimingFunction(r)||t.isGlobal(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||t.isTimingFunction(r)||t.isGlobal(r))},unit:o,unitOrNumber:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isUnit(r)||t.isNumber(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!((t.isUnit(n)||t.isNumber(n))&&!t.isUnit(r)&&!t.isNumber(r))&&(!(!t.isUnit(r)&&!t.isNumber(r))||!t.isUnit(n)&&!t.isNumber(n)&&(!(!t.isFunction(n)||t.isPrefixed(n)||!t.isFunction(r)||t.isPrefixed(r))||i(t,n,r))))}},property:{animationDirection:r("animation-direction"),animationFillMode:n("animation-fill-mode"),animationIterationCount:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isAnimationIterationCountKeyword(r)||t.isPositiveNumber(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||t.isAnimationIterationCountKeyword(r)||t.isPositiveNumber(r))},animationName:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isAnimationNameKeyword(r)||t.isIdentifier(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||t.isAnimationNameKeyword(r)||t.isIdentifier(r))},animationPlayState:r("animation-play-state"),backgroundAttachment:n("background-attachment"),backgroundClip:r("background-clip"),backgroundOrigin:n("background-origin"),backgroundPosition:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isBackgroundPositionKeyword(r)||t.isGlobal(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!(!t.isBackgroundPositionKeyword(r)&&!t.isGlobal(r))||o(t,n,r))},backgroundRepeat:n("background-repeat"),backgroundSize:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isBackgroundSizeKeyword(r)||t.isGlobal(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||!(!t.isBackgroundSizeKeyword(r)&&!t.isGlobal(r))||o(t,n,r))},bottom:s("bottom"),borderCollapse:n("border-collapse"),borderStyle:r("*-style"),clear:r("clear"),cursor:r("cursor"),display:r("display"),float:r("float"),left:s("left"),fontFamily:function(t,n,r){return e(t,n,r,0,!0)},fontStretch:r("font-stretch"),fontStyle:r("font-style"),fontVariant:r("font-variant"),fontWeight:r("font-weight"),listStyleType:r("list-style-type"),listStylePosition:r("list-style-position"),outlineStyle:r("*-style"),overflow:r("overflow"),position:r("position"),right:s("right"),textAlign:r("text-align"),textDecoration:r("text-decoration"),textOverflow:r("text-overflow"),textShadow:function(t,n,r){return!!(e(t,n,r,0,!0)||t.isUnit(r)||t.isColor(r)||t.isGlobal(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||t.isUnit(r)||t.isColor(r)||t.isGlobal(r))},top:s("top"),transform:i,verticalAlign:s("vertical-align"),visibility:r("visibility"),whiteSpace:r("white-space"),zIndex:function(t,n,r){return!(!e(t,n,r,0,!0)&&!t.isZIndex(r))&&(!(!t.isVariable(n)||!t.isVariable(r))||t.isZIndex(r))}}}}function Wy(){if(Im)return Lm;Im=1;var e=Vy().single,t=Uy();function n(n){var r=e([t.PROPERTY,[t.PROPERTY_NAME,n.name]]);return r.important=n.important,r.hack=n.hack,r.unused=!1,r}return Lm={deep:function(e){for(var t=n(e),r=e.components.length-1;r>=0;r--){var i=n(e.components[r]);i.value=e.components[r].value.slice(0),t.components.unshift(i)}return t.dirty=!0,t.value=e.value.slice(0),t},shallow:n},Lm}function Gy(){if(zm)return Mm;zm=1;var e=Wy().shallow,t=Uy(),n=Ly();function r(e){for(var t=0,r=e.length;t<r;t++){var i=e[t][1];if("inherit"!=i&&i!=n.COMMA&&i!=n.FORWARD_SLASH)return!1}return!0}function i(e){var t=e.components,n=t[0].value[0],r=t[1].value[0],i=t[2].value[0],o=t[3].value[0];return n[1]==r[1]&&n[1]==i[1]&&n[1]==o[1]?[n]:n[1]==i[1]&&r[1]==o[1]?[n,r]:r[1]==o[1]?[n,r,i]:[n,r,i,o]}function o(e,t,n){var r,i,o;for(i=0,o=e.length;i<o;i++)if((r=e[i]).name==n&&r.value[0][1]==t[n].defaultValue)return!0;return!1}return Mm={background:function(e,i,o){var s,a,u=e.components,c=[];function l(e){Array.prototype.unshift.apply(c,e.value)}function f(e){var t=i[e.name];return t.doubleValues&&1==t.defaultValue.length?e.value[0][1]==t.defaultValue[0]&&(!e.value[1]||e.value[1][1]==t.defaultValue[0]):t.doubleValues&&1!=t.defaultValue.length?e.value[0][1]==t.defaultValue[0]&&(e.value[1]?e.value[1][1]:e.value[0][1])==t.defaultValue[1]:e.value[0][1]==t.defaultValue}for(var d=u.length-1;d>=0;d--){var p=u[d],h=f(p);if("background-clip"==p.name){var m=u[d-1],g=f(m);a=!(s=p.value[0][1]==m.value[0][1])&&(g&&!h||!g&&!h||!g&&h&&p.value[0][1]!=m.value[0][1]),s?l(m):a&&(l(p),l(m)),d--}else if("background-size"==p.name){var v=u[d-1],y=f(v);a=!(s=!y&&h)&&(y&&!h||!y&&!h),s?l(v):a?(l(p),c.unshift([t.PROPERTY_VALUE,n.FORWARD_SLASH]),l(v)):1==v.value.length&&l(v),d--}else{if(h||i[p.name].multiplexLastOnly&&!o)continue;l(p)}}return 0===c.length&&1==e.value.length&&"0"==e.value[0][1]&&c.push(e.value[0]),0===c.length&&c.push([t.PROPERTY_VALUE,i[e.name].defaultValue]),r(c)?[c[0]]:c},borderRadius:function(r){if(r.multiplex){for(var o=e(r),s=e(r),a=0;a<4;a++){var u=r.components[a],c=e(r);c.value=[u.value[0]],o.components.push(c);var l=e(r);l.value=[u.value[1]||u.value[0]],s.components.push(l)}var f=i(o),d=i(s);return f.length!=d.length||f[0][1]!=d[0][1]||f.length>1&&f[1][1]!=d[1][1]||f.length>2&&f[2][1]!=d[2][1]||f.length>3&&f[3][1]!=d[3][1]?f.concat([[t.PROPERTY_VALUE,n.FORWARD_SLASH]]).concat(d):f}return i(r)},font:function(e,i){var o,s=e.components,a=[],u=0,c=0;if(0===e.value[0][1].indexOf(n.INTERNAL))return e.value[0][1]=e.value[0][1].substring(n.INTERNAL.length),e.value;for(;u<4;)(o=s[u]).value[0][1]!=i[o.name].defaultValue&&Array.prototype.push.apply(a,o.value),u++;for(Array.prototype.push.apply(a,s[u].value),s[++u].value[0][1]!=i[s[u].name].defaultValue&&(Array.prototype.push.apply(a,[[t.PROPERTY_VALUE,n.FORWARD_SLASH]]),Array.prototype.push.apply(a,s[u].value)),u++;s[u].value[c];)a.push(s[u].value[c]),s[u].value[c+1]&&a.push([t.PROPERTY_VALUE,n.COMMA]),c++;return r(a)?[a[0]]:a},fourValues:i,multiplex:function(r){return function(i,o){if(!i.multiplex)return r(i,o,!0);var s,a,u=0,c=[],l={};for(s=0,a=i.components[0].value.length;s<a;s++)i.components[0].value[s][1]==n.COMMA&&u++;for(s=0;s<=u;s++){for(var f=e(i),d=0,p=i.components.length;d<p;d++){var h=i.components[d],m=e(h);f.components.push(m);for(var g=l[m.name]||0,v=h.value.length;g<v;g++){if(h.value[g][1]==n.COMMA){l[m.name]=g+1;break}m.value.push(h.value[g])}}var y=r(f,o,s==u);Array.prototype.push.apply(c,y),s<u&&c.push([t.PROPERTY_VALUE,n.COMMA])}return c}},withoutDefaults:function(e,n){for(var i=e.components,s=[],a=i.length-1;a>=0;a--){var u=i[a],c=n[u.name];(u.value[0][1]!=c.defaultValue||"keepUnlessDefault"in c&&!o(i,n,c.keepUnlessDefault))&&s.unshift(u.value[0])}return 0===s.length&&s.push([t.PROPERTY_VALUE,n[e.name].defaultValue]),r(s)?[s[0]]:s}},Mm}function Yy(){if(jm)return Bm;jm=1;var e=Ry(),t=/^\d+$/,n=["*","all"],r="off";function i(e){return{ch:e,cm:e,em:e,ex:e,in:e,mm:e,pc:e,pt:e,px:e,q:e,rem:e,vh:e,vmax:e,vmin:e,vw:e,"%":e}}return Bm={DEFAULT:r,roundingPrecisionFrom:function(o){return e(i(r),function(o){return null==o||"boolean"==typeof o?{}:"number"==typeof o&&-1==o?i(r):"number"==typeof o?i(o):"string"==typeof o&&t.test(o)?i(parseInt(o)):"string"==typeof o&&o==r?i(r):"object"==typeof o?o:o.split(",").reduce(function(t,o){var s=o.split("="),a=s[0],u=parseInt(s[1]);return(Number.isNaN(u)||-1==u)&&(u=r),n.indexOf(a)>-1?t=e(t,i(u)):t[a]=u,t},{})}(o))}}}function Qy(){if(Vm)return Um;Vm=1;var e=Yy().roundingPrecisionFrom,t=Ry(),n={Zero:"0",One:"1",Two:"2"},r={};r[n.Zero]={},r[n.One]={cleanupCharsets:!0,normalizeUrls:!0,optimizeBackground:!0,optimizeBorderRadius:!0,optimizeFilter:!0,optimizeFontWeight:!0,optimizeOutline:!0,removeEmpty:!0,removeNegativePaddings:!0,removeQuotes:!0,removeWhitespace:!0,replaceMultipleZeros:!0,replaceTimeUnits:!0,replaceZeroUnits:!0,roundingPrecision:e(void 0),selectorsSortingMethod:"standard",specialComments:"all",tidyAtRules:!0,tidyBlockScopes:!0,tidySelectors:!0,variableValueOptimizers:[]},r[n.Two]={mergeAdjacentRules:!0,mergeIntoShorthands:!0,mergeMedia:!0,mergeNonAdjacentRules:!0,mergeSemantically:!1,overrideProperties:!0,removeEmpty:!0,reduceNonAdjacentRules:!0,removeDuplicateFontRules:!0,removeDuplicateMediaBlocks:!0,removeDuplicateRules:!0,removeUnusedAtRules:!1,restructureRules:!1,skipProperties:[]};var i="*",o="all";function s(e,n){var i,o=t(r[e],{});for(i in o)"boolean"==typeof o[i]&&(o[i]=n);return o}function a(e){switch(e){case"false":case"off":return!1;case"true":case"on":return!0;default:return e}}function u(e,n){return e.split(";").reduce(function(e,r){var u=r.split(":"),c=u[0],l=a(u[1]);return i==c||o==c?e=t(e,s(n,l)):e[c]=l,e},{})}return Um={OptimizationLevel:n,optimizationLevelFrom:function(c){var l=t(r,{}),f=n.Zero,d=n.One,p=n.Two;return void 0===c?(delete l[p],l):("string"==typeof c&&(c=parseInt(c)),"number"==typeof c&&c===parseInt(p)?l:"number"==typeof c&&c===parseInt(d)?(delete l[p],l):"number"==typeof c&&c===parseInt(f)?(delete l[p],delete l[d],l):("object"==typeof c&&(c=function(e){var n,r,i=t(e,{});for(r=0;r<=2;r++)!((n=""+r)in i)||void 0!==i[n]&&!1!==i[n]||delete i[n],n in i&&!0===i[n]&&(i[n]={}),n in i&&"string"==typeof i[n]&&(i[n]=u(i[n],n));return i}(c)),d in c&&"roundingPrecision"in c[d]&&(c[d].roundingPrecision=e(c[d].roundingPrecision)),p in c&&"skipProperties"in c[p]&&"string"==typeof c[p].skipProperties&&(c[p].skipProperties=c[p].skipProperties.split(",")),(f in c||d in c||p in c)&&(l[f]=t(l[f],c[f])),d in c&&i in c[d]&&(l[d]=t(l[d],s(d,a(c[d][i]))),delete c[d][i]),d in c&&o in c[d]&&(l[d]=t(l[d],s(d,a(c[d][o]))),delete c[d][o]),d in c||p in c?l[d]=t(l[d],c[d]):delete l[d],p in c&&i in c[p]&&(l[p]=t(l[p],s(p,a(c[p][i]))),delete c[p][i]),p in c&&o in c[p]&&(l[p]=t(l[p],s(p,a(c[p][o]))),delete c[p][o]),p in c?l[p]=t(l[p],c[p]):delete l[p],l))}},Um}function Jy(){if(Hm)return qm;Hm=1;var e=Qy().OptimizationLevel,t={level1:{property:function(t,n,r){var i=n.value;r.level[e.One].optimizeBackground&&(1==i.length&&"none"==i[0][1]&&(i[0][1]="0 0"),1==i.length&&"transparent"==i[0][1]&&(i[0][1]="0 0"))}}};return qm=t}function Xy(){if(Gm)return Wm;Gm=1;var e=Qy().OptimizationLevel,t={level1:{property:function(t,n,r){var i=n.value;r.level[e.One].optimizeBorderRadius&&(3==i.length&&"/"==i[1][1]&&i[0][1]==i[2][1]?(n.value.splice(1),n.dirty=!0):5==i.length&&"/"==i[2][1]&&i[0][1]==i[3][1]&&i[1][1]==i[4][1]?(n.value.splice(2),n.dirty=!0):7==i.length&&"/"==i[3][1]&&i[0][1]==i[4][1]&&i[1][1]==i[5][1]&&i[2][1]==i[6][1]?(n.value.splice(3),n.dirty=!0):9==i.length&&"/"==i[4][1]&&i[0][1]==i[5][1]&&i[1][1]==i[6][1]&&i[2][1]==i[7][1]&&i[3][1]==i[8][1]&&(n.value.splice(4),n.dirty=!0))}}};return Wm=t}function e_(){if(Qm)return Ym;Qm=1;var e=Qy().OptimizationLevel,t=/progid:DXImageTransform\.Microsoft\.(Alpha|Chroma)(\W)/,n=/,(\S)/g,r=/ ?= ?/g,i={level1:{property:function(i,o,s){s.compatibility.properties.ieFilters&&s.level[e.One].optimizeFilter&&(1==o.value.length&&(o.value[0][1]=o.value[0][1].replace(t,function(e,t,n){return t.toLowerCase()+n})),o.value[0][1]=o.value[0][1].replace(n,", $1").replace(r,"="))}}};return Ym=i}function t_(){if(Xm)return Jm;Xm=1;var e=Qy().OptimizationLevel,t={level1:{property:function(t,n,r){var i=n.value[0][1];r.level[e.One].optimizeFontWeight&&("normal"==i?i="400":"bold"==i&&(i="700"),n.value[0][1]=i)}}};return Jm=t}function n_(){if(tg)return eg;tg=1;var e=Qy().OptimizationLevel,t={level1:{property:function(t,n,r){var i=n.value;r.level[e.One].replaceMultipleZeros&&4==i.length&&"0"===i[0][1]&&"0"===i[1][1]&&"0"===i[2][1]&&"0"===i[3][1]&&(n.value.splice(1),n.dirty=!0)}}};return eg=t}function r_(){if(rg)return ng;rg=1;var e=Qy().OptimizationLevel,t={level1:{property:function(t,n,r){var i=n.value;r.level[e.One].optimizeOutline&&1==i.length&&"none"==i[0][1]&&(i[0][1]="0")}}};return ng=t}function i_(){if(og)return ig;og=1;var e=Qy().OptimizationLevel;function t(e){return e&&"-"==e[1][0]&&parseFloat(e[1])<0}var n={level1:{property:function(n,r,i){var o=r.value;4==o.length&&"0"===o[0][1]&&"0"===o[1][1]&&"0"===o[2][1]&&"0"===o[3][1]&&(r.value.splice(1),r.dirty=!0),i.level[e.One].removeNegativePaddings&&(t(r.value[0])||t(r.value[1])||t(r.value[2])||t(r.value[3]))&&(r.unused=!0)}}};return ig=n}function o_(){return ag?sg:(ag=1,sg={background:Jy().level1.property,boxShadow:(Zm?Km:(Zm=1,Km={level1:{property:function(e,t){var n=t.value;4==n.length&&"0"===n[0][1]&&"0"===n[1][1]&&"0"===n[2][1]&&"0"===n[3][1]&&(t.value.splice(2),t.dirty=!0)}}})).level1.property,borderRadius:Xy().level1.property,filter:e_().level1.property,fontWeight:t_().level1.property,margin:n_().level1.property,outline:r_().level1.property,padding:i_().level1.property})}function s_(){if(mg)return hg;mg=1;var e=Ly();function t(e,t,n){return n?t.test(e):e===t}return hg=function(n,r){var i,o=e.OPEN_ROUND_BRACKET,s=e.CLOSE_ROUND_BRACKET,a=0,u=0,c=0,l=n.length,f=[],d="object"==typeof r&&"exec"in r;if(!d&&-1==n.indexOf(r))return[n];if(-1==n.indexOf(o))return n.split(r);for(;u<l;)n[u]==o?a++:n[u]==s&&a--,0===a&&u>0&&u+1<l&&t(n[u],r,d)&&(f.push(n.substring(c,u)),d&&r.exec(n[u]).length>1&&f.push(n[u]),c=u+1),u++;return c<u+1&&(t((i=n.substring(c))[i.length-1],r,d)&&(i=i.substring(0,i.length-1)),f.push(i)),f}}function a_(){if(vg)return gg;vg=1;var e=function(){if(cg)return ug;cg=1;var e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},t={},n={};for(var r in e){var i=e[r];r.length<i.length?n[i]=r:t[r]=i}var o=new RegExp("(^| |,|\\))("+Object.keys(t).join("|")+")( |,|\\)|$)","ig"),s=new RegExp("("+Object.keys(n).join("|")+")([^a-f0-9]|$)","ig");function a(e,n,r,i){return n+t[r.toLowerCase()]+i}function u(e,t,r){return n[t.toLowerCase()]+r}return ug=function(e){var t=e.indexOf("#")>-1,n=e.replace(o,a);return n!=e&&(n=n.replace(o,a)),t?n.replace(s,u):n}}(),t=function(){if(fg)return lg;function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}return fg=1,lg=function(t,n,r){var i=function(t,n,r){var i,o,s;if((t%=360)<0&&(t+=360),t=~~t/360,n<0?n=0:n>100&&(n=100),r<0?r=0:r>100&&(r=100),r=~~r/100,0==(n=~~n/100))i=o=s=r;else{var a=r<.5?r*(1+n):r+n-r*n,u=2*r-a;i=e(u,a,t+1/3),o=e(u,a,t),s=e(u,a,t-1/3)}return[~~(255*i),~~(255*o),~~(255*s)]}(t,n,r),o=i[0].toString(16),s=i[1].toString(16),a=i[2].toString(16);return"#"+(1==o.length?"0":"")+o+(1==s.length?"0":"")+s+(1==a.length?"0":"")+a}}(),n=pg?dg:(pg=1,dg=function(e,t,n){return"#"+("00000"+(Math.max(0,Math.min(parseInt(e),255))<<16|Math.max(0,Math.min(parseInt(t),255))<<8|Math.max(0,Math.min(parseInt(n),255))).toString(16)).slice(-6)}),r=s_(),i=/(rgb|rgba|hsl|hsla)\(([^()]+)\)/gi,o=/#|rgb|hsl/gi,s=/(^|[^='"])#([0-9a-f]{6})/gi,a=/(^|[^='"])#([0-9a-f]{3})/gi,u=/[0-9a-f]/i,c=/hsl\((-?\d+),(-?\d+)%?,(-?\d+)%?\)/gi,l=/(rgb|hsl)a?\((-?\d+),(-?\d+%?),(-?\d+%?),(0*[1-9]+[0-9]*(\.?\d*)?)\)/gi,f=/rgb\((-?\d+),(-?\d+),(-?\d+)\)/gi,d=/(?:rgba|hsla)\(0,0%?,0%?,0\)/g,p={level1:{value:function(p,h,m){return m.compatibility.properties.colors?h.match(o)?(h=h.replace(l,function(e,t,n,r,i,o){return parseInt(o)>=1?t+"("+[n,r,i].join(",")+")":e}).replace(f,function(e,t,r,i){return n(t,r,i)}).replace(c,function(e,n,r,i){return t(n,r,i)}).replace(s,function(e,t,n,r,i){var o=i[r+e.length];return o&&u.test(o)?e:n[0]==n[1]&&n[2]==n[3]&&n[4]==n[5]?(t+"#"+n[0]+n[2]+n[4]).toLowerCase():(t+"#"+n).toLowerCase()}).replace(a,function(e,t,n){return t+"#"+n.toLowerCase()}).replace(i,function(e,t,n){var r=n.split(","),i=t&&t.toLowerCase();return"hsl"==i&&3==r.length||"hsla"==i&&4==r.length||"rgb"==i&&3===r.length&&n.indexOf("%")>0||"rgba"==i&&4==r.length&&r[0].indexOf("%")>0?(-1==r[1].indexOf("%")&&(r[1]+="%"),-1==r[2].indexOf("%")&&(r[2]+="%"),t+"("+r.join(",")+")"):e}),m.compatibility.colors.opacity&&-1==p.indexOf("background")&&(h=h.replace(d,function(e){return r(h,",").pop().indexOf("gradient(")>-1?e:"transparent"})),e(h)):e(h):h}}};return gg=p}function u_(){if(_g)return yg;_g=1;var e=/\(0deg\)/g,t={level1:{value:function(t,n,r){return r.compatibility.properties.zeroUnits?-1==n.indexOf("0deg")?n:n.replace(e,"(0)"):n}}};return yg=t}function c_(){if(wg)return bg;wg=1;var e=/^url\(/i;return bg=function(t){return e.test(t)}}function l_(){if(Eg)return xg;Eg=1;var e=s_(),t=c_(),n=Qy().OptimizationLevel,r=/^expression\(.*\)$/,i=/^(-(?:moz|ms|o|webkit)-[a-z-]+|[a-z-]+)\((.+)\)$/,o=/([\s,/])/,s=/(^|\D)\.0+(\D|$)/g,a=/\.([1-9]*)0+(\D|$)/g,u=/(^|\D)0\.(\d)/g,c=/([^\w\d-]|^)-0([^.]|$)/g,l=/(^|\s)0+([1-9])/g;function f(n){var d,p;return t(n)||r.test(n)?n:(d=i.exec(n))?(p=e(d[2],o).map(function(e){return f(e)}),d[1]+"("+p.join("")+")"):function(e){return-1==e.indexOf("0")?e:(e.indexOf("-")>-1&&(e=e.replace(c,"$10$2").replace(c,"$10$2")),e.replace(l,"$1$2").replace(s,"$10$2").replace(a,function(e,t,n){return(t.length>0?".":"")+t+n}).replace(u,"$1.$2"))}(n)}var d={level1:{value:function(e,t,r){return r.level[n.One].replaceZeroUnits?f(t):t}}};return xg=d}function f_(){if(Ag)return kg;Ag=1;var e={level1:{value:function(e,t,n){return n.precision.enabled&&-1!==t.indexOf(".")?t.replace(n.precision.decimalPointMatcher,"$1$2$3").replace(n.precision.zeroMatcher,function(e,t,r,i){var o=n.precision.units[i].multiplier,s=parseInt(t),a=Number.isNaN(s)?0:s,u=parseFloat(r);return Math.round((a+u)*o)/o+i}):t}}};return kg=e}function d_(){if(Cg)return Dg;Cg=1;var e=Qy().OptimizationLevel,t=/^local\(/i,n=/^('.*'|".*")$/,r=/^['"][a-zA-Z][a-zA-Z\d\-_]+['"]$/,i=/^['"](?:cursive|default|emoji|fangsong|fantasy|inherit|initial|math|monospace|revert|revert-layer|sans-serif|serif|system-ui|ui-monospace|ui-rounded|ui-sans-serif|ui-serif|unset)['"]$/,o={level1:{value:function(o,s,a){return("font-family"!=o&&"font"!=o||!i.test(s))&&a.level[e.One].removeQuotes&&(n.test(s)||t.test(s))&&r.test(s)?s.substring(1,s.length-1):s}}};return Dg=o}function p_(){if(Sg)return Og;Sg=1;var e=Qy().OptimizationLevel,t=/^(-?[\d.]+)(m?s)$/,n={level1:{value:function(n,r,i){return i.level[e.One].replaceTimeUnits&&t.test(r)?r.replace(t,function(e,t,n){var r;return"ms"==n?r=parseInt(t)/1e3+"s":"s"==n&&(r=1e3*parseFloat(t)+"ms"),r.length<e.length?r:e}):r}}};return Og=n}function h_(){if(Tg)return $g;Tg=1;var e=/(?:^|\s|\()(-?\d+)px/,t={level1:{value:function(t,n,r){return e.test(n)?n.replace(e,function(e,t){var n,i=parseInt(t);return 0===i?e:(r.compatibility.properties.shorterLengthUnits&&r.compatibility.units.pt&&3*i%4==0&&(n=3*i/4+"pt"),r.compatibility.properties.shorterLengthUnits&&r.compatibility.units.pc&&i%16==0&&(n=i/16+"pc"),r.compatibility.properties.shorterLengthUnits&&r.compatibility.units.in&&i%96==0&&(n=i/96+"in"),n&&(n=e.substring(0,e.indexOf(t))+n),n&&n.length<e.length?n:e)}):n}}};return $g=t}function m_(){if(Fg)return Pg;Fg=1;var e=c_(),t=Qy().OptimizationLevel,n=/^url\(/i,r={level1:{value:function(r,i,o){return o.level[t.One].normalizeUrls&&e(i)?i.replace(n,"url("):i}}};return Pg=r}function g_(){if(Ng)return Rg;Ng=1;var e=/^url\(['"].+['"]\)$/,t=/^url\(['"].*[*\s()'"].*['"]\)$/,n=/["']/g,r=/^url\(['"]data:[^;]+;charset/,i={level1:{value:function(i,o,s){return s.compatibility.properties.urlQuotes||!e.test(o)||t.test(o)||r.test(o)?o:o.replace(n,"")}}};return Rg=i}function v_(){if(Ig)return Lg;Ig=1;var e=c_(),t=/\\?\n|\\?\r\n/g,n=/(\()\s+/g,r=/\s+(\))/g;return Lg={level1:{value:function(i,o){return e(o)?o.replace(t,"").replace(n,"$1").replace(r,"$1"):o}}}}function y_(){if(zg)return Mg;zg=1;var e=Qy().OptimizationLevel,t=Ly(),n=/\) ?\/ ?/g,r=/, /g,i=/\r?\n/g,o=/\s+/g,s=/\s+(;?\))/g,a=/(\(;?)\s+/g,u=/^--\S+$/,c=/^var\(\s*--\S+\s*\)$/,l={level1:{value:function(l,f,d){return d.level[e.One].removeWhitespace?u.test(l)&&!c.test(f)||-1==f.indexOf(" ")&&-1==f.indexOf("\n")||0===f.indexOf("expression")||f.indexOf(t.SINGLE_QUOTE)>-1||f.indexOf(t.DOUBLE_QUOTE)>-1?f:((f=(f=f.replace(i,"")).replace(o," ")).indexOf("calc")>-1&&(f=f.replace(n,")/ ")),f.replace(a,"$1").replace(s,"$1").replace(r,",")):f}}};return Mg=l}function __(){if(jg)return Bg;jg=1;var e=s_(),t=/^(-(?:moz|ms|o|webkit)-[a-z-]+|[a-z-]+)\((.+)\)$/,n=/^(?:-moz-calc|-webkit-calc|calc|rgb|hsl|rgba|hsla|min|max|clamp|expression)\(/,r=/([\s,/])/;function i(o,s){var a,u;return n.test(o)?o:(a=t.exec(o))?(u=e(a[2],r).map(function(e){return i(e,s)}),a[1]+"("+u.join("")+")"):function(e,t){return e.replace(t.unitsRegexp,"$10$2").replace(t.unitsRegexp,"$10$2")}(o,s)}var o={level1:{value:function(e,t,n){return n.compatibility.properties.zeroUnits?t.indexOf("%")>0&&("height"==e||"max-height"==e||"width"==e||"max-width"==e)?t:i(t,n):t}}};return Bg=o}function b_(){return Vg?Ug:(Vg=1,Ug={color:a_().level1.value,degrees:u_().level1.value,fraction:l_().level1.value,precision:f_().level1.value,textQuotes:d_().level1.value,time:p_().level1.value,unit:h_().level1.value,urlPrefix:m_().level1.value,urlQuotes:g_().level1.value,urlWhiteSpace:v_().level1.value,whiteSpace:y_().level1.value,zero:__().level1.value})}function w_(){if(Hg)return qg;Hg=1;var e=Hy(),t=Zy(),n=Gy(),r=o_(),i=b_(),o=Ry(),s={animation:{canOverride:t.generic.components([t.generic.time,t.generic.timingFunction,t.generic.time,t.property.animationIterationCount,t.property.animationDirection,t.property.animationFillMode,t.property.animationPlayState,t.property.animationName]),components:["animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state","animation-name"],breakUp:e.multiplex(e.animation),defaultValue:"none",restore:n.multiplex(n.withoutDefaults),shorthand:!0,valueOptimizers:[i.whiteSpace,i.textQuotes,i.time,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-delay":{canOverride:t.generic.time,componentOf:["animation"],defaultValue:"0s",intoMultiplexMode:"real",valueOptimizers:[i.time,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-direction":{canOverride:t.property.animationDirection,componentOf:["animation"],defaultValue:"normal",intoMultiplexMode:"real",vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-duration":{canOverride:t.generic.time,componentOf:["animation"],defaultValue:"0s",intoMultiplexMode:"real",keepUnlessDefault:"animation-delay",valueOptimizers:[i.time,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-fill-mode":{canOverride:t.property.animationFillMode,componentOf:["animation"],defaultValue:"none",intoMultiplexMode:"real",vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-iteration-count":{canOverride:t.property.animationIterationCount,componentOf:["animation"],defaultValue:"1",intoMultiplexMode:"real",vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-name":{canOverride:t.property.animationName,componentOf:["animation"],defaultValue:"none",intoMultiplexMode:"real",valueOptimizers:[i.textQuotes],vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-play-state":{canOverride:t.property.animationPlayState,componentOf:["animation"],defaultValue:"running",intoMultiplexMode:"real",vendorPrefixes:["-moz-","-o-","-webkit-"]},"animation-timing-function":{canOverride:t.generic.timingFunction,componentOf:["animation"],defaultValue:"ease",intoMultiplexMode:"real",vendorPrefixes:["-moz-","-o-","-webkit-"]},background:{canOverride:t.generic.components([t.generic.image,t.property.backgroundPosition,t.property.backgroundSize,t.property.backgroundRepeat,t.property.backgroundAttachment,t.property.backgroundOrigin,t.property.backgroundClip,t.generic.color]),components:["background-image","background-position","background-size","background-repeat","background-attachment","background-origin","background-clip","background-color"],breakUp:e.multiplex(e.background),defaultValue:"0 0",propertyOptimizer:r.background,restore:n.multiplex(n.background),shortestValue:"0",shorthand:!0,valueOptimizers:[i.whiteSpace,i.urlWhiteSpace,i.fraction,i.zero,i.color,i.urlPrefix,i.urlQuotes]},"background-attachment":{canOverride:t.property.backgroundAttachment,componentOf:["background"],defaultValue:"scroll",intoMultiplexMode:"real"},"background-clip":{canOverride:t.property.backgroundClip,componentOf:["background"],defaultValue:"border-box",intoMultiplexMode:"real",shortestValue:"border-box"},"background-color":{canOverride:t.generic.color,componentOf:["background"],defaultValue:"transparent",intoMultiplexMode:"real",multiplexLastOnly:!0,nonMergeableValue:"none",shortestValue:"red",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"background-image":{canOverride:t.generic.image,componentOf:["background"],defaultValue:"none",intoMultiplexMode:"default",valueOptimizers:[i.urlWhiteSpace,i.urlPrefix,i.urlQuotes,i.whiteSpace,i.fraction,i.precision,i.unit,i.zero,i.color]},"background-origin":{canOverride:t.property.backgroundOrigin,componentOf:["background"],defaultValue:"padding-box",intoMultiplexMode:"real",shortestValue:"border-box"},"background-position":{canOverride:t.property.backgroundPosition,componentOf:["background"],defaultValue:["0","0"],doubleValues:!0,intoMultiplexMode:"real",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"background-repeat":{canOverride:t.property.backgroundRepeat,componentOf:["background"],defaultValue:["repeat"],doubleValues:!0,intoMultiplexMode:"real"},"background-size":{canOverride:t.property.backgroundSize,componentOf:["background"],defaultValue:["auto"],doubleValues:!0,intoMultiplexMode:"real",shortestValue:"0 0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},bottom:{canOverride:t.property.bottom,defaultValue:"auto",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},border:{breakUp:e.border,canOverride:t.generic.components([t.generic.unit,t.property.borderStyle,t.generic.color]),components:["border-width","border-style","border-color"],defaultValue:"none",overridesShorthands:["border-bottom","border-left","border-right","border-top"],restore:n.withoutDefaults,shorthand:!0,shorthandComponents:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.zero,i.color]},"border-bottom":{breakUp:e.border,canOverride:t.generic.components([t.generic.unit,t.property.borderStyle,t.generic.color]),components:["border-bottom-width","border-bottom-style","border-bottom-color"],defaultValue:"none",restore:n.withoutDefaults,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.zero,i.color]},"border-bottom-color":{canOverride:t.generic.color,componentOf:["border-bottom","border-color"],defaultValue:"none",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"border-bottom-left-radius":{canOverride:t.generic.unit,componentOf:["border-radius"],defaultValue:"0",propertyOptimizer:r.borderRadius,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-"]},"border-bottom-right-radius":{canOverride:t.generic.unit,componentOf:["border-radius"],defaultValue:"0",propertyOptimizer:r.borderRadius,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-"]},"border-bottom-style":{canOverride:t.property.borderStyle,componentOf:["border-bottom","border-style"],defaultValue:"none"},"border-bottom-width":{canOverride:t.generic.unit,componentOf:["border-bottom","border-width"],defaultValue:"medium",oppositeTo:"border-top-width",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"border-collapse":{canOverride:t.property.borderCollapse,defaultValue:"separate"},"border-color":{breakUp:e.fourValues,canOverride:t.generic.components([t.generic.color,t.generic.color,t.generic.color,t.generic.color]),componentOf:["border"],components:["border-top-color","border-right-color","border-bottom-color","border-left-color"],defaultValue:"none",restore:n.fourValues,shortestValue:"red",shorthand:!0,singleTypeComponents:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"border-left":{breakUp:e.border,canOverride:t.generic.components([t.generic.unit,t.property.borderStyle,t.generic.color]),components:["border-left-width","border-left-style","border-left-color"],defaultValue:"none",restore:n.withoutDefaults,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.zero,i.color]},"border-left-color":{canOverride:t.generic.color,componentOf:["border-color","border-left"],defaultValue:"none",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"border-left-style":{canOverride:t.property.borderStyle,componentOf:["border-left","border-style"],defaultValue:"none"},"border-left-width":{canOverride:t.generic.unit,componentOf:["border-left","border-width"],defaultValue:"medium",oppositeTo:"border-right-width",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"border-radius":{breakUp:e.borderRadius,canOverride:t.generic.components([t.generic.unit,t.generic.unit,t.generic.unit,t.generic.unit]),components:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],defaultValue:"0",propertyOptimizer:r.borderRadius,restore:n.borderRadius,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-"]},"border-right":{breakUp:e.border,canOverride:t.generic.components([t.generic.unit,t.property.borderStyle,t.generic.color]),components:["border-right-width","border-right-style","border-right-color"],defaultValue:"none",restore:n.withoutDefaults,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"border-right-color":{canOverride:t.generic.color,componentOf:["border-color","border-right"],defaultValue:"none",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"border-right-style":{canOverride:t.property.borderStyle,componentOf:["border-right","border-style"],defaultValue:"none"},"border-right-width":{canOverride:t.generic.unit,componentOf:["border-right","border-width"],defaultValue:"medium",oppositeTo:"border-left-width",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"border-style":{breakUp:e.fourValues,canOverride:t.generic.components([t.property.borderStyle,t.property.borderStyle,t.property.borderStyle,t.property.borderStyle]),componentOf:["border"],components:["border-top-style","border-right-style","border-bottom-style","border-left-style"],defaultValue:"none",restore:n.fourValues,shorthand:!0,singleTypeComponents:!0},"border-top":{breakUp:e.border,canOverride:t.generic.components([t.generic.unit,t.property.borderStyle,t.generic.color]),components:["border-top-width","border-top-style","border-top-color"],defaultValue:"none",restore:n.withoutDefaults,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.zero,i.color,i.unit]},"border-top-color":{canOverride:t.generic.color,componentOf:["border-color","border-top"],defaultValue:"none",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"border-top-left-radius":{canOverride:t.generic.unit,componentOf:["border-radius"],defaultValue:"0",propertyOptimizer:r.borderRadius,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-"]},"border-top-right-radius":{canOverride:t.generic.unit,componentOf:["border-radius"],defaultValue:"0",propertyOptimizer:r.borderRadius,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-o-"]},"border-top-style":{canOverride:t.property.borderStyle,componentOf:["border-style","border-top"],defaultValue:"none"},"border-top-width":{canOverride:t.generic.unit,componentOf:["border-top","border-width"],defaultValue:"medium",oppositeTo:"border-bottom-width",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"border-width":{breakUp:e.fourValues,canOverride:t.generic.components([t.generic.unit,t.generic.unit,t.generic.unit,t.generic.unit]),componentOf:["border"],components:["border-top-width","border-right-width","border-bottom-width","border-left-width"],defaultValue:"medium",restore:n.fourValues,shortestValue:"0",shorthand:!0,singleTypeComponents:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"box-shadow":{propertyOptimizer:r.boxShadow,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero,i.color],vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},clear:{canOverride:t.property.clear,defaultValue:"none"},clip:{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},color:{canOverride:t.generic.color,defaultValue:"transparent",shortestValue:"red",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"column-gap":{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},cursor:{canOverride:t.property.cursor,defaultValue:"auto"},display:{canOverride:t.property.display},filter:{propertyOptimizer:r.filter,valueOptimizers:[i.fraction]},float:{canOverride:t.property.float,defaultValue:"none"},font:{breakUp:e.font,canOverride:t.generic.components([t.property.fontStyle,t.property.fontVariant,t.property.fontWeight,t.property.fontStretch,t.generic.unit,t.generic.unit,t.property.fontFamily]),components:["font-style","font-variant","font-weight","font-stretch","font-size","line-height","font-family"],restore:n.font,shorthand:!0,valueOptimizers:[i.textQuotes]},"font-family":{canOverride:t.property.fontFamily,defaultValue:"user|agent|specific",valueOptimizers:[i.textQuotes]},"font-size":{canOverride:t.generic.unit,defaultValue:"medium",shortestValue:"0",valueOptimizers:[i.fraction]},"font-stretch":{canOverride:t.property.fontStretch,defaultValue:"normal"},"font-style":{canOverride:t.property.fontStyle,defaultValue:"normal"},"font-variant":{canOverride:t.property.fontVariant,defaultValue:"normal"},"font-weight":{canOverride:t.property.fontWeight,defaultValue:"normal",propertyOptimizer:r.fontWeight,shortestValue:"400"},gap:{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},height:{canOverride:t.generic.unit,defaultValue:"auto",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},left:{canOverride:t.property.left,defaultValue:"auto",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"letter-spacing":{valueOptimizers:[i.fraction,i.zero]},"line-height":{canOverride:t.generic.unitOrNumber,defaultValue:"normal",shortestValue:"0",valueOptimizers:[i.fraction,i.zero]},"list-style":{canOverride:t.generic.components([t.property.listStyleType,t.property.listStylePosition,t.property.listStyleImage]),components:["list-style-type","list-style-position","list-style-image"],breakUp:e.listStyle,restore:n.withoutDefaults,defaultValue:"outside",shortestValue:"none",shorthand:!0},"list-style-image":{canOverride:t.generic.image,componentOf:["list-style"],defaultValue:"none"},"list-style-position":{canOverride:t.property.listStylePosition,componentOf:["list-style"],defaultValue:"outside",shortestValue:"inside"},"list-style-type":{canOverride:t.property.listStyleType,componentOf:["list-style"],defaultValue:"decimal|disc",shortestValue:"none"},margin:{breakUp:e.fourValues,canOverride:t.generic.components([t.generic.unit,t.generic.unit,t.generic.unit,t.generic.unit]),components:["margin-top","margin-right","margin-bottom","margin-left"],defaultValue:"0",propertyOptimizer:r.margin,restore:n.fourValues,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"margin-bottom":{canOverride:t.generic.unit,componentOf:["margin"],defaultValue:"0",oppositeTo:"margin-top",propertyOptimizer:r.margin,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"margin-inline-end":{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"margin-inline-start":{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"margin-left":{canOverride:t.generic.unit,componentOf:["margin"],defaultValue:"0",oppositeTo:"margin-right",propertyOptimizer:r.margin,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"margin-right":{canOverride:t.generic.unit,componentOf:["margin"],defaultValue:"0",oppositeTo:"margin-left",propertyOptimizer:r.margin,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"margin-top":{canOverride:t.generic.unit,componentOf:["margin"],defaultValue:"0",oppositeTo:"margin-bottom",propertyOptimizer:r.margin,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"max-height":{canOverride:t.generic.unit,defaultValue:"none",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"max-width":{canOverride:t.generic.unit,defaultValue:"none",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"min-height":{canOverride:t.generic.unit,defaultValue:"0",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"min-width":{canOverride:t.generic.unit,defaultValue:"0",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},opacity:{valueOptimizers:[i.fraction,i.precision]},outline:{canOverride:t.generic.components([t.generic.color,t.property.outlineStyle,t.generic.unit]),components:["outline-color","outline-style","outline-width"],breakUp:e.outline,restore:n.withoutDefaults,defaultValue:"0",propertyOptimizer:r.outline,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"outline-color":{canOverride:t.generic.color,componentOf:["outline"],defaultValue:"invert",shortestValue:"red",valueOptimizers:[i.whiteSpace,i.fraction,i.color]},"outline-style":{canOverride:t.property.outlineStyle,componentOf:["outline"],defaultValue:"none"},"outline-width":{canOverride:t.generic.unit,componentOf:["outline"],defaultValue:"medium",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},overflow:{canOverride:t.property.overflow,defaultValue:"visible"},"overflow-x":{canOverride:t.property.overflow,defaultValue:"visible"},"overflow-y":{canOverride:t.property.overflow,defaultValue:"visible"},padding:{breakUp:e.fourValues,canOverride:t.generic.components([t.generic.unit,t.generic.unit,t.generic.unit,t.generic.unit]),components:["padding-top","padding-right","padding-bottom","padding-left"],defaultValue:"0",propertyOptimizer:r.padding,restore:n.fourValues,shorthand:!0,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"padding-bottom":{canOverride:t.generic.unit,componentOf:["padding"],defaultValue:"0",oppositeTo:"padding-top",propertyOptimizer:r.padding,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"padding-left":{canOverride:t.generic.unit,componentOf:["padding"],defaultValue:"0",oppositeTo:"padding-right",propertyOptimizer:r.padding,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"padding-right":{canOverride:t.generic.unit,componentOf:["padding"],defaultValue:"0",oppositeTo:"padding-left",propertyOptimizer:r.padding,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"padding-top":{canOverride:t.generic.unit,componentOf:["padding"],defaultValue:"0",oppositeTo:"padding-bottom",propertyOptimizer:r.padding,valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},position:{canOverride:t.property.position,defaultValue:"static"},right:{canOverride:t.property.right,defaultValue:"auto",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"row-gap":{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},src:{valueOptimizers:[i.urlWhiteSpace,i.urlPrefix,i.urlQuotes]},"stroke-width":{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"text-align":{canOverride:t.property.textAlign,defaultValue:"left|right"},"text-decoration":{canOverride:t.property.textDecoration,defaultValue:"none"},"text-indent":{canOverride:t.property.textOverflow,defaultValue:"none",valueOptimizers:[i.fraction,i.zero]},"text-overflow":{canOverride:t.property.textOverflow,defaultValue:"none"},"text-shadow":{canOverride:t.property.textShadow,defaultValue:"none",valueOptimizers:[i.whiteSpace,i.fraction,i.zero,i.color]},top:{canOverride:t.property.top,defaultValue:"auto",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},transform:{canOverride:t.property.transform,valueOptimizers:[i.whiteSpace,i.degrees,i.fraction,i.precision,i.unit,i.zero],vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},transition:{breakUp:e.multiplex(e.transition),canOverride:t.generic.components([t.property.transitionProperty,t.generic.time,t.generic.timingFunction,t.generic.time]),components:["transition-property","transition-duration","transition-timing-function","transition-delay"],defaultValue:"none",restore:n.multiplex(n.withoutDefaults),shorthand:!0,valueOptimizers:[i.time,i.fraction],vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},"transition-delay":{canOverride:t.generic.time,componentOf:["transition"],defaultValue:"0s",intoMultiplexMode:"real",valueOptimizers:[i.time],vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},"transition-duration":{canOverride:t.generic.time,componentOf:["transition"],defaultValue:"0s",intoMultiplexMode:"real",keepUnlessDefault:"transition-delay",valueOptimizers:[i.time,i.fraction],vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},"transition-property":{canOverride:t.generic.propertyName,componentOf:["transition"],defaultValue:"all",intoMultiplexMode:"placeholder",placeholderValue:"_",vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},"transition-timing-function":{canOverride:t.generic.timingFunction,componentOf:["transition"],defaultValue:"ease",intoMultiplexMode:"real",vendorPrefixes:["-moz-","-ms-","-o-","-webkit-"]},"vertical-align":{canOverride:t.property.verticalAlign,defaultValue:"baseline",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},visibility:{canOverride:t.property.visibility,defaultValue:"visible"},"-webkit-tap-highlight-color":{valueOptimizers:[i.whiteSpace,i.color]},"-webkit-margin-end":{valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"white-space":{canOverride:t.property.whiteSpace,defaultValue:"normal"},width:{canOverride:t.generic.unit,defaultValue:"auto",shortestValue:"0",valueOptimizers:[i.whiteSpace,i.fraction,i.precision,i.unit,i.zero]},"z-index":{canOverride:t.property.zIndex,defaultValue:"auto"}},a={};function u(e,t){var n=o(s[e],{});return"componentOf"in n&&(n.componentOf=n.componentOf.map(function(e){return t+e})),"components"in n&&(n.components=n.components.map(function(e){return t+e})),"keepUnlessDefault"in n&&(n.keepUnlessDefault=t+n.keepUnlessDefault),n}for(var c in s){var l=s[c];if("vendorPrefixes"in l){for(var f=0;f<l.vendorPrefixes.length;f++){var d=l.vendorPrefixes[f],p=u(c,d);delete p.vendorPrefixes,a[d+c]=p}delete l.vendorPrefixes}}return qg=o(s,a)}function x_(){if(Zg)return Kg;Zg=1;var e="",t=Ny().Breaks,n=Ny().Spaces,r=Ly(),i=Uy();function o(e){return"filter"==e[1][1]||"-ms-filter"==e[1][1]}function s(e,t,n){return!e.spaceAfterClosingBrace&&function(e){return"background"==e[1][1]||"transform"==e[1][1]||"src"==e[1][1]}(t)&&function(e,t){return e[t][1][e[t][1].length-1]==r.CLOSE_ROUND_BRACKET}(t,n)||function(e,t){return e[t+1]&&e[t+1][1]==r.FORWARD_SLASH}(t,n)||function(e,t){return e[t][1]==r.FORWARD_SLASH}(t,n)||function(e,t){return e[t+1]&&e[t+1][1]==r.COMMA}(t,n)||function(e,t){return e[t][1]==r.COMMA}(t,n)}function a(e,t){for(var n=e.store,r=0,i=t.length;r<i;r++)n(e,t[r]),r<i-1&&n(e,g(e))}function u(e,t){for(var n=function(e){for(var t=e.length-1;t>=0&&e[t][0]==i.COMMENT;t--);return t}(t),r=0,o=t.length;r<o;r++)c(e,t,r,n)}function c(o,s,c,g){var v,y=o.store,_=s[c],b=_[2],w=b&&b[0]===i.PROPERTY_BLOCK;v=o.format?!(!o.format.semicolonAfterLastProperty&&!w)||c<g:c<g||w;var x=c===g;switch(_[0]){case i.AT_RULE:y(o,_),y(o,m(o,t.AfterProperty,!1));break;case i.AT_RULE_BLOCK:a(o,_[1]),y(o,p(o,t.AfterRuleBegins,!0)),u(o,_[2]),y(o,h(o,t.AfterRuleEnds,!1,x));break;case i.COMMENT:y(o,_),y(o,f(o,t.AfterComment)+o.indentWith);break;case i.PROPERTY:y(o,_[1]),y(o,function(t){return t.format?r.COLON+(d(t,n.BeforeValue)?r.SPACE:e):r.COLON}(o)),b&&l(o,_),y(o,v?m(o,t.AfterProperty,x):e);break;case i.RAW:y(o,_)}}function l(e,n){var a,c,l=e.store;if(n[2][0]==i.PROPERTY_BLOCK)l(e,p(e,t.AfterBlockBegins,!1)),u(e,n[2][1]),l(e,h(e,t.AfterBlockEnds,!1,!0));else for(a=2,c=n.length;a<c;a++)l(e,n[a]),a<c-1&&(o(n)||!s(e,n,a))&&l(e,r.SPACE)}function f(t,n){return t.format?t.format.breaks[n]:e}function d(e,t){return e.format&&e.format.spaces[t]}function p(t,i,o){return t.format?(t.indentBy+=t.format.indentBy,t.indentWith=t.format.indentWith.repeat(t.indentBy),(o&&d(t,n.BeforeBlockBegins)?r.SPACE:e)+r.OPEN_CURLY_BRACKET+f(t,i)+t.indentWith):r.OPEN_CURLY_BRACKET}function h(n,i,o,s){return n.format?(n.indentBy-=n.format.indentBy,n.indentWith=n.format.indentWith.repeat(n.indentBy),f(n,o?t.BeforeBlockEnds:t.AfterProperty)+n.indentWith+r.CLOSE_CURLY_BRACKET+(s?e:f(n,i)+n.indentWith)):r.CLOSE_CURLY_BRACKET}function m(t,n,i){return t.format?r.SEMICOLON+(i?e:f(t,n)+t.indentWith):r.SEMICOLON}function g(e){return e.format?r.COMMA+f(e,t.BetweenSelectors)+e.indentWith:r.COMMA}return Kg={all:function e(n,r){var o,s,c,l,d=n.store;for(c=0,l=r.length;c<l;c++)switch(s=c==l-1,(o=r[c])[0]){case i.AT_RULE:d(n,o),d(n,m(n,t.AfterAtRule,s));break;case i.AT_RULE_BLOCK:a(n,o[1]),d(n,p(n,t.AfterRuleBegins,!0)),u(n,o[2]),d(n,h(n,t.AfterRuleEnds,!1,s));break;case i.NESTED_BLOCK:a(n,o[1]),d(n,p(n,t.AfterBlockBegins,!0)),e(n,o[2]),d(n,h(n,t.AfterBlockEnds,!0,s));break;case i.COMMENT:d(n,o),d(n,f(n,t.AfterComment)+n.indentWith);break;case i.RAW:d(n,o);break;case i.RULE:a(n,o[1]),d(n,p(n,t.AfterRuleBegins,!0)),u(n,o[2]),d(n,h(n,t.AfterRuleEnds,!1,s))}},body:u,property:c,rules:a,value:l},Kg}function E_(){if(Gg)return Wg;Gg=1;var e=x_();function t(e,t){e.output.push("string"==typeof t?t:t[1])}function n(){return{output:[],store:t}}return Wg={all:function(t){var r=n();return e.all(r,t),r.output.join("")},body:function(t){var r=n();return e.body(r,t),r.output.join("")},property:function(t,r){var i=n();return e.property(i,t,r,!0),i.output.join("")},rules:function(t){var r=n();return e.rules(r,t),r.output.join("")},value:function(t){var r=n();return e.value(r,t),r.output.join("")}}}function k_(){if(Xg)return Jg;Xg=1;var e=Ly(),t=s_(),n=/\/deep\//,r=/^::/,i=/:(-moz-|-ms-|-o-|-webkit-)/,o=":not",s=[":dir",":lang",":not",":nth-child",":nth-last-child",":nth-last-of-type",":nth-of-type"],a=/[>+~]/,u=[":after",":before",":first-letter",":first-line",":lang"],c=["::after","::before","::first-letter","::first-line"],l="double-quote",f="single-quote",d="root";function p(e){return n.test(e)}function h(e){return i.test(e)}function m(t){var n,r,i,o,s,u,c=[],p=[],h=d,m=0,g=!1,v=!1;for(s=0,u=t.length;s<u;s++)n=t[s],o=!i&&a.test(n),r=h==l||h==f,i?p.push(n):n==e.DOUBLE_QUOTE&&h==d?(p.push(n),h=l):n==e.DOUBLE_QUOTE&&h==l?(p.push(n),h=d):n==e.SINGLE_QUOTE&&h==d?(p.push(n),h=f):n==e.SINGLE_QUOTE&&h==f?(p.push(n),h=d):r?p.push(n):n==e.OPEN_ROUND_BRACKET?(p.push(n),m++):n==e.CLOSE_ROUND_BRACKET&&1==m&&g?(p.push(n),c.push(p.join("")),m--,p=[],g=!1):n==e.CLOSE_ROUND_BRACKET?(p.push(n),m--):n==e.COLON&&0===m&&g&&!v?(c.push(p.join("")),(p=[]).push(n)):n!=e.COLON||0!==m||v?n==e.SPACE&&0===m&&g||o&&0===m&&g?(c.push(p.join("")),p=[],g=!1):p.push(n):((p=[]).push(n),g=!0),i=n==e.BACK_SLASH,v=n==e.COLON;return p.length>0&&g&&c.push(p.join("")),c}function g(t,n,r,i,a){return function(t,n,r){var i,o,s,a;for(s=0,a=t.length;s<a;s++)if(o=(i=t[s]).indexOf(e.OPEN_ROUND_BRACKET)>-1?i.substring(0,i.indexOf(e.OPEN_ROUND_BRACKET)):i,-1===n.indexOf(o)&&-1===r.indexOf(o))return!1;return!0}(n,r,i)&&function(t){var n,r,i,o,a,u;for(a=0,u=t.length;a<u;a++){if(r=(o=(i=(n=t[a]).indexOf(e.OPEN_ROUND_BRACKET))>-1)?n.substring(0,i):n,o&&-1==s.indexOf(r))return!1;if(!o&&s.indexOf(r)>-1)return!1}return!0}(n)&&(n.length<2||!function(t,n){var r,i,s,a,u,c,l,f,d=0;for(l=0,f=n.length;l<f&&(r=n[l],s=n[l+1]);l++)if(i=t.indexOf(r,d),d=a=t.indexOf(r,i+1),i+r.length==a&&(u=r.indexOf(e.OPEN_ROUND_BRACKET)>-1?r.substring(0,r.indexOf(e.OPEN_ROUND_BRACKET)):r,c=s.indexOf(e.OPEN_ROUND_BRACKET)>-1?s.substring(0,s.indexOf(e.OPEN_ROUND_BRACKET)):s,u!=o||c!=o))return!0;return!1}(t,n))&&(n.length<2||a&&function(e){var t,n,r,i=0;for(n=0,r=e.length;n<r;n++)if(v(t=e[n])?i+=c.indexOf(t)>-1?1:0:i+=u.indexOf(t)>-1?1:0,i>1)return!1;return!0}(n))}function v(e){return r.test(e)}return Jg=function(n,r,i,o){var s,a,u,c=t(n,e.COMMA);for(a=0,u=c.length;a<u;a++)if(0===(s=c[a]).length||p(s)||h(s)||s.indexOf(e.COLON)>-1&&!g(s,m(s),r,i,o))return!1;return!0},Jg}function A_(){if(tv)return ev;tv=1;var e=Ly();return ev=function(t,n,r){var i,o,s,a=n.value.length,u=r.value.length,c=Math.max(a,u),l=Math.min(a,u)-1;for(s=0;s<c;s++)if(i=n.value[s]&&n.value[s][1]||i,o=r.value[s]&&r.value[s][1]||o,i!=e.COMMA&&o!=e.COMMA&&!t(i,o,s,s<=l))return!1;return!0}}function D_(){return rv||(rv=1,nv=function(e){for(var t=e.value.length-1;t>=0;t--)if("inherit"==e.value[t][1])return!0;return!1}),nv}function C_(){if(av)return sv;av=1;var e=w_(),t=qy();function n(e,t){return 1==e.value.length&&t.isVariable(e.value[0][1])}function r(e,t){return e.value.length>1&&e.value.filter(function(e){return t.isVariable(e[1])}).length>1}return sv=function(i,o,s){for(var a,u,c,l=i.length-1;l>=0;l--){var f=i[l],d=e[f.name];if(!f.dynamic&&d&&d.shorthand){if(n(f,o)||r(f,o)){f.optimizable=!1;continue}f.shorthand=!0,f.dirty=!0;try{if(f.components=d.breakUp(f,e,o),d.shorthandComponents)for(u=0,c=f.components.length;u<c;u++)(a=f.components[u]).components=e[a.name].breakUp(a,e,o)}catch(e){if(!(e instanceof t))throw e;f.components=[],s.push(e.message)}f.components.length>0?f.multiplex=f.components[0].multiplex:f.unused=!0}}},sv}function O_(){if(cv)return uv;cv=1;var e=w_();return uv=function(t){var n=e[t.name];return n&&n.shorthand?n.restore(t,e):t.value}}function S_(){if(Ev)return xv;Ev=1;var e=D_(),t=(pv||(pv=1,dv=function(e){for(var t=e.value.length-1;t>=0;t--)if("unset"==e.value[t][1])return!0;return!1}),dv),n=A_(),r=function(){if(mv)return hv;mv=1;var e=w_();function t(e,t){return e.components.filter(t)[0]}return hv=function(n,r){var i,o=(i=r,function(e){return i.name===e.name});return t(n,o)||function(n,r){var i,o,s;if(e[n.name].shorthandComponents)for(o=0,s=n.components.length;o<s;o++)if(i=t(n.components[o],r))return i}(n,o)},hv}(),i=function(){if(vv)return gv;vv=1;var e=w_();function t(t,n){var r=e[t.name];return"components"in r&&r.components.indexOf(n.name)>-1}return gv=function(n,r,i){return t(n,r)||!i&&!!e[n.name].shorthandComponents&&function(e,n){return e.components.some(function(e){return t(e,n)})}(n,r)}}(),o=function(){if(_v)return yv;_v=1;var e=Ly();return yv=function(t){return"font"!=t.name||-1==t.value[0][1].indexOf(e.INTERNAL)}}(),s=function(){if(wv)return bv;wv=1;var e=w_();return bv=function(t,n){return t.name in e&&"overridesShorthands"in e[t.name]&&e[t.name].overridesShorthands.indexOf(n.name)>-1}}(),a=Ky().same,u=w_(),c=Wy().deep,l=O_(),f=Wy().shallow,d=jy(),p=Uy(),h=Ly(),m=E_().property;function g(e,t,n){return t===n}function v(e,t){for(var r=0;r<e.components.length;r++){var i=e.components[r],o=u[i.name],s=o&&o.canOverride||g,a=f(i);if(a.value=[[p.PROPERTY_VALUE,o.defaultValue]],!n(s.bind(null,t),a,i))return!0}return!1}function y(e,t){t.unused=!0,x(t,k(e)),e.value=t.value}function _(e,t){t.unused=!0,e.multiplex=!0,e.value=t.value}function b(e,t){t.multiplex?_(e,t):e.multiplex?y(e,t):function(e,t){t.unused=!0,e.value=t.value}(e,t)}function w(e,t){t.unused=!0;for(var n=0,r=e.components.length;n<r;n++)b(e.components[n],t.components[n])}function x(e,t){e.multiplex=!0,u[e.name].shorthand?function(e,t){var n,r,i;for(r=0,i=e.components.length;r<i;r++)(n=e.components[r]).multiplex||E(n,t)}(e,t):E(e,t)}function E(e,t){for(var n,r=u[e.name],i="real"==r.intoMultiplexMode,o="real"==r.intoMultiplexMode?e.value.slice(0):"placeholder"==r.intoMultiplexMode?r.placeholderValue:r.defaultValue,s=k(e),a=o.length;s<t;s++)if(e.value.push([p.PROPERTY_VALUE,h.COMMA]),Array.isArray(o))for(n=0;n<a;n++)e.value.push(i?o[n]:[p.PROPERTY_VALUE,o[n]]);else e.value.push(i?o:[p.PROPERTY_VALUE,o])}function k(e){for(var t=0,n=0,r=e.value.length;n<r;n++)e.value[n][1]==h.COMMA&&t++;return t+1}function A(e){var t=[p.PROPERTY,[p.PROPERTY_NAME,e.name]].concat(e.value);return m([t],0).length}function D(e,t,n){for(var r=0,i=t;i>=0&&(e[i].name!=n||e[i].unused||r++,!(r>1));i--);return r>1}function C(e,t){for(var n=0,r=e.components.length;n<r;n++)if(!O(t.isUrl,e.components[n])&&O(t.isFunction,e.components[n]))return!0;return!1}function O(e,t){for(var n=0,r=t.value.length;n<r;n++)if(t.value[n][1]!=h.COMMA&&e(t.value[n][1]))return!0;return!1}function S(e,t){if(!e.multiplex&&!t.multiplex||e.multiplex&&t.multiplex)return!1;var n,i=e.multiplex?e:t,o=e.multiplex?t:e,s=c(i);d([s],l);var a=c(o);d([a],l);var u=A(s)+1+A(a);return e.multiplex?y(n=r(s,a),a):(n=r(a,s),x(a,k(s)),_(n,s)),d([a],l),u<=A(a)}function $(e){return e.name in u}function T(e,t){return!e.multiplex&&("background"==e.name||"background-image"==e.name)&&t.multiplex&&("background"==t.name||"background-image"==t.name)&&function(e){for(var t=function(e){for(var t=[],n=0,r=[],i=e.length;n<i;n++){var o=e[n];o[1]==h.COMMA?(t.push(r),r=[]):r.push(o)}return t.push(r),t}(e),n=0,r=t.length;n<r;n++)if(1==t[n].length&&"none"==t[n][0][1])return!0;return!1}(t.value)}return xv=function(c,l,f,d){var p,h,m,y,_,E,A,P,F,R,N;e:for(F=c.length-1;F>=0;F--)if($(h=c[F])&&!h.block){p=u[h.name].canOverride||g;t:for(R=F-1;R>=0;R--)if($(m=c[R])&&!m.block&&!m.dynamic&&!h.dynamic&&!m.unused&&!h.unused&&(!m.hack||h.hack||h.important)&&(m.hack||m.important||!h.hack)&&(m.important!=h.important||m.hack[0]==h.hack[0])&&!(m.important==h.important&&(m.hack[0]!=h.hack[0]||m.hack[1]&&m.hack[1]!=h.hack[1])||e(h)||T(m,h)))if(h.shorthand&&i(h,m)){if(!h.important&&m.important)continue;if(!a([m],h.components))continue;if(!O(d.isFunction,m)&&C(h,d))continue;if(!o(h)){m.unused=!0;continue}y=r(h,m),p=u[m.name].canOverride||g,n(p.bind(null,d),m,y)&&(m.unused=!0)}else if(h.shorthand&&s(h,m)){if(!h.important&&m.important)continue;if(!a([m],h.components))continue;if(!O(d.isFunction,m)&&C(h,d))continue;for(N=(_=m.shorthand?m.components:[m]).length-1;N>=0;N--)if(E=_[N],A=r(h,E),p=u[E.name].canOverride||g,!n(p.bind(null,d),m,A))continue t;m.unused=!0}else if(l&&m.shorthand&&!h.shorthand&&i(m,h,!0)){if(h.important&&!m.important)continue;if(!h.important&&m.important){h.unused=!0;continue}if(D(c,F-1,m.name))continue;if(C(m,d))continue;if(!o(m))continue;if(t(m)||t(h))continue;if(y=r(m,h),n(p.bind(null,d),y,h)){var L=!f.properties.backgroundClipMerging&&y.name.indexOf("background-clip")>-1||!f.properties.backgroundOriginMerging&&y.name.indexOf("background-origin")>-1||!f.properties.backgroundSizeMerging&&y.name.indexOf("background-size")>-1,I=u[h.name].nonMergeableValue===h.value[0][1];if(L||I)continue;if(!f.properties.merging&&v(m,d))continue;if(y.value[0][1]!=h.value[0][1]&&(e(m)||e(h)))continue;if(S(m,h))continue;!m.multiplex&&h.multiplex&&x(m,k(h)),b(y,h),m.dirty=!0}}else if(l&&m.shorthand&&h.shorthand&&m.name==h.name){if(!m.multiplex&&h.multiplex)continue;if(!h.important&&m.important){h.unused=!0;continue e}if(h.important&&!m.important){m.unused=!0;continue}if(!o(h)){m.unused=!0;continue}for(N=m.components.length-1;N>=0;N--){var M=m.components[N],z=h.components[N];if(p=u[M.name].canOverride||g,!n(p.bind(null,d),M,z))continue e}w(m,h),m.dirty=!0}else if(l&&m.shorthand&&h.shorthand&&i(m,h)){if(!m.important&&h.important)continue;if(y=r(m,h),p=u[h.name].canOverride||g,!n(p.bind(null,d),y,h))continue;if(m.important&&!h.important){h.unused=!0;continue}if(u[h.name].restore(h,u).length>1)continue;b(y=r(m,h),h),h.dirty=!0}else if(m.name==h.name){if(P=!0,h.shorthand)for(N=h.components.length-1;N>=0&&P;N--)E=m.components[N],A=h.components[N],p=u[A.name].canOverride||g,P=n(p.bind(null,d),E,A);else p=u[h.name].canOverride||g,P=n(p.bind(null,d),m,h);if(m.important&&!h.important&&P){h.unused=!0;continue}if(!m.important&&h.important&&P){m.unused=!0;continue}if(!P)continue;m.unused=!0}}},xv}function $_(){if(Av)return kv;Av=1;var e=function(){if(fv)return lv;fv=1;var e=A_(),t=D_(),n=(ov||(ov=1,iv=function(e){var t,n,r=e.value[0][1];for(t=1,n=e.value.length;t<n;t++)if(e.value[t][1]!=r)return!1;return!0}),iv),r=C_(),i=w_(),o=Wy().deep,s=O_(),a=jy(),u=Vy().single,c=E_().body,l=Uy();function f(e,t,n,r){var o,s,a,u,c=e[t],l=[];for(o in n)void 0!==c&&o==c.name||(s=i[o],a=n[o],c&&d(n,o,c)?delete n[o]:s.components.length>Object.keys(a).length||p(a)||h(a,o,r)&&g(a)&&(v(a)?y(e,a,o,r):E(e,a,o,r),l.push(o)));for(u=l.length-1;u>=0;u--)delete n[l[u]]}function d(e,t,n){var r,o=i[t],s=i[n.name];if("overridesShorthands"in o&&o.overridesShorthands.indexOf(n.name)>-1)return!0;if(s&&"componentOf"in s)for(r in e[t])if(s.componentOf.indexOf(r)>-1)return!0;return!1}function p(e){var t,n;for(n in e){if(void 0!==t&&e[n].important!=t)return!0;t=e[n].important}return!1}function h(t,n,o){var s,a,c,f,d=i[n],p=[l.PROPERTY,[l.PROPERTY_NAME,n],[l.PROPERTY_VALUE,d.defaultValue]],h=u(p);for(r([h],o,[]),c=0,f=d.components.length;c<f;c++)if(s=t[d.components[c]],a=i[s.name].canOverride||m,!e(a.bind(null,o),h.components[c],s))return!1;return!0}function m(e,t,n){return t===n}function g(e){var t,n,r,o,u=null;for(n in e)if(r=e[n],"restore"in(o=i[n])){if(a([r.all[r.position]],s),t=o.restore(r,i).length,null!==u&&t!==u)return!1;u=t}return!0}function v(e){var n,r,i=null;for(n in e){if(r=t(e[n]),null!==i&&i!==r)return!0;i=r}return!1}function y(e,n,f,d){var p,h,m,g,v=function(e,n,c){var f,d,p,h,m,g,v=[],y={},w={},x=i[n],E=[l.PROPERTY,[l.PROPERTY_NAME,n],[l.PROPERTY_VALUE,x.defaultValue]],k=u(E);for(r([k],c,[]),m=0,g=x.components.length;m<g;m++)f=e[x.components[m]],t(f)?(d=f.all[f.position].slice(0,2),Array.prototype.push.apply(d,f.value),v.push(d),(p=o(f)).value=_(e,p.name),k.components[m]=p,y[f.name]=o(f)):((p=o(f)).all=f.all,k.components[m]=p,w[f.name]=f);return k.important=e[Object.keys(e).pop()].important,h=b(w,1),E[1].push(h),a([k],s),E=E.slice(0,2),Array.prototype.push.apply(E,k.value),v.unshift(E),[v,k,y]}(n,f,d),y=function(e,n,s){var a,c,f,d,p,h,m=[],g={},v={},y=i[n],_=[l.PROPERTY,[l.PROPERTY_NAME,n],[l.PROPERTY_VALUE,"inherit"]],w=u(_);for(r([w],s,[]),p=0,h=y.components.length;p<h;p++)a=e[y.components[p]],t(a)?g[a.name]=a:(c=a.all[a.position].slice(0,2),Array.prototype.push.apply(c,a.value),m.push(c),v[a.name]=o(a));return f=b(g,1),_[1].push(f),d=b(g,2),_[2].push(d),m.unshift(_),[m,w,v]}(n,f,d),w=v[0],E=y[0],k=c(w).length<c(E).length,A=k?w:E,D=k?v[1]:y[1],C=k?v[2]:y[2],O=n[Object.keys(n).pop()],S=O.all,$=O.position;for(p in D.position=$,D.shorthand=!0,D.important=O.important,D.multiplex=!1,D.dirty=!0,D.all=S,D.all[$]=A[0],e.splice($,1,D),n)(h=n[p]).unused=!0,D.multiplex=D.multiplex||h.multiplex,h.name in C&&(m=C[h.name],g=x(A,p),m.position=S.length,m.all=S,m.all.push(g),e.push(m))}function _(e,t){var n=i[t];return"oppositeTo"in n?e[n.oppositeTo].value:[[l.PROPERTY_VALUE,n.defaultValue]]}function b(e,t){var n,r,i,o,s=[];for(o in e)i=(r=(n=e[o]).all[n.position])[t][r[t].length-1],Array.prototype.push.apply(s,i);return s.sort(w)}function w(e,t){var n=e[0],r=t[0],i=e[1],o=t[1];return n<r||n===r&&i<o?-1:1}function x(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n][1][1]==t)return e[n]}function E(e,t,n,s){var a,c,f,d=i[n],p=[l.PROPERTY,[l.PROPERTY_NAME,n],[l.PROPERTY_VALUE,d.defaultValue]],h=function(e,t,n){var r=Object.keys(t),i=t[r[0]].position,o=t[r[r.length-1]].position;return"border"==n&&function(e){for(var t=e.length-1;t>=0;t--)if("border-image"==e[t].name)return!0;return!1}(e.slice(i,o))?i:o}(e,t,n),m=u(p);m.shorthand=!0,m.dirty=!0,m.multiplex=!1,r([m],s,[]);for(var g=0,v=d.components.length;g<v;g++){var y=t[d.components[g]];m.components[g]=o(y),m.important=y.important,m.multiplex=m.multiplex||y.multiplex,f=y.all}for(var _ in t)t[_].unused=!0;a=b(t,1),p[1].push(a),c=b(t,2),p[2].push(c),m.position=h,m.all=f,m.all[h]=p,e.splice(h,1,m)}return lv=function(e,t){var r,o,s,a,u,c,l,d={};if(!(e.length<3)){for(a=0,u=e.length;a<u;a++)if(s=e[a],r=i[s.name],!s.dynamic&&!s.unused&&!s.hack&&!s.block&&(!r||!r.singleTypeComponents||n(s))&&(f(e,a,d,t),r&&r.componentOf))for(c=0,l=r.componentOf.length;c<l;c++)d[o=r.componentOf[c]]=d[o]||{},d[o][s.name]=s;f(e,a,d,t)}},lv}(),t=S_(),n=C_(),r=O_(),i=Vy().all,o=By(),s=jy(),a=Qy().OptimizationLevel;return kv=function u(c,l,f,d){var p,h,m,g=d.options.level[a.Two],v=i(c,g.skipProperties);for(n(v,d.validator,d.warnings),h=0,m=v.length;h<m;h++)(p=v[h]).block&&u(p.value[0][1],l,f,d);f&&g.mergeIntoShorthands&&e(v,d.validator),l&&g.overrideProperties&&t(v,f,d.options.compatibility,d.validator),s(v,r),o(v)},kv}function T_(){if(Sv)return Ov;Sv=1;var e=/--.+$/;function t(t){return t.replace(e,"")}return Ov=function(e,n,r){var i,o,s,a,u,c;for(s=0,a=e.length;s<a;s++)for(i=e[s][1],u=0,c=n.length;u<c;u++){if(i==(o=n[u][1]))return!0;if(r&&t(i)==t(o))return!0}return!1},Ov}function P_(){if(Nv)return Rv;Nv=1;var e=T_(),t=function(){if(Fv)return Pv;Fv=1;var e=function(){if(Tv)return $v;Tv=1;var e=Ly(),t=/[a-zA-Z]/,n=/[\s,(>~+]/;function r(e,t){return e.indexOf(":not(",t)===t}return $v=function(i){var o,s,a,u,c,l,f,d=[0,0,0],p=0,h=!1,m=!1;for(l=0,f=i.length;l<f;l++){if(o=i[l],s);else if(o!=e.SINGLE_QUOTE||u||a)if(o==e.SINGLE_QUOTE&&!u&&a)a=!1;else if(o!=e.DOUBLE_QUOTE||u||a)if(o==e.DOUBLE_QUOTE&&u&&!a)u=!1;else{if(a||u)continue;p>0&&!h||(o==e.OPEN_ROUND_BRACKET?p++:o==e.CLOSE_ROUND_BRACKET&&1==p?(p--,h=!1):o==e.CLOSE_ROUND_BRACKET?p--:"#"==o?d[0]++:"."==o||o==e.OPEN_SQUARE_BRACKET?d[1]++:":"!=o||m||r(i,l)?":"==o?h=!0:(0===l||c)&&t.test(o)&&d[2]++:(d[1]++,h=!1))}else u=!0;else a=!0;m=":"==o,c=!(s=o==e.BACK_SLASH)&&n.test(o)}return d},$v}();function t(t,n){var r;return t in n||(n[t]=r=e(t)),r||n[t]}return Pv=function(e,n,r){var i,o,s,a,u,c;for(s=0,a=e.length;s<a;s++)for(i=t(e[s][1],r),u=0,c=n.length;u<c;u++)if(o=t(n[u][1],r),i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2])return!0;return!1},Pv}(),n=/align-items|box-align|box-pack|flex|justify/,r=/^border-(top|right|bottom|left|color|style|width|radius)/;function i(i,f,d){var p,h,m=i[0],g=i[1],v=i[2],y=i[5],_=i[6],b=f[0],w=f[1],x=f[2],E=f[5],k=f[6];return!("font"==m&&"line-height"==b||"font"==b&&"line-height"==m||n.test(m)&&n.test(b)||v==x&&s(m)==s(b)&&o(m)^o(b)||"border"==v&&r.test(x)&&("border"==m||m==x||g!=w&&a(m,b))||"border"==x&&r.test(v)&&("border"==b||b==v||g!=w&&a(m,b))||"border"==v&&"border"==x&&m!=b&&(u(m)&&c(b)||c(m)&&u(b))||!(v!=x||!(m!=b||v!=x||g!=w&&(p=g,h=w,!o(p)||!o(h)||p.split("-")[1]==h.split("-")[2]))||m!=b&&v==x&&m!=v&&b!=x||m!=b&&v==x&&g==w)&&(!k||!_||l(v)||l(x)||e(E,y,!1))&&t(y,E,d))}function o(e){return/^-(?:moz|webkit|ms|o)-/.test(e)}function s(e){return e.replace(/^-(?:moz|webkit|ms|o)-/,"")}function a(e,t){return e.split("-").pop()==t.split("-").pop()}function u(e){return"border-top"==e||"border-right"==e||"border-bottom"==e||"border-left"==e}function c(e){return"border-color"==e||"border-style"==e||"border-width"==e}function l(e){return"font"==e||"line-height"==e||"list-style"==e}return Rv={canReorder:function(e,t,n){for(var r=t.length-1;r>=0;r--)for(var o=e.length-1;o>=0;o--)if(!i(e[o],t[r],n))return!1;return!0},canReorderSingle:i},Rv}function F_(){if(Iv)return Lv;Iv=1;var e=Uy(),t=E_().rules,n=E_().value;function r(e){return"list-style"==e?e:e.indexOf("-radius")>0?"border-radius":"border-collapse"==e||"border-spacing"==e||"border-image"==e?e:0===e.indexOf("border-")&&/^border-\w+-\w+$/.test(e)?e.match(/border-\w+/)[0]:0===e.indexOf("border-")&&/^border-\w+$/.test(e)?"border":0===e.indexOf("text-")||"-chrome-"==e?e:e.replace(/^-\w+-/,"").match(/([a-zA-Z]+)/)[0].toLowerCase()}return Lv=function i(o){var s,a,u,c,l,f,d=[];if(o[0]==e.RULE)for(s=!/[.+>~]/.test(t(o[1])),l=0,f=o[2].length;l<f;l++)(a=o[2][l])[0]==e.PROPERTY&&0!==(u=a[1][1]).length&&(c=n(a,l),d.push([u,c,r(u),o[2][l],u+":"+c,o[1],s]));else if(o[0]==e.NESTED_BLOCK)for(l=0,f=o[2].length;l<f;l++)d=d.concat(i(o[2][l]));return d},Lv}function R_(){return Hv||(Hv=1,qv=function e(t){for(var n=t.slice(0),r=0,i=n.length;r<i;r++)Array.isArray(n[r])&&(n[r]=e(n[r]));return n}),qv}function N_(){if(ty)return ey;ty=1;var e=C_(),t=Vy().single,n=jy(),r=Uy(),i=/^(-moz-|-o-|-webkit-)?animation-name$/,o=/^(-moz-|-o-|-webkit-)?animation$/,s=/^@(-moz-|-o-|-webkit-)?keyframes /,a=/\s{0,31}!important$/,u=/^(['"]?)(.*)\1$/;function c(e){return e.replace(u,"$2").replace(a,"")}function l(e,t,n,i){var o,s,a,u,c,l={};for(u=0,c=e.length;u<c;u++)t(e[u],l);if(0!==Object.keys(l).length)for(o in f(e,n,l,i),l)for(u=0,c=(s=l[o]).length;u<c;u++)(a=s[u])[a[0]==r.AT_RULE?1:2]=[]}function f(e,t,n,i){var o,s,a=t(n);for(o=0,s=e.length;o<s;o++)switch(e[o][0]){case r.RULE:a(e[o],i);break;case r.NESTED_BLOCK:f(e[o][2],t,n,i)}}function d(e,t){var n;e[0]==r.AT_RULE_BLOCK&&0===e[1][0][1].indexOf("@counter-style")&&(t[n=e[1][0][1].split(" ")[1]]=t[n]||[],t[n].push(e))}function p(r){return function(i,o){var s,a,u,c;for(u=0,c=i[2].length;u<c;u++)"list-style"==(s=i[2][u])[1][1]&&(a=t(s),e([a],o.validator,o.warnings),a.components[0].value[0][1]in r&&delete r[s[2][1]],n([a])),"list-style-type"==s[1][1]&&s[2][1]in r&&delete r[s[2][1]]}}function h(e,t){var n,i,o,s;if(e[0]==r.AT_RULE_BLOCK&&"@font-face"==e[1][0][1])for(o=0,s=e[2].length;o<s;o++)if("font-family"==(n=e[2][o])[1][1]){t[i=c(n[2][1].toLowerCase())]=t[i]||[],t[i].push(e);break}}function m(r){return function(i,o){var s,a,u,l,f,d,p,h;for(f=0,d=i[2].length;f<d;f++){if("font"==(s=i[2][f])[1][1]){for(a=t(s),e([a],o.validator,o.warnings),p=0,h=(u=a.components[6]).value.length;p<h;p++)(l=c(u.value[p][1].toLowerCase()))in r&&delete r[l];n([a])}if("font-family"==s[1][1])for(p=2,h=s.length;p<h;p++)(l=c(s[p][1].toLowerCase()))in r&&delete r[l]}}}function g(e,t){var n;e[0]==r.NESTED_BLOCK&&s.test(e[1][0][1])&&(t[n=e[1][0][1].split(" ")[1]]=t[n]||[],t[n].push(e))}function v(r){return function(s,a){var u,c,l,f,d,p,h;for(f=0,d=s[2].length;f<d;f++){if(u=s[2][f],o.test(u[1][1])){for(c=t(u),e([c],a.validator,a.warnings),p=0,h=(l=c.components[7]).value.length;p<h;p++)l.value[p][1]in r&&delete r[l.value[p][1]];n([c])}if(i.test(u[1][1]))for(p=2,h=u.length;p<h;p++)u[p][1]in r&&delete r[u[p][1]]}}}function y(e,t){var n;e[0]==r.AT_RULE&&0===e[1].indexOf("@namespace")&&(t[n=e[1].split(" ")[1]]=t[n]||[],t[n].push(e))}function _(e){var t=new RegExp(Object.keys(e).join("\\||")+"\\|","g");return function(n){var r,i,o,s,a,u;for(o=0,s=n[1].length;o<s;o++)for(a=0,u=(r=n[1][o][1].match(t)).length;a<u;a++)(i=r[a].substring(0,r[a].length-1))in e&&delete e[i]}}return ey=function(e,t){l(e,d,p,t),l(e,h,m,t),l(e,g,v,t),l(e,y,_,t)}}function L_(){if(oy)return iy;oy=1;var e=P_().canReorderSingle,t=F_(),n=k_(),r=function(){if(ry)return ny;function e(e,t){return e[1]>t[1]?1:-1}return ry=1,ny=function(t){for(var n=[],r=[],i=0,o=t.length;i<o;i++){var s=t[i];-1==r.indexOf(s[1])&&(r.push(s[1]),n.push(s))}return n.sort(e)},ny}(),i=Uy(),o=R_(),s=E_().body,a=E_().rules;function u(e,t){return e>t?1:-1}function c(e,t){var n=o(e);return n[5]=n[5].concat(t[5]),n}return iy=function(o,l){var f=l.options,d=f.compatibility.selectors.mergeablePseudoClasses,p=f.compatibility.selectors.mergeablePseudoElements,h=f.compatibility.selectors.mergeLimit,m=f.compatibility.selectors.multiplePseudoMerging,g=l.cache.specificity,v={},y=[],_={},b=[];function w(e,t){var n=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(a(e[n][1]));return t.join("%")}(t);return _[n]=_[n]||[],_[n].push([e,t]),n}function x(e){var t,n=e.split("%"),r=[];for(var i in _){var o=i.split("%");for(t=o.length-1;t>=0;t--)if(n.indexOf(o[t])>-1){r.push(i);break}}for(t=r.length-1;t>=0;t--)delete _[r[t]]}function E(e){for(var t=[],r=[],i=e.length-1;i>=0;i--)n(a(e[i][1]),d,p,m)&&(r.unshift(e[i]),e[i][2].length>0&&-1==t.indexOf(e[i])&&t.push(e[i]));return t.length>1?r:[]}function k(e,t){return e[1]>t[1]?1:e[1]==t[1]?0:-1}function A(e,t,n){return D(e,t,n,1).sort(k)}function D(e,t,n,r){var i=[[e,C(e,t,n)]];if(e.length>2&&r>0)for(var o=e.length-1;o>=0;o--){var s=Array.prototype.slice.call(e,0);s.splice(o,1),i=i.concat(D(s,t,n,r-1))}return i}function C(e,t,n){for(var r=0,i=e.length-1;i>=0;i--)r+=e[i][2].length>n?a(e[i][1]).length:-1;return r-(e.length-1)*t+1}function O(e,t,n,r){var a,u,c,l,f=[];for(a=r.length-1;a>=0;a--){var d=r[a];for(u=d[2].length-1;u>=0;u--){var p=d[2][u];for(c=0,l=t.length;c<l;c++){var h=t[c],m=p[1][1],g=h[0],v=h[4];if(m==g&&s([p])==v){d[2].splice(u,1);break}}}}for(a=t.length-1;a>=0;a--)f.unshift(t[a][3]);var y=[i.RULE,n,f];o.splice(e,0,y)}function S(e,t){var n=t[4],i=v[n];i&&i.length>1&&(function(e,t){var n,r,i=[],o=[],s=t[4],a=E(v[s]);if(!(a.length<2)){e:for(var u in v){var c=v[u];for(n=a.length-1;n>=0;n--)if(-1==c.indexOf(a[n]))continue e;i.push(u)}if(i.length<2)return!1;for(n=i.length-1;n>=0;n--)for(r=y.length-1;r>=0;r--)if(y[r][4]==i[n]){o.unshift([y[r],a]);break}return $(e,o)}}(e,t)||function(e,t){var n=t[0],i=t[1],o=t[4],s=n.length+i.length+1,a=[],u=[],c=E(v[o]);if(!(c.length<2)){var l=A(c,s,1),f=l[0];if(f[1]>0)return function(e,t,n){for(var r=n.length-1;r>=0;r--){var i=w(t,n[r][0]);if(_[i].length>1&&$(e,_[i])){x(i);break}}}(e,t,l);for(var d=f[0].length-1;d>=0;d--)a=f[0][d][1].concat(a),u.unshift(f[0][d]);O(e,[t],a=r(a),u)}}(e,t))}function $(e,t){for(var n,i=0,o=[],s=t.length-1;s>=0;s--)i+=(n=t[s][0])[4].length+(s>0?1:0),o.push(n);var a=A(t[0][1],i,o.length)[0];if(a[1]>0)return!1;var u=[],c=[];for(s=a[0].length-1;s>=0;s--)u=a[0][s][1].concat(u),c.unshift(a[0][s]);for(O(e,o,u=r(u),c),s=o.length-1;s>=0;s--){n=o[s];var l=y.indexOf(n);delete v[n[4]],l>-1&&-1==b.indexOf(l)&&b.push(l)}return!0}function T(e,t,n){if(e[0]!=t[0])return!1;var r=t[4],i=v[r];return i&&i.indexOf(n)>-1}for(var P=o.length-1;P>=0;P--){var F,R,N,L,I,M=o[P];if(M[0]==i.RULE)F=!0;else{if(M[0]!=i.NESTED_BLOCK)continue;F=!1}var z=y.length,B=t(M);b=[];var j=[];for(R=B.length-1;R>=0;R--)for(N=R-1;N>=0;N--)if(!e(B[R],B[N],g)){j.push(R);break}for(R=B.length-1;R>=0;R--){var U=B[R],V=!1;for(N=0;N<z;N++){var q=y[N];-1==b.indexOf(N)&&(!e(U,q,g)&&!T(U,q,M)||v[q[4]]&&v[q[4]].length===h)&&(S(P+1,q),-1==b.indexOf(N)&&(b.push(N),delete v[q[4]])),V||(V=U[0]==q[0]&&U[1]==q[1])&&(I=N)}if(F&&!(j.indexOf(R)>-1)){var H=U[4];V&&y[I][5].length+U[5].length>h?(S(P+1,y[I]),y.splice(I,1),v[H]=[M],V=!1):(v[H]=v[H]||[],v[H].push(M)),V?y[I]=c(y[I],U):y.push(U)}}for(R=0,L=(b=b.sort(u)).length;R<L;R++){var K=b[R]-R;y.splice(K,1)}}for(var Z=o[0]&&o[0][0]==i.AT_RULE&&0===o[0][1].indexOf("@charset")?1:0;Z<o.length-1;Z++){var W=o[Z][0]===i.AT_RULE&&0===o[Z][1].indexOf("@import"),G=o[Z][0]===i.COMMENT;if(!W&&!G)break}for(P=0;P<y.length;P++)S(Z,y[P])},iy}function I_(){if(ay)return sy;ay=1;var e=function(){if(Cv)return Dv;Cv=1;var e=k_(),t=$_(),n=Fy(),r=My(),i=Qy().OptimizationLevel,o=E_().body,s=E_().rules,a=Uy();return Dv=function(u,c){for(var l=[null,[],[]],f=c.options,d=f.compatibility.selectors.adjacentSpace,p=f.level[i.One].selectorsSortingMethod,h=f.compatibility.selectors.mergeablePseudoClasses,m=f.compatibility.selectors.mergeablePseudoElements,g=f.compatibility.selectors.mergeLimit,v=f.compatibility.selectors.multiplePseudoMerging,y=0,_=u.length;y<_;y++){var b=u[y];b[0]==a.RULE?l[0]==a.RULE&&s(b[1])==s(l[1])?(Array.prototype.push.apply(l[2],b[2]),t(l[2],!0,!0,c),b[2]=[]):l[0]==a.RULE&&o(b[2])==o(l[2])&&e(s(b[1]),h,m,v)&&e(s(l[1]),h,m,v)&&l[1].length<g?(l[1]=r(l[1].concat(b[1]),!1,d,!1,c.warnings),l[1]=l.length>1?n(l[1],p):l[1],b[2]=[]):l=b:l=[null,[],[]]}},Dv}(),t=function(){if(zv)return Mv;zv=1;var e=P_().canReorder,t=P_().canReorderSingle,n=F_(),r=T_(),i=E_().rules,o=Qy().OptimizationLevel,s=Uy();function a(e,n,i){var o,s,a,u,c,l,f,d;for(c=0,l=e.length;c<l;c++)for(s=(o=e[c])[5],f=0,d=n.length;f<d;f++)if(u=(a=n[f])[5],r(s,u,!0)&&!t(o,a,i))return!1;return!0}return Mv=function(t,r){for(var u=r.options.level[o.Two].mergeSemantically,c=r.cache.specificity,l={},f=[],d=t.length-1;d>=0;d--){var p=t[d];if(p[0]==s.NESTED_BLOCK){var h=i(p[1]),m=l[h];m||(m=[],l[h]=m),m.push(d)}}for(var g in l){var v=l[g];e:for(var y=v.length-1;y>0;y--){var _=v[y],b=t[_],w=v[y-1],x=t[w];t:for(var E=1;E>=-1;E-=2){for(var k=1==E,A=k?_+1:w-1,D=k?w:_,C=k?1:-1,O=k?b:x,S=k?x:b,$=n(O);A!=D;){var T=n(t[A]);if(A+=C,!(u&&a($,T,c)||e($,T,c)))continue t}S[2]=k?O[2].concat(S[2]):S[2].concat(O[2]),O[2]=[],f.push(S);continue e}}}return f},Mv}(),n=function(){if(jv)return Bv;jv=1;var e=k_(),t=Fy(),n=My(),r=Qy().OptimizationLevel,i=E_().body,o=E_().rules,s=Uy();function a(e){return/\.|\*| :/.test(e)}function u(e){var t=o(e[1]);return t.indexOf("__")>-1||t.indexOf("--")>-1}function c(e){return e.replace(/--[^ ,>+~:]+/g,"")}function l(e,t){var n=c(o(e[1]));for(var r in t){var i=t[r],s=c(o(i[1]));(s.indexOf(n)>-1||n.indexOf(s)>-1)&&delete t[r]}}return Bv=function(c,f){for(var d=f.options,p=d.level[r.Two].mergeSemantically,h=d.compatibility.selectors.adjacentSpace,m=d.level[r.One].selectorsSortingMethod,g=d.compatibility.selectors.mergeablePseudoClasses,v=d.compatibility.selectors.mergeablePseudoElements,y=d.compatibility.selectors.multiplePseudoMerging,_={},b=c.length-1;b>=0;b--){var w=c[b];if(w[0]==s.RULE){w[2].length>0&&!p&&a(o(w[1]))&&(_={}),w[2].length>0&&p&&u(w)&&l(w,_);var x=i(w[2]),E=_[x];E&&e(o(w[1]),g,v,y)&&e(o(E[1]),g,v,y)&&(w[2].length>0?(w[1]=n(E[1].concat(w[1]),!1,h,!1,f.warnings),w[1]=w[1].length>1?t(w[1],m):w[1]):w[1]=E[1].concat(w[1]),E[2]=[],_[x]=null),_[i(w[2])]=w}}},Bv}(),r=function(){if(Vv)return Uv;Vv=1;var e=P_().canReorder,t=F_(),n=$_(),r=E_().rules,i=Uy();return Uv=function(o,s){var a,u=s.cache.specificity,c={},l=[];for(a=o.length-1;a>=0;a--)if(o[a][0]==i.RULE&&0!==o[a][2].length){var f=r(o[a][1]);c[f]=[a].concat(c[f]||[]),2==c[f].length&&l.push(f)}for(a=l.length-1;a>=0;a--){var d=c[l[a]];e:for(var p=d.length-1;p>0;p--){var h=d[p-1],m=o[h],g=d[p],v=o[g];t:for(var y=1;y>=-1;y-=2){for(var _=1==y,b=_?h+1:g-1,w=_?g:h,x=_?1:-1,E=_?m:v,k=_?v:m,A=t(E);b!=w;){var D=t(o[b]);b+=x;var C=_?e(A,D,u):e(D,A,u);if(!C&&!_)continue e;if(!C&&_)continue t}_?(Array.prototype.push.apply(E[2],k[2]),k[2]=E[2]):Array.prototype.push.apply(k[2],E[2]),n(k[2],!0,!0,s),E[2]=[]}}}},Uv}(),i=function(){if(Zv)return Kv;Zv=1;var e=k_(),t=$_(),n=R_(),r=Uy(),i=E_().body,o=E_().rules;function s(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n][1]]);return t}function a(e,r,i,o,s){for(var a=[],u=[],c=[],l=r.length-1;l>=0;l--)if(!i.filterOut(l,a)){var f=r[l].where,d=e[f],p=n(d[2]);a=a.concat(p),u.push(p),c.push(f)}t(a,!0,!1,s);for(var h=c.length,m=a.length-1,g=h-1;g>=0;)if((0===g||a[m]&&u[g].indexOf(a[m])>-1)&&m>-1)m--;else{var v=a.splice(m+1);i.callback(e[c[g]],v,h,g),g--}}return Kv=function(t,n){for(var u=n.options,c=u.compatibility.selectors.mergeablePseudoClasses,l=u.compatibility.selectors.mergeablePseudoElements,f=u.compatibility.selectors.multiplePseudoMerging,d={},p=[],h=t.length-1;h>=0;h--){var m=t[h];if(m[0]==r.RULE&&0!==m[2].length)for(var g=o(m[1]),v=m[1].length>1&&e(g,c,l,f),y=s(m[1]),_=v?[g].concat(y):[g],b=0,w=_.length;b<w;b++){var x=_[b];d[x]?p.push(x):d[x]=[],d[x].push({where:h,list:y,isPartial:v&&b>0,isComplex:v&&0===b})}}!function(e,t,n,r,i){function o(e,t){return l[e].isPartial&&0===t.length}function s(e,t,n,r){l[n-r-1].isPartial||(e[2]=t)}for(var u=0,c=t.length;u<c;u++){var l=n[t[u]];a(e,l,{filterOut:o,callback:s},0,i)}}(t,p,d,0,n),function(t,n,r,o){var s=r.compatibility.selectors.mergeablePseudoClasses,u=r.compatibility.selectors.mergeablePseudoElements,c=r.compatibility.selectors.multiplePseudoMerging,l={};function f(e){return l.data[e].where<l.intoPosition}function d(e,t,n,r){0===r&&l.reducedBodies.push(t)}e:for(var p in n){var h=n[p];if(h[0].isComplex){var m=h[h.length-1].where,g=t[m],v=[],y=e(p,s,u,c)?h[0].list:[p];l.intoPosition=m,l.reducedBodies=v;for(var _=0,b=y.length;_<b;_++){var w=n[y[_]];if(w.length<2)continue e;if(l.data=w,a(t,w,{filterOut:f,callback:d},0,o),i(v[v.length-1])!=i(v[0]))continue e}g[2]=v[0]}}}(t,d,u,n)},Kv}(),o=function(){if(Gv)return Wv;Gv=1;var e=Uy(),t=E_().all;return Wv=function(n){var r,i,o,s,a=[];for(o=0,s=n.length;o<s;o++)(r=n[o])[0]!=e.AT_RULE_BLOCK&&"@font-face"!=r[1][0][1]||(i=t([r]),a.indexOf(i)>-1?r[2]=[]:a.push(i))},Wv}(),s=function(){if(Qv)return Yv;Qv=1;var e=Uy(),t=E_().all,n=E_().rules;return Yv=function(r){var i,o,s,a,u,c={};for(a=0,u=r.length;a<u;a++)(o=r[a])[0]==e.NESTED_BLOCK&&((i=c[s=n(o[1])+"%"+t(o[2])])&&(i[2]=[]),c[s]=o)},Yv}(),a=function(){if(Xv)return Jv;Xv=1;var e=Uy(),t=E_().body,n=E_().rules;return Jv=function(r){for(var i,o,s,a,u={},c=[],l=0,f=r.length;l<f;l++)(o=r[l])[0]==e.RULE&&(u[i=n(o[1])]&&1==u[i].length?c.push(i):u[i]=u[i]||[],u[i].push(l));for(l=0,f=c.length;l<f;l++){a=[];for(var d=u[i=c[l]].length-1;d>=0;d--)o=r[u[i][d]],s=t(o[2]),a.indexOf(s)>-1?o[2]=[]:a.push(s)}},Jv}(),u=N_(),c=L_(),l=$_(),f=Qy().OptimizationLevel,d=Uy();function p(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=!1;switch(r[0]){case d.RULE:i=0===r[1].length||0===r[2].length;break;case d.NESTED_BLOCK:p(r[2]),i=0===r[2].length;break;case d.AT_RULE:i=0===r[1].length;break;case d.AT_RULE_BLOCK:i=0===r[2].length}i&&(e.splice(t,1),t--,n--)}}function h(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];switch(i[0]){case d.RULE:l(i[2],!0,!0,t);break;case d.NESTED_BLOCK:h(i[2],t)}}}return sy=function l(m,g,v){var y,_,b=g.options.level[f.Two],w=g.options.plugins.level2Block;if(function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i[0]==d.NESTED_BLOCK){var o=/@(-moz-|-o-|-webkit-)?keyframes/.test(i[1][0][1]);l(i[2],t,!o)}}}(m,g),h(m,g),b.removeDuplicateRules&&a(m,g),b.mergeAdjacentRules&&e(m,g),b.reduceNonAdjacentRules&&i(m,g),b.mergeNonAdjacentRules&&"body"!=b.mergeNonAdjacentRules&&r(m,g),b.mergeNonAdjacentRules&&"selector"!=b.mergeNonAdjacentRules&&n(m,g),b.restructureRules&&b.mergeAdjacentRules&&v&&(c(m,g),e(m,g)),b.restructureRules&&!b.mergeAdjacentRules&&v&&c(m,g),b.removeDuplicateFontRules&&o(m,g),b.removeDuplicateMediaBlocks&&s(m,g),b.removeUnusedAtRules&&u(m,g),b.mergeMedia)for(_=(y=t(m,g)).length-1;_>=0;_--)l(y[_][2],g,!1);for(_=0;_<w.length;_++)w[_](m);return b.removeEmpty&&p(m),m}}var M_,z_,B_={},j_={},U_={},V_={};function q_(){if(M_)return V_;M_=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return V_.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},V_.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1},V_}function H_(){if(z_)return U_;z_=1;var e=q_();return U_.encode=function(t){var n,r="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{n=31&i,(i>>>=5)>0&&(n|=32),r+=e.encode(n)}while(i>0);return r},U_.decode=function(t,n,r){var i,o,s,a,u=t.length,c=0,l=0;do{if(n>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=e.decode(t.charCodeAt(n++))))throw new Error("Invalid base64 digit: "+t.charAt(n-1));i=!!(32&o),c+=(o&=31)<<l,l+=5}while(i);r.value=(a=(s=c)>>1,1&~s?a:-a),r.rest=n},U_}var K_,Z_={};function W_(){return K_||(K_=1,function(e){e.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function r(e){var n=e.match(t);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function o(t){var n=t,o=r(t);if(o){if(!o.path)return t;n=o.path}for(var s,a=e.isAbsolute(n),u=n.split(/\/+/),c=0,l=u.length-1;l>=0;l--)"."===(s=u[l])?u.splice(l,1):".."===s?c++:c>0&&(""===s?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return""===(n=u.join("/"))&&(n=a?"/":"."),o?(o.path=n,i(o)):n}function s(e,t){""===e&&(e="."),""===t&&(t=".");var s=r(t),a=r(e);if(a&&(e=a.path||"/"),s&&!s.scheme)return a&&(s.scheme=a.scheme),i(s);if(s||t.match(n))return t;if(a&&!a.host&&!a.path)return a.host=t,i(a);var u="/"===t.charAt(0)?t:o(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=u,i(a)):u}e.urlParse=r,e.urlGenerate=i,e.normalize=o,e.join=s,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var a=!("__proto__"in Object.create(null));function u(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function l(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=a?u:function(e){return c(e)?"$"+e:e},e.fromSetString=a?u:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,n){var r=l(e.source,t.source);return 0!==r||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)||n||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=e.generatedLine-t.generatedLine)?r:l(e.name,t.name)},e.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=l(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:l(e.name,t.name)},e.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=l(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:l(e.name,t.name)},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var a=r(n);if(!a)throw new Error("sourceMapURL could not be parsed");if(a.path){var u=a.path.lastIndexOf("/");u>=0&&(a.path=a.path.substring(0,u+1))}t=s(i(a),t)}return o(t)}}(Z_)),Z_}var G_,Y_={};function Q_(){if(G_)return Y_;G_=1;var e=W_(),t=Object.prototype.hasOwnProperty,n="undefined"!=typeof Map;function r(){this._array=[],this._set=n?new Map:Object.create(null)}return r.fromArray=function(e,t){for(var n=new r,i=0,o=e.length;i<o;i++)n.add(e[i],t);return n},r.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(r,i){var o=n?r:e.toSetString(r),s=n?this.has(r):t.call(this._set,o),a=this._array.length;s&&!i||this._array.push(r),s||(n?this._set.set(r,a):this._set[o]=a)},r.prototype.has=function(r){if(n)return this._set.has(r);var i=e.toSetString(r);return t.call(this._set,i)},r.prototype.indexOf=function(r){if(n){var i=this._set.get(r);if(i>=0)return i}else{var o=e.toSetString(r);if(t.call(this._set,o))return this._set[o]}throw new Error('"'+r+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},Y_.ArraySet=r,Y_}var J_,X_,eb={};function tb(){if(X_)return j_;X_=1;var e=H_(),t=W_(),n=Q_().ArraySet,r=function(){if(J_)return eb;J_=1;var e=W_();function t(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return t.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},t.prototype.add=function(t){var n,r,i,o,s,a;r=t,i=(n=this._last).generatedLine,o=r.generatedLine,s=n.generatedColumn,a=r.generatedColumn,o>i||o==i&&a>=s||e.compareByGeneratedPositionsInflated(n,r)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},t.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},eb.MappingList=t,eb}().MappingList;function i(e){e||(e={}),this._file=t.getArg(e,"file",null),this._sourceRoot=t.getArg(e,"sourceRoot",null),this._skipValidation=t.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new r,this._sourcesContents=null}return i.prototype._version=3,i.fromSourceMap=function(e){var n=e.sourceRoot,r=new i({file:e.file,sourceRoot:n});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=n&&(i.source=t.relative(n,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),r.addMapping(i)}),e.sources.forEach(function(i){var o=i;null!==n&&(o=t.relative(n,i)),r._sources.has(o)||r._sources.add(o);var s=e.sourceContentFor(i);null!=s&&r.setSourceContent(i,s)}),r},i.prototype.addMapping=function(e){var n=t.getArg(e,"generated"),r=t.getArg(e,"original",null),i=t.getArg(e,"source",null),o=t.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:i,name:o})},i.prototype.setSourceContent=function(e,n){var r=e;null!=this._sourceRoot&&(r=t.relative(this._sourceRoot,r)),null!=n?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},i.prototype.applySourceMap=function(e,r,i){var o=r;if(null==r){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');o=e.file}var s=this._sourceRoot;null!=s&&(o=t.relative(s,o));var a=new n,u=new n;this._mappings.unsortedForEach(function(n){if(n.source===o&&null!=n.originalLine){var r=e.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=r.source&&(n.source=r.source,null!=i&&(n.source=t.join(i,n.source)),null!=s&&(n.source=t.relative(s,n.source)),n.originalLine=r.line,n.originalColumn=r.column,null!=r.name&&(n.name=r.name))}var c=n.source;null==c||a.has(c)||a.add(c);var l=n.name;null==l||u.has(l)||u.add(l)},this),this._sources=a,this._names=u,e.sources.forEach(function(n){var r=e.sourceContentFor(n);null!=r&&(null!=i&&(n=t.join(i,n)),null!=s&&(n=t.relative(s,n)),this.setSourceContent(n,r))},this)},i.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},i.prototype._serializeMappings=function(){for(var n,r,i,o,s=0,a=1,u=0,c=0,l=0,f=0,d="",p=this._mappings.toArray(),h=0,m=p.length;h<m;h++){if(n="",(r=p[h]).generatedLine!==a)for(s=0;r.generatedLine!==a;)n+=";",a++;else if(h>0){if(!t.compareByGeneratedPositionsInflated(r,p[h-1]))continue;n+=","}n+=e.encode(r.generatedColumn-s),s=r.generatedColumn,null!=r.source&&(o=this._sources.indexOf(r.source),n+=e.encode(o-f),f=o,n+=e.encode(r.originalLine-1-c),c=r.originalLine-1,n+=e.encode(r.originalColumn-u),u=r.originalColumn,null!=r.name&&(i=this._names.indexOf(r.name),n+=e.encode(i-l),l=i)),d+=n}return d},i.prototype._generateSourcesContent=function(e,n){return e.map(function(e){if(!this._sourcesContents)return null;null!=n&&(e=t.relative(n,e));var r=t.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)},i.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},i.prototype.toString=function(){return JSON.stringify(this.toJSON())},j_.SourceMapGenerator=i,j_}var nb,rb={},ib={};function ob(){return nb||(nb=1,function(e){function t(n,r,i,o,s,a){var u=Math.floor((r-n)/2)+n,c=s(i,o[u],!0);return 0===c?u:c>0?r-u>1?t(u,r,i,o,s,a):a==e.LEAST_UPPER_BOUND?r<o.length?r:-1:u:u-n>1?t(n,u,i,o,s,a):a==e.LEAST_UPPER_BOUND?u:n<0?-1:n}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(n,r,i,o){if(0===r.length)return-1;var s=t(-1,r.length,n,r,i,o||e.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(r[s],r[s-1],!0);)--s;return s}}(ib)),ib}var sb,ab,ub={};function cb(){if(sb)return ub;function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(n,r,i,o){if(i<o){var s=i-1;e(n,(l=i,f=o,Math.round(l+Math.random()*(f-l))),o);for(var a=n[o],u=i;u<o;u++)r(n[u],a)<=0&&e(n,s+=1,u);e(n,s+1,u);var c=s+1;t(n,r,i,c-1),t(n,r,c+1,o)}var l,f}return sb=1,ub.quickSort=function(e,n){t(e,n,0,e.length-1)},ub}var lb,fb,db,pb,hb,mb,gb,vb,yb,_b,bb,wb,xb,Eb,kb,Ab,Db,Cb,Ob,Sb,$b,Tb,Pb,Fb,Rb,Nb,Lb,Ib,Mb,zb,Bb,jb,Ub,Vb,qb,Hb,Kb,Zb,Wb,Gb,Yb,Qb,Jb,Xb,ew,tw,nw,rw,iw,ow,sw,aw,uw,cw,lw,fw,dw,pw,hw,mw,gw,vw,yw,_w,bw,ww,xw,Ew,kw,Aw,Dw,Cw,Ow,Sw,$w,Tw,Pw,Fw,Rw={};function Nw(){return fb||(fb=1,B_.SourceMapGenerator=tb().SourceMapGenerator,B_.SourceMapConsumer=function(){if(ab)return rb;ab=1;var e=W_(),t=ob(),n=Q_().ArraySet,r=H_(),i=cb().quickSort;function o(t,n){var r=t;return"string"==typeof t&&(r=e.parseSourceMapInput(t)),null!=r.sections?new u(r,n):new s(r,n)}function s(t,r){var i=t;"string"==typeof t&&(i=e.parseSourceMapInput(t));var o=e.getArg(i,"version"),s=e.getArg(i,"sources"),a=e.getArg(i,"names",[]),u=e.getArg(i,"sourceRoot",null),c=e.getArg(i,"sourcesContent",null),l=e.getArg(i,"mappings"),f=e.getArg(i,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);u&&(u=e.normalize(u)),s=s.map(String).map(e.normalize).map(function(t){return u&&e.isAbsolute(u)&&e.isAbsolute(t)?e.relative(u,t):t}),this._names=n.fromArray(a.map(String),!0),this._sources=n.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(t){return e.computeSourceURL(u,t,r)}),this.sourceRoot=u,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=r,this.file=f}function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function u(t,r){var i=t;"string"==typeof t&&(i=e.parseSourceMapInput(t));var s=e.getArg(i,"version"),a=e.getArg(i,"sections");if(s!=this._version)throw new Error("Unsupported version: "+s);this._sources=new n,this._names=new n;var u={line:-1,column:0};this._sections=a.map(function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=e.getArg(t,"offset"),i=e.getArg(n,"line"),s=e.getArg(n,"column");if(i<u.line||i===u.line&&s<u.column)throw new Error("Section offsets must be ordered and non-overlapping.");return u=n,{generatedOffset:{generatedLine:i+1,generatedColumn:s+1},consumer:new o(e.getArg(t,"map"),r)}})}return o.fromSourceMap=function(e,t){return s.fromSourceMap(e,t)},o.prototype._version=3,o.prototype.__generatedMappings=null,Object.defineProperty(o.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),o.prototype.__originalMappings=null,Object.defineProperty(o.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),o.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},o.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},o.GENERATED_ORDER=1,o.ORIGINAL_ORDER=2,o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.prototype.eachMapping=function(t,n,r){var i,s=n||null;switch(r||o.GENERATED_ORDER){case o.GENERATED_ORDER:i=this._generatedMappings;break;case o.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;i.map(function(t){var n=null===t.source?null:this._sources.at(t.source);return{source:n=e.computeSourceURL(a,n,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,s)},o.prototype.allGeneratedPositionsFor=function(n){var r=e.getArg(n,"line"),i={source:e.getArg(n,"source"),originalLine:r,originalColumn:e.getArg(n,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var o=[],s=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===n.column)for(var u=a.originalLine;a&&a.originalLine===u;)o.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==c;)o.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},rb.SourceMapConsumer=o,s.prototype=Object.create(o.prototype),s.prototype.consumer=o,s.prototype._findSourceIndex=function(t){var n,r=t;if(null!=this.sourceRoot&&(r=e.relative(this.sourceRoot,r)),this._sources.has(r))return this._sources.indexOf(r);for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1},s.fromSourceMap=function(t,r){var o=Object.create(s.prototype),u=o._names=n.fromArray(t._names.toArray(),!0),c=o._sources=n.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=r,o._absoluteSources=o._sources.toArray().map(function(t){return e.computeSourceURL(o.sourceRoot,t,r)});for(var l=t._mappings.toArray().slice(),f=o.__generatedMappings=[],d=o.__originalMappings=[],p=0,h=l.length;p<h;p++){var m=l[p],g=new a;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=c.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=u.indexOf(m.name)),d.push(g)),f.push(g)}return i(o.__originalMappings,e.compareByOriginalPositions),o},s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),s.prototype._parseMappings=function(t,n){for(var o,s,u,c,l,f=1,d=0,p=0,h=0,m=0,g=0,v=t.length,y=0,_={},b={},w=[],x=[];y<v;)if(";"===t.charAt(y))f++,y++,d=0;else if(","===t.charAt(y))y++;else{for((o=new a).generatedLine=f,c=y;c<v&&!this._charIsMappingSeparator(t,c);c++);if(u=_[s=t.slice(y,c)])y+=s.length;else{for(u=[];y<c;)r.decode(t,y,b),l=b.value,y=b.rest,u.push(l);if(2===u.length)throw new Error("Found a source, but no line and column");if(3===u.length)throw new Error("Found a source and line, but no column");_[s]=u}o.generatedColumn=d+u[0],d=o.generatedColumn,u.length>1&&(o.source=m+u[1],m+=u[1],o.originalLine=p+u[2],p=o.originalLine,o.originalLine+=1,o.originalColumn=h+u[3],h=o.originalColumn,u.length>4&&(o.name=g+u[4],g+=u[4])),x.push(o),"number"==typeof o.originalLine&&w.push(o)}i(x,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=x,i(w,e.compareByOriginalPositions),this.__originalMappings=w},s.prototype._findMapping=function(e,n,r,i,o,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return t.search(e,n,o,s)},s.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},s.prototype.originalPositionFor=function(t){var n={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",o.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var s=e.getArg(i,"source",null);null!==s&&(s=this._sources.at(s),s=e.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var a=e.getArg(i,"name",null);return null!==a&&(a=this._names.at(a)),{source:s,line:e.getArg(i,"originalLine",null),column:e.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},s.prototype.sourceContentFor=function(t,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(t);if(r>=0)return this.sourcesContent[r];var i,o=t;if(null!=this.sourceRoot&&(o=e.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(i=e.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||"/"==i.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(n)return null;throw new Error('"'+o+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(t){var n=e.getArg(t,"source");if((n=this._findSourceIndex(n))<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",o.GREATEST_LOWER_BOUND));if(i>=0){var s=this._originalMappings[i];if(s.source===r.source)return{line:e.getArg(s,"generatedLine",null),column:e.getArg(s,"generatedColumn",null),lastColumn:e.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},rb.BasicSourceMapConsumer=s,u.prototype=Object.create(o.prototype),u.prototype.constructor=o,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),u.prototype.originalPositionFor=function(n){var r={generatedLine:e.getArg(n,"line"),generatedColumn:e.getArg(n,"column")},i=t.search(r,this._sections,function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn}),o=this._sections[i];return o?o.consumer.originalPositionFor({line:r.generatedLine-(o.generatedOffset.generatedLine-1),column:r.generatedColumn-(o.generatedOffset.generatedLine===r.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:n.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(-1!==r.consumer._findSourceIndex(e.getArg(t,"source"))){var i=r.consumer.generatedPositionFor(t);if(i)return{line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},u.prototype._parseMappings=function(t,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var o=this._sections[r],s=o.consumer._generatedMappings,a=0;a<s.length;a++){var u=s[a],c=o.consumer._sources.at(u.source);c=e.computeSourceURL(o.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var l=null;u.name&&(l=o.consumer._names.at(u.name),this._names.add(l),l=this._names.indexOf(l));var f={source:c,generatedLine:u.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(o.generatedOffset.generatedLine===u.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:l};this.__generatedMappings.push(f),"number"==typeof f.originalLine&&this.__originalMappings.push(f)}i(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),i(this.__originalMappings,e.compareByOriginalPositions)},rb.IndexedSourceMapConsumer=u,rb}().SourceMapConsumer,B_.SourceNode=function(){if(lb)return Rw;lb=1;var e=tb().SourceMapGenerator,t=W_(),n=/(\r?\n)/,r="$$$isSourceNode$$$";function i(e,t,n,i,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==o?null:o,this[r]=!0,null!=i&&this.add(i)}return i.fromStringWithSourceMap=function(e,r,o){var s=new i,a=e.split(n),u=0,c=function(){return e()+(e()||"");function e(){return u<a.length?a[u++]:void 0}},l=1,f=0,d=null;return r.eachMapping(function(e){if(null!==d){if(!(l<e.generatedLine)){var t=(n=a[u]||"").substr(0,e.generatedColumn-f);return a[u]=n.substr(e.generatedColumn-f),f=e.generatedColumn,p(d,t),void(d=e)}p(d,c()),l++,f=0}for(;l<e.generatedLine;)s.add(c()),l++;if(f<e.generatedColumn){var n=a[u]||"";s.add(n.substr(0,e.generatedColumn)),a[u]=n.substr(e.generatedColumn),f=e.generatedColumn}d=e},this),u<a.length&&(d&&p(d,c()),s.add(a.splice(u).join(""))),r.sources.forEach(function(e){var n=r.sourceContentFor(e);null!=n&&(null!=o&&(e=t.join(o,e)),s.setSourceContent(e,n))}),s;function p(e,n){if(null===e||void 0===e.source)s.add(n);else{var r=o?t.join(o,e.source):e.source;s.add(new i(e.originalLine,e.originalColumn,r,n,e.name))}}},i.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[r]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},i.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[r]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},i.prototype.walk=function(e){for(var t,n=0,i=this.children.length;n<i;n++)(t=this.children[n])[r]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},i.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[r]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},i.prototype.setSourceContent=function(e,n){this.sourceContents[t.toSetString(e)]=n},i.prototype.walkSourceContents=function(e){for(var n=0,i=this.children.length;n<i;n++)this.children[n][r]&&this.children[n].walkSourceContents(e);var o=Object.keys(this.sourceContents);for(n=0,i=o.length;n<i;n++)e(t.fromSetString(o[n]),this.sourceContents[o[n]])},i.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},i.prototype.toStringWithSourceMap=function(t){var n={code:"",line:1,column:0},r=new e(t),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(e,t){n.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(o===t.source&&s===t.line&&a===t.column&&u===t.name||r.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name}),o=t.source,s=t.line,a=t.column,u=t.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var c=0,l=e.length;c<l;c++)10===e.charCodeAt(c)?(n.line++,n.column=0,c+1===l?(o=null,i=!1):i&&r.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name})):n.column++}),this.walkSourceContents(function(e,t){r.setSourceContent(e,t)}),{code:n.code,map:r}},Rw.SourceNode=i,Rw}().SourceNode),B_}function Lw(){if(mb)return hb;mb=1;var e=/^(\w+:\/\/|\/\/)/,t=/^file:\/\//;return hb=function(n){return e.test(n)&&!t.test(n)},hb}function Iw(){if(vb)return gb;vb=1;var e=/^\/\//;return gb=function(t){return!e.test(t)},gb}function Mw(){if(_b)return yb;_b=1;var e=n,t=l,r=Lw(),i=Iw(),o="http:";function s(e){return r(e)||t.parse(o+"//"+e).host==e}return yb=function n(r,a,u){var c,l,f,d,p,h,m=!a;if(0===u.length)return!1;for(a&&!i(r)&&(r=o+r),c=a?t.parse(r).host:r,l=a?r:e.resolve(r),h=0;h<u.length;h++)d="!"==(f=u[h])[0],p=f.substring(1),m=d&&a&&s(p)?m&&!n(r,!0,[p]):!d||a||s(p)?d?m&&!0:"all"==f||(a&&"local"==f?m||!1:!(!a||"remote"!=f)||!(!a&&"remote"==f)&&(!a&&"local"==f||f===c||f===r||!(!a||0!==l.indexOf(f))||!a&&0===l.indexOf(e.resolve(f))||a!=s(p)&&m&&!0)):m&&!n(r,!1,[p]);return m},yb}function zw(){if(Eb)return xb;Eb=1;var e=n;return xb=function(t,n,r){var i=e.resolve(""),o=e.resolve(i,n),s=e.dirname(o);return t.sources=t.sources.map(function(t){return e.relative(r,e.resolve(s,t))}),t},xb}function Bw(){if(Ab)return kb;Ab=1;var e=n,t=l;return kb=function(n,r){var i=e.dirname(r);return n.sources=n.sources.map(function(e){return t.resolve(i,e)}),n},kb}function jw(){if(Cb)return Db;Cb=1;var e=/^data:(\S{0,31}?)?(;charset=(?:(?!;charset=)[^;])+)?(;[^,]+?)?,(.+)/;return Db=function(t){return e.test(t)},Db}function Uw(){if(Sb)return Ob;Sb=1;var e=i,t=n,r=Mw(),o=function(){if(wb)return bb;wb=1;var e=/^data:(\S*?)?(;charset=(?:(?!;charset=)[^;])+)?(;[^,]+?)?,(.+)/;return bb=function(t){return e.exec(t)},bb}(),s=zw(),a=Bw(),u=Uy(),c=Iw(),l=jw(),f=Lw(),d=/^\/\*# sourceMappingURL=(\S+) \*\/$/;function p(e){var t,n,r,i=[],o=h(e.sourceTokens[0]);for(r=e.sourceTokens.length;e.index<r;e.index++)if((t=h(n=e.sourceTokens[e.index]))!=o&&(i=[],o=t),i.push(n),e.processedTokens.push(n),n[0]==u.COMMENT&&d.test(n[1]))return m(n[1],t,i,e);return e.callback(e.processedTokens)}function h(e){return(e[0]==u.AT_RULE||e[0]==u.COMMENT||e[0]==u.RAW?e[2][0]:e[1][0][2][0])[2]}function m(n,i,u,h){return function(n,i,u){var p,h,m,g=d.exec(n)[1];return l(g)?(h=function(e){var t=o(e),n=t[2]?t[2].split(/[=;]/)[2]:"us-ascii",r=t[3]?t[3].split(";")[1]:"utf8",i="utf8"==r?mr.unescape(t[4]):t[4],s=Buffer.from(i,r);return s.charset=n,JSON.parse(s.toString())}(g),u(h)):f(g)?function(e,t,n){var i=r(e,!0,t.inline),o=!c(e);return t.localOnly?(t.warnings.push('Cannot fetch remote resource from "'+e+'" as no callback given.'),n(null)):o?(t.warnings.push('Cannot fetch "'+e+'" as no protocol given.'),n(null)):i?void t.fetch(e,t.inlineRequest,t.inlineTimeout,function(r,i){if(r)return t.warnings.push('Missing source map at "'+e+'" - '+r),n(null);n(i)}):(t.warnings.push('Cannot fetch "'+e+'" as resource is not allowed.'),n(null))}(g,i,function(e){var t;e?(t=JSON.parse(e),m=a(t,g),u(m)):u(null)}):(h=function(t,n){var i,o=r(t,!1,n.inline);return e.existsSync(t)&&e.statSync(t).isFile()?o?e.statSync(t).size?(i=e.readFileSync(t,"utf-8"),JSON.parse(i)):(n.warnings.push('Cannot fetch "'+t+'" as resource is empty.'),null):(n.warnings.push('Cannot fetch "'+t+'" as resource is not allowed.'),null):(n.warnings.push('Ignoring local source map at "'+t+'" as resource is missing.'),null)}(p=t.resolve(i.rebaseTo,g),i),h?(m=s(h,p,i.rebaseTo),u(m)):u(null))}(n,h,function(e){return e&&(h.inputSourceMapTracker.track(i,e),g(u,h.inputSourceMapTracker)),h.index++,p(h)})}function g(e,t){var n,r,i;for(r=0,i=e.length;r<i;r++)switch((n=e[r])[0]){case u.AT_RULE:v(n,t);break;case u.AT_RULE_BLOCK:g(n[1],t),g(n[2],t);break;case u.AT_RULE_BLOCK_SCOPE:v(n,t);break;case u.NESTED_BLOCK:g(n[1],t),g(n[2],t);break;case u.NESTED_BLOCK_SCOPE:case u.COMMENT:v(n,t);break;case u.PROPERTY:g(n,t);break;case u.PROPERTY_BLOCK:g(n[1],t);break;case u.PROPERTY_NAME:case u.PROPERTY_VALUE:v(n,t);break;case u.RULE:g(n[1],t),g(n[2],t);break;case u.RULE_SCOPE:v(n,t)}return e}function v(e,t){var n,r,i=e[1],o=e[2],s=[];for(n=0,r=o.length;n<r;n++)s.push(t.originalPositionFor(o[n],i.length));e[2]=s}return Ob=function(e,t,n){var r={callback:n,fetch:t.options.fetch,index:0,inline:t.options.inline,inlineRequest:t.options.inlineRequest,inlineTimeout:t.options.inlineTimeout,inputSourceMapTracker:t.inputSourceMapTracker,localOnly:t.localOnly,processedTokens:[],rebaseTo:t.options.rebaseTo,sourceTokens:e,warnings:t.warnings};return t.options.sourceMap&&e.length>0?p(r):n(e)}}function Vw(){if(Tb)return $b;Tb=1;var e=s_(),t=/^\(/,n=/\)$/,r=/^@import/i,i=/['"]\s{0,31}/,o=/\s{0,31}['"]/,s=/^url\(\s{0,31}/i,a=/\s{0,31}\)/i;return $b=function(u){var c,l;return c=u.replace(r,"").trim().replace(s,"(").replace(a,") ").replace(i,"").replace(o,""),[(l=e(c," "))[0].replace(t,"").replace(n,""),l.slice(1).join(" ")]}}function qw(){return Ib||(Ib=1,Lb=function(e,t){return("@import "+e+" "+t).trim()}),Lb}function Hw(){if(zb)return Mb;zb=1;var e=n,t=l,r=jw(),i=/^[^\w\d]*\/\//,o=/^["']/,s=/["']$/,a=/[()]/,u=/^url\(/i,c=/\)$/,f=/\s/,d="win32"==process.platform;function p(n,i){return i?function(t){return e.isAbsolute(t)}(n)&&!h(i.toBase)||h(n)||function(e){return"#"==e[0]}(n)||function(e){return/^\w+:\w+/.test(e)}(n)||r(n)?n:h(i.toBase)?t.resolve(i.toBase,n):i.absolute?m(function(t,n){return e.resolve(e.join(n.fromBase||"",t)).replace(n.toBase,"")}(n,i)):m(function(t,n){return e.relative(n.toBase,e.join(n.fromBase||"",t))}(n,i)):n}function h(e){return/^[^:]+?:\/\//.test(e)||i.test(e)}function m(e){return d?e.replace(/\\/g,"/"):e}return Mb=function(e,t,n){var r=e.replace(u,"").replace(c,"").trim(),i=r.replace(o,"").replace(s,"").trim(),l="'"==r[0]||'"'==r[0]?r[0]:function(e){return e.indexOf("'")>-1?'"':e.indexOf('"')>-1||function(e){return f.test(e)}(e)||function(e){return a.test(e)}(e)?"'":""}(i);return n?p(i,t):"url("+l+p(i,t)+l+")"}}function Kw(){if(jb)return Bb;jb=1;var e=/^@import/i;return Bb=function(t){return e.test(t)}}function Zw(){if(Vb)return Ub;Vb=1;var e=Vw(),t=qw(),n=Hw(),r=Uy(),i=Kw(),o=/^\/\*# sourceMappingURL=(\S+) \*\/$/;function s(e,t,n){var i,o,l;for(o=0,l=e.length;o<l;o++)switch((i=e[o])[0]){case r.AT_RULE:a(i,0,n);break;case r.AT_RULE_BLOCK:c(i[2],t,n);break;case r.COMMENT:u(i,n);break;case r.NESTED_BLOCK:s(i[2],t,n);break;case r.RULE:c(i[2],t,n)}return e}function a(r,o,s){if(i(r[1])){var a=e(r[1]),u=n(a[0],s),c=a[1];r[1]=t(u,c)}}function u(e,t){var r=o.exec(e[1]);r&&-1===r[1].indexOf("data:")&&(e[1]=e[1].replace(r[1],n(r[1],t,!0)))}function c(e,t,r){var i,o,s,a,u,c;for(s=0,a=e.length;s<a;s++)for(u=2,c=(i=e[s]).length;u<c;u++)o=i[u][1],t.isUrl(o)&&(i[u][1]=n(o,r))}return Ub=function(e,t,n,i){return t?s(e,n,i):function(e,t,n){var i,o,s;for(o=0,s=e.length;o<s;o++)(i=e[o])[0]===r.AT_RULE&&a(i,0,n);return e}(e,0,i)},Ub}function Ww(){if(Hb)return qb;Hb=1;var e=Ly(),t=Uy(),n=Iy(),r="block",i="comment",o="double-quote",s="rule",a="single-quote",u=["@charset","@import"],c=["@-moz-document","@document","@-moz-keyframes","@-ms-keyframes","@-o-keyframes","@-webkit-keyframes","@keyframes","@media","@supports","@container","@layer"],l=/\/\* clean-css ignore:end \*\/$/,f=/^\/\* clean-css ignore:start \*\//,d=["@bottom-center","@bottom-left","@bottom-left-corner","@bottom-right","@bottom-right-corner","@left-bottom","@left-middle","@left-top","@right-bottom","@right-middle","@right-top","@top-center","@top-left","@top-left-corner","@top-right","@top-right-corner"],p=["@footnote","@footnotes","@left","@page-float-bottom","@page-float-top","@right"],h=/^\[\s{0,31}\d+\s{0,31}\]$/,m=/([^}])\}*$/,g=/[\s(]/;function v(u,c,l,f){for(var d,p,h,g,A,D,C,O,S,$,T,P,F,R,N,L,I,M=[],z=M,B=[],j=[],U=l.level,V=[],q=[],H=[],K=!0,Z=0,W=!1,G=!1,Y=!1,Q=!1,J=!1,X=!1,ee=!1,te=l.position;te.index<u.length;te.index++){var ne=u[te.index];if(C=U==a||U==o,O=ne==e.SPACE||ne==e.TAB,S=ne==e.NEW_LINE_NIX,$=ne==e.NEW_LINE_NIX&&u[te.index-1]==e.CARRIAGE_RETURN,T=ne==e.CARRIAGE_RETURN&&u[te.index+1]&&u[te.index+1]!=e.NEW_LINE_NIX,P=!G&&U!=i&&!C&&ne==e.ASTERISK&&u[te.index-1]==e.FORWARD_SLASH,R=!W&&!C&&ne==e.FORWARD_SLASH&&u[te.index-1]==e.ASTERISK,F=U==i&&R,L=!O&&!T&&(ne>="A"&&ne<="Z"||ne>="a"&&ne<="z"||ne>="0"&&ne<="9"||"-"==ne),Q=Q||U!=i&&!X&&Y&&"-"===ne&&1===q.length,Y="-"===ne,Z=Math.max(Z,0),g=K?[te.line,te.column,te.source]:g,N)q.push(ne),K=!1;else if(L)q.push(ne),K=!1;else if((O||S&&!$)&&(C||U==i))q.push(ne),K=!1;else if((O||S&&!$)&&K);else if(F||U!=i)if(P||F||!J)if(P&&Q&&(U==r||U==s)&&q.length>1)q.push(ne),K=!1,V.push(U),U=i;else if(P&&(U==r||U==s)&&q.length>1)j.push(g),q.push(ne),H.push(q.slice(0,-2)),K=!1,q=q.slice(-2),g=[te.line,te.column-1,te.source],V.push(U),U=i;else if(P)V.push(U),U=i,q.push(ne),K=!1;else if(F&&Q)q.push(ne),U=V.pop();else if(F&&y(q))A=q.join("").trim()+ne,d=[t.COMMENT,A,[b(g,A,c)]],z.push(d),J=!0,g=j.pop()||null,K=0===(q=H.pop()||[]).length;else if(F&&_(q))I=(A=q.join("")+ne).lastIndexOf(e.FORWARD_SLASH+e.ASTERISK),D=A.substring(0,I),d=[t.RAW,D,[b(g,D,c)]],z.push(d),D=A.substring(I),g=[te.line,te.column-D.length+1,te.source],d=[t.COMMENT,D,[b(g,D,c)]],z.push(d),J=!1,U=V.pop(),g=j.pop()||null,K=0===(q=H.pop()||[]).length;else if(F)A=q.join("").trim()+ne,d=[t.COMMENT,A,[b(g,A,c)]],z.push(d),U=V.pop(),g=j.pop()||null,K=0===(q=H.pop()||[]).length;else if(R&&u[te.index+1]!=e.ASTERISK)c.warnings.push("Unexpected '*/' at "+n([te.line,te.column,te.source])+"."),q=[],K=!0;else if(ne!=e.SINGLE_QUOTE||C)if(ne==e.SINGLE_QUOTE&&U==a)U=V.pop(),q.push(ne),K=!1;else if(ne!=e.DOUBLE_QUOTE||C)if(ne==e.DOUBLE_QUOTE&&U==o)U=V.pop(),q.push(ne),K=!1;else if(ne!=e.CLOSE_ROUND_BRACKET&&ne!=e.OPEN_ROUND_BRACKET&&U!=i&&!C&&Z>0)q.push(ne),K=!1;else if(ne!=e.OPEN_ROUND_BRACKET||C||U==i||X)if(ne!=e.CLOSE_ROUND_BRACKET||C||U==i||X)if(ne==e.SEMICOLON&&U==r&&q[0]==e.AT)A=q.join("").trim(),M.push([t.AT_RULE,A,[b(g,A,c)]]),q=[],K=!0;else if(ne==e.COMMA&&U==r&&p)A=q.join("").trim(),p[1].push([x(p[0]),A,[b(g,A,c,p[1].length)]]),q=[],K=!0;else if(ne==e.COMMA&&U==r&&w(q)==t.AT_RULE)q.push(ne),K=!1;else if(ne==e.COMMA&&U==r)p=[w(q),[],[]],A=q.join("").trim(),p[1].push([x(p[0]),A,[b(g,A,c,0)]]),q=[],K=!0;else if(ne==e.OPEN_CURLY_BRACKET&&U==r&&p&&p[0]==t.NESTED_BLOCK)A=q.join("").trim(),p[1].push([t.NESTED_BLOCK_SCOPE,A,[b(g,A,c)]]),M.push(p),V.push(U),te.column++,te.index++,q=[],K=!0,p[2]=v(u,c,l,!0),p=null;else if(ne==e.OPEN_CURLY_BRACKET&&U==r&&w(q)==t.NESTED_BLOCK)A=q.join("").trim(),(p=p||[t.NESTED_BLOCK,[],[]])[1].push([t.NESTED_BLOCK_SCOPE,A,[b(g,A,c)]]),M.push(p),V.push(U),te.column++,te.index++,q=[],K=!0,Q=!1,p[2]=v(u,c,l,!0),p=null;else if(ne==e.OPEN_CURLY_BRACKET&&U==r)A=q.join("").trim(),(p=p||[w(q),[],[]])[1].push([x(p[0]),A,[b(g,A,c,p[1].length)]]),z=p[2],M.push(p),V.push(U),U=s,q=[],K=!0;else if(ne==e.OPEN_CURLY_BRACKET&&U==s&&X)B.push(p),p=[t.PROPERTY_BLOCK,[]],h.push(p),z=p[1],V.push(U),U=s,X=!1;else if(ne==e.OPEN_CURLY_BRACKET&&U==s&&E(q))A=q.join("").trim(),B.push(p),(p=[t.AT_RULE_BLOCK,[],[]])[1].push([t.AT_RULE_BLOCK_SCOPE,A,[b(g,A,c)]]),z.push(p),z=p[2],V.push(U),U=s,q=[],K=!0;else if(ne!=e.COLON||U!=s||X)if(ne==e.SEMICOLON&&U==s&&h&&B.length>0&&!K&&q[0]==e.AT)A=q.join("").trim(),p[1].push([t.AT_RULE,A,[b(g,A,c)]]),q=[],K=!0;else if(ne==e.SEMICOLON&&U==s&&h&&!K)A=q.join("").trim(),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),h=null,X=!1,q=[],K=!0,Q=!1;else if(ne==e.SEMICOLON&&U==s&&h&&K&&Q&&!h[2])h.push([t.PROPERTY_VALUE," ",[b(g," ",c)]]),Q=!1,h=null,X=!1;else if(ne==e.SEMICOLON&&U==s&&h&&K)h=null,X=!1;else if(ne!=e.SEMICOLON||U!=s||K||q[0]!=e.AT)if(ne==e.SEMICOLON&&U==s&&ee)ee=!1,q=[],K=!0;else if(ne==e.SEMICOLON&&U==s&&K);else if(ne==e.CLOSE_CURLY_BRACKET&&U==s&&h&&X&&!K&&B.length>0)A=q.join(""),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),h=null,z=(p=B.pop())[2],U=V.pop(),X=!1,q=[],K=!0;else if(ne==e.CLOSE_CURLY_BRACKET&&U==s&&h&&!K&&q[0]==e.AT&&B.length>0)A=q.join(""),p[1].push([t.AT_RULE,A,[b(g,A,c)]]),h=null,z=(p=B.pop())[2],U=V.pop(),X=!1,q=[],K=!0;else if(ne==e.CLOSE_CURLY_BRACKET&&U==s&&h&&B.length>0)h=null,z=(p=B.pop())[2],U=V.pop(),X=!1;else if(ne==e.CLOSE_CURLY_BRACKET&&U==s&&h&&!K)A=q.join(""),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),h=null,p=B.pop(),z=M,U=V.pop(),X=!1,q=[],K=!0;else if(ne!=e.CLOSE_CURLY_BRACKET||U!=s||K||q[0]!=e.AT)if(ne==e.CLOSE_CURLY_BRACKET&&U==s&&V[V.length-1]==s)h=null,z=(p=B.pop())[2],U=V.pop(),X=!1,ee=!0,q=[],K=!0;else if(ne==e.CLOSE_CURLY_BRACKET&&U==s&&Q&&h&&!h[2])h.push([t.PROPERTY_VALUE," ",[b(g," ",c)]]),Q=!1,h=null,p=null,z=M,U=V.pop(),X=!1,Q=!1;else if(ne==e.CLOSE_CURLY_BRACKET&&U==s)h=null,p=null,z=M,U=V.pop(),X=!1,Q=!1;else if(ne==e.CLOSE_CURLY_BRACKET&&U==r&&!f&&te.index<=u.length-1)c.warnings.push("Unexpected '}' at "+n([te.line,te.column,te.source])+"."),q.push(ne),K=!1;else{if(ne==e.CLOSE_CURLY_BRACKET&&U==r)break;ne==e.OPEN_ROUND_BRACKET&&U==s&&X?(q.push(ne),K=!1,Z++):ne==e.CLOSE_ROUND_BRACKET&&U==s&&X&&1==Z?(q.push(ne),K=!1,A=q.join("").trim(),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),Z--,q=[],K=!0,Q=!1):ne==e.CLOSE_ROUND_BRACKET&&U==s&&X?(q.push(ne),K=!1,Q=!1,Z--):ne==e.FORWARD_SLASH&&u[te.index+1]!=e.ASTERISK&&U==s&&X&&!K?(A=q.join("").trim(),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),h.push([t.PROPERTY_VALUE,ne,[[te.line,te.column,te.source]]]),q=[],K=!0):ne==e.FORWARD_SLASH&&u[te.index+1]!=e.ASTERISK&&U==s&&X?(h.push([t.PROPERTY_VALUE,ne,[[te.line,te.column,te.source]]]),q=[],K=!0):ne==e.COMMA&&U==s&&X&&!K?(A=q.join("").trim(),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),h.push([t.PROPERTY_VALUE,ne,[[te.line,te.column,te.source]]]),q=[],K=!0):ne==e.COMMA&&U==s&&X?(h.push([t.PROPERTY_VALUE,ne,[[te.line,te.column,te.source]]]),q=[],K=!0):ne==e.CLOSE_SQUARE_BRACKET&&h&&h.length>1&&!K&&k(q)?(q.push(ne),A=q.join("").trim(),h[h.length-1][1]+=A,q=[],K=!0):(O||S&&!$)&&U==s&&X&&h&&!K||$&&U==s&&X&&h&&q.length>1?(A=q.join("").trim(),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),q=[],K=!0):$&&U==s&&X?(q=[],K=!0):$&&1==q.length?(q.pop(),K=0===q.length):K&&(O||S||$||T)||(q.push(ne),K=!1)}else h=null,p=null,A=q.join("").trim(),z.push([t.AT_RULE,A,[b(g,A,c)]]),z=M,U=V.pop(),X=!1,q=[],K=!0;else A=q.join(""),z.push([t.AT_RULE,A,[b(g,A,c)]]),X=!1,q=[],K=!0;else A=q.join("").trim(),h=[t.PROPERTY,[t.PROPERTY_NAME,A,[b(g,A,c)]]],z.push(h),X=!0,q=[],K=!0;else q.push(ne),K=!1,Z--;else q.push(ne),K=!1,Z++;else V.push(U),U=o,q.push(ne),K=!1;else V.push(U),U=a,q.push(ne),K=!1;else q.push(ne),K=!1;else q.push(ne),K=!1;N=!N&&ne==e.BACK_SLASH,W=P,G=F,te.line=$||S||T?te.line+1:te.line,te.column=$||S||T?0:te.column+1}return X&&c.warnings.push("Missing '}' at "+n([te.line,te.column,te.source])+"."),X&&q.length>0&&(A=q.join("").trimRight().replace(m,"$1").trimRight(),h.push([t.PROPERTY_VALUE,A,[b(g,A,c)]]),q=[]),q.length>0&&c.warnings.push("Invalid character(s) '"+q.join("")+"' at "+n(g)+". Ignoring."),M}function y(t){return f.test(t.join("")+e.FORWARD_SLASH)}function _(t){return l.test(t.join("")+e.FORWARD_SLASH)}function b(e,t,n,r){var i=e[2];return n.inputSourceMapTracker.isTracking(i)?n.inputSourceMapTracker.originalPositionFor(e,t.length,r):e}function w(n){var r=n[0]==e.AT||n[0]==e.UNDERSCORE,i=n.join("").split(g)[0];return r&&c.indexOf(i)>-1?t.NESTED_BLOCK:r&&u.indexOf(i)>-1?t.AT_RULE:r?t.AT_RULE_BLOCK:t.RULE}function x(e){return e==t.RULE?t.RULE_SCOPE:e==t.NESTED_BLOCK?t.NESTED_BLOCK_SCOPE:e==t.AT_RULE_BLOCK?t.AT_RULE_BLOCK_SCOPE:void 0}function E(e){var t=e.join("").trim();return d.indexOf(t)>-1||p.indexOf(t)>-1}function k(t){return h.test(t.join("")+e.CLOSE_SQUARE_BRACKET)}return qb=function(e,t){return v(e,t,{level:r,position:{source:t.source||void 0,line:1,column:0,index:0}},!1)}}function Gw(){if(Zb)return Kb;Zb=1;var e=i,t=n,r=Uw(),o=Vw(),s=Mw(),a=function(){if(Fb)return Pb;Fb=1;var e=i,t=n,r=Mw(),o=Iw(),s=Lw();function a(e){var t,n,r,i,o,s={};for(r in e)for(i=0,o=(t=e[r]).sources.length;i<o;i++)n=t.sources[i],r=t.sourceContentFor(n,!0),s[n]=r;return s}function u(e){var t,n,r,i=Object.keys(e.uriToSource);for(r=i.length;e.index<r;e.index++){if(t=i[e.index],!(n=e.uriToSource[t]))return c(t,e);e.sourcesContent[t]=n}return e.callback()}function c(n,i){var a;return s(n)?function(e,t,n){var i=r(e,!0,t.inline),s=!o(e);return t.localOnly?(t.warnings.push('Cannot fetch remote resource from "'+e+'" as no callback given.'),n(null)):s?(t.warnings.push('Cannot fetch "'+e+'" as no protocol given.'),n(null)):i?void t.fetch(e,t.inlineRequest,t.inlineTimeout,function(r,i){r&&t.warnings.push('Missing original source at "'+e+'" - '+r),n(i)}):(t.warnings.push('Cannot fetch "'+e+'" as resource is not allowed.'),n(null))}(n,i,function(e){return i.index++,i.sourcesContent[n]=e,u(i)}):(a=function(n,i){var o=r(n,!1,i.inline),s=t.resolve(i.rebaseTo,n);if(!e.existsSync(s)||!e.statSync(s).isFile())return i.warnings.push('Ignoring local source map at "'+s+'" as resource is missing.'),null;if(!o)return i.warnings.push('Cannot fetch "'+s+'" as resource is not allowed.'),null;var a=e.readFileSync(s,"utf8");return 65279===a.charCodeAt(0)&&(a=a.substring(1)),a}(n,i),i.index++,i.sourcesContent[n]=a,u(i))}return Pb=function(e,t){var n={callback:t,fetch:e.options.fetch,index:0,inline:e.options.inline,inlineRequest:e.options.inlineRequest,inlineTimeout:e.options.inlineTimeout,localOnly:e.localOnly,rebaseTo:e.options.rebaseTo,sourcesContent:e.sourcesContent,uriToSource:a(e.inputSourceMapTracker.all()),warnings:e.warnings};return e.options.sourceMap&&e.options.sourceMapInlineSources?u(n):t()}}(),u=function(){if(Nb)return Rb;Nb=1;var e=/\\/g;return Rb=function(t){return t.replace(e,"/")},Rb}(),c=Zw(),l=zw(),f=Bw(),d=qw(),p=Ww(),h=Uy(),m=Ly(),g=Iw(),v=Kw(),y=Lw();function _(e,t,n){return t.source=void 0,t.sourcesContent[void 0]=e,t.stats.originalSize+=e.length,k(e,t,{inline:t.options.inline},n)}function b(e,t,n){var r,i,o;for(r in e)o=e[r],i=w(r),n.push(E(i)),t.sourcesContent[i]=o.styles,o.sourceMap&&x(o.sourceMap,i,t);return n}function w(e){var n,r,i=t.resolve("");return y(e)?e:(n=t.isAbsolute(e)?e:t.resolve(e),r=t.relative(i,n),u(r))}function x(e,t,n){var r="string"==typeof e?JSON.parse(e):e,i=y(t)?f(r,t):l(r,t||"uri:unknown",n.options.rebaseTo);n.inputSourceMapTracker.track(t,i)}function E(e){return d("url("+e+")","")+m.SEMICOLON}function k(e,n,r,i){var o,s={};return n.source?y(n.source)?(s.fromBase=n.source,s.toBase=n.source):t.isAbsolute(n.source)?(s.fromBase=t.dirname(n.source),s.toBase=n.options.rebaseTo):(s.fromBase=t.dirname(t.resolve(n.source)),s.toBase=n.options.rebaseTo):(s.fromBase=t.resolve(""),s.toBase=n.options.rebaseTo),o=p(e,n),o=c(o,n.options.rebase,n.validator,s),function(e){return!(1==e.length&&"none"==e[0])}(r.inline)?function(e,t,n,r){return A({afterContent:!1,callback:r,errors:t.errors,externalContext:t,fetch:t.options.fetch,inlinedStylesheets:n.inlinedStylesheets||t.inlinedStylesheets,inline:n.inline,inlineRequest:t.options.inlineRequest,inlineTimeout:t.options.inlineTimeout,isRemote:n.isRemote||!1,localOnly:t.localOnly,outputTokens:[],rebaseTo:t.options.rebaseTo,sourceTokens:e,warnings:t.warnings})}(o,n,r,i):i(o)}function A(e){var t,n,r;for(n=0,r=e.sourceTokens.length;n<r;n++){if((t=e.sourceTokens[n])[0]==h.AT_RULE&&v(t[1]))return e.sourceTokens.splice(0,n),D(t,e);t[0]==h.AT_RULE||t[0]==h.COMMENT?e.outputTokens.push(t):(e.outputTokens.push(t),e.afterContent=!0)}return e.sourceTokens=[],e.callback(e.outputTokens)}function D(n,r){var i=o(n[1]),a=i[0],c=i[1],l=n[2];return y(a)?function(e,t,n,r){var i=s(e,!0,r.inline),o=e,a=e in r.externalContext.sourcesContent,u=!g(e);if(r.inlinedStylesheets.indexOf(e)>-1)return r.warnings.push('Ignoring remote @import of "'+e+'" as it has already been imported.'),r.sourceTokens=r.sourceTokens.slice(1),A(r);if(r.localOnly&&r.afterContent)return r.warnings.push('Ignoring remote @import of "'+e+'" as no callback given and after other content.'),r.sourceTokens=r.sourceTokens.slice(1),A(r);if(u)return r.warnings.push('Skipping remote @import of "'+e+'" as no protocol given.'),r.outputTokens=r.outputTokens.concat(r.sourceTokens.slice(0,1)),r.sourceTokens=r.sourceTokens.slice(1),A(r);if(r.localOnly&&!a)return r.warnings.push('Skipping remote @import of "'+e+'" as no callback given.'),r.outputTokens=r.outputTokens.concat(r.sourceTokens.slice(0,1)),r.sourceTokens=r.sourceTokens.slice(1),A(r);if(!i&&r.afterContent)return r.warnings.push('Ignoring remote @import of "'+e+'" as resource is not allowed and after other content.'),r.sourceTokens=r.sourceTokens.slice(1),A(r);if(!i)return r.warnings.push('Skipping remote @import of "'+e+'" as resource is not allowed.'),r.outputTokens=r.outputTokens.concat(r.sourceTokens.slice(0,1)),r.sourceTokens=r.sourceTokens.slice(1),A(r);function c(i,s){return i?(r.errors.push('Broken @import declaration of "'+e+'" - '+i),process.nextTick(function(){r.outputTokens=r.outputTokens.concat(r.sourceTokens.slice(0,1)),r.sourceTokens=r.sourceTokens.slice(1),A(r)})):(r.inline=r.externalContext.options.inline,r.isRemote=!0,r.externalContext.source=o,r.externalContext.sourcesContent[e]=s,r.externalContext.stats.originalSize+=s.length,k(s,r.externalContext,r,function(e){return e=C(e,t,n),r.outputTokens=r.outputTokens.concat(e),r.sourceTokens=r.sourceTokens.slice(1),A(r)}))}return r.inlinedStylesheets.push(e),a?c(null,r.externalContext.sourcesContent[e]):r.fetch(e,r.inlineRequest,r.inlineTimeout,c)}(a,c,l,r):function(n,r,i,o){var a,c=n.replace("file://",""),l=t.resolve(""),f=t.isAbsolute(c)?t.resolve(l,"/"==c[0]?c.substring(1):c):t.resolve(o.rebaseTo,c),d=t.relative(l,f),p=s(c,!1,o.inline),h=u(d),m=h in o.externalContext.sourcesContent;if(o.inlinedStylesheets.indexOf(f)>-1)o.warnings.push('Ignoring local @import of "'+c+'" as it has already been imported.');else if(!p||m||e.existsSync(f)&&e.statSync(f).isFile())if(!p&&o.afterContent)o.warnings.push('Ignoring local @import of "'+c+'" as resource is not allowed and after other content.');else if(o.afterContent)o.warnings.push('Ignoring local @import of "'+c+'" as after other content.');else{if(p)return 65279===(a=m?o.externalContext.sourcesContent[h]:e.readFileSync(f,"utf-8")).charCodeAt(0)&&(a=a.substring(1)),o.inlinedStylesheets.push(f),o.inline=o.externalContext.options.inline,o.externalContext.source=h,o.externalContext.sourcesContent[h]=a,o.externalContext.stats.originalSize+=a.length,k(a,o.externalContext,o,function(e){return e=C(e,r,i),o.outputTokens=o.outputTokens.concat(e),o.sourceTokens=o.sourceTokens.slice(1),A(o)});o.warnings.push('Skipping local @import of "'+c+'" as resource is not allowed.'),o.outputTokens=o.outputTokens.concat(o.sourceTokens.slice(0,1))}else o.errors.push('Ignoring local @import of "'+c+'" as resource is missing.');return o.sourceTokens=o.sourceTokens.slice(1),A(o)}(a,c,l,r)}function C(e,t,n){return t?[[h.NESTED_BLOCK,[[h.NESTED_BLOCK_SCOPE,"@media "+t,n]],e]]:e}return Kb=function(e,t,n){return function(e,t,n){return"string"==typeof e?_(e,t,n):Buffer.isBuffer(e)?_(e.toString(),t,n):Array.isArray(e)?function(e,t,n){return k(e.reduce(function(e,n){return"string"==typeof n?function(e,t){return t.push(E(w(e))),t}(n,e):b(n,t,e)},[]).join(""),t,{inline:["all"]},n)}(e,t,n):"object"==typeof e?function(e,t,n){return k(b(e,t,[]).join(""),t,{inline:["all"]},n)}(e,t,n):void 0}(e,t,function(e){return r(e,t,function(){return a(t,function(){return n(e)})})})}}function Yw(){return tw?ew:(tw=1,ew={ABSOLUTE:"absolute",PATH_RELATIVE:"pathRelative",ROOT_RELATIVE:"rootRelative",SHORTEST:"shortest"})}function Qw(){return ow||(ow=1,iw={clone:function e(t){if(t instanceof Object){var n=t instanceof Array?[]:{};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}return t},isPlainObject:function(e){return!!e&&"object"==typeof e&&e.constructor===Object},shallowMerge:function(e,t){if(e instanceof Object&&t instanceof Object)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}),iw}function Jw(){return ww?bw:(ww=1,bw={join:function(e){return e.length>0?e.join("/")+"/":""},resolveDotSegments:function(e){var t=[];return e.forEach(function(e){".."!==e?"."!==e&&t.push(e):t.length>0&&t.splice(t.length-1,1)}),t}})}function Xw(){return Aw||(Aw=1,kw={pathOn:function(e,t,n){var r=e.extra.hrefInfo.minimumQueryOnly,i=e.extra.hrefInfo.minimumHashOnly,o=e.extra.hrefInfo.empty,s=e.extra.relation.minimumPort,a=e.extra.relation.minimumScheme,u=s&&e.path.absolute.string===t.path.absolute.string,c=e.resource===t.resource||!e.resource&&t.extra.resourceIsIndex||n.removeDirectoryIndexes&&e.extra.resourceIsIndex&&!t.resource,l=u&&(c||r||i||o),f=n.removeEmptyQueries?"stripped":"full",d=e.query.string[f],p=t.query.string[f],h=l&&!!d&&d===p||(i||o)&&!e.extra.hrefInfo.separatorOnlyQuery,m=h&&e.hash===t.hash;e.extra.relation.minimumPath=u,e.extra.relation.minimumResource=l,e.extra.relation.minimumQuery=h,e.extra.relation.minimumHash=m,e.extra.relation.maximumPort=!a||a&&!u,e.extra.relation.maximumPath=!a||a&&!l,e.extra.relation.maximumResource=!a||a&&!h,e.extra.relation.maximumQuery=!a||a&&!m,e.extra.relation.maximumHash=!a||a&&!m,e.extra.relation.overridesQuery=u&&e.extra.relation.maximumResource&&!h&&!!p},upToPath:function(e,t,n){var r=e.extra.hrefInfo.minimumPathOnly,i=e.scheme===t.scheme||!e.scheme,o=i&&(e.auth===t.auth||n.removeAuth||r),s=n.ignore_www?"stripped":"full",a=o&&(e.host[s]===t.host[s]||r),u=a&&(e.port===t.port||r);e.extra.relation.minimumScheme=i,e.extra.relation.minimumAuth=o,e.extra.relation.minimumHost=a,e.extra.relation.minimumPort=u,e.extra.relation.maximumScheme=!i||i&&!o,e.extra.relation.maximumAuth=!i||i&&!a,e.extra.relation.maximumHost=!i||i&&!u}}),kw}function ex(){if(Tw)return $w;Tw=1;var e=function(){if(Cw)return Dw;Cw=1;var e=Xw(),t=Qw(),n=Jw();return Dw=function(r,i,o){e.upToPath(r,i,o),r.extra.relation.minimumScheme&&(r.scheme=i.scheme),r.extra.relation.minimumAuth&&(r.auth=i.auth),r.extra.relation.minimumHost&&(r.host=t.clone(i.host)),r.extra.relation.minimumPort&&function(e,t){e.port=t.port,e.extra.portIsDefault=t.extra.portIsDefault}(r,i),r.extra.relation.minimumScheme&&function(e,r){if(e.extra.relation.maximumHost||!e.extra.hrefInfo.minimumResourceOnly){var i=e.path.absolute.array,o="/";i?(e.extra.hrefInfo.minimumPathOnly&&0!==e.path.absolute.string.indexOf("/")&&(i=r.path.absolute.array.concat(i)),i=n.resolveDotSegments(i),o+=n.join(i)):i=[],e.path.absolute.array=i,e.path.absolute.string=o}else e.path=t.clone(r.path)}(r,i),e.pathOn(r,i,o),r.extra.relation.minimumResource&&function(e,t){e.resource=t.resource,e.extra.resourceIsIndex=t.extra.resourceIsIndex}(r,i),r.extra.relation.minimumQuery&&(r.query=t.clone(i.query)),r.extra.relation.minimumHash&&(r.hash=i.hash)},Dw}(),t=function(){if(Sw)return Ow;Sw=1;var e=Jw();return Ow=function(t,n,r){if(t.extra.relation.minimumScheme){var i=(o=t.path.absolute.array,s=n.path.absolute.array,a=[],u=!0,c=-1,s.forEach(function(e,t){u&&(o[t]!==e?u=!1:c=t),u||a.push("..")}),o.forEach(function(e,t){t>c&&a.push(e)}),a);t.path.relative.array=i,t.path.relative.string=e.join(i)}var o,s,a,u,c},Ow}();return $w=function(n,r,i){return e(r,n,i),t(r,n,i),r},$w}function tx(e){return null==e}Xb||(Xb=1,function(){if(Jb)return Py.exports;Jb=1;var e=Qh?Yh:(Qh=1,Yh=function(e){return e}),t=function(){if(Qg)return Yg;Qg=1;var e=Fy(),t=My(),n=function(){if(pm)return dm;pm=1;var e=/^@media\W/,t=/^@(?:keyframes|-moz-keyframes|-o-keyframes|-webkit-keyframes)\W/;return dm=function(n,r){var i,o,s;for(s=n.length-1;s>=0;s--)i=!r&&e.test(n[s][1]),o=t.test(n[s][1]),n[s][1]=n[s][1].replace(/\n|\r\n/g," ").replace(/\s+/g," ").replace(/(,|:|\() /g,"$1").replace(/ \)/g,")"),o&&(n[s][1]=n[s][1].replace(/'([a-zA-Z][a-zA-Z\d\-_]+)'/,"$1").replace(/"([a-zA-Z][a-zA-Z\d\-_]+)"/,"$1")),i&&(n[s][1]=n[s][1].replace(/\) /g,")"));return n},dm}(),r=mm?hm:(mm=1,hm=function(e){return e.replace(/\s+/g," ").replace(/url\(\s+/g,"url(").replace(/\s+\)/g,")").trim()}),i=zy(),o=By(),s=jy(),a=Vy().all,u=w_(),c=b_(),l=Qy().OptimizationLevel,f=Uy(),d=Ly(),p=Iy(),h=E_().rules,m="@charset",g=new RegExp("^"+m,"i"),v=Yy().DEFAULT,y=/^--\S+$/,_=/^(?:-chrome-|-[\w-]+\w|\w[\w-]+\w|\w{1,})$/,b=/^@import/i,w=/^url\(/i;function x(e){return w.test(e)}function E(e){return b.test(e[1])}function k(e){var t;return("filter"==e.name||"-ms-filter"==e.name)&&((t=e.value[0][1]).indexOf("progid")>-1||0===t.indexOf("alpha")||0===t.indexOf("chroma"))}function A(){}function D(e,t,n){return t}function C(e,t,n){var r,l,d,m,g,v,b,w,E,D,S=n.options,$=h(e),T=a(t),P=n.options.plugins.level1Value,F=n.options.plugins.level1Property;for(E=0,D=T.length;E<D;E++){var R,N,L,I;if(d=(l=T[E]).name,b=u[d]&&u[d].propertyOptimizer||A,r=u[d]&&u[d].valueOptimizers||[c.whiteSpace],(w=y.test(d))&&(r=S.variableOptimizers.length>0?S.variableOptimizers:[c.whiteSpace]),w||_.test(d))if(0!==l.value.length)if(!l.hack||(l.hack[0]!=i.ASTERISK&&l.hack[0]!=i.UNDERSCORE||S.compatibility.properties.iePrefixHack)&&(l.hack[0]!=i.BACKSLASH||S.compatibility.properties.ieSuffixHack)&&(l.hack[0]!=i.BANG||S.compatibility.properties.ieBangHack))if(S.compatibility.properties.ieFilters||!k(l))if(l.block)C(e,l.value[0][1],n);else{for(R=0,L=l.value.length;R<L;R++){if(m=l.value[R][0],g=l.value[R][1],m==f.PROPERTY_BLOCK){l.unused=!0,n.warnings.push("Invalid value token at "+p(g[0][1][2][0])+". Ignoring.");break}if(x(g)&&!n.validator.isUrl(g)){l.unused=!0,n.warnings.push("Broken URL '"+g+"' at "+p(l.value[R][2][0])+". Ignoring.");break}for(N=0,I=r.length;N<I;N++)g=r[N](d,g,S);for(N=0,I=P.length;N<I;N++)g=P[N](d,g,S);l.value[R][1]=g}for(b($,l,S),R=0,L=F.length;R<L;R++)F[R]($,l,S)}else l.unused=!0;else l.unused=!0;else v=l.all[l.position],n.warnings.push("Empty property '"+d+"' at "+p(v[1][2][0])+". Ignoring."),l.unused=!0;else v=l.all[l.position],n.warnings.push("Invalid property name '"+d+"' at "+p(v[1][2][0])+". Ignoring."),l.unused=!0}s(T),o(T),function(e,t){var n,r;for(r=0;r<e.length;r++)(n=e[r])[0]==f.COMMENT&&(O(n,t),0===n[1].length&&(e.splice(r,1),r--))}(t,S)}function O(e,t){e[1][2]==d.EXCLAMATION&&("all"==t.level[l.One].specialComments||t.commentsKept<t.level[l.One].specialComments)?t.commentsKept++:e[1]=[]}return Yg=function i(o,s){var a=s.options,u=a.level[l.One],d=a.compatibility.selectors.ie7Hack,p=a.compatibility.selectors.adjacentSpace,h=a.compatibility.properties.spaceAfterClosingBrace,y=a.format,_=!1,b=!1;a.unitsRegexp=a.unitsRegexp||function(e){var t=["px","em","ex","cm","mm","in","pt","pc","%"];return["ch","rem","vh","vm","vmax","vmin","vw"].forEach(function(n){e.compatibility.units[n]&&t.push(n)}),new RegExp("(^|\\s|\\(|,)0(?:"+t.join("|")+")(\\W|$)","g")}(a),a.precision=a.precision||function(e){var t,n,r={matcher:null,units:{}},i=[];for(t in e)(n=e[t])!=v&&(r.units[t]={},r.units[t].value=n,r.units[t].multiplier=10**n,i.push(t));return i.length>0&&(r.enabled=!0,r.decimalPointMatcher=new RegExp("(\\d)\\.($|"+i.join("|")+")($|\\W)","g"),r.zeroMatcher=new RegExp("(\\d*)(\\.\\d+)("+i.join("|")+")","g")),r}(u.roundingPrecision),a.commentsKept=a.commentsKept||0,a.variableOptimizers=a.variableOptimizers||function(e){return e.level[l.One].variableValueOptimizers.map(function(e){return"string"==typeof e?c[e]||D:e})}(a);for(var w=0,x=o.length;w<x;w++){var k=o[w];switch(k[0]){case f.AT_RULE:k[1]=E(k)&&b?"":k[1],k[1]=u.tidyAtRules?r(k[1]):k[1],_=!0;break;case f.AT_RULE_BLOCK:C(k[1],k[2],s),b=!0;break;case f.NESTED_BLOCK:k[1]=u.tidyBlockScopes?n(k[1],h):k[1],i(k[2],s),b=!0;break;case f.COMMENT:O(k,a);break;case f.RULE:k[1]=u.tidySelectors?t(k[1],!d,p,y,s.warnings):k[1],k[1]=k[1].length>1?e(k[1],u.selectorsSortingMethod):k[1],C(k[1],k[2],s),b=!0}(k[0]==f.COMMENT&&0===k[1].length||u.removeEmpty&&(0===k[1].length||k[2]&&0===k[2].length))&&(o.splice(w,1),w--,x--)}return u.cleanupCharsets&&_&&function(e){for(var t=!1,n=0,r=e.length;n<r;n++){var i=e[n];i[0]==f.AT_RULE&&g.test(i[1])&&(t||-1==i[1].indexOf(m)?(e.splice(n,1),n--,r--):(t=!0,e.splice(n,1),e.unshift([f.AT_RULE,i[1].replace(g,m)])))}}(o),o},Yg}(),r=I_(),i=function(){if(cy)return uy;cy=1;var e="var\\(\\-\\-[^\\)]+\\)",t="("+e+"|[A-Z]+(\\-|[A-Z]|[0-9])+\\(.*?\\)|\\-(\\-|[A-Z]|[0-9])+\\(.*?\\))",n=new RegExp("^(\\-moz\\-|\\-webkit\\-)?calc\\([^\\)]+\\)$","i"),r=/[0-9]/,i=new RegExp("^"+t+"$","i"),o=/^#(?:[0-9a-f]{4}|[0-9a-f]{8})$/i,s=/^hsl\(\s{0,31}[-.]?\d+\s{0,31},\s{0,31}\d*\.?\d+%\s{0,31},\s{0,31}\d*\.?\d+%\s{0,31}\)|hsla\(\s{0,31}[-.]?\d+\s{0,31},\s{0,31}\d*\.?\d+%\s{0,31},\s{0,31}\d*\.?\d+%\s{0,31},\s{0,31}\.?\d+\s{0,31}\)$/,a=/^hsl\(\s{0,31}[-.]?\d+(deg)?\s{1,31}\d*\.?\d+%\s{1,31}\d*\.?\d+%\s{0,31}\)|hsla\(\s{0,31}[-.]?\d+(deg)?\s{1,31}\d*\.?\d+%\s{1,31}\d*\.?\d+%\s{1,31}\/\s{1,31}\d*\.?\d+%?\s{0,31}\)$/,u=/^(-[a-z0-9_][a-z0-9\-_]*|[a-z_][a-z0-9\-_]*)$/i,c=/^[a-z]+$/i,l=/^-([a-z0-9]|-)*$/i,f=/^("[^"]*"|'[^']*')$/i,d=/^rgb\(\s{0,31}[\d]{1,3}\s{0,31},\s{0,31}[\d]{1,3}\s{0,31},\s{0,31}[\d]{1,3}\s{0,31}\)|rgba\(\s{0,31}[\d]{1,3}\s{0,31},\s{0,31}[\d]{1,3}\s{0,31},\s{0,31}[\d]{1,3}\s{0,31},\s{0,31}[.\d]+\s{0,31}\)$/i,p=/^rgb\(\s{0,31}[\d]{1,3}\s{1,31}[\d]{1,3}\s{1,31}[\d]{1,3}\s{0,31}\)|rgba\(\s{0,31}[\d]{1,3}\s{1,31}[\d]{1,3}\s{1,31}[\d]{1,3}\s{1,31}\/\s{1,31}[\d]*\.?[.\d]+%?\s{0,31}\)$/i,h=/\d+(s|ms)/,m=/^(cubic-bezier|steps)\([^)]+\)$/,g=["ms","s"],v=/^url\([\s\S]+\)$/i,y=new RegExp("^"+e+"$","i"),_=/^#[0-9a-f]{8}$/i,b=/^#[0-9a-f]{4}$/i,w=/^#[0-9a-f]{6}$/i,x=/^#[0-9a-f]{3}$/i,E={"^":["inherit","initial","unset"],"*-style":["auto","dashed","dotted","double","groove","hidden","inset","none","outset","ridge","solid"],"*-timing-function":["ease","ease-in","ease-in-out","ease-out","linear","step-end","step-start"],"animation-direction":["alternate","alternate-reverse","normal","reverse"],"animation-fill-mode":["backwards","both","forwards","none"],"animation-iteration-count":["infinite"],"animation-name":["none"],"animation-play-state":["paused","running"],"background-attachment":["fixed","inherit","local","scroll"],"background-clip":["border-box","content-box","inherit","padding-box","text"],"background-origin":["border-box","content-box","inherit","padding-box"],"background-position":["bottom","center","left","right","top"],"background-repeat":["no-repeat","inherit","repeat","repeat-x","repeat-y","round","space"],"background-size":["auto","cover","contain"],"border-collapse":["collapse","inherit","separate"],bottom:["auto"],clear:["both","left","none","right"],color:["transparent"],cursor:["all-scroll","auto","col-resize","crosshair","default","e-resize","help","move","n-resize","ne-resize","no-drop","not-allowed","nw-resize","pointer","progress","row-resize","s-resize","se-resize","sw-resize","text","vertical-text","w-resize","wait"],display:["block","inline","inline-block","inline-table","list-item","none","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group"],float:["left","none","right"],left:["auto"],font:["caption","icon","menu","message-box","small-caption","status-bar","unset"],"font-size":["large","larger","medium","small","smaller","x-large","x-small","xx-large","xx-small"],"font-stretch":["condensed","expanded","extra-condensed","extra-expanded","normal","semi-condensed","semi-expanded","ultra-condensed","ultra-expanded"],"font-style":["italic","normal","oblique"],"font-variant":["normal","small-caps"],"font-weight":["100","200","300","400","500","600","700","800","900","bold","bolder","lighter","normal"],"line-height":["normal"],"list-style-position":["inside","outside"],"list-style-type":["armenian","circle","decimal","decimal-leading-zero","disc","decimal|disc","georgian","lower-alpha","lower-greek","lower-latin","lower-roman","none","square","upper-alpha","upper-latin","upper-roman"],overflow:["auto","hidden","scroll","visible"],position:["absolute","fixed","relative","static"],right:["auto"],"text-align":["center","justify","left","left|right","right"],"text-decoration":["line-through","none","overline","underline"],"text-overflow":["clip","ellipsis"],top:["auto"],"vertical-align":["baseline","bottom","middle","sub","super","text-bottom","text-top","top"],visibility:["collapse","hidden","visible"],"white-space":["normal","nowrap","pre"],width:["inherit","initial","medium","thick","thin"]},k=["%","ch","cm","em","ex","in","mm","pc","pt","px","rem","vh","vm","vmax","vmin","vw"];function A(e){return"auto"!=e&&(R("color")(e)||function(e){return x.test(e)||b.test(e)||w.test(e)||_.test(e)}(e)||D(e)||function(e){return c.test(e)}(e))}function D(e){return L(e)||S(e)}function C(e){return n.test(e)}function O(e){return i.test(e)}function S(e){return s.test(e)||a.test(e)}function $(e){return o.test(e)}function T(e){return u.test(e)}function P(e){return f.test(e)}function F(e){return"none"==e||"inherit"==e||U(e)}function R(e){return function(t){return E[e].indexOf(t)>-1}}function N(e){return q(e)==e.length}function L(e){return d.test(e)||p.test(e)}function I(e){return l.test(e)}function M(e){return N(e)&&parseFloat(e)>=0}function z(e){return y.test(e)}function B(e){var t=q(e);return t==e.length&&0===parseInt(e)||t>-1&&g.indexOf(e.slice(t+1))>-1||function(e){return O(e)&&h.test(e)}(e)}function j(e,t){var n=q(t);return n==t.length&&0===parseInt(t)||n>-1&&e.indexOf(t.slice(n+1).toLowerCase())>-1||"auto"==t||"inherit"==t}function U(e){return v.test(e)}function V(e){return"auto"==e||N(e)||R("^")(e)}function q(e){var t,n,i,o=!1,s=!1;for(n=0,i=e.length;n<i;n++)if(t=e[n],0!==n||"+"!=t&&"-"!=t){if(n>0&&s&&("+"==t||"-"==t))return n-1;if("."!=t||o){if("."==t&&o)return n-1;if(r.test(t))continue;return n-1}o=!0}else s=!0;return n}return uy=function(e){var t,n=k.slice(0).filter(function(t){return!(t in e.units)||!0===e.units[t]});return e.customUnits.rpx&&n.push("rpx"),{colorOpacity:e.colors.opacity,colorHexAlpha:e.colors.hexAlpha,isAnimationDirectionKeyword:R("animation-direction"),isAnimationFillModeKeyword:R("animation-fill-mode"),isAnimationIterationCountKeyword:R("animation-iteration-count"),isAnimationNameKeyword:R("animation-name"),isAnimationPlayStateKeyword:R("animation-play-state"),isTimingFunction:(t=R("*-timing-function"),function(e){return t(e)||m.test(e)}),isBackgroundAttachmentKeyword:R("background-attachment"),isBackgroundClipKeyword:R("background-clip"),isBackgroundOriginKeyword:R("background-origin"),isBackgroundPositionKeyword:R("background-position"),isBackgroundRepeatKeyword:R("background-repeat"),isBackgroundSizeKeyword:R("background-size"),isColor:A,isColorFunction:D,isDynamicUnit:C,isFontKeyword:R("font"),isFontSizeKeyword:R("font-size"),isFontStretchKeyword:R("font-stretch"),isFontStyleKeyword:R("font-style"),isFontVariantKeyword:R("font-variant"),isFontWeightKeyword:R("font-weight"),isFunction:O,isGlobal:R("^"),isHexAlphaColor:$,isHslColor:S,isIdentifier:T,isImage:F,isKeyword:R,isLineHeightKeyword:R("line-height"),isListStylePositionKeyword:R("list-style-position"),isListStyleTypeKeyword:R("list-style-type"),isNumber:N,isPrefixed:I,isPositiveNumber:M,isQuotedText:P,isRgbColor:L,isStyleKeyword:R("*-style"),isTime:B,isUnit:j.bind(null,n),isUrl:U,isVariable:z,isWidth:R("width"),isZIndex:V}},uy}(),o=function(){if(fy)return ly;fy=1;var e={"*":{colors:{hexAlpha:!1,opacity:!0},customUnits:{rpx:!1},properties:{backgroundClipMerging:!0,backgroundOriginMerging:!0,backgroundSizeMerging:!0,colors:!0,ieBangHack:!1,ieFilters:!1,iePrefixHack:!1,ieSuffixHack:!1,merging:!0,shorterLengthUnits:!1,spaceAfterClosingBrace:!0,urlQuotes:!0,zeroUnits:!0},selectors:{adjacentSpace:!1,ie7Hack:!1,mergeablePseudoClasses:[":active",":after",":before",":empty",":checked",":disabled",":empty",":enabled",":first-child",":first-letter",":first-line",":first-of-type",":focus",":hover",":lang",":last-child",":last-of-type",":link",":not",":nth-child",":nth-last-child",":nth-last-of-type",":nth-of-type",":only-child",":only-of-type",":root",":target",":visited"],mergeablePseudoElements:["::after","::before","::first-letter","::first-line"],mergeLimit:8191,multiplePseudoMerging:!0},units:{ch:!0,in:!0,pc:!0,pt:!0,rem:!0,vh:!0,vm:!0,vmax:!0,vmin:!0,vw:!0}}};function t(e,n){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];Object.prototype.hasOwnProperty.call(n,r)&&"object"==typeof i&&!Array.isArray(i)?n[r]=t(i,n[r]||{}):n[r]=r in n?n[r]:i}return n}return e.ie11=t(e["*"],{properties:{ieSuffixHack:!0}}),e.ie10=t(e["*"],{properties:{ieSuffixHack:!0}}),e.ie9=t(e["*"],{properties:{ieFilters:!0,ieSuffixHack:!0}}),e.ie8=t(e.ie9,{colors:{opacity:!1},properties:{backgroundClipMerging:!1,backgroundOriginMerging:!1,backgroundSizeMerging:!1,iePrefixHack:!0,merging:!1},selectors:{mergeablePseudoClasses:[":after",":before",":first-child",":first-letter",":focus",":hover",":visited"],mergeablePseudoElements:[]},units:{ch:!1,rem:!1,vh:!1,vm:!1,vmax:!1,vmin:!1,vw:!1}}),e.ie7=t(e.ie8,{properties:{ieBangHack:!0},selectors:{ie7Hack:!0,mergeablePseudoClasses:[":first-child",":first-letter",":hover",":visited"]}}),ly=function(n){return t(e["*"],function(n){if("object"==typeof n)return n;if(!/[,+-]/.test(n))return e[n]||e["*"];var r=n.split(","),i=r[0]in e?e[r.shift()]:e["*"];return n={},r.forEach(function(e){var t="+"==e[0],r=e.substring(1).split("."),i=r[0],o=r[1];n[i]=n[i]||{},n[i][o]=t}),t(i,n)}(n))}}(),s=function(){if(_y)return yy;_y=1;var e=function(){if(vy)return gy;vy=1;var e=u,t=c,n=l,r=function(){if(py)return dy;py=1;var e=/^http:\/\//;return dy=function(t){return e.test(t)},dy}(),i=function(){if(my)return hy;my=1;var e=/^https:\/\//;return hy=function(t){return e.test(t)},hy}(),o=Ry();return gy=function s(a,u,c,l){var f,d=u.protocol||u.hostname,p=!1;f=o(n.parse(a),u||{}),void 0!==u.hostname&&(f.protocol=u.protocol||"http:",f.path=f.href),(d&&!i(d)||r(a)?e.get:t.get)(f,function(e){var t=[];if(!p){if(e.statusCode<200||e.statusCode>399)return l(e.statusCode,null);if(e.statusCode>299)return s(n.resolve(a,e.headers.location),u,c,l);e.on("data",function(e){t.push(e.toString())}),e.on("end",function(){var e=t.join("");l(null,e)})}}).on("error",function(e){p||(p=!0,l(e.message,null))}).on("timeout",function(){p||(p=!0,l("timeout",null))}).setTimeout(c)},gy}();return yy=function(t){return t||e}}(),a=Ny().formatFrom,f=(wy||(wy=1,by=function(e){return Array.isArray(e)?e:!1===e?["none"]:void 0===e?["local"]:e.split(",")}),by),d=function(){if(Ey)return xy;Ey=1;var e=l,t=Ry();return xy=function(n){return t((r=process.env.HTTP_PROXY||process.env.http_proxy)?{hostname:e.parse(r).hostname,port:parseInt(e.parse(r).port)}:{},n||{});var r}}(),p=Ay?ky:(Ay=1,ky=function(e){return e||5e3}),h=Qy().OptimizationLevel,m=Qy().optimizationLevelFrom,g=Cy?Dy:(Cy=1,Dy=function(e){var t={level1Value:[],level1Property:[],level2Block:[]};return e=e||[],t.level1Value=e.map(function(e){return e.level1&&e.level1.value}).filter(function(e){return null!=e}),t.level1Property=e.map(function(e){return e.level1&&e.level1.property}).filter(function(e){return null!=e}),t.level2Block=e.map(function(e){return e.level2&&e.level2.block}).filter(function(e){return null!=e}),t}),v=Sy?Oy:(Sy=1,Oy=function(e,t){return void 0!==t||void 0!==e&&!!e}),y=function(){if(Ty)return $y;Ty=1;var e=n;return $y=function(t){return t?e.resolve(t):process.cwd()}}(),_=function(){if(pb)return db;pb=1;var e=Nw().SourceMapConsumer;function t(e){return e}function n(e,t){return t in e}function r(e,t,n,i){for(var o,s,a=t[0],u=t[1],c=t[2],l={line:a,column:u+n};!o&&l.column>u;)l.column--,o=e[c].originalPositionFor(l);return!o||o.column<0?t:null===o.line&&a>1&&i>0?r(e,[a-1,u,c],n,i-1):null!==o.line?[(s=o).line,s.column,s.source]:t}function i(t,n,r){t[n]=new e(r)}return db=function(){var e={};return{all:t.bind(null,e),isTracking:n.bind(null,e),originalPositionFor:r.bind(null,e),track:i.bind(null,e)}}}(),b=Gw(),w=function(){if(Gb)return Wb;Gb=1;var e=x_().all;function t(e,t){var n="string"==typeof t?t:t[1];(0,e.wrap)(e,n),r(e,n),e.output.push(n)}function n(e,t){e.column+t.length>e.format.wrapAt&&(r(e,e.format.breakWith),e.output.push(e.format.breakWith))}function r(e,t){var n=t.split("\n");e.line+=n.length-1,e.column=n.length>1?0:e.column+n.pop().length}return Wb=function(r,i){var o={column:0,format:i.options.format,indentBy:0,indentWith:"",line:1,output:[],spaceAfterClosingBrace:i.options.compatibility.properties.spaceAfterClosingBrace,store:t,wrap:i.options.format.wrapAt?n:function(){}};return e(o,r),{styles:o.output.join("")}}}(),x=function(){if(Qb)return Yb;Qb=1;var e=Nw().SourceMapGenerator,t=x_().all,n=Lw(),r="win32"==process.platform,i=/\//g;function o(e,t){var n="string"==typeof t,r=n?t:t[1],i=n?null:t[2];(0,e.wrap)(e,r),a(e,r,i),e.output.push(r)}function s(e,t){e.column+t.length>e.format.wrapAt&&(a(e,e.format.breakWith,!1),e.output.push(e.format.breakWith))}function a(e,t,n){var r=t.split("\n");n&&function(e,t){for(var n=0,r=t.length;n<r;n++)u(e,t[n])}(e,n),e.line+=r.length-1,e.column=r.length>1?0:e.column+r.pop().length}function u(e,t){var o=t[0],s=t[1],a=t[2],u=a,c=u||"$stdin";r&&u&&!n(u)&&(c=u.replace(i,"\\")),e.outputMap.addMapping({generated:{line:e.line,column:e.column},source:c,original:{line:o,column:s}}),e.inlineSources&&a in e.sourcesContent&&e.outputMap.setSourceContent(c,e.sourcesContent[a])}return Yb=function(n,r){var i={column:0,format:r.options.format,indentBy:0,indentWith:"",inlineSources:r.options.sourceMapInlineSources,line:1,output:[],outputMap:new e,sourcesContent:r.sourcesContent,spaceAfterClosingBrace:r.options.compatibility.properties.spaceAfterClosingBrace,store:o,wrap:r.options.format.wrapAt?s:function(){}};return t(i,n),{sourceMap:i.outputMap,styles:i.output.join("")}}}(),E=Py.exports=function(e){e=e||{},this.options={batch:!!e.batch,compatibility:o(e.compatibility),explicitRebaseTo:"rebaseTo"in e,fetch:s(e.fetch),format:a(e.format),inline:f(e.inline),inlineRequest:d(e.inlineRequest),inlineTimeout:p(e.inlineTimeout),level:m(e.level),plugins:g(e.plugins),rebase:v(e.rebase,e.rebaseTo),rebaseTo:y(e.rebaseTo),returnPromise:!!e.returnPromise,sourceMap:!!e.sourceMap,sourceMapInlineSources:!!e.sourceMapInlineSources}};function k(e,t,n,r){return t.batch&&Array.isArray(e)?function(e,t,n,r){var i,o,s,a="function"==typeof r?r:"function"==typeof n?n:null,u=[],c={};function l(e,t){c=Object.assign(c,t),null!==e&&(u=u.concat(e))}for(o=0,s=e.length;o<s;o++)"object"==typeof e[o]?A(e[o],t,l):(i=e[o],c[i]=D([i],t),u=u.concat(c[i].errors));return a?a(u.length>0?u:null,c):c}(e,t,n,r):t.batch&&"object"==typeof e?A(e,t,n,r):D(e,t,n,r)}function A(e,t,n,r){var i,o,s="function"==typeof r?r:"function"==typeof n?n:null,a=[],u={};for(i in e)o=e[i],u[i]=D(o.styles,t,o.sourceMap),a=a.concat(u[i].errors);return s?s(a.length>0?a:null,u):u}function D(n,o,s,a){var u="function"!=typeof s?s:null,c="function"==typeof a?a:"function"==typeof s?s:null,l={stats:{efficiency:0,minifiedSize:0,originalSize:0,startedAt:Date.now(),timeSpent:0},cache:{specificity:{}},errors:[],inlinedStylesheets:[],inputSourceMapTracker:_(),localOnly:!c,options:o,source:null,sourcesContent:{},validator:i(o.compatibility),warnings:[]};return u&&l.inputSourceMapTracker.track(void 0,u),o.rebase&&!o.explicitRebaseTo&&l.warnings.push("You have set `rebase: true` without giving `rebaseTo` option, which, in this case, defaults to the current working directory. You are then warned this can lead to unexpected URL rebasing (aka here be dragons)! If you are OK with the clean-css output, then you can get rid of this warning by giving clean-css a `rebaseTo: process.cwd()` option."),(l.localOnly?function(e){return e()}:process.nextTick)(function(){return b(n,l,function(n){var i=l.options.sourceMap?x:w,o=function(n,i){var o=e(n,i);return o=h.One in i.options.level?t(n,i):n,o=h.Two in i.options.level?r(n,i,!0):o}(n,l),s=function(e,t){return e.stats=function(e,t){var n=Date.now()-t.stats.startedAt;return delete t.stats.startedAt,t.stats.timeSpent=n,t.stats.efficiency=1-e.length/t.stats.originalSize,t.stats.minifiedSize=e.length,t.stats}(e.styles,t),e.errors=t.errors,e.inlinedStylesheets=t.inlinedStylesheets,e.warnings=t.warnings,e}(i(o,l),l);return c?c(l.errors.length>0?l.errors:null,s):s})})}E.process=function(e,t){var n=t.to;return delete t.to,new E(Object.assign({returnPromise:!0,rebaseTo:n},t)).minify(e).then(function(e){return{css:e.styles}})},E.prototype.minify=function(e,t,n){var r=this.options;return r.returnPromise?new Promise(function(n,i){k(e,r,t,function(e,t){return e?i(e):n(t)})}):k(e,r,t,n)},Py.exports}()),function(){if(Fw)return Pw;Fw=1;var e=Yw(),t=function(){if(rw)return nw;rw=1;var e=Yw();function t(e,t){var n=t.removeEmptyQueries&&e.extra.relation.minimumPort;return e.query.string[n?"stripped":"full"]}function n(t,n){return!t.extra.relation.minimumQuery||n.output===e.ABSOLUTE||n.output===e.ROOT_RELATIVE}function r(t,n){var r=n.removeDirectoryIndexes&&t.extra.resourceIsIndex,i=t.extra.relation.minimumResource&&n.output!==e.ABSOLUTE&&n.output!==e.ROOT_RELATIVE;return!!t.resource&&!i&&!r}return nw=function(i,o){var s="";return s+=function(t,n){var r="";return(t.extra.relation.maximumHost||n.output===e.ABSOLUTE)&&(t.extra.relation.minimumScheme&&n.schemeRelative&&n.output!==e.ABSOLUTE?r+="//":r+=t.scheme+"://"),r}(i,o),s+=function(t,n){return!t.auth||n.removeAuth||!t.extra.relation.maximumHost&&n.output!==e.ABSOLUTE?"":t.auth+"@"}(i,o),s+=function(t,n){return t.host.full&&(t.extra.relation.maximumAuth||n.output===e.ABSOLUTE)?t.host.full:""}(i,o),s+=function(e){return e.port&&!e.extra.portIsDefault&&e.extra.relation.maximumHost?":"+e.port:""}(i),s+=function(i,o){var s="",a=i.path.absolute.string,u=i.path.relative.string,c=r(i,o);if(i.extra.relation.maximumHost||o.output===e.ABSOLUTE||o.output===e.ROOT_RELATIVE)s=a;else if(u.length<=a.length&&o.output===e.SHORTEST||o.output===e.PATH_RELATIVE){if(""===(s=u)){var l=n(i,o)&&!!t(i,o);i.extra.relation.maximumPath&&!c?s="./":!i.extra.relation.overridesQuery||c||l||(s="./")}}else s=a;return"/"!==s||c||!o.removeRootTrailingSlash||i.extra.relation.minimumPort&&o.output!==e.ABSOLUTE||(s=""),s}(i,o),s+=function(e,t){return r(e,t)?e.resource:""}(i,o),s+=function(e,r){return n(e,r)?t(e,r):""}(i,o),s+function(e){return e.hash?e.hash:""}(i)},nw}(),n=function(){if(aw)return sw;aw=1;var e=Qw();function t(t,n){return n instanceof Object&&t instanceof Object?n instanceof Array&&t instanceof Array?n.concat(t):e.shallowMerge(t,n):t}return sw=function(n,r){if(e.isPlainObject(n)){var i={};for(var o in r)r.hasOwnProperty(o)&&(void 0!==n[o]?i[o]=t(n[o],r[o]):i[o]=r[o]);return i}return r},sw}(),r=Qw(),i=function(){if(Ew)return xw;Ew=1;var e=cw?uw:(cw=1,uw=function(e){var t=!(e.scheme||e.auth||e.host.full||e.port),n=t&&!e.path.absolute.string,r=n&&!e.resource,i=r&&!e.query.string.full.length,o=i&&!e.hash;e.extra.hrefInfo.minimumPathOnly=t,e.extra.hrefInfo.minimumResourceOnly=n,e.extra.hrefInfo.minimumQueryOnly=r,e.extra.hrefInfo.minimumHashOnly=i,e.extra.hrefInfo.empty=o}),t=(fw||(fw=1,lw=function(e,t){if(t.ignore_www){var n=e.host.full;if(n){var r=n;0===n.indexOf("www.")&&(r=n.substr(4)),e.host.stripped=r}}}),lw),n=function(){if(pw)return dw;function e(e){if("/"!==e){var t=[];return e.split("/").forEach(function(e){""!==e&&t.push(e)}),t}return[]}return pw=1,dw=function(t,n){var r=t.path.absolute.string;if(r){var i=r.lastIndexOf("/");if(i>-1){if(++i<r.length){var o=r.substr(i);"."!==o&&".."!==o?(t.resource=o,r=r.substr(0,i)):r+="/"}t.path.absolute.string=r,t.path.absolute.array=e(r)}else"."===r||".."===r?(r+="/",t.path.absolute.string=r,t.path.absolute.array=e(r)):(t.resource=r,t.path.absolute.string=null);t.extra.resourceIsIndex=function(e,t){var n=!1;return t.directoryIndexes.every(function(t){return t!==e||(n=!0,!1)}),n}(t.resource,n)}},dw}(),r=(mw||(mw=1,hw=function(e,t){var n=-1;for(var r in t.defaultPorts)if(r===e.scheme&&t.defaultPorts.hasOwnProperty(r)){n=t.defaultPorts[r];break}n>-1&&(n=n.toString(),null===e.port&&(e.port=n),e.extra.portIsDefault=e.port===n)}),hw),i=function(){if(vw)return gw;vw=1;var e=Object.prototype.hasOwnProperty;function t(t,n){var r=0,i="";for(var o in t)if(""!==o&&!0===e.call(t,o)){var s=t[o];""===s&&n||(i+=1===++r?"?":"&",o=encodeURIComponent(o),i+=""!==s?o+"="+encodeURIComponent(s).replace(/%20/g,"+"):o)}return i}return gw=function(e,n){e.query.string.full=t(e.query.object,!1),n.removeEmptyQueries&&(e.query.string.stripped=t(e.query.object,!0))},gw}(),o=function(){if(_w)return yw;_w=1;var e=l.parse;return yw=function(t,n){return function(e,t){var n=!0;return t.rejectedSchemes.every(function(t){return n=!(0===e.indexOf(t+":"))}),n}(t,n)?((i=(r=e(t,!0,n.slashesDenoteHost)).protocol)&&i.indexOf(":")===i.length-1&&(i=i.substr(0,i.length-1)),r.host={full:r.hostname,stripped:null},r.path={absolute:{array:null,string:r.pathname},relative:{array:null,string:null}},r.query={object:r.query,string:{full:null,stripped:null}},r.extra={hrefInfo:{minimumPathOnly:null,minimumResourceOnly:null,minimumQueryOnly:null,minimumHashOnly:null,empty:null,separatorOnlyQuery:"?"===r.search},portIsDefault:null,relation:{maximumScheme:null,maximumAuth:null,maximumHost:null,maximumPort:null,maximumPath:null,maximumResource:null,maximumQuery:null,maximumHash:null,minimumScheme:null,minimumAuth:null,minimumHost:null,minimumPort:null,minimumPath:null,minimumResource:null,minimumQuery:null,minimumHash:null,overridesQuery:null},resourceIsIndex:null,slashes:r.slashes},r.resource=null,r.scheme=i,delete r.hostname,delete r.pathname,delete r.protocol,delete r.search,delete r.slashes,r):{href:t,valid:!1};var r,i},yw}(),s=Jw();function a(s,a){var u=o(s,a);return!1===u.valid||(t(u,a),r(u,a),n(u,a),i(u,a),e(u)),u}return xw={from:function(e,t,n){if(e){var r=a(e,t),i=s.resolveDotSegments(r.path.absolute.array);return r.path.absolute.array=i,r.path.absolute.string="/"+s.join(i),r}return n},to:a},xw}(),o=ex();function s(e,t){this.options=n(t,{defaultPorts:{ftp:21,http:80,https:443},directoryIndexes:["index.html"],ignore_www:!1,output:s.SHORTEST,rejectedSchemes:["data","javascript","mailto"],removeAuth:!1,removeDirectoryIndexes:!0,removeEmptyQueries:!1,removeRootTrailingSlash:!0,schemeRelative:!0,site:void 0,slashesDenoteHost:!0}),this.from=i.from(e,this.options,null)}s.prototype.relate=function(e,s,a){if(r.isPlainObject(s)?(a=s,s=e,e=null):s||(s=e,e=null),a=n(a,this.options),e=e||a.site,!(e=i.from(e,a,this.from))||!e.href)throw new Error("from value not defined.");if(e.extra.hrefInfo.minimumPathOnly)throw new Error("from value supplied is not absolute: "+e.href);return!1===(s=i.to(s,a)).valid?s.href:(s=o(e,s,a),s=t(s,a))},s.relate=function(e,t,n){return(new s).relate(e,t,n)},r.shallowMerge(s,e),Pw=s}();var nx={isNothing:tx,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:tx(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function rx(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function ix(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=rx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}ix.prototype=Object.create(Error.prototype),ix.prototype.constructor=ix,ix.prototype.toString=function(e){return this.name+": "+rx(this,e)};var ox=ix,sx=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ax=["scalar","sequence","mapping"],ux=function(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===sx.indexOf(t))throw new ox('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,r={},null!==n&&Object.keys(n).forEach(function(e){n[e].forEach(function(t){r[String(t)]=e})}),r),-1===ax.indexOf(this.kind))throw new ox('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.');var n,r};function cx(e,t){var n=[];return e[t].forEach(function(e){var t=n.length;n.forEach(function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)}),n[t]=e}),n}function lx(e){return this.extend(e)}lx.prototype.extend=function(e){var t=[],n=[];if(e instanceof ux)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new ox("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach(function(e){if(!(e instanceof ux))throw new ox("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new ox("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new ox("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(e){if(!(e instanceof ux))throw new ox("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(lx.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=cx(r,"implicit"),r.compiledExplicit=cx(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var fx=new lx({explicit:[new ux("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),new ux("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),new ux("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})]}),dx=new ux("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),px=new ux("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function hx(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function mx(e){return 48<=e&&e<=55}function gx(e){return 48<=e&&e<=57}var vx=new ux("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,r=0,i=!1;if(!n)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===n)return!0;if("b"===(t=e[++r])){for(r++;r<n;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;i=!0}return i&&"_"!==t}if("x"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!hx(e.charCodeAt(r)))return!1;i=!0}return i&&"_"!==t}if("o"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!mx(e.charCodeAt(r)))return!1;i=!0}return i&&"_"!==t}}if("_"===t)return!1;for(;r<n;r++)if("_"!==(t=e[r])){if(!gx(e.charCodeAt(r)))return!1;i=!0}return!(!i||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!nx.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),yx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),_x=/^[-+]?[0-9]+e/,bx=new ux("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!yx.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||nx.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(nx.isNegativeZero(e))return"-0.0";return n=e.toString(10),_x.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),wx=fx.extend({implicit:[dx,px,vx,bx]}),xx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ex=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),kx=new ux("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==xx.exec(e)||null!==Ex.exec(e))},construct:function(e){var t,n,r,i,o,s,a,u,c=0,l=null;if(null===(t=xx.exec(e))&&(t=Ex.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(l=-l)),u=new Date(Date.UTC(n,r,i,o,s,a,c)),l&&u.setTime(u.getTime()-l),u},instanceOf:Date,represent:function(e){return e.toISOString()}}),Ax=new ux("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),Dx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Cx=new ux("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=Dx;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=Dx,s=0,a=[];for(t=0;t<i;t++)t%4==0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(255&s)),s=s<<6|o.indexOf(r.charAt(t));return 0==(n=i%4*6)?(a.push(s>>16&255),a.push(s>>8&255),a.push(255&s)):18===n?(a.push(s>>10&255),a.push(s>>2&255)):12===n&&a.push(s>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,s=Dx;for(t=0;t<o;t++)t%3==0&&t&&(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]),i=(i<<8)+e[t];return 0==(n=o%3)?(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]):2===n?(r+=s[i>>10&63],r+=s[i>>4&63],r+=s[i<<2&63],r+=s[64]):1===n&&(r+=s[i>>2&63],r+=s[i<<4&63],r+=s[64],r+=s[64]),r}}),Ox=Object.prototype.hasOwnProperty,Sx=Object.prototype.toString,$x=new ux("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,s=[],a=e;for(t=0,n=a.length;t<n;t+=1){if(r=a[t],o=!1,"[object Object]"!==Sx.call(r))return!1;for(i in r)if(Ox.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==s.indexOf(i))return!1;s.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),Tx=Object.prototype.toString,Px=new ux("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],"[object Object]"!==Tx.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),Fx=Object.prototype.hasOwnProperty,Rx=new ux("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(Fx.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),Nx=wx.extend({implicit:[kx,Ax],explicit:[Cx,$x,Px,Rx]});function Lx(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}for(var Ix=new Array(256),Mx=new Array(256),zx=0;zx<256;zx++)Ix[zx]=Lx(zx)?1:0,Mx[zx]=Lx(zx);var Bx=Object.prototype.toString,jx=Object.prototype.hasOwnProperty,Ux=65279,Vx={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},qx=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Hx=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Kx(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new ox("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+nx.repeat("0",r-t.length)+t}function Zx(e){this.schema=e.schema||Nx,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=nx.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,s,a,u;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)s=r[i],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=e.compiledTypeMap.fallback[s])&&jx.call(u.styleAliases,a)&&(a=u.styleAliases[a]),n[s]=a;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Wx(e,t){for(var n,r=nx.repeat(" ",t),i=0,o=-1,s="",a=e.length;i<a;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=a):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(s+=r),s+=n;return s}function Gx(e,t){return"\n"+nx.repeat(" ",e.indent*t)}function Yx(e){return 32===e||9===e}function Qx(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Ux||65536<=e&&e<=1114111}function Jx(e){return Qx(e)&&e!==Ux&&13!==e&&10!==e}function Xx(e,t,n){var r=Jx(e),i=r&&!Yx(e);return(n?r:r&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!i)||Jx(t)&&!Yx(t)&&35===e||58===t&&i}function eE(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function tE(e){return/^\n* /.test(e)}function nE(e,t,n,r,i){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==qx.indexOf(t)||Hx.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;switch(function(e,t,n,r,i,o,s,a){var u,c,l=0,f=null,d=!1,p=!1,h=-1!==r,m=-1,g=Qx(c=eE(e,0))&&c!==Ux&&!Yx(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&function(e){return!Yx(e)&&58!==e}(eE(e,e.length-1));if(t||s)for(u=0;u<e.length;l>=65536?u+=2:u++){if(!Qx(l=eE(e,u)))return 5;g=g&&Xx(l,f,a),f=l}else{for(u=0;u<e.length;l>=65536?u+=2:u++){if(10===(l=eE(e,u)))d=!0,h&&(p=p||u-m-1>r&&" "!==e[m+1],m=u);else if(!Qx(l))return 5;g=g&&Xx(l,f,a),f=l}p=p||h&&u-m-1>r&&" "!==e[m+1]}return d||p?n>9&&tE(e)?5:s?2===o?5:2:p?4:3:!g||s||i(e)?2===o?5:2:1}(t,a,e.indent,s,function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)},e.quotingType,e.forceQuotes&&!r,i)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+rE(t,e.indent)+iE(Wx(t,o));case 4:return">"+rE(t,e.indent)+iE(Wx(function(e,t){for(var n,r,i,o=/(\n+)([^\n]*)/g,s=(i=-1!==(i=e.indexOf("\n"))?i:e.length,o.lastIndex=i,oE(e.slice(0,i),t)),a="\n"===e[0]||" "===e[0];r=o.exec(e);){var u=r[1],c=r[2];n=" "===c[0],s+=u+(a||n||""===c?"":"\n")+oE(c,t),a=n}return s}(t,s),o));case 5:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=eE(e,i),!(t=Vx[r])&&Qx(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||Kx(r);return n}(t)+'"';default:throw new ox("impossible error: invalid scalar style")}}()}function rE(e,t){var n=tE(e)?String(t):"",r="\n"===e[e.length-1];return n+(!r||"\n"!==e[e.length-2]&&"\n"!==e?r?"":"-":"+")+"\n"}function iE(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function oE(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,s=0,a=0,u="";n=i.exec(e);)(a=n.index)-o>t&&(r=s>o?s:a,u+="\n"+e.slice(o,r),o=r+1),s=a;return u+="\n",e.length-o>t&&s>o?u+=e.slice(o,s)+"\n"+e.slice(s+1):u+=e.slice(o),u.slice(1)}function sE(e,t,n,r){var i,o,s,a="",u=e.tag;for(i=0,o=n.length;i<o;i+=1)s=n[i],e.replacer&&(s=e.replacer.call(n,String(i),s)),(uE(e,t+1,s,!0,!0,!1,!0)||void 0===s&&uE(e,t+1,null,!0,!0,!1,!0))&&(r&&""===a||(a+=Gx(e,t)),e.dump&&10===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=u,e.dump=a||"[]"}function aE(e,t,n){var r,i,o,s,a,u;for(o=0,s=(i=n?e.explicitTypes:e.implicitTypes).length;o<s;o+=1)if(((a=i[o]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===Bx.call(a.represent))r=a.represent(t,u);else{if(!jx.call(a.represent,u))throw new ox("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');r=a.represent[u](t,u)}e.dump=r}return!0}return!1}function uE(e,t,n,r,i,o,s){e.tag=null,e.dump=n,aE(e,n,!1)||aE(e,n,!0);var a,u=Bx.call(e.dump),c=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var l,f,d="[object Object]"===u||"[object Array]"===u;if(d&&(f=-1!==(l=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||f||2!==e.indent&&t>0)&&(i=!1),f&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(d&&f&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),"[object Object]"===u)r&&0!==Object.keys(e.dump).length?(function(e,t,n,r){var i,o,s,a,u,c,l="",f=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new ox("sortKeys must be a boolean or a function");for(i=0,o=d.length;i<o;i+=1)c="",r&&""===l||(c+=Gx(e,t)),a=n[s=d[i]],e.replacer&&(a=e.replacer.call(n,s,a)),uE(e,t+1,s,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,u&&(c+=Gx(e,t)),uE(e,t+1,a,!0,u)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=":":c+=": ",l+=c+=e.dump));e.tag=f,e.dump=l||"{}"}(e,t,e.dump,i),f&&(e.dump="&ref_"+l+e.dump)):(function(e,t,n){var r,i,o,s,a,u="",c=e.tag,l=Object.keys(n);for(r=0,i=l.length;r<i;r+=1)a="",""!==u&&(a+=", "),e.condenseFlow&&(a+='"'),s=n[o=l[r]],e.replacer&&(s=e.replacer.call(n,o,s)),uE(e,t,o,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),uE(e,t,s,!1,!1)&&(u+=a+=e.dump));e.tag=c,e.dump="{"+u+"}"}(e,t,e.dump),f&&(e.dump="&ref_"+l+" "+e.dump));else if("[object Array]"===u)r&&0!==e.dump.length?(e.noArrayIndent&&!s&&t>0?sE(e,t-1,e.dump,i):sE(e,t,e.dump,i),f&&(e.dump="&ref_"+l+e.dump)):(function(e,t,n){var r,i,o,s="",a=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(uE(e,t,o,!1,!1)||void 0===o&&uE(e,t,null,!1,!1))&&(""!==s&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=a,e.dump="["+s+"]"}(e,t,e.dump),f&&(e.dump="&ref_"+l+" "+e.dump));else{if("[object String]"!==u){if("[object Undefined]"===u)return!1;if(e.skipInvalid)return!1;throw new ox("unacceptable kind of an object to dump "+u)}"?"!==e.tag&&nE(e,e.dump,t,o,c)}null!==e.tag&&"?"!==e.tag&&(a=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a="!"===e.tag[0]?"!"+a:"tag:yaml.org,2002:"===a.slice(0,18)?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function cE(e,t){var n,r,i=[],o=[];for(lE(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function lE(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)lE(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)lE(e[r[i]],t,n)}var fE=function(e,t){var n=new Zx(t=t||{});n.noRefs||cE(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),uE(n,0,r,!0,!0)?n.dump+"\n":""};const dE=["researchGoal","reasoning","instructions","results","summary","status","path","files","matches","content","structuredOutput","totalMatches","totalFiles","totalDirectories","totalSize","totalLines","contentLength","pagination","charPagination","currentPage","totalPages","hasMore","charOffset","charLength","totalChars","filesPerPage","entriesPerPage","matchesPerPage","isPartial","minificationFailed","warnings","error","errorCode","data","hints","hasResultsStatusHints","emptyStatusHints","errorStatusHints"];function pE(e,t){return function(e,t){try{return fE(e,{forceQuotes:!0,quotingType:'"',lineWidth:-1,noRefs:!0,sortKeys:!(!t?.sortKeys&&!t?.keysPriority)&&(t.keysPriority&&t.keysPriority.length>0?(e,n)=>{const r=t.keysPriority.indexOf(e),i=t.keysPriority.indexOf(n);return-1!==r&&-1!==i?r-i:-1!==r&&-1===i?-1:-1===r&&-1!==i?1:e.localeCompare(n)}:!!t.sortKeys&&((e,t)=>e.localeCompare(t))),indent:2,noCompatMode:!0,flowLevel:-1,skipInvalid:!1})}catch(t){const n=t instanceof Error?t.message:"Unknown error";try{return JSON.stringify(e,null,2)}catch(e){return`# YAML conversion failed: ${n}\n# JSON conversion also failed: ${e instanceof Error?e.message:"Unknown error"}\n# Object: [Unconvertible]`}}}(hE(e),{keysPriority:t||dE})}function hE(e){if(null!=e&&!Number.isNaN(e)){if(Array.isArray(e)){const t=e.map(hE).filter(e=>void 0!==e);return t.length>0?t:void 0}if("object"==typeof e&&null!==e){const t={};let n=!1;for(const[r,i]of Object.entries(e)){const e=hE(i);void 0!==e&&(t[r]=e,n=!0)}return n?t:void 0}return e}}async function mE(e,t,n){const r=await async function(e,t,n={}){const{continueOnError:r=!0}=n,i=e.map(e=>t(e)),o=await async function(e){return Promise.allSettled(e)}(i),s=[];for(const[t,n]of o.entries())if("fulfilled"===n.status)s.push(n.value);else{if(!r)throw n.reason;const i=gE(n.reason,e[t]);s.push(i)}return s}(e,t);return function(e,t){const n=[];for(let t=0;t<e.length;t++){const r=e[t];n.push({status:r.status,data:r})}const r=pE({results:n},dE),i=(o=r,s=t.toolName,a=n.length,function(e){const{content:t,toolName:n,queryCount:r=1,context:i}=e,o=Math.ceil(t.length/4),s=25e3;if(o<=s)return{isValid:!0,estimatedTokens:o,maxTokens:s};const a=[];if(r>1){const e=Math.floor(s/r);a.push("CRITICAL: Response exceeds MCP token limit",`Size: ${o.toLocaleString()} tokens > ${s.toLocaleString()} max`,"","SOLUTIONS (Bulk Operation):","1. Use pagination (charLength=10000) on individual queries",`2. Reduce number of queries per batch (currently ${r} queries)`,"3. Use more specific filters:","   - matchString for targeted extraction","   - filesOnly=true for discovery (25x more efficient)",`4. Split into smaller batches (try ${Math.floor(r/2)} queries per batch)`,"",`Per-query token estimate: approximately ${Math.ceil(o/r)} tokens each`,`Safe limit per query: approximately ${e} tokens`)}else a.push("CRITICAL: Response exceeds MCP token limit",`Size: ${o.toLocaleString()} tokens > ${s.toLocaleString()} max`,"","SOLUTIONS:","1. Use charLength=10000 for pagination","2. Use matchString for targeted extraction (85% savings)","3. Use filesOnly=true for discovery operations (25x more efficient)","4. Enable minified=true for code files (30-60% savings)");return"local_ripgrep"===n||"LOCAL_RIPGREP"===n?a.push("",`Tool-specific (${n}):`,'- Use mode="discovery" to list matching files only',"- Use maxMatchesPerFile=3 to limit matches per file",'- Add excludeDir=["node_modules", ".git", "dist"] to skip large dirs'):"local_view_structure"!==n&&"LOCAL_VIEW_STRUCTURE"!==n||a.push("",`Tool-specific (${n}):`,"- Reduce depth parameter (use depth=1 for overview)","- Use filesOnly=true to exclude directories","- Add extension filters to limit results"),i&&a.push("",`Context: ${i}`),{isValid:!1,estimatedTokens:o,maxTokens:s,errorCode:uu,hints:a}}({content:o,toolName:s,queryCount:a}));var o,s,a;return i.isValid?{content:[{type:"text",text:r}],isError:!1}:{content:[{type:"text",text:pE({errorCode:uu,hints:i.hints||[]},["errorCode","hints"])}],isError:!0}}(r,n)}function gE(e,t={}){return{...t,status:"error",errorCode:lu}}const vE=Ua.extend({path:qe().describe("Directory path (required)."),details:Ke().default(!1).describe("Show details (perms, size, dates)."),hidden:Ke().default(!1).describe("Show hidden files."),humanReadable:Ke().default(!0).describe("Human-readable sizes (KB, MB, GB)"),sortBy:tt(["name","size","time","extension"]).optional().default("time").describe("Sort by name/size/time/extension (default: time)."),reverse:Ke().optional().describe("Reverse sort."),entriesPerPage:He().int().min(1).max(20).optional().default(20).describe("Entries per page. See tool schema for defaults/max."),entryPageNumber:He().int().min(1).optional().default(1).describe("Entry page (1-based, default 1). Use with entriesPerPage."),pattern:qe().optional().describe("Name filter: globs (*.js, @*, test*) or substring (user)."),directoriesOnly:Ke().optional().describe("Directories only."),filesOnly:Ke().optional().describe("Files only."),extension:qe().optional().describe("Extension filter (js, ts)."),extensions:We(qe()).optional().describe('Multiple extensions (["js", "ts", "tsx"]).'),depth:He().min(1).max(5).optional().describe("Recursive depth (15)."),recursive:Ke().optional().describe("Recursive listing."),limit:He().min(1).max(1e4).optional().describe("Max entries (110000)."),summary:Ke().default(!0).describe("Include summary (files, dirs, size)."),charOffset:He().min(0).optional().describe(qa),charLength:He().min(1).max(1e4).optional().describe(Ha),showFileLastModified:Ke().default(!1).describe("Show file last modified timestamps in results (default false).")}),yE=Va(Da,vE),_E=Ua.extend({path:qe().describe("Starting directory (required)."),maxDepth:He().min(1).max(10).optional().describe("Max depth (110, default 5)."),minDepth:He().min(0).max(10).optional().describe("Min depth (010)."),name:qe().optional().describe("Name pattern (*.js, *config*)."),iname:qe().optional().describe("Case-insensitive name pattern."),names:We(qe()).optional().describe('Multiple patterns (OR logic), e.g., ["*.ts","*.js"].'),pathPattern:qe().optional().describe("Path pattern."),regex:qe().optional().describe("Regex pattern."),regexType:tt(["posix-egrep","posix-extended","posix-basic"]).optional().describe("Regex type (default: posix-egrep)."),type:tt(["f","d","l","b","c","p","s"]).optional().describe("Type: f=file, d=dir, l=symlink."),empty:Ke().optional().describe("Empty files/dirs only."),modifiedWithin:qe().optional().describe("Modified within (7d, 2h, 30m)."),modifiedBefore:qe().optional().describe("Modified before (e.g., 30d)."),accessedWithin:qe().optional().describe("Accessed within (e.g., 1d)."),sizeGreater:qe().optional().describe("Size > (10M, 100k, 1G)."),sizeLess:qe().optional().describe("Size < (1M, 500k)."),permissions:qe().optional().describe("Permission pattern (e.g., 755, 644)."),executable:Ke().optional().describe("Executable only."),readable:Ke().optional().describe("Readable only."),writable:Ke().optional().describe("Writable only."),excludeDir:We(qe()).optional().describe('Exclude dirs (["node_modules",".git"]).'),limit:He().min(1).max(1e4).optional().describe("Max results (110000, default 1000)."),details:Ke().default(!1).describe("Include size/perms (default false)."),filesPerPage:He().int().min(1).max(20).optional().default(20).describe(Ka),filePageNumber:He().int().min(1).optional().default(1).describe(Za),charOffset:He().min(0).optional().describe(qa),charLength:He().min(1).max(1e4).optional().describe(Ha),showFileLastModified:Ke().default(!1).describe("Show file last modified timestamps in results (default false).")}),bE=Va(Ca,_E),wE=Ua.extend({path:qe().min(1).describe("File path (absolute or relative)."),fullContent:Ke().default(!1).describe("Return entire file. For large files, use with charLength for pagination."),matchString:qe().optional().describe("Search pattern  returns matches with context (token-efficient; pairs well with ripgrep)."),matchStringContextLines:He().int().min(1).max(50).default(5).describe("Context lines around matches (150, default 5)."),matchStringIsRegex:Ke().optional().default(!1).describe("Treat matchString as regex (default: false for literal)."),matchStringCaseSensitive:Ke().optional().default(!1).describe("Case-sensitive matching (default: false)."),minified:Ke().optional().default(!0).describe("Minify content for token efficiency (default true)."),charOffset:He().min(0).optional().describe(qa),charLength:He().min(1).max(1e4).optional().describe(Ha)}),xE=Va(Oa,wE);(async function(){const e=new ga({name:"local-explorer-mcp",version:"1.0.0"},{capabilities:{tools:{},prompts:{}},instructions:"Purpose: fast local files/dirs search\n\nTools:\n- local_view_structure: Directory overview for discovery\n- local_find_files: Find paths by name/time/size/perm (metadata). Use before content reads and for search\n- local_ripgrep: Content search by petterns/regex + byte offsets\n- local_fetch_content: Extract sections or paginate content from file\n\nSearch Workflow: ripgrep  fetch_content.\nExplore Workflow: view_structure/find_files  ripgrep  fetch_content."}),t=process.env.WORKSPACE_ROOT||process.cwd();Xa.addAllowedRoot(t),function(e){e.registerTool(Aa,{description:'Purpose: Fast pattern/code search with structured matches and byte offsets.\n\nUse when: You know a pattern; need paths + limited context.\nAvoid when: Only name/time filters (use find_files).\nWorkflow:\n- Discovery: filesOnly=true, add type/include/excludeDir  inspect  refine\n- Targeted: small matchesPerPage; use location.charOffset with fetch_content\nOutput: files[{path, matchCount, matches?, modified, pagination}], totals.\nNotes: Offsets are bytes; fetch_content uses the same.\nTips: Prefer type/include filters; smartCase=true; perlRegex for lookaheads; fixedString for literals; multiline is slow.\n\nExamples:\n- pattern: "export function", type: "ts", filesOnly: true\n- pattern: "AuthService", include: ["*.{ts,tsx}"], excludeDir: ["node_modules"], matchesPerPage: 5\n- pattern: "useEffect(", smartCase: true\n',inputSchema:Ga.shape},async e=>mE(Ga.parse(e).queries,bu,{toolName:Aa})),e.registerTool(Da,{description:'Purpose: Overview directory contents, sizes, and structure.\n\nUse when: New codebase or unknown locations.\nAvoid when: Content/pattern search (use ripgrep/fetch_content).\nWorkflow: depth=12  filter (pattern/extensions)  drill deeper or switch tools.\nPagination: entriesPerPage + entryPageNumber (sorted by modified time).\nTips: hidden=true for dotfiles; exclude node_modules for brevity.\n\nExamples:\n- depth: 1, entriesPerPage: 20\n- pattern: "*.ts", filesOnly: true\n- extensions: ["ts","tsx"], hidden: true\n',inputSchema:yE.shape},async e=>mE(yE.parse(e).queries,Tu,{toolName:Da})),e.registerTool(Ca,{description:'Purpose: Locate files by name, time, size, permissions.\n\nUse when: You need paths or recency; not content search.\nWorkflow: Filter by metadata  fetch_content or ripgrep.\nPagination: Sorted by modified time; filesPerPage + filePageNumber.\nTips: modifiedWithin "7d"; sizeGreater "10M"; perms like "755".\n\nExamples:\n- name: "*.test.ts", modifiedWithin: "7d"\n- iname: "readme", type: "f"\n- type: "d", pathPattern: "src/**"\n',inputSchema:bE.shape},async e=>mE(bE.parse(e).queries,Ru,{toolName:Ca})),e.registerTool(Oa,{description:'Purpose: Read targeted file sections or paginated content.\n\nUse when: You have a path (from ripgrep/find_files). Not for discovery.\nWorkflow: Prefer matchString (+context). For full file, use charLength.\nLarge files: Avoid fullContent without charLength; prefer matchString.\nTips: minified=true (default) to reduce tokens; batch queries when safe.\n\nExamples:\n- matchString: "class UserService", matchStringContextLines: 5\n- matchString: "export.*function", matchStringIsRegex: true\n- fullContent: true, charLength: 5000, charOffset: 0\n',inputSchema:xE.shape},async e=>mE(xE.parse(e).queries,Nu,{toolName:Oa}))}(e),function(e){!function(e){e.registerPrompt("local_explorer",{description:"Guided local code research using local_view_structure, local_ripgrep, local_find_files, and local_fetch_content with ReAct (READTHINKPLANINITIATEVERIFY), token efficiency, and hints-driven flow.",argsSchema:Ge({}).shape},async()=>({messages:[{role:"user",content:{type:"text",text:'\n# SYSTEM PROMPT:\n# Local Explorer Code Research Agent\n\nExpert local code research.\n\n## ALLOWED TOOLS\n\nYou must use **ONLY** the following tools:\n\n1. `local_view_structure`\n2. `local_ripgrep`\n3. `local_find_files`\n4. `local_fetch_content`\n5. File editing tools (e.g., `write`, `edit`, `replace` provided by the host)\n\n**DO NOT USE** any other tools (e.g., system terminal, git CLI, etc.) unless explicitly authorized.\n\n## Mission\n\nProduce precise, bounded research on local codebases by preferring real content over assumptions, following hints, and maintaining strict security and token discipline.\n\n## Core Approach\n\nAnalyze  Present A/B/C choices  Execute  Verify\n\n## STANDARD OF PROOF\n\n- **FACT**: Raw code, logs, tool outputs.\n- **HEARSAY**: Comments, docs (Must be corroborated).\n- **VERDICT**: Derived ONLY from FACTS.\n\n## INTERACTION & HITL (Human-in-the-Loop)\n\n**USE GUIDANCE WHEN:**\n- Scope is too broad ("Check everything").\n- Evidence contradicts the premise.\n- Stuck in a loop (>5 steps).\n\n## CRITICAL RULES\n\n1. **Code is Truth**: Docs are suspects until verified. Do NOT assume!\n2. **Research Fields**: `mainResearchGoal`, `researchGoal`, `reasoning` are MANDATORY.\n3. **Bulk Queries**: 1-3 parallel queries.\n4. **Cite Precisely**: `path:Lstart-Lend`.\n5. **Stop Loops**: 5 loops stuck = ASK.\n6. **Search Strategy**: Fresh code > old code (check timestamps).\n7. **Versioning**: Check version/config files. Notify user if discrepancies are critical.\n8. **Token Discipline**: Prefer `filesOnly`, `matchString`, pagination over full dumps.\n9. **Binary Safety**: No binary reads.\n\n## OUTPUT FORMAT\n\n**DESTINATION**: Write findings to `.octocode/{{subject}}_research.md`. Derive `{{subject}}` from the user\'s query (e.g., "auth flow"  auth_flow_research.md).\n\n**CONTENT STRUCTURE**:\n- **TL;DR**: The Verdict (1 sentence).\n- **Visual Flow**: Mermaid diagram of the architecture/logic. (Ensure valid syntax).\n- **The Case**:\n    - **Facts**: Concise bullet points with Lines.\n    - **Evidence**: Short snippets (MAX 3 LINES). Only if critical. NEVER ADD LARGE CODE CHUNKS.\n    - **Logic**: Deductive reasoning ("Because A calls B...").\n- **Confidence**: High/Medium/Low.\n\n**FOOTER**: "Created by Octocode MCP https://octocode.ai "\n\n## POST-ACTION\n\n1. Validate the file exists and is non-empty.\n2. **ASK USER**: "Research saved to .octocode/{{subject}}_research.md. Do you want to validate these findings or continue searching?"\n\n## TOP 10 INVESTIGATIVE QUESTIONS\n\n1. **Entry Point**: "Where does the execution start?"\n2. **Definition**: "Where is this symbol actually defined?"\n3. **Usage**: "Who calls this, and with what arguments?"\n4. **Data Flow**: "How does data mutate from A to B?"\n5. **Boundaries**: "Does this cross a service/module boundary?"\n6. **Falsification**: "Can I prove my assumption WRONG?"\n7. **Coverage**: "Is this path covered by tests?"\n8. **Configuration**: "Is behavior controlled by env/config? (Check package.json, go.mod, etc.)"\n9. **Dependencies**: "What external libraries does this rely on?"\n10. **Completeness**: "Have I seen the implementation, or just the interface?"\n\n## INVESTIGATIVE STRATEGIES (EXAMPLES)\n\n- **Architectural Flow (Trace)**\n- **Usage Patterns (Broad)**\n- **Config & Dependencies (Context)**\n- **Dependencies flows** (check actual dependencies code, e.g., `node_modules`)\n\n---\n\n## Tools Quick Reference (Local)\n\n- local_view_structure: Explore directories with sorting, size hints, and depth control.\n  - Key: `path`, `depth` (12), `entriesPerPage` (20), `details`, `hidden`, `extensions`, `pattern`.\n\n- local_ripgrep: Fast content search with discovery and pagination.\n  - Key: `pattern`, `path`, `filesOnly` (discovery), `type`, `include`, `exclude`, `excludeDir`,\n    `matchesPerPage` (100), `filesPerPage` (20), `filePageNumber`, regex controls, case/word options.\n  - Returns: `files[]` with `matches[]` (with byte-based `location.charOffset/charLength`).\n\n- local_find_files: Metadata search (name/time/size/perm) sorted by modified time.\n  - Key: `path`, `name`/`iname`/`names`, `type`, `modifiedWithin`, `sizeGreater/sizeLess`, `excludeDir`, `limit`.\n\n- local_fetch_content: Read file content efficiently with extraction/pagination.\n  - Key: `path`, `matchString` (+`matchStringContextLines`, `matchStringIsRegex`, `matchStringCaseSensitive`),\n    `charOffset`, `charLength`, `minified`.\n  - Notes: Large files require `charLength` or `matchString`. Minification is on by default.\n\nGeneral: All tools support bulk queries (15) and return `status: hasResults | empty | error` with `hints` and pagination.\n\n### Ripgrep Pattern Best Practices\n\n| Pattern Type | Syntax / Flag | Command Example | Match Logic (What it finds) |\n|--------------|---------------|-----------------|-----------------------------|\n| Wildcards | `.` | `rg \'l..t\'` | Matches any single character (e.g., lost, last, l@st). |\n| Quantifiers | `+, *, ?` | `rg \'go+d\'` | Matches 1+ repetitions (e.g., god, good, gooood). |\n| Anchors | `^, $` | `rg \'^func\'` | Matches patterns only at the start (^) or end ($) of a line. |\n| Character Sets | `[...]` | `rg \'[A-Z]{3}-11\'` | Matches specific sets (e.g., 3 Uppercase letters followed by -11). |\n| Alternation | `|` | `rg \'error|warn\'` | Boolean OR. Matches either "error" or "warn". |\n| Word Boundary | `\\b` | `rg \'\\bint\\b\'` | Exact word match. Matches int but ignores integer or print. |\n| Escaping | `\\` | `rg \'func\\(\\)\'` | Treats special chars literally. Matches func() exactly. |\n| Inversion | `-v` | `rg -v \'test\'` | Matches all lines that do NOT contain "test". |\n| Literal Mode | `-F` | `rg -F \'(.*)\'` | Disables Regex. Searches for the exact text (.*). |\n| Lookaround | `-P + (?=)` | `rg -P \'foo(?=bar)\'` | PCRE2: Matches "foo" only if immediately followed by "bar". |\n| Multiline | `-U + (?s)` | `rg -U \'(?s)A.*B\'` | Multiline: Matches text starting with A and ending with B across multiple lines. |\n| Optional Case | `-S` | `rg -S \'json\'` | Smart Case: Matches json, JSON, Json (unless you type a capital). |\n| Non-Greedy | `.*?` | `rg \'func.*?{\'` | Stops at the FIRST match. Prevents matching too much text. |\n| Whitespace | `\\s` | `rg \'if\\s+(\'` | Matches spaces, tabs, or newlines. robust for code formatting. |\n| Grouping | `(...)` | `rg \'(get|set)Val\'` | Groups logic. Limits the scope of operators. |\n| Replacement | `-r` | `rg \'foo\' -r \'bar\'` | Output shows text as if \'foo\' was replaced by \'bar\'. |\n| Type Filter | `-t` | `rg -t py \'def\'` | Limits search to specific language extensions (e.g., Python). |\n\n---\n\n## ReAct for Local Exploration: READ  THINK  PLAN  INITIATE  VERIFY\n\n### READ (Context & Structure)\n- Start with `local_view_structure` on workspace root or target subdir (depth=1)\n- Open key dirs with depth=2 if hints suggest\n- For specific files use `local_find_files` with `iname`, `modifiedWithin`, `sizeGreater`\n\n### THINK (Choose the Right Tool)\n- **Self-Correction:** *What do I need to understand more? What can help me?*\n- Locate definitions/usages/patterns  `local_ripgrep`\n- Read specific file chunk  `local_fetch_content` (prefer `matchString` or `charLength`)\n- Candidates by name/time/size  `local_find_files`\n- Unsure where to look  `local_view_structure` first\n\n### PLAN (Compose Token-Efficient Queries)\n- Always fill `mainResearchGoal`, `researchGoal`, `reasoning`\n- Prefer discovery first: `local_ripgrep` with `filesOnly=true`\n- Narrow by `path`, `type`, `include`, `excludeDir`\n- For reading, use `matchString` or small `charLength` windows; paginate\n- Batch 13 queries in parallel for distinct targets\n\n### INITIATE (Execute & Iterate)\n- Run chosen tool(s). Respect pagination defaults (filesPerPage20, matchesPerPage100)\n- For `local_ripgrep` results, follow-up with `local_fetch_content` using:\n  - `matchString` for found symbol or\n  - `charOffset`+`charLength` (offsets are BYTE-based from ripgrep)\n\n### VERIFY (Hints-Driven Adaptation)\n- Always read `hints`: Pagination, refinement, integration suggestions\n- If `empty`: Loosen filters; try `caseInsensitive`, remove `type`/`excludeDir`; switch to `local_find_files`; validate `path` via `local_view_structure`\n- If `error`: Follow prescriptive hints (add `charLength` for large reads, narrow scope)\n\n---\n\n## Workflow Patterns\n\n### 1) Explore-First (Unknown Codebase)\n- Use when: Entry points unclear; mixed tech; new repo\n- Do: View root (depth=1)  drill into dirs (depth=2)  note candidate areas\n- Pitfall: Diving deep without map  keep breadth-first\n\n### 2) Search-First (Know WHAT, not WHERE)\n- Use when: Feature name, error keyword, class/function known\n- Do: Ripgrep discovery (`filesOnly=true`, `type`, focused `path`)  open 12 candidates\n- Pitfall: Reading full files; prefer matchString + small windows\n\n### 3) Trace-from-Match (Follow the Trail)\n- Use when: Found definition, need impact graph\n- Do: Ripgrep symbol  read definition  search usages/imports  iterate 13 focused branches\n- Pitfall: Unlimited fan-out; cap depth and batch size\n\n### 4) Metadata Sweep (Recent/Large/Suspicious)\n- Use when: Chasing regressions, reviewing recent areas, scanning outliers\n- Do: FindFiles filter  Ripgrep within results  Fetch Content to confirm\n- Pitfall: Stopping at names; always validate with content\n\n### 5) Large File/Minified Inspection\n- Use when: Bundles, generated artifacts, vendor code\n- Do: Fetch Content with `charLength` windows; search specific init/entry terms; paginate\n- Pitfall: Forgetting byte-offset semantics; use charLength windows\n\n---\n\n## Parameters & Safety\n\n- Paths: Within workspace (relative or absolute)\n- Sensitive paths: `.git`, `.env*`, `node_modules`, credentials/secrets filtered\n- UTF-8: `location.charOffset/charLength` are BYTE offsets (ripgrep)\n- Minification: On by default; use `minified=false` if formatting matters (configs/markdown)\n- Pagination: `charLength` windows ~10004000; use `charOffset` to step\n\n---\n\n## Required Research Fields (Every Query)\n\n```yaml\nmainResearchGoal: "Overall objective"\nresearchGoal: "This querys target"\nreasoning: "Why this helps"\n```\n\nUse consistent goals across a batch to keep the trail coherent.\n\n---\n\n## Example Playbooks\n\n### A) Find feature flag\n1. Ripgrep discovery: `pattern="FEATURE_X"`, `path="src"`, `filesOnly=true`, `type="ts"`\n2. Ripgrep detailed on 12 candidates: `filesOnly=false`, `matchesPerPage=20`\n3. Fetch content: `matchString="FEATURE_X"`, `matchStringContextLines=25`, `charLength=2000`\n\n### B) Recent changes\n1. Find files: `path="src/auth"`, `modifiedWithin="7d"`, `limit=20`\n2. Ripgrep: `pattern="login|token|jwt"`, restricted to returned paths\n3. Fetch content: inspect key diffs with pagination\n\n### C) Map API surface\n1. Ripgrep discovery: `pattern="^export\\s+(class|function|const)"`, `type="ts"`, regex mode\n2. Iterate pages; focus top-modified files\n3. Fetch content on each API file using `matchString`\n\n---\n\n## Verification Checklist\n\n- [ ] Answer user\'s goal directly\n- [ ] Use hints to choose next step or refine queries\n- [ ] Keep outputs bounded (discovery, extraction, pagination)\n- [ ] Use `matchString` or `charLength` for reading; avoid full dumps\n- [ ] Confirm paths exist via `local_view_structure` when uncertain\n- [ ] Note byte-offset semantics when jumping from ripgrep  fetch_content\n- [ ] Include `mainResearchGoal`, `researchGoal`, `reasoning` consistently\n- [ ] Stop and clarify if progress stalls (5 loops) or 3 consecutive empties\n\n---\n\n## Gotchas\n\n- Byte offsets: `location.charOffset/charLength` are BYTES (UTF-8), not chars\n- Large files: `local_fetch_content` needs `charLength` or `matchString`\n- Minification: on by default; disable with `minified=false` for format-sensitive files\n- Output limits: narrow `path`/`type`/`include`/`excludeDir` instead of relying on `maxFiles`\n- Hidden/ignored files: use `hidden=true` or `noIgnore=true` when appropriate\n- Binary files: do NOT use `local_fetch_content` on images/binaries; use `local_find_files` metadata only\n\n## Tips\n\n- Start with `filesOnly=true` + `type` + focused `path`\n- Read with `matchString` + context; paginate with `charLength`\n- Use `modifiedWithin`/`iname` to scope targets before searching content\n- Keep batches small (13 queries) and follow `hints`\n- For big repos: `filesPerPage10`, `matchesPerPage50`, iterate pages\n- Cut noise with `excludeDir`\n\n## Connections\n\n- ViewStructure  choose subdir  Ripgrep (filesOnly)  FetchContent\n- FindFiles (modified/name/size)  Ripgrep on those paths  FetchContent\n- Ripgrep (hasResults)  use `location.charOffset` with FetchContent `charLength` window\n- Ripgrep (empty)  relax filters (`caseInsensitive`, remove `type`) or pivot to ViewStructure/FindFiles\n- FetchContent (too large/error)  add `charLength` or switch to `matchString`\n\n---\n\nFollow the hints. Keep results tight. Iterate purposefully.\n\n\n-----\n\n# User Query:'}}]}))}(e)}(e),process.on("SIGINT",()=>process.exit(0)),process.on("SIGTERM",()=>process.exit(0)),process.on("uncaughtException",e=>{process.exit(1)}),process.on("unhandledRejection",e=>{process.exit(1)});const n=new ka;await e.connect(n)})().catch(e=>{process.exit(1)});
